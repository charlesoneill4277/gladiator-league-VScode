var cl=Object.defineProperty;var ll=(t,s,r)=>s in t?cl(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var Es=(t,s,r)=>ll(t,typeof s!="symbol"?s+"":s,r);import{c as Ft,a as dl,u as _t,j as e,B as ul,P as fs,b as br,d as Zt,e as Ns,f as xr,V as co,R as ml,g as lo,h as pr,i as hl,k as uo,D as fl,C as xl,l as pl,m as gl,A as jl,n as yl,S as vl,O as sn,o as mo,p as tn,q as ho,T as rn,r as nn,s as fo,t as xo,v as po,I as wl,w as go,x as jo,y as Nl,z as yo,E as bl,L as vo,F as wo,G as _l,H as Sl,J as No,K as Cl,M as kl,N as bo,Q as _o,U as $l,W as Tl,X as El,Y as So,Z as Co}from"./ui-vendor-BYlVMPKf.js";import{a as Ot,r as l,u as ko,L as Ts,e as _r,R as is,f as ra,B as Pl,h as Rl,i as Zs}from"./react-vendor-CCvmc-fv.js";import{Q as Fl,a as Dl}from"./query-vendor-B9IAbQn6.js";import{c as Al,_ as On}from"./supabase-vendor-Dve96mWy.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var $o,$a=Ot;$o=$a.createRoot,$a.hydrateRoot;const Ml=1,Ll=1e6;let Cn=0;function Il(){return Cn=(Cn+1)%Number.MAX_SAFE_INTEGER,Cn.toString()}const kn=new Map,Ta=t=>{if(kn.has(t))return;const s=setTimeout(()=>{kn.delete(t),dr({type:"REMOVE_TOAST",toastId:t})},Ll);kn.set(t,s)},Ol=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,Ml)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?Ta(r):t.toasts.forEach(n=>{Ta(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},Ar=[];let Mr={toasts:[]};function dr(t){Mr=Ol(Mr,t),Ar.forEach(s=>{s(Mr)})}function Tt({...t}){const s=Il(),r=a=>dr({type:"UPDATE_TOAST",toast:{...a,id:s}}),n=()=>dr({type:"DISMISS_TOAST",toastId:s});return dr({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:a=>{a||n()}}}),{id:s,dismiss:n,update:r}}function Is(){const[t,s]=l.useState(Mr);return l.useEffect(()=>(Ar.push(s),()=>{const r=Ar.indexOf(s);r>-1&&Ar.splice(r,1)}),[t]),{...t,toast:Tt,dismiss:r=>dr({type:"DISMISS_TOAST",toastId:r})}}var na="ToastProvider",[aa,zl,Bl]=dl("Toast"),[To,Mp]=Ft("Toast",[Bl]),[Ul,an]=To(na),Eo=t=>{const{__scopeToast:s,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:i}=t,[c,d]=l.useState(null),[u,m]=l.useState(0),h=l.useRef(!1),v=l.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${na}\`. Expected non-empty \`string\`.`),e.jsx(aa.Provider,{scope:s,children:e.jsx(Ul,{scope:s,label:r,duration:n,swipeDirection:a,swipeThreshold:o,toastCount:u,viewport:c,onViewportChange:d,onToastAdd:l.useCallback(()=>m(j=>j+1),[]),onToastRemove:l.useCallback(()=>m(j=>j-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:v,children:i})})};Eo.displayName=na;var Po="ToastViewport",Wl=["F8"],zn="toast.viewportPause",Bn="toast.viewportResume",Ro=l.forwardRef((t,s)=>{const{__scopeToast:r,hotkey:n=Wl,label:a="Notifications ({hotkey})",...o}=t,i=an(Po,r),c=zl(r),d=l.useRef(null),u=l.useRef(null),m=l.useRef(null),h=l.useRef(null),v=_t(s,h,i.onViewportChange),j=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=i.toastCount>0;l.useEffect(()=>{const x=N=>{var k;n.length!==0&&n.every(T=>N[T]||N.code===T)&&((k=h.current)==null||k.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),l.useEffect(()=>{const x=d.current,N=h.current;if(b&&x&&N){const p=()=>{if(!i.isClosePausedRef.current){const F=new CustomEvent(zn);N.dispatchEvent(F),i.isClosePausedRef.current=!0}},k=()=>{if(i.isClosePausedRef.current){const F=new CustomEvent(Bn);N.dispatchEvent(F),i.isClosePausedRef.current=!1}},T=F=>{!x.contains(F.relatedTarget)&&k()},P=()=>{x.contains(document.activeElement)||k()};return x.addEventListener("focusin",p),x.addEventListener("focusout",T),x.addEventListener("pointermove",p),x.addEventListener("pointerleave",P),window.addEventListener("blur",p),window.addEventListener("focus",k),()=>{x.removeEventListener("focusin",p),x.removeEventListener("focusout",T),x.removeEventListener("pointermove",p),x.removeEventListener("pointerleave",P),window.removeEventListener("blur",p),window.removeEventListener("focus",k)}}},[b,i.isClosePausedRef]);const g=l.useCallback(({tabbingDirection:x})=>{const p=c().map(k=>{const T=k.ref.current,P=[T,...td(T)];return x==="forwards"?P:P.reverse()});return(x==="forwards"?p.reverse():p).flat()},[c]);return l.useEffect(()=>{const x=h.current;if(x){const N=p=>{var P,F,L;const k=p.altKey||p.ctrlKey||p.metaKey;if(p.key==="Tab"&&!k){const E=document.activeElement,R=p.shiftKey;if(p.target===x&&R){(P=u.current)==null||P.focus();return}const se=g({tabbingDirection:R?"backwards":"forwards"}),K=se.findIndex(B=>B===E);$n(se.slice(K+1))?p.preventDefault():R?(F=u.current)==null||F.focus():(L=m.current)==null||L.focus()}};return x.addEventListener("keydown",N),()=>x.removeEventListener("keydown",N)}},[c,g]),e.jsxs(ul,{ref:d,role:"region","aria-label":a.replace("{hotkey}",j),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&e.jsx(Un,{ref:u,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"forwards"});$n(x)}}),e.jsx(aa.Slot,{scope:r,children:e.jsx(fs.ol,{tabIndex:-1,...o,ref:v})}),b&&e.jsx(Un,{ref:m,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"backwards"});$n(x)}})]})});Ro.displayName=Po;var Fo="ToastFocusProxy",Un=l.forwardRef((t,s)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=t,o=an(Fo,r);return e.jsx(co,{"aria-hidden":!0,tabIndex:0,...a,ref:s,style:{position:"fixed"},onFocus:i=>{var u;const c=i.relatedTarget;!((u=o.viewport)!=null&&u.contains(c))&&n()}})});Un.displayName=Fo;var Sr="Toast",ql="toast.swipeStart",Vl="toast.swipeMove",Hl="toast.swipeCancel",Gl="toast.swipeEnd",Do=l.forwardRef((t,s)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:o,...i}=t,[c,d]=br({prop:n,defaultProp:a??!0,onChange:o,caller:Sr});return e.jsx(Zt,{present:r||c,children:e.jsx(Xl,{open:c,...i,ref:s,onClose:()=>d(!1),onPause:xr(t.onPause),onResume:xr(t.onResume),onSwipeStart:Ns(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ns(t.onSwipeMove,u=>{const{x:m,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ns(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ns(t.onSwipeEnd,u=>{const{x:m,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),d(!1)})})})});Do.displayName=Sr;var[Yl,Jl]=To(Sr,{onClose(){}}),Xl=l.forwardRef((t,s)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:o,onClose:i,onEscapeKeyDown:c,onPause:d,onResume:u,onSwipeStart:m,onSwipeMove:h,onSwipeCancel:v,onSwipeEnd:j,...b}=t,g=an(Sr,r),[x,N]=l.useState(null),p=_t(s,B=>N(B)),k=l.useRef(null),T=l.useRef(null),P=a||g.duration,F=l.useRef(0),L=l.useRef(P),E=l.useRef(0),{onToastAdd:R,onToastRemove:A}=g,U=xr(()=>{var Z;(x==null?void 0:x.contains(document.activeElement))&&((Z=g.viewport)==null||Z.focus()),i()}),se=l.useCallback(B=>{!B||B===1/0||(window.clearTimeout(E.current),F.current=new Date().getTime(),E.current=window.setTimeout(U,B))},[U]);l.useEffect(()=>{const B=g.viewport;if(B){const Z=()=>{se(L.current),u==null||u()},ae=()=>{const O=new Date().getTime()-F.current;L.current=L.current-O,window.clearTimeout(E.current),d==null||d()};return B.addEventListener(zn,ae),B.addEventListener(Bn,Z),()=>{B.removeEventListener(zn,ae),B.removeEventListener(Bn,Z)}}},[g.viewport,P,d,u,se]),l.useEffect(()=>{o&&!g.isClosePausedRef.current&&se(P)},[o,P,g.isClosePausedRef,se]),l.useEffect(()=>(R(),()=>A()),[R,A]);const K=l.useMemo(()=>x?Bo(x):null,[x]);return g.viewport?e.jsxs(e.Fragment,{children:[K&&e.jsx(Kl,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:K}),e.jsx(Yl,{scope:r,onClose:U,children:Ot.createPortal(e.jsx(aa.ItemSlot,{scope:r,children:e.jsx(ml,{asChild:!0,onEscapeKeyDown:Ns(c,()=>{g.isFocusedToastEscapeKeyDownRef.current||U(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(fs.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,...b,ref:p,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ns(t.onKeyDown,B=>{B.key==="Escape"&&(c==null||c(B.nativeEvent),B.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,U()))}),onPointerDown:Ns(t.onPointerDown,B=>{B.button===0&&(k.current={x:B.clientX,y:B.clientY})}),onPointerMove:Ns(t.onPointerMove,B=>{if(!k.current)return;const Z=B.clientX-k.current.x,ae=B.clientY-k.current.y,O=!!T.current,_=["left","right"].includes(g.swipeDirection),S=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,y=_?S(0,Z):0,f=_?0:S(0,ae),w=B.pointerType==="touch"?10:2,C={x:y,y:f},$={originalEvent:B,delta:C};O?(T.current=C,Fr(Vl,h,$,{discrete:!1})):Ea(C,g.swipeDirection,w)?(T.current=C,Fr(ql,m,$,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(Z)>w||Math.abs(ae)>w)&&(k.current=null)}),onPointerUp:Ns(t.onPointerUp,B=>{const Z=T.current,ae=B.target;if(ae.hasPointerCapture(B.pointerId)&&ae.releasePointerCapture(B.pointerId),T.current=null,k.current=null,Z){const O=B.currentTarget,_={originalEvent:B,delta:Z};Ea(Z,g.swipeDirection,g.swipeThreshold)?Fr(Gl,j,_,{discrete:!0}):Fr(Hl,v,_,{discrete:!0}),O.addEventListener("click",S=>S.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Kl=t=>{const{__scopeToast:s,children:r,...n}=t,a=an(Sr,s),[o,i]=l.useState(!1),[c,d]=l.useState(!1);return ed(()=>i(!0)),l.useEffect(()=>{const u=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(u)},[]),c?null:e.jsx(lo,{asChild:!0,children:e.jsx(co,{...n,children:o&&e.jsxs(e.Fragment,{children:[a.label," ",r]})})})},Ql="ToastTitle",Ao=l.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(fs.div,{...n,ref:s})});Ao.displayName=Ql;var Zl="ToastDescription",Mo=l.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(fs.div,{...n,ref:s})});Mo.displayName=Zl;var Lo="ToastAction",Io=l.forwardRef((t,s)=>{const{altText:r,...n}=t;return r.trim()?e.jsx(zo,{altText:r,asChild:!0,children:e.jsx(oa,{...n,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${Lo}\`. Expected non-empty \`string\`.`),null)});Io.displayName=Lo;var Oo="ToastClose",oa=l.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t,a=Jl(Oo,r);return e.jsx(zo,{asChild:!0,children:e.jsx(fs.button,{type:"button",...n,ref:s,onClick:Ns(t.onClick,a.onClose)})})});oa.displayName=Oo;var zo=l.forwardRef((t,s)=>{const{__scopeToast:r,altText:n,...a}=t;return e.jsx(fs.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:s})});function Bo(t){const s=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&s.push(n.textContent),sd(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const i=n.dataset.radixToastAnnounceAlt;i&&s.push(i)}else s.push(...Bo(n))}}),s}function Fr(t,s,r,{discrete:n}){const a=r.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?hl(a,o):a.dispatchEvent(o)}var Ea=(t,s,r=0)=>{const n=Math.abs(t.x),a=Math.abs(t.y),o=n>a;return s==="left"||s==="right"?o&&n>r:!o&&a>r};function ed(t=()=>{}){const s=xr(t);pr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[s])}function sd(t){return t.nodeType===t.ELEMENT_NODE}function td(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function $n(t){const s=document.activeElement;return t.some(r=>r===s?!0:(r.focus(),document.activeElement!==s))}var rd=Eo,Uo=Ro,Wo=Do,qo=Ao,Vo=Mo,Ho=Io,Go=oa;function Yo(t){var s,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(r=Yo(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Jo(){for(var t,s,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(s=Yo(t))&&(n&&(n+=" "),n+=s);return n}const Pa=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Ra=Jo,er=(t,s)=>r=>{var n;if((s==null?void 0:s.variants)==null)return Ra(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=s,i=Object.keys(a).map(u=>{const m=r==null?void 0:r[u],h=o==null?void 0:o[u];if(m===null)return null;const v=Pa(m)||Pa(h);return a[u][v]}),c=r&&Object.entries(r).reduce((u,m)=>{let[h,v]=m;return v===void 0||(u[h]=v),u},{}),d=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((u,m)=>{let{class:h,className:v,...j}=m;return Object.entries(j).every(b=>{let[g,x]=b;return Array.isArray(x)?x.includes({...o,...c}[g]):{...o,...c}[g]===x})?[...u,h,v]:u},[]);return Ra(t,i,d,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ad=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,r,n)=>n?n.toUpperCase():r.toLowerCase()),Fa=t=>{const s=ad(t);return s.charAt(0).toUpperCase()+s.slice(1)},Xo=(...t)=>t.filter((s,r,n)=>!!s&&s.trim()!==""&&n.indexOf(s)===r).join(" ").trim(),od=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var id={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=l.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:i,...c},d)=>l.createElement("svg",{ref:d,...id,width:s,height:s,stroke:t,strokeWidth:n?Number(r)*24/Number(s):r,className:Xo("lucide",a),...!o&&!od(c)&&{"aria-hidden":"true"},...c},[...i.map(([u,m])=>l.createElement(u,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=(t,s)=>{const r=l.forwardRef(({className:n,...a},o)=>l.createElement(cd,{ref:o,iconNode:s,className:Xo(`lucide-${nd(Fa(t))}`,`lucide-${t}`,n),...a}));return r.displayName=Fa(t),r};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Bt=fe("activity",ld);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],ud=fe("arrow-down",dd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],hd=fe("arrow-left-right",md);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Et=fe("arrow-left",fd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Tn=fe("arrow-right",xd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],kt=fe("arrow-up-down",pd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],jd=fe("arrow-up",gd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],vd=fe("bot",yd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],st=fe("calendar",wd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Wn=fe("chart-column",Nd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],sr=fe("check",bd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],on=fe("chevron-down",_d);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ia=fe("chevron-up",Sd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Je=fe("circle-alert",Cd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],lr=fe("circle-check-big",kd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Td=fe("circle-x",$d);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],rt=fe("clock",Ed);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],Rd=fe("cog",Pd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Ht=fe("database",Fd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],qn=fe("dollar-sign",Dd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Ko=fe("download",Ad);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],cn=fe("external-link",Md);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ur=fe("eye-off",Ld);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Qo=fe("eye",Id);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gr=fe("file-text",Od);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Zo=fe("funnel",zd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],ei=fe("grip-vertical",Bd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Wd=fe("history",Ud);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Vd=fe("house",qd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Mt=fe("info",Hd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Yd=fe("link",Gd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ms=fe("loader-circle",Jd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Kd=fe("lock",Xd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Vn=fe("maximize-2",Qd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],eu=fe("menu",Zd);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Hn=fe("minimize-2",su);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=[["path",{d:"M5 12h14",key:"1ays0h"}]],ru=fe("minus",tu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],au=fe("moon",nu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],iu=fe("pause",ou);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],lu=fe("play",cu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zr=fe("plus",du);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ke=fe("refresh-cw",uu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],si=fe("rotate-ccw",mu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ln=fe("save",hu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ca=fe("search",fu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],En=fe("server",xu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Br=fe("settings",pu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],jr=fe("shield",gu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ut=fe("square-pen",ju);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ur=fe("star",yu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],wu=fe("sun",vu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],yr=fe("swords",Nu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Lr=fe("target",bu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Su=fe("test-tube",_u);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],ku=fe("timer",Cu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],Tu=fe("trending-down",$u);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Rt=fe("trending-up",Eu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dn=fe("triangle-alert",Pu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],hs=fe("trophy",Ru);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Yt=fe("user-check",Fu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Au=fe("user",Du);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],bs=fe("users",Mu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Wt=fe("x",Lu);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ou=fe("zap",Iu),la="-",zu=t=>{const s=Uu(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:i=>{const c=i.split(la);return c[0]===""&&c.length!==1&&c.shift(),ti(c,s)||Bu(i)},getConflictingClassGroupIds:(i,c)=>{const d=r[i]||[];return c&&n[i]?[...d,...n[i]]:d}}},ti=(t,s)=>{var i;if(t.length===0)return s.classGroupId;const r=t[0],n=s.nextPart.get(r),a=n?ti(t.slice(1),n):void 0;if(a)return a;if(s.validators.length===0)return;const o=t.join(la);return(i=s.validators.find(({validator:c})=>c(o)))==null?void 0:i.classGroupId},Da=/^\[(.+)\]$/,Bu=t=>{if(Da.test(t)){const s=Da.exec(t)[1],r=s==null?void 0:s.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},Uu=t=>{const{theme:s,prefix:r}=t,n={nextPart:new Map,validators:[]};return qu(Object.entries(t.classGroups),r).forEach(([o,i])=>{Gn(i,n,o,s)}),n},Gn=(t,s,r,n)=>{t.forEach(a=>{if(typeof a=="string"){const o=a===""?s:Aa(s,a);o.classGroupId=r;return}if(typeof a=="function"){if(Wu(a)){Gn(a(n),s,r,n);return}s.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,i])=>{Gn(i,Aa(s,o),r,n)})})},Aa=(t,s)=>{let r=t;return s.split(la).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Wu=t=>t.isThemeGetter,qu=(t,s)=>s?t.map(([r,n])=>{const a=n.map(o=>typeof o=="string"?s+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,c])=>[s+i,c])):o);return[r,a]}):t,Vu=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,n=new Map;const a=(o,i)=>{r.set(o,i),s++,s>t&&(s=0,n=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return a(o,i),i},set(o,i){r.has(o)?r.set(o,i):a(o,i)}}},ri="!",Hu=t=>{const{separator:s,experimentalParseClassName:r}=t,n=s.length===1,a=s[0],o=s.length,i=c=>{const d=[];let u=0,m=0,h;for(let x=0;x<c.length;x++){let N=c[x];if(u===0){if(N===a&&(n||c.slice(x,x+o)===s)){d.push(c.slice(m,x)),m=x+o;continue}if(N==="/"){h=x;continue}}N==="["?u++:N==="]"&&u--}const v=d.length===0?c:c.substring(m),j=v.startsWith(ri),b=j?v.substring(1):v,g=h&&h>m?h-m:void 0;return{modifiers:d,hasImportantModifier:j,baseClassName:b,maybePostfixModifierPosition:g}};return r?c=>r({className:c,parseClassName:i}):i},Gu=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(n=>{n[0]==="["?(s.push(...r.sort(),n),r=[]):r.push(n)}),s.push(...r.sort()),s},Yu=t=>({cache:Vu(t.cacheSize),parseClassName:Hu(t),...zu(t)}),Ju=/\s+/,Xu=(t,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=s,o=[],i=t.trim().split(Ju);let c="";for(let d=i.length-1;d>=0;d-=1){const u=i[d],{modifiers:m,hasImportantModifier:h,baseClassName:v,maybePostfixModifierPosition:j}=r(u);let b=!!j,g=n(b?v.substring(0,j):v);if(!g){if(!b){c=u+(c.length>0?" "+c:c);continue}if(g=n(v),!g){c=u+(c.length>0?" "+c:c);continue}b=!1}const x=Gu(m).join(":"),N=h?x+ri:x,p=N+g;if(o.includes(p))continue;o.push(p);const k=a(g,b);for(let T=0;T<k.length;++T){const P=k[T];o.push(N+P)}c=u+(c.length>0?" "+c:c)}return c};function Ku(){let t=0,s,r,n="";for(;t<arguments.length;)(s=arguments[t++])&&(r=ni(s))&&(n&&(n+=" "),n+=r);return n}const ni=t=>{if(typeof t=="string")return t;let s,r="";for(let n=0;n<t.length;n++)t[n]&&(s=ni(t[n]))&&(r&&(r+=" "),r+=s);return r};function Qu(t,...s){let r,n,a,o=i;function i(d){const u=s.reduce((m,h)=>h(m),t());return r=Yu(u),n=r.cache.get,a=r.cache.set,o=c,c(d)}function c(d){const u=n(d);if(u)return u;const m=Xu(d,r);return a(d,m),m}return function(){return o(Ku.apply(null,arguments))}}const gs=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},ai=/^\[(?:([a-z-]+):)?(.+)\]$/i,Zu=/^\d+\/\d+$/,em=new Set(["px","full","screen"]),sm=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,tm=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rm=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,nm=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,am=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jt=t=>Jt(t)||em.has(t)||Zu.test(t),St=t=>tr(t,"length",hm),Jt=t=>!!t&&!Number.isNaN(Number(t)),Pn=t=>tr(t,"number",Jt),or=t=>!!t&&Number.isInteger(Number(t)),om=t=>t.endsWith("%")&&Jt(t.slice(0,-1)),Fe=t=>ai.test(t),Ct=t=>sm.test(t),im=new Set(["length","size","percentage"]),cm=t=>tr(t,im,oi),lm=t=>tr(t,"position",oi),dm=new Set(["image","url"]),um=t=>tr(t,dm,xm),mm=t=>tr(t,"",fm),ir=()=>!0,tr=(t,s,r)=>{const n=ai.exec(t);return n?n[1]?typeof s=="string"?n[1]===s:s.has(n[1]):r(n[2]):!1},hm=t=>tm.test(t)&&!rm.test(t),oi=()=>!1,fm=t=>nm.test(t),xm=t=>am.test(t),pm=()=>{const t=gs("colors"),s=gs("spacing"),r=gs("blur"),n=gs("brightness"),a=gs("borderColor"),o=gs("borderRadius"),i=gs("borderSpacing"),c=gs("borderWidth"),d=gs("contrast"),u=gs("grayscale"),m=gs("hueRotate"),h=gs("invert"),v=gs("gap"),j=gs("gradientColorStops"),b=gs("gradientColorStopPositions"),g=gs("inset"),x=gs("margin"),N=gs("opacity"),p=gs("padding"),k=gs("saturate"),T=gs("scale"),P=gs("sepia"),F=gs("skew"),L=gs("space"),E=gs("translate"),R=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",Fe,s],se=()=>[Fe,s],K=()=>["",jt,St],B=()=>["auto",Jt,Fe],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ae=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],_=()=>["start","end","center","between","around","evenly","stretch"],S=()=>["","0",Fe],y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],f=()=>[Jt,Fe];return{cacheSize:500,separator:":",theme:{colors:[ir],spacing:[jt,St],blur:["none","",Ct,Fe],brightness:f(),borderColor:[t],borderRadius:["none","","full",Ct,Fe],borderSpacing:se(),borderWidth:K(),contrast:f(),grayscale:S(),hueRotate:f(),invert:S(),gap:se(),gradientColorStops:[t],gradientColorStopPositions:[om,St],inset:U(),margin:U(),opacity:f(),padding:se(),saturate:f(),scale:f(),sepia:S(),skew:f(),space:se(),translate:se()},classGroups:{aspect:[{aspect:["auto","square","video",Fe]}],container:["container"],columns:[{columns:[Ct]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),Fe]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",or,Fe]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Fe]}],grow:[{grow:S()}],shrink:[{shrink:S()}],order:[{order:["first","last","none",or,Fe]}],"grid-cols":[{"grid-cols":[ir]}],"col-start-end":[{col:["auto",{span:["full",or,Fe]},Fe]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[ir]}],"row-start-end":[{row:["auto",{span:[or,Fe]},Fe]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Fe]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",..._()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",..._(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[..._(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Fe,s]}],"min-w":[{"min-w":[Fe,s,"min","max","fit"]}],"max-w":[{"max-w":[Fe,s,"none","full","min","max","fit","prose",{screen:[Ct]},Ct]}],h:[{h:[Fe,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Fe,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Fe,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Fe,s,"auto","min","max","fit"]}],"font-size":[{text:["base",Ct,St]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Pn]}],"font-family":[{font:[ir]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Fe]}],"line-clamp":[{"line-clamp":["none",Jt,Pn]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",jt,Fe]}],"list-image":[{"list-image":["none",Fe]}],"list-style-type":[{list:["none","disc","decimal",Fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",jt,St]}],"underline-offset":[{"underline-offset":["auto",jt,Fe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:se()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),lm]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cm]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},um]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[j]}],"gradient-via":[{via:[j]}],"gradient-to":[{to:[j]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[...ae(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:ae()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...ae()]}],"outline-offset":[{"outline-offset":[jt,Fe]}],"outline-w":[{outline:[jt,St]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[jt,St]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ct,mm]}],"shadow-color":[{shadow:[ir]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Ct,Fe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[h]}],saturate:[{saturate:[k]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[k]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Fe]}],duration:[{duration:f()}],ease:[{ease:["linear","in","out","in-out",Fe]}],delay:[{delay:f()}],animate:[{animate:["none","spin","ping","pulse","bounce",Fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[or,Fe]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Fe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Fe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":se()}],"scroll-mx":[{"scroll-mx":se()}],"scroll-my":[{"scroll-my":se()}],"scroll-ms":[{"scroll-ms":se()}],"scroll-me":[{"scroll-me":se()}],"scroll-mt":[{"scroll-mt":se()}],"scroll-mr":[{"scroll-mr":se()}],"scroll-mb":[{"scroll-mb":se()}],"scroll-ml":[{"scroll-ml":se()}],"scroll-p":[{"scroll-p":se()}],"scroll-px":[{"scroll-px":se()}],"scroll-py":[{"scroll-py":se()}],"scroll-ps":[{"scroll-ps":se()}],"scroll-pe":[{"scroll-pe":se()}],"scroll-pt":[{"scroll-pt":se()}],"scroll-pr":[{"scroll-pr":se()}],"scroll-pb":[{"scroll-pb":se()}],"scroll-pl":[{"scroll-pl":se()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Fe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[jt,St,Pn]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},gm=Qu(pm);function Ne(...t){return gm(Jo(t))}const jm=rd,ii=l.forwardRef(({className:t,...s},r)=>e.jsx(Uo,{ref:r,className:Ne("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));ii.displayName=Uo.displayName;const ym=er("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ci=l.forwardRef(({className:t,variant:s,...r},n)=>e.jsx(Wo,{ref:n,className:Ne(ym({variant:s}),t),...r}));ci.displayName=Wo.displayName;const vm=l.forwardRef(({className:t,...s},r)=>e.jsx(Ho,{ref:r,className:Ne("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));vm.displayName=Ho.displayName;const li=l.forwardRef(({className:t,...s},r)=>e.jsx(Go,{ref:r,className:Ne("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(Wt,{className:"h-4 w-4"})}));li.displayName=Go.displayName;const di=l.forwardRef(({className:t,...s},r)=>e.jsx(qo,{ref:r,className:Ne("text-sm font-semibold [&+div]:text-xs",t),...s}));di.displayName=qo.displayName;const ui=l.forwardRef(({className:t,...s},r)=>e.jsx(Vo,{ref:r,className:Ne("text-sm opacity-90",t),...s}));ui.displayName=Vo.displayName;function wm(){const{toasts:t}=Is();return e.jsxs(jm,{children:[t.map(function({id:s,title:r,description:n,action:a,...o}){return e.jsxs(ci,{...o,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(di,{children:r}),n&&e.jsx(ui,{children:n})]}),a,e.jsx(li,{})]},s)}),e.jsx(ii,{})]})}var[un,Lp]=Ft("Tooltip",[uo]),da=uo(),mi="TooltipProvider",Nm=700,Ma="tooltip.open",[bm,hi]=un(mi),fi=t=>{const{__scopeTooltip:s,delayDuration:r=Nm,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:o}=t,i=l.useRef(!0),c=l.useRef(!1),d=l.useRef(0);return l.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),e.jsx(bm,{scope:s,isOpenDelayedRef:i,delayDuration:r,onOpen:l.useCallback(()=>{window.clearTimeout(d.current),i.current=!1},[]),onClose:l.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:l.useCallback(u=>{c.current=u},[]),disableHoverableContent:a,children:o})};fi.displayName=mi;var xi="Tooltip",[Ip,Cr]=un(xi),Yn="TooltipTrigger",_m=l.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=Cr(Yn,r),o=hi(Yn,r),i=da(r),c=l.useRef(null),d=_t(s,c,a.onTriggerChange),u=l.useRef(!1),m=l.useRef(!1),h=l.useCallback(()=>u.current=!1,[]);return l.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),e.jsx(jl,{asChild:!0,...i,children:e.jsx(fs.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:d,onPointerMove:Ns(t.onPointerMove,v=>{v.pointerType!=="touch"&&!m.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),m.current=!0)}),onPointerLeave:Ns(t.onPointerLeave,()=>{a.onTriggerLeave(),m.current=!1}),onPointerDown:Ns(t.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ns(t.onFocus,()=>{u.current||a.onOpen()}),onBlur:Ns(t.onBlur,a.onClose),onClick:Ns(t.onClick,a.onClose)})})});_m.displayName=Yn;var ua="TooltipPortal",[Sm,Cm]=un(ua,{forceMount:void 0}),pi=t=>{const{__scopeTooltip:s,forceMount:r,children:n,container:a}=t,o=Cr(ua,s);return e.jsx(Sm,{scope:s,forceMount:r,children:e.jsx(Zt,{present:r||o.open,children:e.jsx(lo,{asChild:!0,container:a,children:n})})})};pi.displayName=ua;var Kt="TooltipContent",gi=l.forwardRef((t,s)=>{const r=Cm(Kt,t.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...o}=t,i=Cr(Kt,t.__scopeTooltip);return e.jsx(Zt,{present:n||i.open,children:i.disableHoverableContent?e.jsx(ji,{side:a,...o,ref:s}):e.jsx(km,{side:a,...o,ref:s})})}),km=l.forwardRef((t,s)=>{const r=Cr(Kt,t.__scopeTooltip),n=hi(Kt,t.__scopeTooltip),a=l.useRef(null),o=_t(s,a),[i,c]=l.useState(null),{trigger:d,onClose:u}=r,m=a.current,{onPointerInTransitChange:h}=n,v=l.useCallback(()=>{c(null),h(!1)},[h]),j=l.useCallback((b,g)=>{const x=b.currentTarget,N={x:b.clientX,y:b.clientY},p=Rm(N,x.getBoundingClientRect()),k=Fm(N,p),T=Dm(g.getBoundingClientRect()),P=Mm([...k,...T]);c(P),h(!0)},[h]);return l.useEffect(()=>()=>v(),[v]),l.useEffect(()=>{if(d&&m){const b=x=>j(x,m),g=x=>j(x,d);return d.addEventListener("pointerleave",b),m.addEventListener("pointerleave",g),()=>{d.removeEventListener("pointerleave",b),m.removeEventListener("pointerleave",g)}}},[d,m,j,v]),l.useEffect(()=>{if(i){const b=g=>{const x=g.target,N={x:g.clientX,y:g.clientY},p=(d==null?void 0:d.contains(x))||(m==null?void 0:m.contains(x)),k=!Am(N,i);p?v():k&&(v(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[d,m,i,u,v]),e.jsx(ji,{...t,ref:o})}),[$m,Tm]=un(xi,{isInside:!1}),Em=pl("TooltipContent"),ji=l.forwardRef((t,s)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...c}=t,d=Cr(Kt,r),u=da(r),{onClose:m}=d;return l.useEffect(()=>(document.addEventListener(Ma,m),()=>document.removeEventListener(Ma,m)),[m]),l.useEffect(()=>{if(d.trigger){const h=v=>{const j=v.target;j!=null&&j.contains(d.trigger)&&m()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[d.trigger,m]),e.jsx(fl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:m,children:e.jsxs(xl,{"data-state":d.stateAttribute,...u,...c,ref:s,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Em,{children:n}),e.jsx($m,{scope:r,isInside:!0,children:e.jsx(gl,{id:d.contentId,role:"tooltip",children:a||n})})]})})});gi.displayName=Kt;var yi="TooltipArrow",Pm=l.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=da(r);return Tm(yi,r).isInside?null:e.jsx(yl,{...a,...n,ref:s})});Pm.displayName=yi;function Rm(t,s){const r=Math.abs(s.top-t.y),n=Math.abs(s.bottom-t.y),a=Math.abs(s.right-t.x),o=Math.abs(s.left-t.x);switch(Math.min(r,n,a,o)){case o:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Fm(t,s,r=5){const n=[];switch(s){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function Dm(t){const{top:s,right:r,bottom:n,left:a}=t;return[{x:a,y:s},{x:r,y:s},{x:r,y:n},{x:a,y:n}]}function Am(t,s){const{x:r,y:n}=t;let a=!1;for(let o=0,i=s.length-1;o<s.length;i=o++){const c=s[o],d=s[i],u=c.x,m=c.y,h=d.x,v=d.y;m>n!=v>n&&r<(h-u)*(n-m)/(v-m)+u&&(a=!a)}return a}function Mm(t){const s=t.slice();return s.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Lm(s)}function Lm(t){if(t.length<=1)return t.slice();const s=[];for(let n=0;n<t.length;n++){const a=t[n];for(;s.length>=2;){const o=s[s.length-1],i=s[s.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))s.pop();else break}s.push(a)}s.pop();const r=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;r.length>=2;){const o=r[r.length-1],i=r[r.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))r.pop();else break}r.push(a)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var Im=fi,Om=pi,vi=gi;const zm=Im,Bm=l.forwardRef(({className:t,sideOffset:s=4,...r},n)=>e.jsx(Om,{children:e.jsx(vi,{ref:n,sideOffset:s,className:Ne("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...r})}));Bm.displayName=vi.displayName;const Um="https://pmtssnzfepkcqpziknbz.supabase.co",Wm="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBtdHNzbnpmZXBrY3FwemlrbmJ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwMzQ5MDQsImV4cCI6MjA2NzYxMDkwNH0.KNIFrGxC-XaJFzN0m69NX85bMQR2XgCj0JDxfbPcHS0",Js=Al(Um,Wm),Be={SEASONS:"seasons",CONFERENCES:"conferences",TEAMS:"teams",TEAM_CONFERENCE_JUNCTION:"team_conference_junction",MATCHUPS:"matchups",TEAM_RECORDS:"team_records",PLAYERS:"players",DRAFT_RESULTS:"draft_results",MATCHUP_ADMIN_OVERRIDE:"matchup_admin_override",PLAYOFF_BRACKETS:"playoff_brackets",PLAYOFF_FORMATS:"playoff_formats",TEAM_ROSTERS:"team_rosters",TRANSACTIONS:"transactions"};class H{static async queryTable(s,r={}){try{let n=Js.from(s).select("*",{count:"exact"});r.filters&&r.filters.forEach(c=>{n=this.applyFilter(n,c)}),r.orderBy&&(n=n.order(r.orderBy.column,{ascending:r.orderBy.ascending})),r.limit&&(n=n.limit(r.limit)),r.offset&&(n=n.range(r.offset,r.offset+(r.limit||100)-1));const{data:a,error:o,count:i}=await n;return o?(console.error(`Error querying ${s}:`,o),{data:[],error:o}):{data:a||[],count:i||0}}catch(n){return console.error(`Error in queryTable for ${s}:`,n),{data:[],error:n}}}static async createRecord(s,r){try{const{data:n,error:a}=await Js.from(s).insert(r).select().single();return a?(console.error(`Error creating record in ${s}:`,a),{data:null,error:a}):{data:n,error:null}}catch(n){return console.error(`Error in createRecord for ${s}:`,n),{data:null,error:n}}}static async updateRecord(s,r,n){try{const{data:a,error:o}=await Js.from(s).update(n).eq("id",r).select().single();return o?(console.error(`Error updating record in ${s}:`,o),{data:null,error:o}):{data:a,error:null}}catch(a){return console.error(`Error in updateRecord for ${s}:`,a),{data:null,error:a}}}static async deleteRecord(s,r){try{const{error:n}=await Js.from(s).delete().eq("id",r);return n?(console.error(`Error deleting record from ${s}:`,n),{error:n}):{error:null}}catch(n){return console.error(`Error in deleteRecord for ${s}:`,n),{error:n}}}static applyFilter(s,r){const{column:n,operator:a,value:o}=r;switch(a){case"eq":return s.eq(n,o);case"neq":return s.neq(n,o);case"gt":return s.gt(n,o);case"gte":return s.gte(n,o);case"lt":return s.lt(n,o);case"lte":return s.lte(n,o);case"like":return s.like(n,o);case"ilike":return s.ilike(n,o);case"in":return s.in(n,o);case"is":return s.is(n,o);case"not":return s.not(n,o);default:return s}}static async getSeasons(s){return this.queryTable(Be.SEASONS,s)}static async createSeason(s){return this.createRecord(Be.SEASONS,s)}static async updateSeason(s,r){return this.updateRecord(Be.SEASONS,s,r)}static async updateSeasonScoringSettings(s){try{const{data:r}=await this.getConferences({filters:[{column:"season_id",operator:"eq",value:s}]});if(!r||r.length===0)return{success:!1,error:"No conferences found for this season"};const n=r[0],o=await(await On(async()=>{const{SleeperApiService:c}=await Promise.resolve().then(()=>Jn);return{SleeperApiService:c}},void 0)).SleeperApiService.fetchLeague(n.league_id);if(!o.scoring_settings)return{success:!1,error:"No scoring settings found in league data"};const{error:i}=await this.updateSeason(s,{scoring_settings:o.scoring_settings});return i?{success:!1,error:i}:{success:!0}}catch(r){return console.error("Error updating season scoring settings:",r),{success:!1,error:r}}}static async updateSeasonRosterPositions(s){try{const{data:r}=await this.getConferences({filters:[{column:"season_id",operator:"eq",value:s}]});if(!r||r.length===0)return{success:!1,error:"No conferences found for this season"};const n=r[0],o=await(await On(async()=>{const{SleeperApiService:c}=await Promise.resolve().then(()=>Jn);return{SleeperApiService:c}},void 0)).SleeperApiService.fetchLeague(n.league_id);if(!o.roster_positions)return{success:!1,error:"No roster positions found in league data"};const{error:i}=await this.updateSeason(s,{roster_positions:o.roster_positions});return i?{success:!1,error:i}:{success:!0}}catch(r){return console.error("Error updating season roster positions:",r),{success:!1,error:r}}}static async getConferences(s){return this.queryTable(Be.CONFERENCES,s)}static async createConference(s){return this.createRecord(Be.CONFERENCES,s)}static async updateConference(s,r){return this.updateRecord(Be.CONFERENCES,s,r)}static async getTeams(s){return this.queryTable(Be.TEAMS,s)}static async createTeam(s){return this.createRecord(Be.TEAMS,s)}static async updateTeam(s,r){return this.updateRecord(Be.TEAMS,s,r)}static async getTeamConferenceJunctions(s){return this.queryTable(Be.TEAM_CONFERENCE_JUNCTION,s)}static async createTeamConferenceJunction(s){return this.createRecord(Be.TEAM_CONFERENCE_JUNCTION,s)}static async getMatchups(s){return this.queryTable(Be.MATCHUPS,s)}static async createMatchup(s){return this.createRecord(Be.MATCHUPS,s)}static async updateMatchup(s,r){return this.updateRecord(Be.MATCHUPS,s,r)}static async getTeamRecords(s){return this.queryTable(Be.TEAM_RECORDS,s)}static async createTeamRecord(s){return this.createRecord(Be.TEAM_RECORDS,s)}static async updateTeamRecord(s,r){return this.updateRecord(Be.TEAM_RECORDS,s,r)}static async deleteTeamRecord(s){return this.deleteRecord(Be.TEAM_RECORDS,s)}static async getPlayers(s){try{let r=Js.from(Be.PLAYERS).select("*",{count:"exact"});s!=null&&s.filters&&s.filters.forEach(i=>{r=this.applyFilter(r,i)}),s!=null&&s.orderBy&&(r=r.order(s.orderBy.column,{ascending:s.orderBy.ascending})),r=r.range(0,14999);const{data:n,error:a,count:o}=await r;return a?(console.error(`Error querying ${Be.PLAYERS}:`,a),{data:[],error:a}):{data:n||[],count:o||0}}catch(r){return console.error("Error in getPlayers:",r),{data:[],error:r}}}static async createPlayer(s){return this.createRecord(Be.PLAYERS,s)}static async updatePlayer(s,r){return this.updateRecord(Be.PLAYERS,s,r)}static async getAllPlayersForMapping(s){try{const r=[];let a=0,o=!0;for(;o;){let i=Js.from(Be.PLAYERS).select("*");s&&s.forEach(u=>{i=this.applyFilter(i,u)}),i=i.order("sleeper_id",{ascending:!0}),i=i.range(a,a+1e3-1);const{data:c,error:d}=await i;if(d)throw console.error("Error in getAllPlayersForMapping:",d),d;c&&c.length>0?(r.push(...c),c.length<1e3?o=!1:a+=1e3):o=!1}return r}catch(r){throw console.error("Error in getAllPlayersForMapping:",r),r}}static async getPlayersAsSleeperFormat(){try{const s=await this.getPlayers();if(!s.data)throw new Error("Failed to fetch players from database");const r={};return s.data.forEach(n=>{var a;if(n.sleeper_id){const o=n.player_name.split(" "),i=o[0]||"",c=o.slice(1).join(" ")||"";r[n.sleeper_id]={player_id:n.sleeper_id,first_name:i,last_name:c,position:n.position||"",team:n.nfl_team||"",jersey_number:n.number||0,status:n.playing_status||"",injury_status:n.injury_status||"",age:n.age||0,height:((a=n.height)==null?void 0:a.toString())||"",weight:n.weight||0,years_exp:0,college:n.college||""}}}),r}catch(s){throw console.error("Error fetching players from database:",s),s}}static async getDraftResults(s){return this.queryTable(Be.DRAFT_RESULTS,s)}static async createDraftResult(s){return this.createRecord(Be.DRAFT_RESULTS,s)}static async getMatchupAdminOverrides(s){return this.queryTable(Be.MATCHUP_ADMIN_OVERRIDE,s)}static async createMatchupAdminOverride(s){return this.createRecord(Be.MATCHUP_ADMIN_OVERRIDE,s)}static async updateMatchupAdminOverride(s,r){return this.updateRecord(Be.MATCHUP_ADMIN_OVERRIDE,s,r)}static async deleteMatchupAdminOverride(s){return this.deleteRecord(Be.MATCHUP_ADMIN_OVERRIDE,s)}static async getTransactions(s){return this.queryTable(Be.TRANSACTIONS,s)}static async createTransaction(s){return this.createRecord(Be.TRANSACTIONS,s)}static async getPlayoffBrackets(s){return this.queryTable(Be.PLAYOFF_BRACKETS,s)}static async createPlayoffBracket(s){return this.createRecord(Be.PLAYOFF_BRACKETS,s)}static async updatePlayoffBracket(s,r){return this.updateRecord(Be.PLAYOFF_BRACKETS,s,r)}static async getPlayoffFormats(s){return this.queryTable(Be.PLAYOFF_FORMATS,s)}static async createPlayoffFormat(s){return this.createRecord(Be.PLAYOFF_FORMATS,s)}static async updatePlayoffFormat(s,r){return this.updateRecord(Be.PLAYOFF_FORMATS,s,r)}}const wi=l.createContext(void 0),qm=({children:t})=>{const[s,r]=l.useState(2025),[n,a]=l.useState(null),[o,i]=l.useState("light"),[c,d]=l.useState([]),[u,m]=l.useState(!0),[h,v]=l.useState(null),j=async()=>{try{m(!0),v(null);const N=await H.getSeasons({orderBy:{column:"season_year",ascending:!1}});if(N.error)throw new Error(N.error);const p=N.data||[],k=await H.getConferences();if(k.error)throw new Error(k.error);const T=k.data||[],P=p.map(L=>{const E=T.filter(R=>R.season_id===L.id).map(R=>({id:R.conference_name.toLowerCase().replace(/[^a-z0-9]/g,""),name:R.conference_name,leagueId:R.league_id,status:R.status,seasonId:R.season_id,dbConferenceId:R.id}));return{year:parseInt(L.season_year),conferences:E,seasonId:L.id,isCurrent:L.is_current}});d(P);const F=P.find(L=>L.isCurrent);F&&s!==F.year&&r(F.year)}catch(N){console.error("Failed to load season data:",N),v(N instanceof Error?N.message:"Failed to load season data"),d([{year:2024,conferences:[{id:"mars",name:"The Legions of Mars",leagueId:"1072580179844857856"},{id:"jupiter",name:"The Guardians of Jupiter",leagueId:"1072593839715667968"},{id:"vulcan",name:"Vulcan's Oathsworn",leagueId:"1072593416955015168"}]},{year:2025,conferences:[{id:"mars",name:"The Legions of Mars",leagueId:"1204854057169072128"},{id:"jupiter",name:"The Guardians of Jupiter",leagueId:"1204857692007440384"},{id:"vulcan",name:"Vulcan's Oathsworn",leagueId:"1204857608989577216"}]}])}finally{m(!1)}};l.useEffect(()=>{j()},[]);const b=()=>{i(N=>N==="light"?"dark":"light")},g=c.find(N=>N.year===s)||c.find(N=>N.isCurrent)||c[0]||{year:s,conferences:[]},x={selectedSeason:s,selectedConference:n,theme:o,setSelectedSeason:r,setSelectedConference:a,toggleTheme:b,seasonConfigs:c,currentSeasonConfig:g,loading:u,error:h,refreshSeasonData:j};return e.jsx(wi.Provider,{value:x,children:e.jsx("div",{className:o,children:t})})},Hs=()=>{const t=l.useContext(wi);if(!t)throw new Error("useApp must be used within an AppProvider");return t},Vm=er("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),X=l.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...a},o)=>{const i=n?vl:"button";return e.jsx(i,{className:Ne(Vm({variant:s,size:r,className:t})),ref:o,...a})});X.displayName="Button";const Hm=fo,Gm=xo,Ym=mo,Ni=l.forwardRef(({className:t,...s},r)=>e.jsx(sn,{className:Ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));Ni.displayName=sn.displayName;const Jm=er("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),bi=l.forwardRef(({side:t="right",className:s,children:r,...n},a)=>e.jsxs(Ym,{children:[e.jsx(Ni,{}),e.jsxs(tn,{ref:a,className:Ne(Jm({side:t}),s),...n,children:[e.jsxs(ho,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Wt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),r]})]}));bi.displayName=tn.displayName;const Xm=l.forwardRef(({className:t,...s},r)=>e.jsx(rn,{ref:r,className:Ne("text-lg font-semibold text-foreground",t),...s}));Xm.displayName=rn.displayName;const Km=l.forwardRef(({className:t,...s},r)=>e.jsx(nn,{ref:r,className:Ne("text-sm text-muted-foreground",t),...s}));Km.displayName=nn.displayName;const cs=Cl,ls=kl,ns=l.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(po,{ref:n,className:Ne("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[s,e.jsx(wl,{asChild:!0,children:e.jsx(on,{className:"h-4 w-4 opacity-50"})})]}));ns.displayName=po.displayName;const _i=l.forwardRef(({className:t,...s},r)=>e.jsx(go,{ref:r,className:Ne("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ia,{className:"h-4 w-4"})}));_i.displayName=go.displayName;const Si=l.forwardRef(({className:t,...s},r)=>e.jsx(jo,{ref:r,className:Ne("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(on,{className:"h-4 w-4"})}));Si.displayName=jo.displayName;const as=l.forwardRef(({className:t,children:s,position:r="popper",...n},a)=>e.jsx(Nl,{children:e.jsxs(yo,{ref:a,className:Ne("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[e.jsx(_i,{}),e.jsx(bl,{className:Ne("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Si,{})]})}));as.displayName=yo.displayName;const Qm=l.forwardRef(({className:t,...s},r)=>e.jsx(vo,{ref:r,className:Ne("px-2 py-1.5 text-sm font-semibold",t),...s}));Qm.displayName=vo.displayName;const Re=l.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(wo,{ref:n,className:Ne("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(_l,{children:e.jsx(sr,{className:"h-4 w-4"})})}),e.jsx(Sl,{children:s})]}));Re.displayName=wo.displayName;const Zm=l.forwardRef(({className:t,...s},r)=>e.jsx(No,{ref:r,className:Ne("-mx-1 my-1 h-px bg-muted",t),...s}));Zm.displayName=No.displayName;const eh=er("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ee({className:t,variant:s,...r}){return e.jsx("div",{className:Ne(eh({variant:s}),t),...r})}const sh=()=>{var b;const[t,s]=l.useState(!1),r=ko(),{selectedSeason:n,selectedConference:a,theme:o,setSelectedSeason:i,setSelectedConference:c,toggleTheme:d,seasonConfigs:u,currentSeasonConfig:m}=Hs(),h=[{path:"/",label:"Home",icon:Vd},{path:"/standings",label:"Standings",icon:hs},{path:"/matchups",label:"Matchups",icon:yr},{path:"/teams",label:"Teams",icon:bs},{path:"/players",label:"Players",icon:Yt},{path:"/draft",label:"Draft Results",icon:jr},{path:"/rules",label:"League Rules",icon:gr},{path:"/admin",label:"Admin",icon:Rd}],v=g=>g==="/"?r.pathname==="/":r.pathname.startsWith(g),j=({isMobile:g=!1})=>e.jsx(e.Fragment,{children:h.map(x=>{const N=x.icon,p=v(x.path);return e.jsxs(Ts,{to:x.path,onClick:()=>g&&s(!1),className:`flex items-center space-x-2 px-3 py-2 rounded-md ${x.path==="/admin"?"text-xs opacity-75":"text-sm"} font-medium transition-colors ${p?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,children:[e.jsx(N,{className:x.path==="/admin"?"h-3 w-3":"h-4 w-4"}),e.jsx("span",{className:x.path==="/admin"?"text-xs":"",children:x.label})]},x.path)})});return e.jsxs("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[e.jsxs("div",{className:"container flex h-16 items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(Ts,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:"/gladiator-logo.png",alt:"Gladiator League Logo",className:"h-8 w-8"}),e.jsx("div",{className:"hidden sm:block",children:e.jsx("h1",{className:"text-xl font-bold",children:"Gladiator League"})})]})}),e.jsx("nav",{className:"hidden lg:flex items-center space-x-1",children:e.jsx(j,{})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(cs,{value:n.toString(),onValueChange:g=>i(parseInt(g)),children:[e.jsx(ns,{className:"w-20",children:e.jsx(ls,{})}),e.jsx(as,{children:u.map(g=>e.jsx(Re,{value:g.year.toString(),children:g.year},g.year))})]}),e.jsxs(cs,{value:a||"all",onValueChange:g=>c(g==="all"?null:g),children:[e.jsx(ns,{className:"w-40",children:e.jsx(ls,{})}),e.jsxs(as,{children:[e.jsx(Re,{value:"all",children:"All Conferences"}),m.conferences.map(g=>e.jsx(Re,{value:g.id,children:g.name},g.id))]})]}),e.jsx(X,{variant:"ghost",size:"icon",onClick:d,children:o==="light"?e.jsx(au,{className:"h-4 w-4"}):e.jsx(wu,{className:"h-4 w-4"})}),e.jsxs(Hm,{open:t,onOpenChange:s,children:[e.jsx(Gm,{asChild:!0,className:"lg:hidden",children:e.jsx(X,{variant:"ghost",size:"icon",children:e.jsx(eu,{className:"h-4 w-4"})})}),e.jsx(bi,{side:"right",className:"w-64",children:e.jsxs("div",{className:"flex flex-col space-y-4 mt-8",children:[e.jsxs("div",{className:"flex items-center space-x-2 pb-4 border-b",children:[e.jsx(jr,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"Gladiator League"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fantasy Football"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Navigation"}),e.jsx(j,{isMobile:!0})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Season"}),e.jsxs(cs,{value:n.toString(),onValueChange:g=>i(parseInt(g)),children:[e.jsx(ns,{children:e.jsx(ls,{})}),e.jsx(as,{children:u.map(g=>e.jsx(Re,{value:g.year.toString(),children:g.year},g.year))})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Conference"}),e.jsxs(cs,{value:a||"all",onValueChange:g=>c(g==="all"?null:g),children:[e.jsx(ns,{children:e.jsx(ls,{})}),e.jsxs(as,{children:[e.jsx(Re,{value:"all",children:"All Conferences"}),m.conferences.map(g=>e.jsx(Re,{value:g.id,children:g.name},g.id))]})]})]})]})]})})]})]})]}),(a||n!==2025)&&e.jsx("div",{className:"border-t bg-accent/50",children:e.jsx("div",{className:"container py-2",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Active filters:"}),n!==2025&&e.jsxs(ee,{variant:"secondary",children:[n," Season"]}),a&&e.jsx(ee,{variant:"secondary",children:(b=m.conferences.find(g=>g.id===a))==null?void 0:b.name})]})})})]})},V=l.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ne("rounded-xl border bg-card text-card-foreground shadow",t),...s}));V.displayName="Card";const oe=l.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ne("flex flex-col space-y-1.5 p-6",t),...s}));oe.displayName="CardHeader";const ce=l.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ne("font-semibold leading-none tracking-tight",t),...s}));ce.displayName="CardTitle";const Ce=l.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ne("text-sm text-muted-foreground",t),...s}));Ce.displayName="CardDescription";const Y=l.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ne("p-6 pt-0",t),...s}));Y.displayName="CardContent";const th=l.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ne("flex items-center p-6 pt-0",t),...s}));th.displayName="CardFooter";const rh=er("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),qe=l.forwardRef(({className:t,variant:s,...r},n)=>e.jsx("div",{ref:n,role:"alert",className:Ne(rh({variant:s}),t),...r}));qe.displayName="Alert";const yt=l.forwardRef(({className:t,...s},r)=>e.jsx("h5",{ref:r,className:Ne("mb-1 font-medium leading-none tracking-tight",t),...s}));yt.displayName="AlertTitle";const Ve=l.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ne("text-sm [&_p]:leading-relaxed",t),...s}));Ve.displayName="AlertDescription";var nh="Separator",La="horizontal",ah=["horizontal","vertical"],Ci=l.forwardRef((t,s)=>{const{decorative:r,orientation:n=La,...a}=t,o=oh(n)?n:La,c=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return e.jsx(fs.div,{"data-orientation":o,...c,...a,ref:s})});Ci.displayName=nh;function oh(t){return ah.includes(t)}var ki=Ci;const ma=l.forwardRef(({className:t,orientation:s="horizontal",decorative:r=!0,...n},a)=>e.jsx(ki,{ref:a,decorative:r,orientation:s,className:Ne("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));ma.displayName=ki.displayName;class Wr{static async getStandingsData(s,r){try{console.log(`StandingsService: Fetching standings for season ${s}, conference ${r||"all"}`);const n=[{column:"season_id",operator:"eq",value:s}];r&&n.push({column:"conference_id",operator:"eq",value:r});const a=await H.getTeamRecords({filters:n});if(a.error)throw new Error(`Failed to fetch team records: ${a.error}`);const o=a.data||[];if(console.log(`StandingsService: Found ${o.length} team records`),o.length===0)return console.log("StandingsService: No team records found, returning empty array"),[];const i=[...new Set(o.map(x=>x.team_id))],c=[...new Set(o.map(x=>x.conference_id))],[d,u]=await Promise.all([H.getTeams({filters:[{column:"id",operator:"in",value:i}]}),H.getConferences({filters:[{column:"id",operator:"in",value:c}]})]);if(d.error)throw new Error(`Failed to fetch teams: ${d.error}`);if(u.error)throw new Error(`Failed to fetch conferences: ${u.error}`);const m=d.data||[],h=u.data||[],v=new Map;m.forEach(x=>v.set(x.id,x));const j=new Map;h.forEach(x=>j.set(x.id,x));const b=o.map(x=>{const N=v.get(x.team_id),p=j.get(x.conference_id),k=x.wins||0,T=x.losses||0,P=0,F=k+T+P,L=F>0?k/F:0;return{team_id:x.team_id,team_name:(N==null?void 0:N.team_name)||`Team ${x.team_id}`,owner_name:(N==null?void 0:N.owner_name)||"Unknown Owner",conference_name:(p==null?void 0:p.conference_name)||"Unknown Conference",team_logourl:(N==null?void 0:N.team_logourl)||"",wins:k,losses:T,ties:P,points_for:x.points_for||0,points_against:x.points_against||0,point_diff:x.point_diff||(x.points_for||0)-(x.points_against||0),win_percentage:L,conference_rank:0,overall_rank:0,playoff_eligible:!1,is_conference_champion:!1}});b.sort((x,N)=>N.win_percentage!==x.win_percentage?N.win_percentage-x.win_percentage:N.points_for-x.points_for),b.forEach((x,N)=>{x.overall_rank=N+1});const g=new Map;return b.forEach(x=>{g.has(x.conference_name)||g.set(x.conference_name,[]),g.get(x.conference_name).push(x)}),g.forEach((x,N)=>{x.sort((p,k)=>k.win_percentage!==p.win_percentage?k.win_percentage-p.win_percentage:k.points_for-p.points_for),x.forEach((p,k)=>{p.conference_rank=k+1,p.playoff_eligible=k<2,p.is_conference_champion=k===0})}),console.log(`StandingsService: Returning ${b.length} standings records`),b}catch(n){throw console.error("StandingsService: Error fetching standings data:",n),n}}static async getConferenceStandings(s,r){return this.getStandingsData(s,r)}static async getLeagueStandings(s){return this.getStandingsData(s)}static formatRecord(s,r,n=0){return n>0?`${s}-${r}-${n}`:`${s}-${r}`}static formatPoints(s){return s.toFixed(1)}}const ih=t=>{const{seasonYear:s,conferenceId:r,limit:n,autoRefresh:a=!1,refreshInterval:o=3e4}=t,[i,c]=l.useState([]),[d,u]=l.useState(!0),[m,h]=l.useState(null),v=async()=>{if(!s){u(!1);return}try{u(!0),h(null);let j=await Wr.getStandingsData(s,r);n&&n>0&&(j=j.slice(0,n)),c(j)}catch(j){const b=j instanceof Error?j.message:"An error occurred while fetching standings";h(b),console.error("Error fetching standings:",j)}finally{u(!1)}};return l.useEffect(()=>{s?v():u(!1)},[s,r,n]),l.useEffect(()=>{if(a&&o>0&&s){const j=setInterval(v,o);return()=>clearInterval(j)}},[a,o,s,r,n]),{standings:i,loading:d,error:m,refetch:v}},ch=["QB","RB","RB","WR","WR","WR","TE","FLEX","SUPER_FLEX","K","DEF"];class ke{static async fetchLeagueRosters(s){try{console.log(`Fetching rosters for league: ${s}`),typeof window<"u"&&(window.__apiCallCount=(window.__apiCallCount||0)+1);const r=await fetch(`${this.baseUrl}/league/${s}/rosters`);if(!r.ok)throw new Error(`Failed to fetch rosters: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched ${n.length} rosters for league ${s}`),n}catch(r){throw console.error("Error fetching league rosters:",r),r}}static async fetchAllPlayers(){try{console.log("Fetching all NFL players data...");const s=await fetch(`${this.baseUrl}/players/nfl`);if(!s.ok)throw new Error(`Failed to fetch players: ${s.status} ${s.statusText}`);const r=await s.json();return console.log(`Fetched ${Object.keys(r).length} players from Sleeper API`),r}catch(s){throw console.error("Error fetching players:",s),s}}static organizeRoster(s,r){const n=(s.starters||[]).map((o,i)=>{const c=r[o],d=ch[i]||"BENCH";return{playerId:o,position:(c==null?void 0:c.position)||"UNK",slotPosition:d}}),a=(s.players||[]).filter(o=>!(s.starters||[]).includes(o)&&!(s.reserve||[]).includes(o));return{starters:n,bench:a,ir:s.reserve||[]}}static async getTeamRosterData(s,r){try{const[n,a]=await Promise.all([this.fetchLeagueRosters(s),(async()=>{const c=await H.getAllPlayersForMapping([{column:"playing_status",operator:"eq",value:"Active"},{column:"position",operator:"in",value:["QB","RB","WR","TE","K","DEF"]}]),d={};return c.forEach(u=>{var m;if(u.sleeper_id){const h=u.player_name.split(" "),v=h[0]||"",j=h.slice(1).join(" ")||"";d[u.sleeper_id]={player_id:u.sleeper_id,first_name:v,last_name:j,position:u.position||"",team:u.nfl_team||"",jersey_number:u.number||0,status:u.playing_status||"",injury_status:u.injury_status||"",age:u.age||0,height:((m=u.height)==null?void 0:m.toString())||"",weight:u.weight||0,years_exp:0,college:u.college||""}}}),d})()]),o=n.find(c=>c.roster_id===r);if(!o)throw new Error(`Roster with ID ${r} not found in league ${s}`);const i=this.organizeRoster(o,a);return{roster:o,organizedRoster:i,allPlayers:a}}catch(n){throw console.error("Error getting team roster data:",n),n}}static getPlayerName(s){return s&&`${s.first_name||""} ${s.last_name||""}`.trim()||"Unknown Player"}static calculatePointsPerGame(s,r){return r===0?0:s/r}static formatPoints(s,r=0){return s+r/100}static async fetchMatchups(s,r){try{console.log(` Fetching matchups for league: ${s}, week: ${r}`),typeof window<"u"&&(window.__apiCallCount=(window.__apiCallCount||0)+1);const n=await fetch(`${this.baseUrl}/league/${s}/matchups/${r}`);if(!n.ok)throw new Error(`Failed to fetch matchups: ${n.status} ${n.statusText}`);const a=await n.json();if(console.log(` Fetched ${a.length} matchups for league ${s}, week ${r}`),a.length>0){const o={totalMatchups:a.length,matchupsWithPoints:a.filter(i=>i.points>0).length,matchupsWithZeroPoints:a.filter(i=>i.points===0).length,matchupsWithNullPoints:a.filter(i=>i.points===null||i.points===void 0).length,pointsRange:{min:Math.min(...a.map(i=>i.points||0)),max:Math.max(...a.map(i=>i.points||0)),average:a.reduce((i,c)=>i+(c.points||0),0)/a.length},playersPointsAvailability:{withPlayersPoints:a.filter(i=>i.players_points&&Object.keys(i.players_points).length>0).length,withStartersPoints:a.filter(i=>i.starters_points&&i.starters_points.length>0).length},sampleMatchup:{rosterId:a[0].roster_id,points:a[0].points,playersPointsKeys:Object.keys(a[0].players_points||{}).length,startersPointsLength:(a[0].starters_points||[]).length,matchupId:a[0].matchup_id}};console.log(` Points analysis for league ${s}, week ${r}:`,o),o.matchupsWithPoints===0&&(console.warn(` No matchups with points > 0 found for league ${s}, week ${r}`),console.warn(" This could indicate: week hasn't started, games in progress, or API delay")),o.playersPointsAvailability.withPlayersPoints===0&&console.warn(` No player-level points data available for league ${s}, week ${r}`)}else console.warn(` No matchup data returned for league ${s}, week ${r}`);return a}catch(n){throw console.error(` Error fetching matchups for league ${s}, week ${r}:`,n),n}}static async fetchLeague(s){try{console.log(`Fetching league info: ${s}`);const r=await fetch(`${this.baseUrl}/league/${s}`);if(!r.ok)throw new Error(`Failed to fetch league: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched league info for ${s}`),n}catch(r){throw console.error("Error fetching league:",r),r}}static async fetchLeagueUsers(s){try{console.log(`Fetching users for league: ${s}`),typeof window<"u"&&(window.__apiCallCount=(window.__apiCallCount||0)+1);const r=await fetch(`${this.baseUrl}/league/${s}/users`);if(!r.ok)throw new Error(`Failed to fetch users: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched ${n.length} users for league ${s}`),n}catch(r){throw console.error("Error fetching league users:",r),r}}static organizeMatchups(s,r,n){const a=new Map;return s.forEach(o=>{a.has(o.matchup_id)||a.set(o.matchup_id,[]),a.get(o.matchup_id).push(o)}),Array.from(a.entries()).filter(([o,i])=>i.length===2).map(([o,i])=>({matchup_id:o,teams:i.map(c=>{const d=r.find(m=>m.roster_id===c.roster_id),u=d?n.find(m=>m.user_id===d.owner_id):null;return{roster_id:c.roster_id,points:c.points,owner:u,roster:d}})}))}static async getCurrentNFLWeek(){try{console.log("Fetching current NFL week from Sleeper API...");const s=await fetch(`${this.baseUrl}/state/nfl`);if(!s.ok)throw new Error(`Failed to fetch NFL state: ${s.status} ${s.statusText}`);const r=await s.json();return console.log("NFL State from Sleeper:",r),console.log(`Current NFL week: ${r.week}`),r.week||1}catch(s){return console.error("Error fetching current NFL week:",s),console.warn("Falling back to default week 1"),1}}static async getNFLState(){try{console.log("Fetching NFL state from Sleeper API...");const s=await fetch(`${this.baseUrl}/state/nfl`);if(!s.ok)throw new Error(`Failed to fetch NFL state: ${s.status} ${s.statusText}`);const r=await s.json();return console.log("NFL State from Sleeper:",r),r}catch(s){throw console.error("Error fetching NFL state:",s),s}}static async fetchPlayerSeasonStats(s,r){try{if(console.log(` Fetching season stats for player: ${s}, season: ${r}`),!s||!r)return console.error(" Invalid parameters: playerId or season is missing"),[];typeof window<"u"&&(window.__apiCallCount=(window.__apiCallCount||0)+1);const n=await fetch(`${this.baseUrlNoVersion}/stats/nfl/player/${s}?season_type=regular&season=${r}&grouping=week`);if(!n.ok)return console.warn(`Failed to fetch player stats: ${n.status} ${n.statusText}`),[];const a=await n.json();if(console.log(` Raw API response for player ${s}, season ${r}:`,a),console.log(` Response type: ${typeof a}, is array: ${Array.isArray(a)}`),!a)return console.log(` No data returned for player ${s}, season ${r}`),[];if(a&&typeof a=="object"&&!Array.isArray(a)){const o=Object.keys(a);if(console.log(` Found ${o.length} weeks in response:`,o),o.length===0)return console.log(` Empty object returned for player ${s}, season ${r}`),[];const i=Object.keys(a).map(c=>{const d=a[c],u=parseInt(c);if(!d||typeof d!="object")return console.warn(` Skipping invalid week data for week ${c}:`,d),null;const m=d.stats||{};return!m||typeof m!="object"?(console.warn(` No stats found for week ${c}:`,d),null):{week:u,season:d.season||r,team:d.team||null,opponent:d.opponent||null,date:d.date||null,...m}}).filter(c=>c!==null);return console.log(` Parsed ${i.length} weekly stats for player ${s}, season ${r}`),i.length>0?console.log("Sample stat object:",i[0]):console.log(" No valid weekly stats found"),i}return Array.isArray(a)?(console.log(`Fetched ${a.length} weekly stats (array format) for player ${s}, season ${r}`),a):typeof a=="string"?(console.warn(` API returned string response for player ${s}, season ${r}:`,a),[]):(console.warn(` Unexpected data format for player ${s}, season ${r}:`,a),console.warn(`Data type: ${typeof a}, keys:`,Object.keys(a||{})),[])}catch(n){return console.error(`Error fetching player season stats for ${s}, season ${r}:`,n),[]}}static async fetchUser(s){try{console.log(`Fetching user: ${s}`);const r=await fetch(`${this.baseUrl}/user/${s}`);if(!r.ok)throw new Error(`Failed to fetch user: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched user info for ${s}`),n}catch(r){throw console.error("Error fetching user:",r),r}}static async fetchUserLeagues(s,r){try{console.log(`Fetching leagues for user: ${s}, season: ${r}`);const n=await fetch(`${this.baseUrl}/user/${s}/leagues/nfl/${r}`);if(!n.ok)throw new Error(`Failed to fetch user leagues: ${n.status} ${n.statusText}`);const a=await n.json();return console.log(`Fetched ${a.length} leagues for user ${s}`),a}catch(n){throw console.error("Error fetching user leagues:",n),n}}static async fetchUserDrafts(s,r){try{console.log(`Fetching drafts for user: ${s}, season: ${r}`);const n=await fetch(`${this.baseUrl}/user/${s}/drafts/nfl/${r}`);if(!n.ok)throw new Error(`Failed to fetch user drafts: ${n.status} ${n.statusText}`);const a=await n.json();return console.log(`Fetched ${a.length} drafts for user ${s}`),a}catch(n){throw console.error("Error fetching user drafts:",n),n}}static async fetchLeagueDrafts(s){try{console.log(`Fetching drafts for league: ${s}`);const r=await fetch(`${this.baseUrl}/league/${s}/drafts`);if(!r.ok)throw new Error(`Failed to fetch league drafts: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched ${n.length} drafts for league ${s}`),n}catch(r){throw console.error("Error fetching league drafts:",r),r}}static async fetchDraft(s){try{console.log(`Fetching draft: ${s}`);const r=await fetch(`${this.baseUrl}/draft/${s}`);if(!r.ok)throw new Error(`Failed to fetch draft: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched draft info for ${s}`),n}catch(r){throw console.error("Error fetching draft:",r),r}}static async fetchDraftPicks(s){try{console.log(`Fetching draft picks: ${s}`);const r=await fetch(`${this.baseUrl}/draft/${s}/picks`);if(!r.ok)throw new Error(`Failed to fetch draft picks: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched ${n.length} picks for draft ${s}`),n}catch(r){throw console.error("Error fetching draft picks:",r),r}}static async fetchDraftTradedPicks(s){try{console.log(`Fetching traded picks for draft: ${s}`);const r=await fetch(`${this.baseUrl}/draft/${s}/traded_picks`);if(!r.ok)throw new Error(`Failed to fetch traded picks: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched ${n.length} traded picks for draft ${s}`),n}catch(r){throw console.error("Error fetching traded picks:",r),r}}static async fetchWinnersBracket(s){try{console.log(`Fetching winners bracket for league: ${s}`);const r=await fetch(`${this.baseUrl}/league/${s}/winners_bracket`);if(!r.ok)throw new Error(`Failed to fetch winners bracket: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched winners bracket for league ${s}`),n}catch(r){throw console.error("Error fetching winners bracket:",r),r}}static async fetchLosersBracket(s){try{console.log(`Fetching losers bracket for league: ${s}`);const r=await fetch(`${this.baseUrl}/league/${s}/losers_bracket`);if(!r.ok)throw new Error(`Failed to fetch losers bracket: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched losers bracket for league ${s}`),n}catch(r){throw console.error("Error fetching losers bracket:",r),r}}static async fetchTransactions(s,r){try{console.log(`Fetching transactions for league: ${s}, round: ${r}`);const n=await fetch(`${this.baseUrl}/league/${s}/transactions/${r}`);if(!n.ok)throw new Error(`Failed to fetch transactions: ${n.status} ${n.statusText}`);const a=await n.json();return console.log(`Fetched ${a.length} transactions for league ${s}, round ${r}`),a}catch(n){throw console.error("Error fetching transactions:",n),n}}static async fetchLeagueTradedPicks(s){try{console.log(`Fetching traded picks for league: ${s}`);const r=await fetch(`${this.baseUrl}/league/${s}/traded_picks`);if(!r.ok)throw new Error(`Failed to fetch league traded picks: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched ${n.length} traded picks for league ${s}`),n}catch(r){throw console.error("Error fetching league traded picks:",r),r}}static async fetchTrendingPlayers(s="nfl",r="add",n=24,a=25){try{console.log(`Fetching trending ${r} players for ${s}`);const o=await fetch(`${this.baseUrl}/players/${s}/trending/${r}?lookback_hours=${n}&limit=${a}`);if(!o.ok)throw new Error(`Failed to fetch trending players: ${o.status} ${o.statusText}`);const i=await o.json();return console.log(`Fetched ${i.length} trending ${r} players`),i}catch(o){throw console.error("Error fetching trending players:",o),o}}static async fetchPlayerInfo(s){try{console.log(`Fetching player info: ${s}`);const r=await fetch(`${this.baseUrlNoVersion}/players/nfl/${s}`);if(!r.ok)throw new Error(`Failed to fetch player info: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched player info for ${s}`),n}catch(r){throw console.error("Error fetching player info:",r),r}}static async fetchPlayerResearch(s,r,n){try{console.log(`Fetching player research for ${s} season ${r}, week ${n}`);const a=await fetch(`${this.baseUrlNoVersion}/players/nfl/research/${s}/${r}/${n}`);if(!a.ok)throw new Error(`Failed to fetch player research: ${a.status} ${a.statusText}`);const o=await a.json();return console.log(`Fetched player research data for ${s} season ${r}, week ${n}`),o}catch(a){throw console.error("Error fetching player research:",a),a}}static async fetchPlayerSeasonStatsComplete(s,r,n){try{console.log(`Fetching complete season stats for player: ${s}, ${r} ${n}`);const a=await fetch(`${this.baseUrlNoVersion}/stats/nfl/player/${s}?season_type=${r}&season=${n}`);if(!a.ok)throw new Error(`Failed to fetch player season stats: ${a.status} ${a.statusText}`);const o=await a.json();return console.log(`Fetched complete season stats for player ${s}`),Array.isArray(o)?o:[o]}catch(a){throw console.error("Error fetching player season stats:",a),a}}static async fetchPlayerProjections(s,r,n="regular",a=["FLEX","QB","RB","TE","WR"]){try{console.log(`Fetching player projections for ${n} season ${s}, week ${r}`);const o=a.map(d=>`position[]=${d}`).join("&"),i=await fetch(`${this.baseUrlNoVersion}/projections/nfl/${s}/${r}?season_type=${n}&${o}`);if(!i.ok)throw new Error(`Failed to fetch player projections: ${i.status} ${i.statusText}`);const c=await i.json();return console.log(`Fetched projections for ${c.length} players`),c}catch(o){throw console.error("Error fetching player projections:",o),o}}static async fetchNFLSchedule(s,r){try{console.log(`Fetching NFL schedule for ${s} ${r}`);const n=await fetch(`${this.baseUrlNoVersion}/schedule/nfl/${s}/${r}`);if(!n.ok)throw new Error(`Failed to fetch NFL schedule: ${n.status} ${n.statusText}`);const a=await n.json();return console.log(`Fetched ${a.length} games from NFL schedule`),a}catch(n){throw console.error("Error fetching NFL schedule:",n),n}}static async fetchTeamDepthChart(s){try{console.log(`Fetching depth chart for team: ${s}`);const r=await fetch(`${this.baseUrlNoVersion}/players/nfl/${s}/depth_chart`);if(!r.ok)throw new Error(`Failed to fetch team depth chart: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched depth chart for team ${s}`),n}catch(r){throw console.error("Error fetching team depth chart:",r),r}}static getAvatarUrl(s,r=!1){return s?`${r?"https://sleepercdn.com/avatars/thumbs/":"https://sleepercdn.com/avatars/"}${s}`:""}}Es(ke,"baseUrl","https://api.sleeper.app/v1"),Es(ke,"baseUrlNoVersion","https://api.sleeper.app");const Jn=Object.freeze(Object.defineProperty({__proto__:null,SleeperApiService:ke,default:ke},Symbol.toStringTag,{value:"Module"})),lh=t=>{switch(t){case"The Legion of Mars":case"The Legions of Mars":return{primary:"#800020",secondary:"#CD7F32",accent:"#FF7F7F",bgClass:"bg-[#800020]",textClass:"text-white",borderClass:"border-[#CD7F32]"};case"Vulcan's Oathsworn":return{primary:"#708090",secondary:"#CD7F32",accent:"#CF1020",bgClass:"bg-[#708090]",textClass:"text-white",borderClass:"border-[#CD7F32]"};case"The Guardians of Jupiter":return{primary:"#483D8B",secondary:"#9370DB",accent:"#DAA520",bgClass:"bg-[#483D8B]",textClass:"text-white",borderClass:"border-[#DAA520]"};default:return{primary:"#6B7280",secondary:"#9CA3AF",accent:"#3B82F6",bgClass:"bg-gray-500",textClass:"text-white",borderClass:"border-gray-300"}}},$i=t=>{const s=lh(t);return`${s.bgClass} ${s.textClass} ${s.borderClass} border-2 font-semibold`},zt=({conferenceName:t,variant:s="secondary",size:r="md",className:n=""})=>{const a={sm:"text-xs px-1.5 py-0.5",md:"text-xs px-2 py-1",lg:"text-sm px-2.5 py-1.5"},o=$i(t);return e.jsx(ee,{variant:s,className:`${a[r]} ${o} ${n}`,children:t})},dh=()=>{var O,_;const[t,s]=l.useState(1),[r,n]=l.useState([]),[a,o]=l.useState([]),[i,c]=l.useState(!0),[d,u]=l.useState(!0),[m,h]=l.useState(null),[v,j]=l.useState(null),{selectedSeason:b,selectedConference:g,currentSeasonConfig:x,seasonConfigs:N,loading:p,error:k,refreshSeasonData:T}=Hs();x==null||x.year;const{standings:P,loading:F,error:L,refetch:E}=ih({seasonYear:x!=null&&x.seasonId?typeof x.seasonId=="string"?parseInt(x.seasonId):x.seasonId:void 0,conferenceId:g==="all"||g===null||(O=x==null?void 0:x.conferences.find(S=>S.id===g))==null?void 0:O.dbConferenceId,limit:12,autoRefresh:!0,refreshInterval:6e4});l.useEffect(()=>{(async()=>{try{const y=await ke.getCurrentNFLWeek();s(y===0?1:y)}catch(y){console.error("Error loading current week:",y),s(1)}})()},[]);const R=async(S,y)=>{const f=[];for(const w of S){if(!w.dbConferenceId)continue;const C=await H.getMatchups({filters:[{column:"conference_id",operator:"eq",value:w.dbConferenceId},{column:"week",operator:"eq",value:y}]});if(C.error||!C.data)continue;const $=await H.getTeams({});if($.error||!$.data)continue;const W=new Map;$.data.forEach(q=>{W.set(q.id,q.team_name)});for(const q of C.data){const re=W.get(q.team1_id)||"Unknown Team",M=W.get(q.team2_id)||"Unknown Team";f.push({matchup_id:q.id,conference:{conference_name:w.name,league_id:w.leagueId},teams:[{team:{team_name:re},points:q.team1_score||0},{team:{team_name:M},points:q.team2_score||0}],status:q.team1_score&&q.team2_score?"completed":"upcoming"})}}return f},A=async()=>{if(!(!x||t===0)){c(!0),h(null);try{const S=g==="all"||g===null?x.conferences:x.conferences.filter(f=>f.id===g),y=await R(S,t);n(y)}catch(S){console.error("Error loading matchups:",S),h(S instanceof Error?S.message:"Failed to load matchups")}finally{c(!1)}}};l.useEffect(()=>{A()},[t,g,x]);const U=async()=>{if(x){u(!0),j(null);try{const S=g==="all"||g===null?x.conferences:x.conferences.filter(re=>re.id===g),y=S.filter(re=>re.dbConferenceId).map(re=>re.dbConferenceId);if(y.length===0){o([]);return}const f=await H.getTransactions({filters:[{column:"conference_id",operator:"in",value:y}],orderBy:{column:"created_at",ascending:!1},limit:10});if(f.error||!f.data)throw new Error(f.error||"Failed to fetch transactions");const w=await H.getTeams({}),C=await H.getTeamConferenceJunctions({filters:[{column:"conference_id",operator:"in",value:y}]}),$=await H.getAllPlayersForMapping([{column:"playing_status",operator:"eq",value:"Active"},{column:"position",operator:"in",value:["QB","RB","WR","TE"]}]),W=new Map;$.forEach(re=>{re.sleeper_id&&W.set(String(re.sleeper_id),re.player_name)});const q=await Promise.all(f.data.map(async re=>{let M={};try{M=typeof re.data=="string"?JSON.parse(re.data):re.data||{}}catch(D){console.warn("Failed to parse transaction data:",D)}const le=S.find(D=>D.dbConferenceId===re.conference_id),ne=D=>{var xe;const de=(xe=C.data)==null?void 0:xe.find(J=>J.roster_id.toString()===D.toString()&&J.conference_id===re.conference_id);if(de&&w.data){const J=w.data.find(he=>he.id===de.team_id);return(J==null?void 0:J.team_name)||"Unknown Team"}return"Unknown Team"};let ie="Unknown Team";M.roster_ids&&M.roster_ids.length>0&&(ie=ne(M.roster_ids[0]));const ue=[],je=[],be=D=>{const de=String(D);return W.get(de)||`Player ${de}`};if(M.adds)for(const[D,de]of Object.entries(M.adds)){const xe=be(D),J=ne(de),he=M.settings&&M.settings.waiver_bid&&M.settings.waiver_bid[D];ue.push({name:xe,team:J,bidAmount:he||null})}if(M.drops)for(const[D,de]of Object.entries(M.drops)){const xe=be(D),J=ne(de);je.push({name:xe,team:J})}let Se="";const Ie=M.type||re.type,ds=new Set;switch(M.roster_ids&&M.roster_ids.forEach(D=>{const de=ne(D);de!=="Unknown Team"&&ds.add(de)}),Ie){case"trade":if(ue.length>0||je.length>0){const D=[];ue.forEach(de=>D.push(`${de.name} to ${de.team}`)),je.forEach(de=>D.push(`${de.name} from ${de.team}`)),ds.size>1?Se=`Trade between ${Array.from(ds).join(" and ")}: ${D.join(", ")}`:Se=`${ie} trade: ${D.join(", ")}`}else M.draft_picks&&M.draft_picks.length>0?Se=`Trade involving ${M.draft_picks.map(de=>`${de.season} Round ${de.round} pick`).join(", ")}`:Se=`Trade between ${Array.from(ds).join(" and ")}`;break;case"waiver":ue.length>0&&je.length>0?Se=`${ie} claimed ${ue.map(D=>D.name).join(", ")} from waivers, dropped ${je.map(D=>D.name).join(", ")}`:ue.length>0?Se=`${ie} claimed ${ue.map(D=>D.name).join(", ")} from waivers`:je.length>0?Se=`${ie} dropped ${je.map(D=>D.name).join(", ")} to waivers`:Se=`${ie} made a waiver claim`;break;case"free_agent":ue.length>0&&je.length>0?Se=`${ie} added ${ue.map(D=>D.name).join(", ")}, dropped ${je.map(D=>D.name).join(", ")}`:ue.length>0?Se=`${ie} added ${ue.map(D=>D.name).join(", ")} from free agency`:je.length>0?Se=`${ie} dropped ${je.map(D=>D.name).join(", ")}`:Se=`${ie} made a free agent transaction`;break;default:Se=`${ie} completed a ${Ie||"transaction"}`}const Q=M.type==="trade"?"trade":M.type==="waiver"?"waiver":M.type==="free_agent"?"free_agent":"commissioner";return{id:re.id.toString(),type:Q,date:new Date(re.created_at||new Date),details:Se,teams:[ie],players:{added:ue.map(D=>({id:"",name:D.name,team:D.team,bidAmount:D.bidAmount})),dropped:je.map(D=>({id:"",name:D.name,team:D.team}))},week:M.leg||0,status:"completed",rosterIds:M.roster_ids||[],draftPicks:M.draft_picks||[],waiverBudget:M.waiver_budget||[]}}));o(q)}catch(S){console.error("Error loading transactions:",S),j(S instanceof Error?S.message:"Failed to load transactions")}finally{u(!1)}}};if(l.useEffect(()=>{U()},[g,x]),p)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ms,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading Gladiator League"}),e.jsx("p",{className:"text-muted-foreground",children:"Connecting to Supabase database..."})]})});if(k)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs(V,{className:"w-full max-w-md",children:[e.jsx(oe,{children:e.jsxs(ce,{className:"flex items-center gap-2 text-destructive",children:[e.jsx(Je,{className:"h-5 w-5"}),"Connection Error"]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsx(qe,{children:e.jsx(Ve,{children:k})}),e.jsxs(X,{onClick:T,className:"w-full",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Retry Connection"]})]})]})});if(!N||N.length===0)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ms,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading Season Configuration"}),e.jsx("p",{className:"text-muted-foreground",children:"Setting up league data..."})]})});if(!x||!x.conferences||x.conferences.length===0)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ms,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading Conferences"}),e.jsx("p",{className:"text-muted-foreground",children:"Setting up conference data..."})]})});const se=S=>{switch(S){case"live":return e.jsx(ee,{className:"bg-green-500 hover:bg-green-600 text-xs",children:"Live"});case"completed":return e.jsx(ee,{variant:"secondary",className:"text-xs",children:"Final"});case"upcoming":return e.jsx(ee,{variant:"outline",className:"text-xs",children:"Upcoming"});default:return e.jsx(ee,{variant:"secondary",className:"text-xs",children:S})}},K=S=>{switch(S){case"trade":return"";case"waiver":return"";case"free_agent":return"";case"commissioner":return"";default:return""}},B=()=>F?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin text-primary"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading standings..."})]}):L?e.jsxs("div",{className:"text-center p-8",children:[e.jsxs("p",{className:"text-sm text-red-600 mb-4",children:["Error loading standings: ",L]}),e.jsx(X,{variant:"outline",size:"sm",onClick:E,children:"Try Again"})]}):!P||P.length===0?e.jsx("div",{className:"text-center p-8",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No standings data available"})}):e.jsx("div",{className:"space-y-3",children:P.map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-accent/50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 w-8",children:[S.overall_rank===1&&e.jsx(Ur,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("span",{className:"font-semibold",children:["#",S.overall_rank]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:S.team_name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[S.owner_name,"  ",S.conference_name]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold",children:Wr.formatRecord(S.wins,S.losses,S.ties)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Wr.formatPoints(S.points_for)," pts"]})]})]},S.team_id))}),Z=()=>i?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin text-primary"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading matchups..."})]}):m?e.jsxs("div",{className:"text-center p-8",children:[e.jsxs("p",{className:"text-sm text-red-600 mb-4",children:["Error loading matchups: ",m]}),e.jsx(X,{variant:"outline",size:"sm",onClick:A,children:"Try Again"})]}):!r||r.length===0?e.jsx("div",{className:"text-center p-8",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["No matchups found for week ",t]})}):e.jsx("div",{className:"space-y-2",children:r.map(S=>{var C,$;const y=S.teams[0],f=S.teams[1],w=S.status==="completed"?(y==null?void 0:y.points)>((f==null?void 0:f.points)||0)?y:f:null;return e.jsx(Ts,{to:`/matchups/${S.matchup_id}`,children:e.jsxs("div",{className:"p-2 border rounded-lg hover:bg-accent/50 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx(zt,{conferenceName:S.conference.conference_name,variant:"outline",size:"sm"}),se(S.status)]}),e.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center text-sm",children:[e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-medium truncate text-xs",children:((C=y==null?void 0:y.team)==null?void 0:C.team_name)||"Team 1"})}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:`text-sm font-bold ${w===y?"text-green-600":""}`,children:S.status==="upcoming"?"--":y==null?void 0:y.points.toFixed(1)})}),e.jsx("div",{className:"text-center text-muted-foreground font-semibold text-xs",children:"VS"}),e.jsx("div",{className:"text-left",children:e.jsx("p",{className:`text-sm font-bold ${w===f?"text-green-600":""}`,children:S.status==="upcoming"?"--":f==null?void 0:f.points.toFixed(1)})}),e.jsx("div",{className:"text-left",children:e.jsx("p",{className:"font-medium truncate text-xs",children:(($=f==null?void 0:f.team)==null?void 0:$.team_name)||"Team 2"})})]})]})},S.matchup_id)})}),ae=()=>d?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin text-primary"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading transactions..."})]}):v?e.jsxs("div",{className:"text-center p-8",children:[e.jsxs("p",{className:"text-sm text-red-600 mb-4",children:["Error loading transactions: ",v]}),e.jsx(X,{variant:"outline",size:"sm",onClick:U,children:"Try Again"})]}):!a||a.length===0?e.jsx("div",{className:"text-center p-8",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent transactions found"})}):e.jsx("div",{className:"space-y-3",children:a.map(S=>e.jsxs("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"text-base",children:K(S.type)}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{variant:"outline",className:"text-xs",children:S.type.replace("_"," ").toUpperCase()}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Week ",S.week]})]})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:S.date.toLocaleDateString()})]}),e.jsx("div",{className:"space-y-2",children:(S.players.added.length>0||S.players.dropped.length>0)&&e.jsxs("div",{className:"space-y-2",children:[S.players.added.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsxs(ee,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:["+",S.players.added.length]}),e.jsx("span",{className:"text-xs font-medium text-green-700",children:"Added"})]}),e.jsx("div",{className:"ml-1 space-y-1",children:S.players.added.map((y,f)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:y.name}),e.jsxs("div",{className:"flex items-center space-x-1",children:[y.bidAmount&&e.jsxs(ee,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:["$",y.bidAmount]}),e.jsx(ee,{variant:"outline",className:"text-xs",children:y.team})]})]},f))})]}),S.players.dropped.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsxs(ee,{variant:"secondary",className:"text-xs bg-red-100 text-red-800",children:["-",S.players.dropped.length]}),e.jsx("span",{className:"text-xs font-medium text-red-700",children:"Dropped"})]}),e.jsx("div",{className:"ml-1 space-y-1",children:S.players.dropped.map((y,f)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:y.name}),e.jsx(ee,{variant:"outline",className:"text-xs",children:y.team})]},f))})]})]})})]},S.id))});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-lg bg-gradient-to-br from-primary/10 via-primary/5 to-background border",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/10 [mask-image:linear-gradient(0deg,white,rgba(255,255,255,0.6))]"}),e.jsx("div",{className:"relative px-6 py-12 sm:px-12",children:e.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:"/gladiator-logo.png",alt:"Gladiator League Logo",className:"h-12 w-12"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Gladiator League"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Fantasy Football Championship"})]})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl",children:"Welcome to the ultimate fantasy football experience. Track your teams across three competitive conferences in real-time."}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsxs(ee,{variant:"outline",children:[b," Season"]}),e.jsxs(ee,{variant:"outline",children:["Week ",t]}),g!=="all"&&x&&e.jsx(ee,{variant:"secondary",children:(_=x.conferences.find(S=>S.id===g))==null?void 0:_.name})]})]})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"lg:w-2/3 flex flex-col gap-6",children:[e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yr,{className:"h-5 w-5 text-primary"}),e.jsxs(ce,{children:["Week ",t]})]}),e.jsx(Ts,{to:"/matchups",children:e.jsx(X,{variant:"ghost",size:"sm",children:e.jsx(Tn,{className:"h-4 w-4"})})})]}),e.jsx(Ce,{children:"Current matchups"})]}),e.jsx(Y,{children:Z()})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bt,{className:"h-5 w-5 text-primary"}),e.jsx(ce,{children:"Recent Transactions"})]}),e.jsx(Ts,{to:"/transactions",children:e.jsxs(X,{variant:"ghost",size:"sm",children:["View All ",e.jsx(Tn,{className:"ml-1 h-4 w-4"})]})})]}),e.jsx(Ce,{children:"Latest roster moves across all conferences"})]}),e.jsx(Y,{children:ae()})]})]}),e.jsxs("div",{className:"lg:w-1/3 flex flex-col gap-6",children:[e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"h-5 w-5 text-primary"}),e.jsx(ce,{children:"League Standings"})]}),e.jsx(Ts,{to:"/standings",children:e.jsxs(X,{variant:"ghost",size:"sm",children:["View All ",e.jsx(Tn,{className:"ml-1 h-4 w-4"})]})})]}),e.jsx(Ce,{children:"Top 12 teams across all conferences"})]}),e.jsx(Y,{children:B()})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(bs,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Quick Actions"})]}),e.jsx(Ce,{children:"Navigate to key sections of the league"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(Ts,{to:"/standings",children:e.jsxs(X,{variant:"outline",className:"w-full h-16 flex flex-col space-y-1",children:[e.jsx(hs,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Standings"})]})}),e.jsx(Ts,{to:"/matchups",children:e.jsxs(X,{variant:"outline",className:"w-full h-16 flex flex-col space-y-1",children:[e.jsx(yr,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Matchups"})]})}),e.jsx(Ts,{to:"/teams",children:e.jsxs(X,{variant:"outline",className:"w-full h-16 flex flex-col space-y-1",children:[e.jsx(bs,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Teams"})]})}),e.jsx(Ts,{to:"/players",children:e.jsxs(X,{variant:"outline",className:"w-full h-16 flex flex-col space-y-1",children:[e.jsx(Bt,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Players"})]})}),e.jsx(Ts,{to:"/draft",children:e.jsxs(X,{variant:"outline",className:"w-full h-16 flex flex-col space-y-1",children:[e.jsx(jr,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Draft Results"})]})}),e.jsx(Ts,{to:"/rules",children:e.jsxs(X,{variant:"outline",className:"w-full h-16 flex flex-col space-y-1",children:[e.jsx(st,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"League Rules"})]})})]}),(x==null?void 0:x.conferences)&&x.conferences.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(ma,{className:"my-3"}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Yd,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-sm font-semibold",children:"League Pages"})]}),e.jsx("div",{className:"flex flex-col space-y-2",children:x.conferences.map(S=>e.jsx("a",{href:`https://sleeper.com/leagues/${S.leagueId}/league`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(X,{variant:"outline",className:"w-full justify-start",children:S.name})},S.leagueId))})]})]})]})]})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"League Information"}),e.jsx(Ce,{children:"Current season details and conference structure"})]}),e.jsx(Y,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:x==null?void 0:x.conferences.map(S=>e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:S.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"12 teams  14-week season"}),e.jsx(ee,{variant:"outline",className:"text-xs",children:S.status})]},S.id))})})]})]})},As=l.forwardRef(({className:t,...s},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:Ne("w-full caption-bottom text-sm",t),...s})}));As.displayName="Table";const Ms=l.forwardRef(({className:t,...s},r)=>e.jsx("thead",{ref:r,className:Ne("[&_tr]:border-b",t),...s}));Ms.displayName="TableHeader";const Ls=l.forwardRef(({className:t,...s},r)=>e.jsx("tbody",{ref:r,className:Ne("[&_tr:last-child]:border-0",t),...s}));Ls.displayName="TableBody";const uh=l.forwardRef(({className:t,...s},r)=>e.jsx("tfoot",{ref:r,className:Ne("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));uh.displayName="TableFooter";const $e=l.forwardRef(({className:t,...s},r)=>e.jsx("tr",{ref:r,className:Ne("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));$e.displayName="TableRow";const G=l.forwardRef(({className:t,...s},r)=>e.jsx("th",{ref:r,className:Ne("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s}));G.displayName="TableHead";const z=l.forwardRef(({className:t,...s},r)=>e.jsx("td",{ref:r,className:Ne("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s}));z.displayName="TableCell";const mh=l.forwardRef(({className:t,...s},r)=>e.jsx("caption",{ref:r,className:Ne("mt-4 text-sm text-muted-foreground",t),...s}));mh.displayName="TableCaption";const hh=()=>{var Z,ae;const{selectedSeason:t,selectedConference:s,currentSeasonConfig:r,loading:n}=Hs(),a=_r(),[o,i]=l.useState(null),[c,d]=l.useState([]),[u,m]=l.useState(!0),[h,v]=l.useState(null),[j,b]=l.useState(!1),[g,x]=l.useState(null),[N,p]=l.useState(!1),{toast:k}=Is(),T={id:0,season_id:0,playoff_teams:10,week_14_byes:6,reseed:!0,playoff_start_week:14,championship_week:17,is_active:!0},P=async O=>{try{console.log(`Fetching playoff format for season ID ${O}...`);const _=await H.getPlayoffFormats({filters:[{column:"season_id",operator:"eq",value:O}],limit:1});if(_.error)return console.error("Error fetching playoff format:",_.error),null;const S=_.data||[];if(S.length>0)return console.log("Playoff format found:",S[0]),x(S[0]),S[0];{console.log("No playoff format found for season",O);const y={...T,season_id:O};return x(y),y}}catch(_){return console.error("Error in fetchPlayoffFormat:",_),x(T),T}},F=async()=>{try{m(!0),v(null),console.log(`Fetching standings data for season ${t} and conference ${s||"all"}...`);const O=r;if(!O)throw new Error(`No season configuration found for year ${t}`);const _=O.seasonId,S=typeof _=="string"?parseInt(_):_;console.log(`Using season ID ${S} for year ${t}`),await P(S),await A(S);let y;if(s){const w=O.conferences.find(C=>C.id===s);if(w){const C=await H.getConferences({filters:[{column:"season_id",operator:"eq",value:S},{column:"conference_name",operator:"eq",value:w.name}]});if(C.error)throw new Error(`Conferences fetch error: ${C.error}`);const $=C.data||[];$.length>0&&(y=typeof $[0].id=="string"?parseInt($[0].id):$[0].id)}}const f=await Wr.getStandingsData(S,y);console.log("Standings data from service:",f),d(f)}catch(O){console.error("Error fetching standings:",O),v(O instanceof Error?O.message:"Failed to fetch standings data"),k({title:"Error",description:"Failed to fetch standings data. Please try again.",variant:"destructive"})}finally{m(!1)}},L=async()=>{try{b(!0);const O=r;if(!O)throw new Error(`No season configuration found for year ${t}`);const _=O.seasonId,S=typeof _=="string"?parseInt(_):_;await P(S),await A(S);let y;if(s){const f=O.conferences.find(w=>w.id===s);if(f){const w=await H.getConferences({filters:[{column:"season_id",operator:"eq",value:S},{column:"conference_name",operator:"eq",value:f.name}]});if(w.error)throw new Error(`Conferences fetch error: ${w.error}`);const C=w.data||[];C.length>0&&(y=typeof C[0].id=="string"?parseInt(C[0].id):C[0].id)}}console.log("Team records refresh triggered for season:",S,"conference:",y),await F(),k({title:"Success",description:"Standings refreshed successfully"})}catch(O){console.error("Error refreshing standings:",O),k({title:"Error",description:"Failed to refresh standings data",variant:"destructive"})}finally{b(!1)}};l.useEffect(()=>{!n&&r&&F()},[t,s,n,r]);const E=O=>{let _="desc";o&&o.key===O&&o.direction==="desc"&&(_="asc"),i({key:O,direction:_})},R=is.useMemo(()=>{let O=[...c];return o!==null?O.sort((_,S)=>{const y=_[o.key],f=S[o.key];return y<f?o.direction==="asc"?-1:1:y>f?o.direction==="asc"?1:-1:0}):O.sort((_,S)=>_.wins!==S.wins?S.wins-_.wins:S.points_for-_.points_for),O},[c,o]),A=async O=>{try{const _=await H.getMatchups({filters:[{column:"week",operator:"eq",value:13}]});if(_.error)return console.error("Error fetching Week 13 matchups:",_.error),!1;const S=_.data||[],y=S.length>0&&S.every(f=>f.winning_team_id!==null);return p(y),y}catch(_){return console.error("Error checking Week 13 completion:",_),!1}},U=()=>N,se=(O,_)=>{if(!g)return"outline";const S=new Map;if(R.forEach(C=>{S.has(C.conference_name)||S.set(C.conference_name,[]),S.get(C.conference_name).push(C)}),S.forEach(C=>{C.sort(($,W)=>$.overall_rank-W.overall_rank)}),(S.get(O.conference_name)||[]).findIndex(C=>C.team_id===O.team_id)+1<=2)return"default";const w=g.playoff_teams;return _<w?"secondary":"outline"},K=(O,_)=>{if(!g)return"";const S=new Map;if(R.forEach(C=>{S.has(C.conference_name)||S.set(C.conference_name,[]),S.get(C.conference_name).push(C)}),S.forEach(C=>{C.sort(($,W)=>$.overall_rank-W.overall_rank)}),(S.get(O.conference_name)||[]).findIndex(C=>C.team_id===O.team_id)+1<=2)return"bg-yellow-500 text-white border-yellow-600 hover:bg-yellow-600";const w=g.playoff_teams;return _<w?"bg-green-500 text-white border-green-600 hover:bg-green-600":""},B=O=>{const _=[];return O.is_conference_champion&&_.push(e.jsxs(ee,{variant:"default",className:"bg-blue-600 text-white",children:[e.jsx(hs,{className:"w-3 h-3 mr-1"}),"Conference Champion"]},"conference")),_};return n||u?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin"}),e.jsxs("span",{children:["Loading ",n?"season data":"standings","..."]})]})}):h?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"League Standings"})]}),e.jsxs("p",{className:"text-muted-foreground",children:[t," Season  ",s?(Z=r.conferences.find(O=>O.id===s))==null?void 0:Z.name:"All Conferences"]})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Error Loading Standings"}),e.jsx(Ce,{children:"Unable to fetch standings data"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:h}),e.jsx(X,{onClick:F,children:"Try Again"})]})})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"League Standings"})]}),e.jsxs(X,{variant:"outline",onClick:L,disabled:j,className:"flex items-center gap-2",children:[e.jsx(Ke,{className:`h-4 w-4 ${j?"animate-spin":""}`}),j?"Refreshing...":"Refresh"]})]}),e.jsxs("p",{className:"text-muted-foreground",children:[t," Season  ",s?(ae=r.conferences.find(O=>O.id===s))==null?void 0:ae.name:"All Conferences"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(V,{children:e.jsxs(oe,{className:"pb-2",children:[e.jsx(Ce,{children:"Total Teams"}),e.jsx(ce,{className:"text-2xl",children:c.length})]})}),e.jsx(V,{children:e.jsxs(oe,{className:"pb-2",children:[e.jsx(Ce,{children:"Highest Scoring Team"}),e.jsx(ce,{className:"text-xl",children:c.length>0&&c.reduce((O,_)=>O.points_for>_.points_for?O:_).team_name})]})}),e.jsx(V,{children:e.jsxs(oe,{className:"pb-2",children:[e.jsx(Ce,{children:"Playoff Teams"}),e.jsx(ce,{className:"text-2xl",children:g?g.playoff_teams:0}),e.jsxs(Ce,{className:"text-xs mt-1",children:[c.filter(O=>O.playoff_eligible).length," teams currently eligible"]}),g&&g.week_14_byes>0&&e.jsxs(Ce,{className:"text-xs mt-1",children:["With ",g.week_14_byes," first-round byes"]})]})})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Team Standings"}),e.jsxs(Ce,{children:["Click column headers to sort. Current standings for the ",t," season.",g&&e.jsxs("span",{className:"block mt-1 text-xs",children:["Gold records: Conference Championship bound (top 2 per conference)  Green records: Playoff bound (top ",g.playoff_teams," teams)",U()&&"  Status shown after Week 13 completion"]})]})]}),e.jsx(Y,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{className:"w-12 text-center",children:e.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>E("overall_rank"),children:["Rank ",e.jsx(kt,{className:"ml-1 h-3 w-3"})]})}),e.jsx(G,{children:e.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>E("team_name"),children:["Team ",e.jsx(kt,{className:"ml-1 h-3 w-3"})]})}),e.jsx(G,{className:"hidden lg:table-cell text-center",children:"Conference"}),e.jsx(G,{className:"text-center",children:e.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>E("wins"),children:["Record ",e.jsx(kt,{className:"ml-1 h-3 w-3"})]})}),e.jsx(G,{className:"text-center hidden md:table-cell",children:e.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>E("win_percentage"),children:["Win% ",e.jsx(kt,{className:"ml-1 h-3 w-3"})]})}),e.jsx(G,{className:"text-center",children:e.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>E("points_for"),children:["PF ",e.jsx(kt,{className:"ml-1 h-3 w-3"})]})}),e.jsx(G,{className:"text-center hidden sm:table-cell",children:e.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>E("points_against"),children:["PA ",e.jsx(kt,{className:"ml-1 h-3 w-3"})]})}),e.jsx(G,{className:"text-center hidden sm:table-cell",children:e.jsxs(X,{variant:"ghost",size:"sm",onClick:()=>E("point_diff"),children:["Diff ",e.jsx(kt,{className:"ml-1 h-3 w-3"})]})}),U()&&e.jsx(G,{className:"hidden lg:table-cell",children:"Status"})]})}),e.jsx(Ls,{children:R.map((O,_)=>e.jsxs($e,{className:"hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>a(`/teams/${O.team_id}`),children:[e.jsx(z,{className:"font-medium text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[O.overall_rank===1&&e.jsx(hs,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{children:O.overall_rank})]})}),e.jsx(z,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:O.team_logourl?`https://sleepercdn.com/avatars/thumbs/${O.team_logourl}`:"/placeholder-team-logo.png",alt:`${O.team_name} logo`,className:"w-10 h-10 rounded-full object-cover",onError:S=>{const y=S.target;y.src="/placeholder-team-logo.png"}})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"font-medium text-sm",children:O.team_name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:O.owner_name})]})]})}),e.jsx(z,{className:"hidden lg:table-cell text-center",children:e.jsx(zt,{conferenceName:O.conference_name,variant:"outline",size:"sm"})}),e.jsx(z,{className:"text-center",children:e.jsxs(ee,{variant:se(O,_),className:K(O,_),children:[O.wins,"-",O.losses,O.ties>0&&`-${O.ties}`]})}),e.jsxs(z,{className:"text-center font-mono hidden md:table-cell",children:[(O.win_percentage*100).toFixed(1),"%"]}),e.jsx(z,{className:"text-center font-mono",children:O.points_for.toFixed(1)}),e.jsx(z,{className:"text-center font-mono hidden sm:table-cell",children:O.points_against.toFixed(1)}),e.jsx(z,{className:"text-center font-mono hidden sm:table-cell",children:e.jsxs("span",{className:O.point_diff>=0?"text-green-600":"text-red-600",children:[O.point_diff>=0?"+":"",O.point_diff.toFixed(1)]})}),U()&&e.jsx(z,{className:"hidden lg:table-cell",children:e.jsx("div",{className:"flex items-center space-x-1 flex-wrap gap-1",children:B(O)})})]},O.team_id))})]})})})]})]})};var mn="Collapsible",[fh,Op]=Ft(mn),[xh,ha]=fh(mn),Ti=l.forwardRef((t,s)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:o,onOpenChange:i,...c}=t,[d,u]=br({prop:n,defaultProp:a??!1,onChange:i,caller:mn});return e.jsx(xh,{scope:r,disabled:o,contentId:bo(),open:d,onOpenToggle:l.useCallback(()=>u(m=>!m),[u]),children:e.jsx(fs.div,{"data-state":xa(d),"data-disabled":o?"":void 0,...c,ref:s})})});Ti.displayName=mn;var Ei="CollapsibleTrigger",Pi=l.forwardRef((t,s)=>{const{__scopeCollapsible:r,...n}=t,a=ha(Ei,r);return e.jsx(fs.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":xa(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:s,onClick:Ns(t.onClick,a.onOpenToggle)})});Pi.displayName=Ei;var fa="CollapsibleContent",Ri=l.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=ha(fa,t.__scopeCollapsible);return e.jsx(Zt,{present:r||a.open,children:({present:o})=>e.jsx(ph,{...n,ref:s,present:o})})});Ri.displayName=fa;var ph=l.forwardRef((t,s)=>{const{__scopeCollapsible:r,present:n,children:a,...o}=t,i=ha(fa,r),[c,d]=l.useState(n),u=l.useRef(null),m=_t(s,u),h=l.useRef(0),v=h.current,j=l.useRef(0),b=j.current,g=i.open||c,x=l.useRef(g),N=l.useRef(void 0);return l.useEffect(()=>{const p=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(p)},[]),pr(()=>{const p=u.current;if(p){N.current=N.current||{transitionDuration:p.style.transitionDuration,animationName:p.style.animationName},p.style.transitionDuration="0s",p.style.animationName="none";const k=p.getBoundingClientRect();h.current=k.height,j.current=k.width,x.current||(p.style.transitionDuration=N.current.transitionDuration,p.style.animationName=N.current.animationName),d(n)}},[i.open,n]),e.jsx(fs.div,{"data-state":xa(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!g,...o,ref:m,style:{"--radix-collapsible-content-height":v?`${v}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...t.style},children:g&&a})});function xa(t){return t?"open":"closed"}var gh=Ti;const qr=gh,Vr=Pi,Hr=Ri;var Fi={exports:{}},Di={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qt=l;function jh(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var yh=typeof Object.is=="function"?Object.is:jh,vh=Qt.useState,wh=Qt.useEffect,Nh=Qt.useLayoutEffect,bh=Qt.useDebugValue;function _h(t,s){var r=s(),n=vh({inst:{value:r,getSnapshot:s}}),a=n[0].inst,o=n[1];return Nh(function(){a.value=r,a.getSnapshot=s,Rn(a)&&o({inst:a})},[t,r,s]),wh(function(){return Rn(a)&&o({inst:a}),t(function(){Rn(a)&&o({inst:a})})},[t]),bh(r),r}function Rn(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!yh(t,r)}catch{return!0}}function Sh(t,s){return s()}var Ch=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Sh:_h;Di.useSyncExternalStore=Qt.useSyncExternalStore!==void 0?Qt.useSyncExternalStore:Ch;Fi.exports=Di;var kh=Fi.exports;function $h(){return kh.useSyncExternalStore(Th,()=>!0,()=>!1)}function Th(){return()=>{}}var pa="Avatar",[Eh,zp]=Ft(pa),[Ph,Ai]=Eh(pa),Mi=l.forwardRef((t,s)=>{const{__scopeAvatar:r,...n}=t,[a,o]=l.useState("idle");return e.jsx(Ph,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:e.jsx(fs.span,{...n,ref:s})})});Mi.displayName=pa;var Li="AvatarImage",Ii=l.forwardRef((t,s)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...o}=t,i=Ai(Li,r),c=Rh(n,o),d=xr(u=>{a(u),i.onImageLoadingStatusChange(u)});return pr(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?e.jsx(fs.img,{...o,ref:s,src:n}):null});Ii.displayName=Li;var Oi="AvatarFallback",zi=l.forwardRef((t,s)=>{const{__scopeAvatar:r,delayMs:n,...a}=t,o=Ai(Oi,r),[i,c]=l.useState(n===void 0);return l.useEffect(()=>{if(n!==void 0){const d=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(d)}},[n]),i&&o.imageLoadingStatus!=="loaded"?e.jsx(fs.span,{...a,ref:s}):null});zi.displayName=Oi;function Ia(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Rh(t,{referrerPolicy:s,crossOrigin:r}){const n=$h(),a=l.useRef(null),o=n?(a.current||(a.current=new window.Image),a.current):null,[i,c]=l.useState(()=>Ia(o,t));return pr(()=>{c(Ia(o,t))},[o,t]),pr(()=>{const d=h=>()=>{c(h)};if(!o)return;const u=d("loaded"),m=d("error");return o.addEventListener("load",u),o.addEventListener("error",m),s&&(o.referrerPolicy=s),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",u),o.removeEventListener("error",m)}},[o,r,s]),i}var Bi=Mi,Ui=Ii,Wi=zi;const vt=l.forwardRef(({className:t,...s},r)=>e.jsx(Bi,{ref:r,className:Ne("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));vt.displayName=Bi.displayName;const wt=l.forwardRef(({className:t,...s},r)=>e.jsx(Ui,{ref:r,className:Ne("aspect-square h-full w-full",t),...s}));wt.displayName=Ui.displayName;const Nt=l.forwardRef(({className:t,...s},r)=>e.jsx(Wi,{ref:r,className:Ne("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));Nt.displayName=Wi.displayName;class et{static async getPlayers(){const s=Date.now();if(this.playerCache&&s-this.playerCache.timestamp<this.playerCache.ttl){if(console.log(` Using cached player data (${Object.keys(this.playerCache.data).length} players)`),typeof window<"u"){const n=window.__cacheStats||{hits:0,total:0};n.total+=1,n.hits+=1,window.__cacheStats=n,window.__cacheHitRate=n.hits/n.total}return this.playerCache.data}console.log(" Refreshing player cache...");const r=performance.now();if(typeof window<"u"){const n=window.__cacheStats||{hits:0,total:0};n.total+=1,window.__cacheStats=n,window.__cacheHitRate=n.total>0?n.hits/n.total:0}try{const n=await H.getAllPlayersForMapping([{column:"playing_status",operator:"eq",value:"Active"},{column:"position",operator:"in",value:["QB","RB","WR","TE","K","DEF"]}]),a={};return n.forEach(o=>{var i;if(o.sleeper_id){const c=o.player_name.split(" "),d=c[0]||"",u=c.slice(1).join(" ")||"";a[o.sleeper_id]={player_id:o.sleeper_id,first_name:d,last_name:u,position:o.position||"",team:o.nfl_team||"",jersey_number:o.number||0,status:o.playing_status||"",injury_status:o.injury_status||"",age:o.age||0,height:((i=o.height)==null?void 0:i.toString())||"",weight:o.weight||0,years_exp:0,college:o.college||""}}}),this.playerCache={data:a,timestamp:s,ttl:this.PLAYER_CACHE_TTL},console.log(` Player cache refreshed with ${Object.keys(a).length} players in ${(performance.now()-r).toFixed(2)}ms`),a}catch(n){return console.error("Error fetching players:",n),{}}}static getCachedConferenceData(s,r){const n=`${s}_${r}`,a=this.conferenceCache.get(n);if(a&&Date.now()-a.timestamp<a.ttl){if(console.log(` Using cached Sleeper data for league ${s}, week ${r}`),typeof window<"u"){const o=window.__cacheStats||{hits:0,total:0};o.total+=1,o.hits+=1,window.__cacheStats=o,window.__cacheHitRate=o.hits/o.total}return a.data}return null}static setCachedConferenceData(s,r,n){const a=`${s}_${r}`;this.conferenceCache.set(a,{data:n,timestamp:Date.now(),ttl:this.CONFERENCE_CACHE_TTL})}static getCachedMatchupDetails(s,r){const n=`details_${s}_${r}`,a=this.matchupDetailsCache.get(n);return a&&Date.now()-a.timestamp<a.ttl?(console.log(` Using cached details for matchup ${s}`),a.data):null}static setCachedMatchupDetails(s,r,n){const a=`details_${s}_${r}`;this.matchupDetailsCache.set(a,{data:n,timestamp:Date.now(),ttl:this.DETAILS_CACHE_TTL})}static clearAll(){console.log(" Clearing all caches"),this.playerCache=null,this.conferenceCache.clear(),this.matchupDetailsCache.clear()}static cleanupExpired(){const s=Date.now();this.playerCache&&s-this.playerCache.timestamp>=this.playerCache.ttl&&(this.playerCache=null);for(const[r,n]of this.conferenceCache.entries())s-n.timestamp>=n.ttl&&this.conferenceCache.delete(r);for(const[r,n]of this.matchupDetailsCache.entries())s-n.timestamp>=n.ttl&&this.matchupDetailsCache.delete(r)}static getStats(){const s=Date.now();return{players:{cached:!!this.playerCache,count:this.playerCache?Object.keys(this.playerCache.data).length:0,age:this.playerCache?s-this.playerCache.timestamp:0,ttl:this.PLAYER_CACHE_TTL},conferences:{count:this.conferenceCache.size,entries:Array.from(this.conferenceCache.keys())},details:{count:this.matchupDetailsCache.size,entries:Array.from(this.matchupDetailsCache.keys())}}}}Es(et,"playerCache",null),Es(et,"conferenceCache",new Map),Es(et,"matchupDetailsCache",new Map),Es(et,"PLAYER_CACHE_TTL",10*60*1e3),Es(et,"CONFERENCE_CACHE_TTL",5*60*1e3),Es(et,"DETAILS_CACHE_TTL",2*60*1e3);setInterval(()=>{et.cleanupExpired()},5*60*1e3);class Gt{static async getHybridMatchups(s,r,n){try{console.log(" Getting optimized hybrid matchups:",{seasonId:s,week:r,conferenceId:n});const a=performance.now(),[o,i,c,d]=await Promise.all([r>=13?this.getPlayoffBrackets(s,r,n):this.getDatabaseMatchups(s,r,n),this.getConferences(s),this.getTeams(),this.getTeamConferenceJunctions()]);let u=[];if(r>=13?(console.log(` Week ${r} is playoffs - using playoff_brackets table`),u=this.convertPlayoffBracketsToMatchups(o,i)):(console.log(` Week ${r} is regular season - using matchups table`),u=o),console.log(` Found ${u.length} database matchups in ${(performance.now()-a).toFixed(2)}ms`),u.length===0)return console.warn("No database matchups found for the specified criteria"),[];const m=i,h=c,v=d;console.log(` Loaded ${m.length} conferences, ${h.length} teams`);const j=[];for(const b of u)try{console.log(` Processing matchup: Team ${b.team1_id} vs Team ${b.team2_id}`);const g=m.find(Z=>Z.id===b.conference_id);if(!g){console.warn(`Conference ${b.conference_id} not found for matchup ${b.id}`);continue}const x=h.find(Z=>Z.id===b.team1_id),N=b.team2_id?h.find(Z=>Z.id===b.team2_id):null;if(!x){console.warn(`Team1 not found: team1_id=${b.team1_id}`);continue}if(!b.is_bye&&!N){console.warn(`Team2 not found for non-bye matchup: team2_id=${b.team2_id}`);continue}if(b.is_bye||!N){console.log(` Processing bye week for team ${x.id}`);let Z=v.find(C=>C.team_id===x.id&&C.conference_id===g.id);if(Z||(Z=v.find(C=>C.team_id===x.id)),!Z){console.warn(`Roster mapping not found for bye team ${x.id}`);continue}const ae=m.find(C=>C.id===Z.conference_id);if(!ae){console.warn(`Conference not found for bye team ${x.id}`);continue}const O=await ke.fetchMatchups(ae.league_id,parseInt(b.week)),_=await ke.fetchLeagueRosters(ae.league_id),S=await ke.fetchLeagueUsers(ae.league_id),y=O.find(C=>C.roster_id===Z.roster_id);if(!y){console.warn(`Sleeper matchup not found for bye team roster ID ${Z.roster_id}`);continue}const f=await this.buildByeMatchupTeam(x,y,_,S,Z.roster_id),w={matchup_id:y.matchup_id||0,conference:g,teams:f,status:"completed",rawData:{dbMatchup:b,team1SleeperMatchup:y,team2SleeperMatchup:null,isOverride:b.manual_override||!1,isBye:!0,playoffBracket:r>=13?playoffBrackets.find(C=>C.id===b.id):void 0}};j.push(w),console.log(` Successfully processed bye matchup ${b.id}`);continue}let p=v.find(Z=>Z.team_id===x.id&&Z.conference_id===g.id),k=v.find(Z=>Z.team_id===N.id&&Z.conference_id===g.id);if(p||(console.log(` Team ${x.id} not in conference ${g.id}, searching home conference`),p=v.find(Z=>Z.team_id===x.id),p&&console.log(` Found team ${x.id} in conference ${p.conference_id}`)),k||(console.log(` Team ${N.id} not in conference ${g.id}, searching home conference`),k=v.find(Z=>Z.team_id===N.id),k&&console.log(` Found team ${N.id} in conference ${k.conference_id}`)),!p||!k){console.warn(`Roster mappings not found for teams ${x.id}, ${N.id} (searched all conferences)`);continue}const T=b.is_playoff||parseInt(b.week)>=13,P=T||p.conference_id!==k.conference_id;let F,L,E,R,A,U;if(P){console.log(T?` Processing playoff matchup (treated as interconference): Team ${x.id} (conf ${p.conference_id}) vs Team ${N.id} (conf ${k.conference_id})`:` Processing interconference matchup: Team ${x.id} (conf ${p.conference_id}) vs Team ${N.id} (conf ${k.conference_id})`);const Z=m.find(C=>C.id===p.conference_id),ae=m.find(C=>C.id===k.conference_id);if(!Z||!ae){console.warn("Conference details not found for interconference matchup");continue}const[O,_]=await Promise.all([ke.fetchMatchups(Z.league_id,parseInt(b.week)),ke.fetchMatchups(ae.league_id,parseInt(b.week))]),[S,y]=await Promise.all([ke.fetchLeagueRosters(Z.league_id),ke.fetchLeagueRosters(ae.league_id)]),[f,w]=await Promise.all([ke.fetchLeagueUsers(Z.league_id),ke.fetchLeagueUsers(ae.league_id)]);F=O.find(C=>C.roster_id===p.roster_id),L=_.find(C=>C.roster_id===k.roster_id),E=S,R=y,A=f,U=w}else{console.log(` Processing same-conference regular season matchup: Team ${x.id} vs Team ${N.id} (conf ${p.conference_id})`);const Z=await ke.fetchMatchups(g.league_id,parseInt(b.week)),ae=await ke.fetchLeagueRosters(g.league_id),O=await ke.fetchLeagueUsers(g.league_id);F=Z.find(_=>_.roster_id===p.roster_id),L=Z.find(_=>_.roster_id===k.roster_id),E=ae,R=ae,A=O,U=O}if(!F||!L){console.warn(`Sleeper matchups not found for roster IDs ${p.roster_id}, ${k.roster_id}`);continue}if(!P&&!T&&F.matchup_id!==L.matchup_id){console.warn(`Teams are not matched against each other in Sleeper: ${F.matchup_id} vs ${L.matchup_id}`);continue}const se=await this.buildMatchupTeamsFromDatabaseInterconference(x,N,F,L,E,R,A,U,p.roster_id,k.roster_id),K=this.determineMatchupStatusFromSleeper(F,L),B={matchup_id:F.matchup_id||0,conference:g,teams:se,status:K,rawData:{dbMatchup:b,team1SleeperMatchup:F,team2SleeperMatchup:L,isOverride:b.manual_override||!1,playoffBracket:r>=13?playoffBrackets.find(Z=>Z.id===b.id):void 0}};j.push(B),console.log(` Successfully processed matchup ${b.id}`)}catch(g){console.error(`Error processing matchup ${b.id}:`,g)}return console.log(` Processed ${j.length} hybrid matchups from ${u.length} database records`),j}catch(a){return console.error("Error in getHybridMatchups:",a),[]}}static async getMinimalMatchups(s,r,n){try{console.log(" Loading minimal matchups (optimized)...");const a=performance.now(),[o,i,c,d]=await Promise.all([r>=13?this.getPlayoffBrackets(s,r,n):this.getDatabaseMatchups(s,r,n),this.getConferences(s),this.getTeams(),this.getTeamConferenceJunctions()]);let u=[];r>=13?u=this.convertPlayoffBracketsToMatchups(o,i):u=o,console.log(` Batch data loaded in ${(performance.now()-a).toFixed(2)}ms`);const m=[];for(const h of u){const v=i.find(T=>T.id===h.conference_id);if(!v)continue;const j=c.find(T=>T.id===h.team1_id),b=h.team2_id?c.find(T=>T.id===h.team2_id):null;if(!j)continue;const g=d.find(T=>T.team_id===j.id),x=b?d.find(T=>T.team_id===b.id):null,N=g?i.find(T=>T.id===g.conference_id):null,p=x?i.find(T=>T.id===x.conference_id):null,k={id:h.id,matchup_id:0,conference:{id:v.id,name:v.conference_name},teams:[{id:j.id,name:j.team_name,owner:j.owner_name,points:h.team1_score||0,roster_id:(g==null?void 0:g.roster_id)||0,team_logourl:j.team_logourl,avatar:j.team_logourl,conference:N?{id:N.id,name:N.conference_name}:void 0}],status:this.determineMatchupStatusFromDb(h),week:parseInt(h.week),is_playoff:h.is_playoff||!1,is_bye:h.is_bye||!1,manual_override:h.manual_override||!1};b&&x&&!h.is_bye&&k.teams.push({id:b.id,name:b.team_name,owner:b.owner_name,points:h.team2_score||0,roster_id:x.roster_id,team_logourl:b.team_logourl,avatar:b.team_logourl,conference:p?{id:p.id,name:p.conference_name}:void 0}),r>=13&&"playoff_round_name"in h&&(k.playoff_round_name=h.playoff_round_name),m.push(k)}return console.log(` Minimal matchups loaded in ${(performance.now()-a).toFixed(2)}ms`),m}catch(a){return console.error("Error loading minimal matchups:",a),[]}}static async getMatchupDetails(s,r,n){var a,o,i,c,d,u;try{console.log(` Loading details for matchup ${s}...`);const m=performance.now(),h=et.getCachedMatchupDetails(s,n);if(h)return h;const j=(a=(n>=13?await H.getPlayoffBrackets({filters:[{column:"id",operator:"eq",value:s}]}):await H.getMatchups({filters:[{column:"id",operator:"eq",value:s}]})).data)==null?void 0:a[0];if(!j)return null;const[b,g,x]=await Promise.all([H.getConferences({filters:[{column:"season_id",operator:"eq",value:r}]}),H.getTeams({limit:500}),H.getTeamConferenceJunctions({limit:1e3})]),N=(o=b.data)==null?void 0:o.find(R=>R.id===j.conference_id);if(!N)return null;let p,k,T;const P=et.getCachedConferenceData(N.league_id,n);P?{matchups:p,rosters:k,users:T}=P:([p,k,T]=await Promise.all([ke.fetchMatchups(N.league_id,n),ke.fetchLeagueRosters(N.league_id),ke.fetchLeagueUsers(N.league_id)]),et.setCachedConferenceData(N.league_id,n,{matchups:p,rosters:k,users:T}));const F={players_points:{},starters:{},bench_players:{},rosters:{},users:{}},L=(i=g.data)==null?void 0:i.find(R=>R.id===j.team1_id),E=j.team2_id?(c=g.data)==null?void 0:c.find(R=>R.id===j.team2_id):null;if(L){const R=(d=x.data)==null?void 0:d.find(A=>A.team_id===L.id);if(R){const A=p.find(K=>K.roster_id===R.roster_id),U=k.find(K=>K.roster_id===R.roster_id),se=T.find(K=>K.user_id===(U==null?void 0:U.owner_id));A&&U&&(F.players_points[L.id.toString()]=A.players_points||{},F.starters[L.id.toString()]=A.starters||[],F.bench_players[L.id.toString()]=(U.players||[]).filter(K=>{var B;return!((B=A.starters)!=null&&B.includes(K))}),F.rosters[L.id.toString()]=U,se&&(F.users[L.id.toString()]=se))}}if(E){const R=(u=x.data)==null?void 0:u.find(A=>A.team_id===E.id);if(R){const A=p.find(K=>K.roster_id===R.roster_id),U=k.find(K=>K.roster_id===R.roster_id),se=T.find(K=>K.user_id===(U==null?void 0:U.owner_id));A&&U&&(F.players_points[E.id.toString()]=A.players_points||{},F.starters[E.id.toString()]=A.starters||[],F.bench_players[E.id.toString()]=(U.players||[]).filter(K=>{var B;return!((B=A.starters)!=null&&B.includes(K))}),F.rosters[E.id.toString()]=U,se&&(F.users[E.id.toString()]=se))}}return et.setCachedMatchupDetails(s,n,F),console.log(` Matchup details loaded in ${(performance.now()-m).toFixed(2)}ms`),F}catch(m){return console.error(`Error loading matchup details for ${s}:`,m),null}}static determineMatchupStatusFromDb(s){return s.matchup_status==="complete"||s.winning_team_id?"completed":s.team1_score>0||s.team2_score>0?"live":"upcoming"}static async getConferences(s){try{return(await H.getConferences({filters:[{column:"season_id",operator:"eq",value:s}],limit:50})).data||[]}catch(r){return console.error("Error in getConferences:",r),[]}}static async getTeams(){try{return(await H.getTeams({limit:500})).data||[]}catch(s){return console.error("Error in getTeams:",s),[]}}static async getTeamConferenceJunctions(){try{return(await H.getTeamConferenceJunctions({limit:1e3})).data||[]}catch(s){return console.error("Error in getTeamConferenceJunctions:",s),[]}}static async getPlayoffBrackets(s,r,n){try{console.log(` Getting playoff brackets for season ${s}, week ${r}, conference: ${n||"all"}`);const a=[{column:"season_id",operator:"eq",value:s},{column:"week",operator:"eq",value:r}];let i=(await H.getPlayoffBrackets({filters:a,limit:100})).data||[];if(n&&i.length>0){const d=(await this.getTeamConferenceJunctions()).filter(u=>u.conference_id===n).map(u=>u.team_id);i=i.filter(u=>d.includes(u.team1_id)||d.includes(u.team2_id))}return console.log(` Found ${i.length} playoff brackets`),i}catch(a){return console.error("Error in getPlayoffBrackets:",a),[]}}static convertPlayoffBracketsToMatchups(s,r){return s.map(n=>{const a=r[0];return{id:n.id,conference_id:(a==null?void 0:a.id)||1,week:n.week.toString(),team1_id:n.team1_id,team2_id:n.team2_id,is_playoff:!0,manual_override:!1,matchup_status:n.winning_team_id?"complete":"upcoming",notes:n.playoff_round_name||null,matchup_type:"playoff",team1_score:n.team1_score||null,team2_score:n.team2_score||null,winning_team_id:n.winning_team_id||null,is_bye:n.is_bye||!1}})}static async getDatabaseMatchups(s,r,n){var a,o;try{if(n){console.log(` Filtering matchups for specific conference: ${n}`);const m=[{column:"week",operator:"eq",value:r.toString()},{column:"conference_id",operator:"eq",value:n}],h=await H.getMatchups({filters:m,limit:100});return console.log(` Found ${((a=h.data)==null?void 0:a.length)||0} matchups for conference ${n}`),h.data||[]}const c=(await this.getConferences(s)).map(m=>m.id);if(c.length===0)return console.warn("No conferences found for season:",s),[];const d=[{column:"week",operator:"eq",value:r.toString()},{column:"conference_id",operator:"in",value:c}],u=await H.getMatchups({filters:d,limit:100});return console.log(` Found ${((o=u.data)==null?void 0:o.length)||0} matchups for season ${s}, week ${r}`),u.data||[]}catch(i){return console.error("Error in getDatabaseMatchups:",i),[]}}static async getMatchupOverrides(s,r,n){var a;try{console.log("Fetching matchup overrides:",{seasonId:s,week:r,conferenceId:n});const o=[{column:"season_id",operator:"eq",value:s},{column:"week",operator:"eq",value:r},{column:"is_active",operator:"eq",value:!0}];n&&o.push({column:"conference_id",operator:"eq",value:n});const i=await H.getMatchupAdminOverrides({filters:o,limit:100});return console.log("Matchup overrides found:",((a=i.data)==null?void 0:a.length)||0),i.data||[]}catch(o){return console.error("Error in getMatchupOverrides:",o),[]}}static async getOrganizedMatchups(s,r,n){try{console.log("Getting organized matchups:",{seasonId:s,week:r,conferenceId:n});let a=[];if(r>=13){console.log(` Week ${r} is playoffs - using playoff_brackets table`);const d=await this.getPlayoffBrackets(s,r,n),u=await this.getConferences(s);a=this.convertPlayoffBracketsToMatchups(d,u)}else console.log(` Week ${r} is regular season - using matchups table`),a=await this.getDatabaseMatchups(s,r,n);const o=await this.getConferences(s),i=await this.getTeams(),c=await this.getMatchupOverrides(s,r,n);return console.log("Found data:",{matchups:a.length,conferences:o.length,teams:i.length,overrides:c.length}),this.getHybridMatchups(s,r,n)}catch(a){return console.error("Error in getOrganizedMatchups:",a),[]}}static async buildMatchupTeamsSimple(s,r,n,a,o){try{const i=[],c=r.find(h=>h.roster_id===s.roster_id);if(!c)return console.warn(`No roster found for roster_id: ${s.roster_id}`),[];const d=n.find(h=>h.user_id===c.owner_id),u=a.find(h=>h.owner_id===c.owner_id),m={roster_id:s.roster_id,points:s.points||0,projected_points:s.projected_points||0,owner:d||null,roster:c||null,team:u||null,players_points:s.players_points||{},starters_points:s.starters_points||[],matchup_starters:s.starters||[]};return i.push(m),i}catch(i){return console.error("Error building simple matchup teams:",i),[]}}static determineMatchupStatusSimple(s){return s.points&&s.points>0?"completed":"upcoming"}static async buildMatchupTeamsFromDatabase(s,r,n,a,o,i,c,d){try{const u=[],m=o.find(x=>x.roster_id===c),h=i.find(x=>x.user_id===(m==null?void 0:m.owner_id)),v={roster_id:c,points:n.points||0,projected_points:n.projected_points||0,owner:h||null,roster:m||null,team:s,players_points:n.players_points||{},starters_points:n.starters_points||[],matchup_starters:n.starters||[]},j=o.find(x=>x.roster_id===d),b=i.find(x=>x.user_id===(j==null?void 0:j.owner_id)),g={roster_id:d,points:a.points||0,projected_points:a.projected_points||0,owner:b||null,roster:j||null,team:r,players_points:a.players_points||{},starters_points:a.starters_points||[],matchup_starters:a.starters||[]};return u.push(v,g),u}catch(u){return console.error("Error building matchup teams from database:",u),[]}}static async buildMatchupTeamsFromDatabaseInterconference(s,r,n,a,o,i,c,d,u,m){try{const h=[],v=o.find(p=>p.roster_id===u),j=c.find(p=>p.user_id===(v==null?void 0:v.owner_id)),b={roster_id:u,points:n.points||0,projected_points:n.projected_points||0,owner:j||null,roster:v||null,team:s,players_points:n.players_points||{},starters_points:n.starters_points||[],matchup_starters:n.starters||[]},g=i.find(p=>p.roster_id===m),x=d.find(p=>p.user_id===(g==null?void 0:g.owner_id)),N={roster_id:m,points:a.points||0,projected_points:a.projected_points||0,owner:x||null,roster:g||null,team:r,players_points:a.players_points||{},starters_points:a.starters_points||[],matchup_starters:a.starters||[]};return h.push(b,N),h}catch(h){return console.error("Error building interconference matchup teams from database:",h),[]}}static async buildByeMatchupTeam(s,r,n,a,o){try{const i=n.find(u=>u.roster_id===o),c=a.find(u=>u.user_id===(i==null?void 0:i.owner_id));return[{roster_id:o,points:r.points||0,projected_points:r.projected_points||0,owner:c||null,roster:i||null,team:s,players_points:r.players_points||{},starters_points:r.starters_points||[],matchup_starters:r.starters||[]}]}catch(i){return console.error("Error building bye matchup team:",i),[]}}static determineMatchupStatusFromSleeper(s,r){const n=s.points&&s.points>0,a=r&&r.points&&r.points>0;return n&&a?"completed":n||a?"live":"upcoming"}static async getDetailedMatchup(s,r){var n,a,o;try{console.log(` Loading detailed matchup ${s} for season ${r}...`);const c=(n=(await H.getMatchups({filters:[{column:"id",operator:"eq",value:s}]})).data)==null?void 0:n[0];if(!c)return null;const[d,u,m,h]=await Promise.all([this.getConferences(r),this.getTeams(),this.getTeamConferenceJunctions(),H.getTeamRecords({filters:[{column:"season_id",operator:"eq",value:r}],limit:500})]),v=d.find(A=>A.id===c.conference_id);if(!v)return null;const j=u.find(A=>A.id===c.team1_id),b=c.team2_id?u.find(A=>A.id===c.team2_id):null;if(!j)return null;const g=m.find(A=>A.team_id===j.id),x=b?m.find(A=>A.team_id===b.id):null;if(!g||b&&!x)return null;const N=(a=h.data)==null?void 0:a.find(A=>A.team_id===j.id&&A.season_id===r&&A.conference_id===c.conference_id),p=b?(o=h.data)==null?void 0:o.find(A=>A.team_id===b.id&&A.season_id===r&&A.conference_id===c.conference_id):null,[k,T,P]=await Promise.all([ke.fetchMatchups(v.league_id,parseInt(c.week)),ke.fetchLeagueRosters(v.league_id),ke.fetchLeagueUsers(v.league_id)]),F={id:c.id,week:parseInt(c.week),status:this.determineMatchupStatusFromDb(c),isPlayoff:c.is_playoff||!1,playoffRound:c.notes,conference:{id:v.id,name:v.conference_name},teams:[],isBye:c.is_bye||!1,scoreDifferential:Math.abs((c.team1_score||0)-(c.team2_score||0)),gameTimeRemaining:void 0},L=k.find(A=>A.roster_id===g.roster_id),E=T.find(A=>A.roster_id===g.roster_id),R=P.find(A=>A.user_id===(E==null?void 0:E.owner_id));if(L&&E&&F.teams.push({id:j.id,name:j.team_name,owner:j.owner_name,avatar:j.team_logourl,logoUrl:j.team_logourl,record:{wins:(N==null?void 0:N.wins)||0,losses:(N==null?void 0:N.losses)||0},points:c.team1_score||0,projectedPoints:L.projected_points||0,rosterId:g.roster_id,starters:L.starters||[],bench:(E.players||[]).filter(A=>{var U;return!((U=L.starters)!=null&&U.includes(A))}),playersPoints:L.players_points||{},playersProjected:{}}),b&&x&&!c.is_bye){const A=k.find(K=>K.roster_id===x.roster_id),U=T.find(K=>K.roster_id===x.roster_id),se=P.find(K=>K.user_id===(U==null?void 0:U.owner_id));A&&U&&F.teams.push({id:b.id,name:b.team_name,owner:b.owner_name,avatar:b.team_logourl,logoUrl:b.team_logourl,record:{wins:(p==null?void 0:p.wins)||0,losses:(p==null?void 0:p.losses)||0},points:c.team2_score||0,projectedPoints:A.projected_points||0,rosterId:x.roster_id,starters:A.starters||[],bench:(U.players||[]).filter(K=>{var B;return!((B=A.starters)!=null&&B.includes(K))}),playersPoints:A.players_points||{},playersProjected:{}})}return F}catch(i){return console.error(`Error loading detailed matchup ${s}:`,i),null}}static async getTeamWeeklyPerformance(s,r,n){try{console.log(` Loading weekly performance for teams ${s}${r?` and ${r}`:""} in season ${n}...`);const o=(await this.getConferences(n)).map(h=>h.id);if(o.length===0)return console.warn("No conferences found for season",n),[];const d=((await H.getMatchups({filters:[{column:"matchup_status",operator:"eq",value:"complete"}],limit:1e3})).data||[]).filter(h=>o.includes(h.conference_id)&&(h.team1_id===s||h.team2_id===s||r&&(h.team1_id===r||h.team2_id===r))),u={};d.forEach(h=>{const v=parseInt(h.week);u[v]||(u[v]={}),h.team1_id===s?u[v].team1=h.team1_score||0:h.team2_id===s&&(u[v].team1=h.team2_score||0),r&&(h.team1_id===r?u[v].team2=h.team1_score||0:h.team2_id===r&&(u[v].team2=h.team2_score||0))});const m=Object.entries(u).map(([h,v])=>({week:parseInt(h),team1:v.team1||0,...r&&v.team2!==void 0?{team2:v.team2}:{}})).filter(h=>h.team1>0||h.team2!==void 0&&h.team2>0).sort((h,v)=>h.week-v.week);return console.log(` Found weekly performance data for ${m.length} weeks`),m}catch(a){return console.error("Error loading weekly performance:",a),[]}}static async getHeadToHeadHistory(s,r,n){try{console.log(` Loading head-to-head history for teams ${s} vs ${r} across all seasons...`);const o=(await H.getSeasons({limit:100})).data||[],c=(await H.getConferences({limit:1e3})).data||[];if(c.length===0)return console.warn("No conferences found"),[];const m=((await H.getMatchups({limit:1e3})).data||[]).filter(g=>(g.matchup_status==="complete"||!!g.winning_team_id)&&(g.team1_id===s&&g.team2_id===r||g.team1_id===r&&g.team2_id===s)),h=await this.getTeams(),v=h.find(g=>g.id===s),j=h.find(g=>g.id===r);return m.map(g=>{var E;const x=g.team1_id===s,N=x?g.team1_score||0:g.team2_score||0,p=x?g.team2_score||0:g.team1_score||0;let k="Tie";N>p?k=(v==null?void 0:v.team_name)||"Team 1":p>N&&(k=(j==null?void 0:j.team_name)||"Team 2");const T=c.find(R=>R.id===g.conference_id),P=o.find(R=>R.id===(T==null?void 0:T.season_id)),F=(P==null?void 0:P.season_year)||((E=T==null?void 0:T.season_id)==null?void 0:E.toString())||"Unknown",L=g.matchup_status==="complete"||!!g.winning_team_id;return{week:parseInt(g.week),season:F,team1Score:N,team2Score:p,winner:k,date:new Date(g.created_at||Date.now()),status:g.matchup_status||(L?"complete":"scheduled")}}).sort((g,x)=>g.season!==x.season?x.season.localeCompare(g.season):x.week-g.week)}catch(a){return console.error("Error loading head-to-head history:",a),[]}}}const Oa=t=>{switch(t){case"QB":return"bg-red-100 text-red-800";case"RB":return"bg-green-100 text-green-800";case"WR":return"bg-blue-100 text-blue-800";case"TE":return"bg-yellow-100 text-yellow-800";case"K":return"bg-purple-100 text-purple-800";case"DEF":return"bg-gray-100 text-gray-800";case"FLEX":return"bg-orange-100 text-orange-800";case"SUPER_FLEX":return"bg-pink-100 text-pink-800";case"SFLEX":return"bg-pink-100 text-pink-800";default:return"bg-gray-100 text-gray-800"}},qi=is.memo(({matchup:t,isExpanded:s,onToggleExpand:r,detailedData:n,allPlayers:a,loading:o,onViewDetails:i})=>{const[c,d]=t.teams,u=t.status==="completed"?c.points>((d==null?void 0:d.points)||0)?c:d:null,m=x=>{switch(x){case"live":return e.jsx(ee,{className:"bg-green-500 hover:bg-green-600",children:"Live"});case"completed":return e.jsx(ee,{variant:"secondary",children:"Final"});case"upcoming":return e.jsx(ee,{variant:"outline",children:"Upcoming"});default:return e.jsx(ee,{variant:"secondary",children:x})}},h=x=>({QB:"QB",RB:"RB",WR:"WR",TE:"TE",FLEX:"W/R/T",SUPER_FLEX:"Q/W/R/T",K:"K",DEF:"DEF"})[x]||x,v=x=>{const N=a[x];return N?{name:`${N.first_name||""} ${N.last_name||""}`.trim()||"Unknown",position:N.position||"N/A",team:N.team||"N/A"}:{name:"Unknown Player",position:"N/A",team:"N/A"}},j=x=>{const N=x.split(" ");return N.length>=2?`${N[0].charAt(0)}. ${N.slice(1).join(" ")}`:x},b=(x,N)=>{if(!n)return e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading roster..."});const p=n.starters[x]||[],k=n.players_points[x]||{},T=n.bench_players[x]||[];return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:"Starters"}),e.jsx("div",{className:"space-y-1",children:p.map((P,F)=>{const L=v(P),E=k[P]||0,R=["QB","RB","RB","WR","WR","WR","TE","FLEX","SUPER_FLEX"][F]||"FLEX";return e.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 rounded text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:`text-xs px-1 py-0 ${Oa(R)}`,children:h(R)}),e.jsx("span",{className:"font-medium",children:L.name}),e.jsxs("span",{className:"text-muted-foreground",children:["(",L.position," - ",L.team,")"]})]}),e.jsx("span",{className:"font-bold",children:E.toFixed(1)})]},`${P}-${F}`)})})]}),T.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:"Bench"}),e.jsx("div",{className:"space-y-1",children:T.map(P=>{const F=v(P),L=k[P]||0;return e.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-25 rounded text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:F.name}),e.jsxs("span",{className:"text-muted-foreground",children:["(",F.position," - ",F.team,")"]})]}),e.jsx("span",{className:"text-muted-foreground",children:L.toFixed(1)})]},P)})})]})]})},g=t.manual_override&&t.week>=1&&t.week<=12;return e.jsxs(V,{className:"hover:shadow-md transition-shadow",children:[e.jsx(oe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[t.playoff_round_name&&e.jsx(ce,{className:"text-base",children:t.playoff_round_name}),g?e.jsx(ee,{variant:"outline",className:"text-xs bg-orange-100 text-orange-800 border-orange-300",children:"Interconference"}):e.jsx(zt,{conferenceName:t.conference.name,size:"sm"})]}),m(t.status)]})}),e.jsxs(Y,{className:"pt-0 space-y-3",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[g&&c.conference&&e.jsx(zt,{conferenceName:c.conference.name,size:"xs"}),e.jsxs(vt,{className:"h-8 w-8 flex-shrink-0",children:[e.jsx(wt,{src:c.team_logourl?`https://sleepercdn.com/avatars/thumbs/${c.team_logourl}`:c.avatar}),e.jsx(Nt,{className:"text-xs",children:c.name.charAt(0)})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium text-xs truncate",children:c.name}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:c.owner})]})]}),e.jsx("div",{className:`text-sm font-bold flex-shrink-0 ml-2 ${(u==null?void 0:u.id)===c.id?"text-green-600":""}`,children:t.status==="upcoming"?"--":c.points.toFixed(1)})]}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"VS"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:t.is_bye||!d?e.jsx("div",{className:"font-medium text-xs",children:"BYE"}):e.jsxs(e.Fragment,{children:[g&&d.conference&&e.jsx(zt,{conferenceName:d.conference.name,size:"xs"}),e.jsxs(vt,{className:"h-8 w-8 flex-shrink-0",children:[e.jsx(wt,{src:d.team_logourl?`https://sleepercdn.com/avatars/thumbs/${d.team_logourl}`:d.avatar}),e.jsx(Nt,{className:"text-xs",children:d.name.charAt(0)})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium text-xs truncate",children:d.name}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:d.owner})]})]})}),e.jsx("div",{className:`text-sm font-bold flex-shrink-0 ml-2 ${(u==null?void 0:u.id)===(d==null?void 0:d.id)?"text-green-600":""}`,children:t.is_bye||!d?"BYE":t.status==="upcoming"?"--":d.points.toFixed(1)})]})]}),!t.is_bye&&e.jsxs(qr,{open:s,children:[e.jsx(Hr,{className:"space-y-4",children:e.jsxs("div",{className:"border-t pt-4 cursor-pointer hover:bg-gray-50 transition-colors rounded-md p-2 -m-2",onClick:()=>r(t.id),title:"Click to close Quick View",children:[o?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Ke,{className:"h-6 w-6 animate-spin mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading roster details..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center",children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),c.name," Lineup"]}),b(c.id.toString(),c.name)]}),d&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center",children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),d.name," Lineup"]}),b(d.id.toString(),d.name)]})]})}),e.jsx("div",{className:"block md:hidden",children:n&&(()=>{const x=n.starters[c.id.toString()]||[],N=d?n.starters[d.id.toString()]||[]:[],p=n.bench_players[c.id.toString()]||[],k=d?n.bench_players[d.id.toString()]||[]:[],T=Math.max(x.length,N.length);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[e.jsx("div",{className:"text-right",children:e.jsxs("h4",{className:"font-semibold text-xs flex items-center justify-end",children:[e.jsx(bs,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{className:"truncate",children:[c.name," Lineup"]})]})}),e.jsx("div",{}),e.jsx("div",{className:"text-left",children:e.jsxs("h4",{className:"font-semibold text-xs flex items-center",children:[e.jsxs("span",{className:"truncate",children:[d?d.name:"BYE"," Lineup"]}),d&&e.jsx(bs,{className:"h-3 w-3 ml-1"})]})})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-3 text-center",children:"Starters"}),e.jsx("div",{className:"space-y-2",children:Array.from({length:T},(P,F)=>{var B,Z;const L=["QB","RB","RB","WR","WR","WR","TE","FLEX","SUPER_FLEX"][F]||"FLEX",E=x[F],R=N[F],A=E?v(E):null,U=R?v(R):null,se=E&&((B=n.players_points[c.id.toString()])==null?void 0:B[E])||0,K=R&&d&&((Z=n.players_points[d.id.toString()])==null?void 0:Z[R])||0;return e.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[e.jsx("div",{className:"text-right",children:A?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-xs truncate",children:j(A.name)}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[A.position," - ",A.team]})]}):e.jsx("div",{className:"text-muted-foreground text-xs",children:"-"})}),e.jsx("div",{className:"text-center",children:e.jsx(ee,{className:`text-xs px-1 py-0 ${Oa(L)}`,children:h(L)})}),e.jsx("div",{className:"text-left",children:U&&d?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-xs truncate",children:j(U.name)}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[U.position," - ",U.team]})]}):e.jsx("div",{className:"text-muted-foreground text-xs",children:"-"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center mt-1",children:[e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"font-bold text-xs",children:A?se.toFixed(1):"-"})}),e.jsx("div",{}),e.jsx("div",{className:"text-left",children:e.jsx("span",{className:"font-bold text-xs",children:U&&d?K.toFixed(1):"-"})})]})]},F)})})]}),(p.length>0||k.length>0)&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-3 text-center",children:"Bench"}),e.jsx("div",{className:"space-y-2",children:(()=>{const P=Math.max(p.length,k.length);return Array.from({length:P},(F,L)=>{var B,Z;const E=p[L],R=k[L],A=E?v(E):null,U=R?v(R):null,se=E&&((B=n.players_points[c.id.toString()])==null?void 0:B[E])||0,K=R&&d&&((Z=n.players_points[d.id.toString()])==null?void 0:Z[R])||0;return e.jsxs("div",{className:"bg-gray-25 rounded p-2",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[e.jsx("div",{className:"text-right",children:A?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-xs truncate",children:j(A.name)}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[A.position," - ",A.team]})]}):e.jsx("div",{className:"text-muted-foreground text-xs",children:"-"})}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-xs text-muted-foreground",children:"BENCH"})}),e.jsx("div",{className:"text-left",children:U&&d?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-xs truncate",children:j(U.name)}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[U.position," - ",U.team]})]}):e.jsx("div",{className:"text-muted-foreground text-xs",children:"-"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center mt-1",children:[e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"text-muted-foreground text-xs",children:A?se.toFixed(1):"-"})}),e.jsx("div",{}),e.jsx("div",{className:"text-left",children:e.jsx("span",{className:"text-muted-foreground text-xs",children:U&&d?K.toFixed(1):"-"})})]})]},L)})})()})]})]})})()})]}),e.jsx("div",{className:"text-center mt-4 pt-2 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Click anywhere to close Quick View"})})]})}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx(Vr,{asChild:!0,children:e.jsx(X,{variant:"outline",className:"flex-1",onClick:()=>r(t.id),children:s?e.jsxs(e.Fragment,{children:["Hide Details",e.jsx(ia,{className:"h-4 w-4 ml-2"})]}):e.jsxs(e.Fragment,{children:["Quick View",e.jsx(on,{className:"h-4 w-4 ml-2"})]})})}),e.jsx(X,{variant:"default",className:"flex-1",onClick:()=>i(t.id),children:"Full Details"})]})]})]})]})});qi.displayName="MatchupCard";const Fh=()=>{var y;const t=_r(),s=l.useRef(0);s.current+=1,s.current%10===0&&console.warn(` MatchupsPage render count: ${s.current}`);const{selectedSeason:r,selectedConference:n,currentSeasonConfig:a,seasonConfigs:o}=Hs(),{toast:i}=Is(),[c,d]=l.useState(1),[u,m]=l.useState(1),[h,v]=l.useState(new Set),[j,b]=l.useState([]),[g,x]=l.useState(new Map),[N,p]=l.useState(new Set),[k,T]=l.useState({}),[P,F]=l.useState(!0),[L,E]=l.useState(!1),[R,A]=l.useState([]),U=l.useRef(!1),se=l.useRef(new Map),K=l.useMemo(()=>o.find(f=>f.year===r),[o,r]),B=l.useCallback(async()=>{try{console.log(" Loading player data...");const f=performance.now(),w=await et.getPlayers();console.log(` Player data loaded in ${(performance.now()-f).toFixed(2)}ms`),T(w)}catch(f){console.error("Error loading player data:",f),T({})}},[]),Z=l.useCallback(async()=>{if(!r||!K||L||U.current){console.log(" Skipping matchup fetch - missing data or already refreshing"),F(!1);return}U.current=!0,E(!0),A([]);try{console.log(` Fetching optimized matchups for season ${r}, week ${c}`);const f=performance.now(),w=typeof K.seasonId=="string"?parseInt(K.seasonId):K.seasonId||r;let C;if(n){const W=K.conferences.find(q=>q.id===n);C=W==null?void 0:W.dbConferenceId,console.log(` Conference filter: ${n} -> DB conferenceId: ${C}`)}const $=await Gt.getMinimalMatchups(w,c,C);console.log(` Loaded ${$.length} minimal matchups in ${(performance.now()-f).toFixed(2)}ms`),b($),x(new Map),se.current=new Map,v(new Set)}catch(f){console.error("Error fetching matchups:",f);const w=f instanceof Error?f.message:"Unknown error";A([w]),i({title:"Error Loading Matchups",description:`Failed to load matchup data: ${w}`,variant:"destructive"}),b([])}finally{U.current=!1,E(!1),F(!1)}},[c,n,r,K,i]),ae=l.useCallback(async f=>{if(!(!r||!K)){p(w=>new Set(w).add(f));try{console.log(` Loading details for matchup ${f}...`);const w=performance.now(),C=typeof K.seasonId=="string"?parseInt(K.seasonId):K.seasonId||r,$=await Gt.getMatchupDetails(f,C,c);$&&(x(W=>{const q=new Map(W).set(f,$);return se.current=q,q}),console.log(` Matchup ${f} details loaded in ${(performance.now()-w).toFixed(2)}ms`))}catch(w){console.error(`Error loading details for matchup ${f}:`,w)}finally{p(w=>{const C=new Set(w);return C.delete(f),C})}}},[r,K,c]),O=l.useCallback(async()=>{try{console.log(" Loading current NFL week...");const f=await ke.getCurrentNFLWeek();console.log(` Current NFL week: ${f}`),m(f),d(f)}catch(f){console.error("Error getting current week:",f),m(1),d(1)}},[]),_=l.useCallback(f=>{h.has(f)?v(C=>{const $=new Set(C);return $.delete(f),$}):(v(C=>{const $=new Set(C);return $.add(f),$}),se.current.has(f)||ae(f))},[h,ae]);l.useEffect(()=>{O(),B()},[]),l.useEffect(()=>{r&&K?(F(!0),Z()):F(!1)},[c,n,r,K,Z]);const S=l.useMemo(()=>[...j].sort((f,w)=>f.conference.name.localeCompare(w.conference.name)),[j]);return P?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yr,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Matchups"})]}),e.jsx(V,{children:e.jsxs(Y,{className:"py-8 text-center",children:[e.jsx(Ke,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),e.jsx("p",{children:"Loading matchup data..."})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yr,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Matchups"})]}),e.jsxs("p",{className:"text-muted-foreground",children:[r," Season  Week ",c,"  ",n?((y=K==null?void 0:K.conferences.find(f=>f.id===n))==null?void 0:y.name)||"Selected Conference":"All Conferences"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(cs,{value:c.toString(),onValueChange:f=>d(parseInt(f)),children:[e.jsx(ns,{className:"w-32",children:e.jsx(ls,{})}),e.jsx(as,{children:Array.from({length:18},(f,w)=>w+1).map(f=>e.jsx(Re,{value:f.toString(),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{children:["Week ",f]}),f===u&&e.jsx(ee,{variant:"outline",className:"text-xs",children:"Current"})]})},f))})]}),c===u&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(rt,{className:"h-4 w-4"}),e.jsx("span",{children:"Current week"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(X,{variant:"outline",size:"sm",onClick:()=>{et.clearAll(),Z()},disabled:L,children:[e.jsx(Ke,{className:`h-4 w-4 ${L?"animate-spin":""}`}),"Refresh"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(bs,{className:"h-4 w-4"}),e.jsxs("span",{children:[j.length," matchups"]})]})]})]}),R.length>0&&e.jsxs(V,{className:"border-l-4 border-l-red-500",children:[e.jsx(oe,{className:"pb-2",children:e.jsxs(ce,{className:"text-sm flex items-center space-x-2",children:[e.jsx(Je,{className:"h-4 w-4 text-red-500"}),e.jsxs("span",{children:["API Errors (",R.length,")"]})]})}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-1",children:R.map((f,w)=>e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:f},w))})})]}),e.jsxs("div",{className:"grid gap-3",children:[S.map(f=>e.jsx(qi,{matchup:f,isExpanded:h.has(f.id),onToggleExpand:_,detailedData:g.get(f.id),allPlayers:k,loading:N.has(f.id),onViewDetails:w=>t(`/matchups/${w}`)},f.id)),j.length===0&&e.jsx(V,{children:e.jsxs(Y,{className:"py-8 text-center",children:[e.jsx(Je,{className:"h-8 w-8 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No matchups found for the selected filters."})]})})]})]})};var hn="Tabs",[Dh,Bp]=Ft(hn,[_o]),Vi=_o(),[Ah,ga]=Dh(hn),Hi=l.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:c,activationMode:d="automatic",...u}=t,m=El(c),[h,v]=br({prop:n,onChange:a,defaultProp:o??"",caller:hn});return e.jsx(Ah,{scope:r,baseId:bo(),value:h,onValueChange:v,orientation:i,dir:m,activationMode:d,children:e.jsx(fs.div,{dir:m,"data-orientation":i,...u,ref:s})})});Hi.displayName=hn;var Gi="TabsList",Yi=l.forwardRef((t,s)=>{const{__scopeTabs:r,loop:n=!0,...a}=t,o=ga(Gi,r),i=Vi(r);return e.jsx($l,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:n,children:e.jsx(fs.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:s})})});Yi.displayName=Gi;var Ji="TabsTrigger",Xi=l.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...o}=t,i=ga(Ji,r),c=Vi(r),d=Zi(i.baseId,n),u=ec(i.baseId,n),m=n===i.value;return e.jsx(Tl,{asChild:!0,...c,focusable:!a,active:m,children:e.jsx(fs.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...o,ref:s,onMouseDown:Ns(t.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?i.onValueChange(n):h.preventDefault()}),onKeyDown:Ns(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(n)}),onFocus:Ns(t.onFocus,()=>{const h=i.activationMode!=="manual";!m&&!a&&h&&i.onValueChange(n)})})})});Xi.displayName=Ji;var Ki="TabsContent",Qi=l.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,forceMount:a,children:o,...i}=t,c=ga(Ki,r),d=Zi(c.baseId,n),u=ec(c.baseId,n),m=n===c.value,h=l.useRef(m);return l.useEffect(()=>{const v=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(v)},[]),e.jsx(Zt,{present:a||m,children:({present:v})=>e.jsx(fs.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!v,id:u,tabIndex:0,...i,ref:s,style:{...t.style,animationDuration:h.current?"0s":void 0},children:v&&o})})});Qi.displayName=Ki;function Zi(t,s){return`${t}-trigger-${s}`}function ec(t,s){return`${t}-content-${s}`}var Mh=Hi,sc=Yi,tc=Xi,rc=Qi;const ut=Mh,lt=l.forwardRef(({className:t,...s},r)=>e.jsx(sc,{ref:r,className:Ne("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...s}));lt.displayName=sc.displayName;const Me=l.forwardRef(({className:t,...s},r)=>e.jsx(tc,{ref:r,className:Ne("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...s}));Me.displayName=tc.displayName;const Le=l.forwardRef(({className:t,...s},r)=>e.jsx(rc,{ref:r,className:Ne("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Le.displayName=rc.displayName;const Lh=({team1:t,team2:s,status:r,week:n,winningTeam:a,gameTimeRemaining:o,startTime:i,isBye:c})=>{const d=()=>{switch(r){case"live":return e.jsx(ee,{className:"bg-green-500 hover:bg-green-600",children:"Live"});case"completed":return e.jsx(ee,{variant:"secondary",children:"Final"});case"upcoming":return e.jsx(ee,{variant:"outline",children:"Upcoming"});default:return e.jsx(ee,{variant:"secondary",children:r})}};return e.jsxs(V,{className:"mb-4",children:[e.jsxs(oe,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[d(),o&&e.jsxs(ee,{variant:"outline",className:"text-xs",children:[e.jsx(rt,{className:"h-3 w-3 mr-1"}),o]})]}),i&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[i.toLocaleDateString()," at ",i.toLocaleTimeString()]})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(vt,{className:"h-10 w-10",children:[e.jsx(wt,{src:t.logoUrl?`https://sleepercdn.com/avatars/thumbs/${t.logoUrl}`:t.avatar}),e.jsx(Nt,{children:t.name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:`font-bold ${(a==null?void 0:a.id)===t.id?"text-green-600":""}`,children:t.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.owner,"  ",t.record.wins,"-",t.record.losses]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-xl font-bold ${(a==null?void 0:a.id)===t.id?"text-green-600":""}`,children:t.points.toFixed(1)}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Proj: ",t.projectedPoints.toFixed(1)]})]})]}),e.jsxs("div",{className:"text-center py-2",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"VS"}),r==="completed"&&a&&e.jsx(hs,{className:"h-5 w-5 mx-auto mt-1 text-yellow-500"})]}),c||!s?e.jsx("div",{className:"flex items-center justify-center p-3 bg-gray-100 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-muted-foreground",children:"BYE"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Bye Week"})]})}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(vt,{className:"h-10 w-10",children:[e.jsx(wt,{src:s.logoUrl?`https://sleepercdn.com/avatars/thumbs/${s.logoUrl}`:s.avatar}),e.jsx(Nt,{children:s.name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:`font-bold ${(a==null?void 0:a.id)===s.id?"text-green-600":""}`,children:s.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.owner,"  ",s.record.wins,"-",s.record.losses]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-xl font-bold ${(a==null?void 0:a.id)===s.id?"text-green-600":""}`,children:s.points.toFixed(1)}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Proj: ",s.projectedPoints.toFixed(1)]})]})]})]})]})},Ih=t=>{switch(t){case"QB":return"bg-red-100 text-red-800";case"RB":return"bg-green-100 text-green-800";case"WR":return"bg-blue-100 text-blue-800";case"TE":return"bg-yellow-100 text-yellow-800";case"K":return"bg-purple-100 text-purple-800";case"DEF":return"bg-gray-100 text-gray-800";case"FLEX":return"bg-orange-100 text-orange-800";case"SUPER_FLEX":return"bg-pink-100 text-pink-800";case"SFLEX":return"bg-pink-100 text-pink-800";case"BENCH":return"bg-slate-100 text-slate-800";default:return"bg-gray-100 text-gray-800"}},Oh=({playerId:t,name:s,position:r,team:n,points:a,projected:o,status:i,positionSlot:c,isStarter:d,gameTimeRemaining:u,expandable:m=!1,onClick:h})=>{const v=a-o,j=i!=="not_started",b=j&&v>0,g=j&&v<-2,x=()=>{switch(i){case"playing":return"bg-green-100 text-green-800 border-green-300";case"played":return"bg-gray-100 text-gray-800 border-gray-300";case"bye":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"injured":return"bg-red-100 text-red-800 border-red-300";case"not_started":return"bg-blue-100 text-blue-800 border-blue-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},N=()=>b?e.jsx(Rt,{className:"h-4 w-4 text-green-500"}):g?e.jsx(Tu,{className:"h-4 w-4 text-red-500"}):i==="injured"?e.jsx(dn,{className:"h-4 w-4 text-red-500"}):null,p=`
    ${m?"cursor-pointer hover:shadow-md transition-shadow":""}
    ${d?"border-l-4 border-l-blue-500":"border-l-4 border-l-gray-300"}
    ${b?"bg-green-50":g?"bg-red-50":"bg-white"}
  `;return e.jsx(V,{className:p,onClick:m?h:void 0,children:e.jsxs(Y,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx(ee,{className:`text-xs shrink-0 ${Ih(c)}`,children:c==="FLEX"?"W/R/T":c==="SUPER_FLEX"||c==="SFLEX"?"Q/W/R/T":c}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:s}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[r," - ",n,u&&e.jsxs("span",{className:"ml-2",children:[" ",u]})]})]}),e.jsx("div",{className:"shrink-0",children:N()})]}),e.jsxs("div",{className:"text-right shrink-0 ml-3",children:[e.jsx("div",{className:`font-bold text-sm ${b?"text-green-600":g?"text-red-600":""}`,children:a.toFixed(1)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:o.toFixed(1)}),j&&v!==0&&e.jsxs("div",{className:`text-xs ${v>0?"text-green-600":"text-red-600"}`,children:[v>0?"+":"",v.toFixed(1)]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(ee,{variant:"outline",className:`text-xs ${x()}`,children:i.replace("_"," ").toUpperCase()})})]})})},zh=({title:t,data:s,team1Name:r,team2Name:n,height:a=200})=>{if(s.length===0)return e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{className:"text-lg",children:t})}),e.jsx(Y,{children:e.jsx("div",{className:"flex items-center justify-center h-48 text-muted-foreground",children:"No data available"})})]});const o=Math.max(...s.flatMap(h=>[h.team1,...h.team2!==void 0?[h.team2]:[]])),i=Math.min(...s.flatMap(h=>[h.team1,...h.team2!==void 0?[h.team2]:[]])),c=o-i,d={left:60,right:40,top:20,bottom:40},u=h=>(o-h)/c*(a-d.top-d.bottom)+d.top,m=(h,v)=>{const j=v-d.left-d.right;return h/(s.length-1)*j+d.left};return e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{className:"text-lg",children:t})}),e.jsx(Y,{children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"relative w-full overflow-x-auto",children:e.jsx("div",{className:"min-w-[500px] sm:min-w-[600px] md:min-w-[800px] lg:min-w-[1000px]",children:e.jsxs("svg",{width:"100%",height:a+d.bottom+20,className:"overflow-visible",viewBox:`0 0 ${Math.max(500,s.length*70)} ${a+d.bottom+20}`,preserveAspectRatio:"xMidYMid meet",children:[[0,.25,.5,.75,1].map((h,v)=>{const j=d.top+h*(a-d.top-d.bottom),b=o-h*c,g=Math.max(500,s.length*70);return e.jsxs("g",{children:[e.jsx("line",{x1:d.left,y1:j,x2:g-d.right,y2:j,stroke:"#e5e7eb",strokeWidth:"1"}),e.jsx("text",{x:d.left-10,y:j+4,textAnchor:"end",className:"text-xs fill-gray-500",children:b.toFixed(0)})]},v)}),e.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"3",points:s.map((h,v)=>{const j=Math.max(500,s.length*70);return`${m(v,j)},${u(h.team1)}`}).join(" ")}),s.some(h=>h.team2!==void 0)&&e.jsx("polyline",{fill:"none",stroke:"#ef4444",strokeWidth:"3",points:s.filter(h=>h.team2!==void 0).map((h,v)=>{const j=Math.max(500,s.length*70),b=s.indexOf(h);return`${m(b,j)},${u(h.team2)}`}).join(" ")}),s.map((h,v)=>{const j=Math.max(500,s.length*70);return e.jsxs("g",{children:[e.jsx("circle",{cx:m(v,j),cy:u(h.team1),r:"5",fill:"#3b82f6",stroke:"#ffffff",strokeWidth:"2"}),h.team2!==void 0&&e.jsx("circle",{cx:m(v,j),cy:u(h.team2),r:"5",fill:"#ef4444",stroke:"#ffffff",strokeWidth:"2"}),e.jsxs("text",{x:m(v,j),y:a+d.bottom-5,textAnchor:"middle",className:"text-xs fill-gray-500 font-medium",children:["W",h.week]})]},v)})]})})}),e.jsxs("div",{className:"flex justify-center items-center space-x-8 mt-6 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-1 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:r})]}),s.some(h=>h.team2!==void 0)&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-1 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:n})]})]})]})})]})},Bh=()=>{const{matchupId:t}=ra(),s=_r(),{selectedSeason:r,seasonConfigs:n}=Hs(),{toast:a}=Is(),[o,i]=l.useState(null),[c,d]=l.useState({}),[u,m]=l.useState([]),[h,v]=l.useState([]),[j,b]=l.useState(!0),[g,x]=l.useState(!1),[N,p]=l.useState("live-scoring"),[k,T]=l.useState(new Date),P=l.useMemo(()=>n.find(U=>U.year===r),[n,r]),F=async()=>{if(!(!t||!r||!P))try{b(!0);const U=await et.getPlayers();d(U);const se=typeof P.seasonId=="string"?parseInt(P.seasonId):P.seasonId||r,K=await Gt.getDetailedMatchup(parseInt(t),se);if(K){try{const B=r,Z=K.week,ae=[...K.teams[0].starters,...K.teams[0].bench,...K.teams[1]?[...K.teams[1].starters,...K.teams[1].bench]:[]],O=await ke.fetchPlayerProjections(B,Z),_={};O.forEach(S=>{ae.includes(S.player_id)&&S.stats.pts_ppr!==void 0&&(_[S.player_id]=S.stats.pts_ppr)}),K.teams.forEach(S=>{S.starters.forEach(y=>{_[y]!==void 0&&(S.playersProjected[y]=_[y])}),S.bench.forEach(y=>{_[y]!==void 0&&(S.playersProjected[y]=_[y])}),S.projectedPoints=S.starters.reduce((y,f)=>y+(S.playersProjected[f]||0),0)})}catch(B){console.error("Error fetching player projections:",B)}if(i(K),K.teams[1]){const[B,Z]=await Promise.all([Gt.getHeadToHeadHistory(K.teams[0].id,K.teams[1].id,se),Gt.getTeamWeeklyPerformance(K.teams[0].id,K.teams[1].id,se)]);m(B),v(Z)}else{const B=await Gt.getTeamWeeklyPerformance(K.teams[0].id,null,se);v(B)}}T(new Date)}catch(U){console.error("Error loading matchup data:",U),a({title:"Error Loading Matchup",description:"Failed to load matchup details",variant:"destructive"})}finally{b(!1)}},L=async()=>{x(!0),await F(),x(!1)};if(l.useEffect(()=>{F()},[t,r,P]),l.useEffect(()=>{if((o==null?void 0:o.status)==="live"){const U=setInterval(L,3e4);return()=>clearInterval(U)}},[o==null?void 0:o.status]),j)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(X,{variant:"ghost",onClick:()=>s("/matchups"),children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Back to Matchups"]})}),e.jsx(V,{children:e.jsxs(Y,{className:"py-8 text-center",children:[e.jsx(Ke,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),e.jsx("p",{children:"Loading matchup details..."})]})})]});if(!o)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(X,{variant:"ghost",onClick:()=>s("/matchups"),children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Back to Matchups"]})}),e.jsx(V,{children:e.jsxs(Y,{className:"py-8 text-center",children:[e.jsx(dn,{className:"h-8 w-8 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{children:"Matchup not found"})]})})]});const[E,R]=o.teams,A=o.status==="completed"&&R?E.points>R.points?E:R:null;return e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(X,{variant:"ghost",onClick:()=>s("/matchups"),className:"shrink-0",children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Matchups"}),e.jsx("span",{className:"sm:hidden",children:"Back"})]}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h1",{className:"text-xl md:text-2xl font-bold truncate",children:["Week ",o.week," Matchup",o.playoffRound&&` - ${o.playoffRound}`]}),e.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[o.conference.name,"  ",r," Season"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between md:justify-end space-x-2",children:[e.jsxs("div",{className:"text-xs text-muted-foreground md:order-2",children:["Updated: ",k.toLocaleTimeString()]}),e.jsxs(X,{variant:"outline",size:"sm",onClick:L,disabled:g,className:"md:order-1",children:[e.jsx(Ke,{className:`h-4 w-4 ${g?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline ml-2",children:"Refresh"})]})]})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(Lh,{team1:E,team2:R,status:o.status,week:o.week,winningTeam:A,gameTimeRemaining:o.gameTimeRemaining,startTime:o.startTime,isBye:o.isBye})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(Uh,{matchup:o,winningTeam:A})}),e.jsxs(qr,{defaultOpen:!1,className:"md:block",children:[e.jsx(Vr,{asChild:!0,className:"md:hidden",children:e.jsxs(X,{variant:"outline",className:"w-full",children:[e.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Quick Stats"]})}),e.jsx(Hr,{className:"md:block",children:e.jsx("div",{className:"mt-2 md:mt-0",children:e.jsx(Wh,{matchup:o})})})]}),e.jsxs(ut,{value:N,onValueChange:p,className:"space-y-4",children:[e.jsxs(lt,{className:"grid w-full grid-cols-3 h-auto",children:[e.jsxs(Me,{value:"live-scoring",className:"text-xs sm:text-sm",children:[e.jsx(Bt,{className:"h-4 w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Live Scoring"}),e.jsx("span",{className:"sm:hidden",children:"Live"})]}),e.jsxs(Me,{value:"team-analysis",className:"text-xs sm:text-sm",children:[e.jsx(Wn,{className:"h-4 w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Team Analysis"}),e.jsx("span",{className:"sm:hidden",children:"Analysis"})]}),e.jsxs(Me,{value:"head-to-head",className:"text-xs sm:text-sm",children:[e.jsx(hs,{className:"h-4 w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Head-to-Head"}),e.jsx("span",{className:"sm:hidden",children:"H2H"})]})]}),e.jsx(Le,{value:"live-scoring",className:"space-y-4",children:e.jsx(qh,{matchup:o,allPlayers:c})}),e.jsx(Le,{value:"team-analysis",className:"space-y-4",children:e.jsx(Vh,{matchup:o,weeklyPerformanceData:h})}),e.jsx(Le,{value:"head-to-head",className:"space-y-4",children:e.jsx(Hh,{matchup:o,historicalMatchups:u})})]}),e.jsx("div",{className:"lg:hidden",children:e.jsxs(qr,{children:[e.jsx(Vr,{asChild:!0,children:e.jsxs(X,{variant:"outline",className:"w-full",children:[e.jsx(Ou,{className:"h-4 w-4 mr-2"}),"Matchup Insights"]})}),e.jsx(Hr,{children:e.jsx("div",{className:"mt-2"})})]})}),e.jsx("div",{className:"hidden lg:block"})]})},Uh=({matchup:t,winningTeam:s})=>{const[r,n]=t.teams,a=()=>{switch(t.status){case"live":return e.jsx(ee,{className:"bg-green-500 hover:bg-green-600",children:"Live"});case"completed":return e.jsx(ee,{variant:"secondary",children:"Final"});case"upcoming":return e.jsx(ee,{variant:"outline",children:"Upcoming"});default:return e.jsx(ee,{variant:"secondary",children:t.status})}};return e.jsxs(V,{children:[e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[a(),t.gameTimeRemaining&&e.jsxs(ee,{variant:"outline",className:"text-xs",children:[e.jsx(rt,{className:"h-3 w-3 mr-1"}),t.gameTimeRemaining]})]}),t.startTime&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.startTime.toLocaleDateString()," at ",t.startTime.toLocaleTimeString()]})]})}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-center",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(za,{team:r,isWinner:(s==null?void 0:s.id)===r.id,matchupStatus:t.status,isLeftSide:!0})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2",children:"VS"}),t.status==="completed"&&s&&e.jsx(hs,{className:"h-6 w-6 mx-auto text-yellow-500"}),t.scoreDifferential>0&&t.status!=="upcoming"&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[t.scoreDifferential.toFixed(1)," pt difference"]})]}),e.jsx("div",{className:"md:col-span-2",children:t.isBye||!n?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:"BYE"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Bye Week"})]}):e.jsx(za,{team:n,isWinner:(s==null?void 0:s.id)===n.id,matchupStatus:t.status,isLeftSide:!1})})]})})]})},za=({team:t,isWinner:s,matchupStatus:r="completed",isLeftSide:n=!0})=>{const a=r==="upcoming",o=t.logoUrl?`https://sleepercdn.com/avatars/thumbs/${t.logoUrl}`:t.avatar;return n?e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs(vt,{className:"h-12 w-12",children:[e.jsx(wt,{src:o}),e.jsx(Nt,{children:t.name.charAt(0)})]}),e.jsxs("div",{className:"flex-1 text-left ml-3",children:[e.jsx("div",{className:`text-lg font-bold ${s&&!a?"text-green-600":""}`,children:t.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.owner}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.record.wins,"-",t.record.losses]})]}),e.jsxs("div",{className:"text-right",children:[a?e.jsx("div",{className:"text-3xl font-bold text-muted-foreground",children:"--"}):e.jsx("div",{className:`text-3xl font-bold ${s?"text-green-600":""}`,children:t.points.toFixed(1)}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Proj: ",t.projectedPoints.toFixed(1)]})]})]}):e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"text-left",children:[a?e.jsx("div",{className:"text-3xl font-bold text-muted-foreground",children:"--"}):e.jsx("div",{className:`text-3xl font-bold ${s?"text-green-600":""}`,children:t.points.toFixed(1)}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Proj: ",t.projectedPoints.toFixed(1)]})]}),e.jsxs("div",{className:"flex-1 text-right mr-3",children:[e.jsx("div",{className:`text-lg font-bold ${s&&!a?"text-green-600":""}`,children:t.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.owner}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.record.wins,"-",t.record.losses]})]}),e.jsxs(vt,{className:"h-12 w-12",children:[e.jsx(wt,{src:o}),e.jsx(Nt,{children:t.name.charAt(0)})]})]})},Wh=({matchup:t})=>{const[s,r]=t.teams,n=c=>t.status==="upcoming"?c.starters.length:c.starters.filter(d=>!0).length,a=c=>t.status==="upcoming"?0:c.bench.reduce((d,u)=>d+(c.playersPoints[u]||0),0),o=t.status==="upcoming",i=[{label:o?"Projected Points":"Projected vs Actual",value:r?o?`${s.projectedPoints.toFixed(1)} vs ${r.projectedPoints.toFixed(1)}`:`${s.points.toFixed(1)}/${s.projectedPoints.toFixed(1)} vs ${r.points.toFixed(1)}/${r.projectedPoints.toFixed(1)}`:o?`${s.projectedPoints.toFixed(1)}`:`${s.points.toFixed(1)} / ${s.projectedPoints.toFixed(1)}`,mobileValue:r?o?`${s.projectedPoints.toFixed(1)}
vs
${r.projectedPoints.toFixed(1)}`:`${s.points.toFixed(1)}/${s.projectedPoints.toFixed(1)}
vs
${r.points.toFixed(1)}/${r.projectedPoints.toFixed(1)}`:o?`${s.projectedPoints.toFixed(1)}`:`${s.points.toFixed(1)} / ${s.projectedPoints.toFixed(1)}`},{label:o?"Starters Set":"Players Playing",value:r?`${n(s)} vs ${n(r)}`:`${n(s)}`,mobileValue:r?`${n(s)} vs ${n(r)}`:`${n(s)}`},{label:o?"Bench Size":"Bench Points",value:r?o?`${s.bench.length} vs ${r.bench.length}`:`${a(s).toFixed(1)} vs ${a(r).toFixed(1)}`:o?`${s.bench.length}`:`${a(s).toFixed(1)}`,mobileValue:r?o?`${s.bench.length} vs ${r.bench.length}`:`${a(s).toFixed(1)} vs ${a(r).toFixed(1)}`:o?`${s.bench.length}`:`${a(s).toFixed(1)}`},{label:"Season Record",value:r?`${s.record.wins}-${s.record.losses} vs ${r.record.wins}-${r.record.losses}`:`${s.record.wins}-${s.record.losses}`,mobileValue:r?`${s.record.wins}-${s.record.losses} vs ${r.record.wins}-${r.record.losses}`:`${s.record.wins}-${s.record.losses}`}];return e.jsx(V,{children:e.jsxs(Y,{className:"py-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3 md:hidden",children:i.map((c,d)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:c.label}),e.jsx("div",{className:"text-sm font-semibold whitespace-pre-line",children:c.mobileValue})]},d))}),e.jsx("div",{className:"hidden md:grid md:grid-cols-4 gap-4 text-center",children:i.map((c,d)=>e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:c.label}),e.jsx("div",{className:"text-lg font-semibold",children:c.value})]},d))})]})})},qh=({matchup:t,allPlayers:s})=>{const[r,n]=t.teams,a=c=>{const d=s[c],u=r.playersPoints[c]||0,m=(n==null?void 0:n.playersPoints[c])||0,h=u||m,v=r.playersProjected[c]||0,j=(n==null?void 0:n.playersProjected[c])||0,b=v||j,g=t.status==="upcoming",x=g?0:h,N=!g&&h>0;return{playerId:c,name:d?`${d.first_name||""} ${d.last_name||""}`.trim():"Unknown",position:(d==null?void 0:d.position)||"N/A",team:(d==null?void 0:d.team)||"N/A",points:x,projected:b,status:g?"not_started":N?"played":"not_started",isOutperforming:g?!1:h>b,variance:g?0:h-b}},o=(c,d,u=!0)=>{const m=a(c);return e.jsx(Oh,{playerId:c,name:m.name,position:m.position,team:m.team,points:m.points,projected:m.projected,status:m.status,positionSlot:d,isStarter:u,gameTimeRemaining:m.gameTimeRemaining,expandable:!1},c)},i=(c,d)=>{const u=["QB","RB","RB","WR","WR","WR","TE","FLEX","SFLEX","DEF"];return e.jsxs(V,{children:[e.jsx(oe,{className:"pb-3",children:e.jsxs(ce,{className:"text-lg flex items-center",children:[e.jsx(bs,{className:"h-5 w-5 mr-2"}),d]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Starting Lineup"}),e.jsx("div",{className:"space-y-2",children:c.starters.map((m,h)=>o(m,u[h]||"FLEX",!0))})]}),e.jsxs(qr,{defaultOpen:!1,children:[e.jsx(Vr,{asChild:!0,children:e.jsxs(X,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),"Show Bench (",c.bench.length,")"]})}),e.jsx(Hr,{children:e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Bench"}),e.jsx("div",{className:"space-y-2",children:c.bench.map(m=>o(m,"BENCH",!1))})]})})]})]})]})};return e.jsxs("div",{className:"space-y-4 lg:grid lg:grid-cols-2 lg:gap-6 lg:space-y-0",children:[i(r,r.name),n&&i(n,n.name)]})},Vh=({matchup:t,weeklyPerformanceData:s})=>{const[r,n]=t.teams;return e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.length>0?e.jsx(zh,{title:"Weekly Performance Comparison",data:s,team1Name:r.name,team2Name:(n==null?void 0:n.name)||"BYE",height:200}):e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{children:"Weekly Performance Comparison"})}),e.jsx(Y,{className:"py-8 text-center",children:e.jsx("div",{className:"text-muted-foreground",children:"No completed matchups found for this season"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(Ba,{teamName:r.name,scores:s.map(a=>a.team1).filter(a=>a>0)}),n&&e.jsx(Ba,{teamName:n.name,scores:s.map(a=>a.team2).filter(a=>a!==void 0&&a>0)})]})]})},Hh=({matchup:t,historicalMatchups:s})=>{const[r,n]=t.teams,a=l.useMemo(()=>n?s.filter(c=>c.status==="complete").reduce((c,d)=>(d.team1Score>d.team2Score?c.team1Wins++:d.team2Score>d.team1Score?c.team2Wins++:c.ties++,c),{team1Wins:0,team2Wins:0,ties:0}):{team1Wins:0,team2Wins:0,ties:0},[s,n]),o=l.useMemo(()=>{const i=s.filter(d=>d.status==="complete");if(i.length===0)return{team1Avg:0,team2Avg:0};const c=i.reduce((d,u)=>({team1Total:d.team1Total+u.team1Score,team2Total:d.team2Total+u.team2Score}),{team1Total:0,team2Total:0});return{team1Avg:c.team1Total/i.length,team2Avg:c.team2Total/i.length}},[s]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center",children:[e.jsx(hs,{className:"h-5 w-5 mr-2"}),"All-Time Head-to-Head Record"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Showing completed games across all seasons"})]}),e.jsx(Y,{children:n?e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.team1Wins}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.name," Wins"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:a.ties}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Ties"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.team2Wins}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.name," Wins"]})]})]}):e.jsx("div",{className:"text-center text-muted-foreground",children:"No head-to-head history available for bye week"})})]}),s.length>0&&e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center",children:[e.jsx(st,{className:"h-5 w-5 mr-2"}),"Previous Matchups"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Showing completed and scheduled matchups across all seasons"})]}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-2",children:s.slice(0,10).map((i,c)=>{const d=i.status==="complete";return e.jsxs("div",{className:`flex items-center justify-between p-3 ${d?"bg-gray-50":"bg-blue-50"} rounded-lg`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(ee,{variant:"outline",children:["Week ",i.week]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:i.season}),!d&&e.jsx(ee,{variant:"secondary",className:"bg-blue-100",children:"Upcoming"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[i.team1Score.toFixed(1)," - ",i.team2Score.toFixed(1)]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Winner: ",i.winner]})]}),i.team1Score>i.team2Score?e.jsx(Ur,{className:"h-4 w-4 text-blue-500"}):e.jsx(Ur,{className:"h-4 w-4 text-red-500"})]}):e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium text-blue-600",children:[e.jsx(rt,{className:"h-4 w-4 inline mr-1"}),"Scheduled"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Not yet played"})]})})]},c)})})})]}),e.jsxs(V,{children:[e.jsx(oe,{children:e.jsxs(ce,{className:"flex items-center",children:[e.jsx(Rt,{className:"h-5 w-5 mr-2"}),"Matchup Trends"]})}),e.jsx(Y,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Average Scoring in Matchups"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.name,": ",o.team1Avg.toFixed(1)," pts/game"]}),n&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.name,": ",o.team2Avg.toFixed(1)," pts/game"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Notable Performances"}),s.filter(i=>i.status==="complete").length>0?e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Highest scoring: ",Math.max(...s.filter(i=>i.status==="complete").map(i=>Math.max(i.team1Score,i.team2Score))).toFixed(1)," pts"]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No historical data available"})]})]})})]})]})},Ba=({teamName:t,scores:s})=>{const n=(a=>{if(a.length===0)return{average:0,floor:0,ceiling:0,consistency:"No Data"};const o=a.reduce((v,j)=>v+j,0)/a.length,i=Math.min(...a),c=Math.max(...a),d=a.reduce((v,j)=>v+Math.pow(j-o,2),0)/a.length,m=Math.sqrt(d)/o;let h="Medium";return m<.15?h="High":m>.25&&(h="Low"),{average:o.toFixed(1),floor:i.toFixed(1),ceiling:c.toFixed(1),consistency:h}})(s);return e.jsxs(V,{children:[e.jsx(oe,{children:e.jsxs(ce,{className:"text-lg",children:[t," Metrics"]})}),e.jsxs(Y,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Average Score"}),e.jsx("span",{className:"font-medium",children:n.average})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Floor"}),e.jsx("span",{className:"font-medium",children:n.floor})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Ceiling"}),e.jsx("span",{className:"font-medium",children:n.ceiling})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Consistency"}),e.jsx("span",{className:"font-medium",children:n.consistency})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Games Played"}),e.jsx("span",{className:"font-medium",children:s.length})]})]})]})},Cs=l.forwardRef(({className:t,type:s,...r},n)=>e.jsx("input",{type:s,className:Ne("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Cs.displayName="Input";const Gh=()=>{var N;const{selectedSeason:t,selectedConference:s,currentSeasonConfig:r}=Hs(),{toast:n}=Is(),[a,o]=l.useState(""),[i,c]=l.useState([]),[d,u]=l.useState(!0),[m,h]=l.useState(null),v=async()=>{u(!0),h(null);try{console.log("Fetching teams data for season:",t);const p=await H.getSeasons({filters:[{column:"season_year",operator:"eq",value:t.toString()}]});if(p.error||!p.data||p.data.length===0)throw new Error("Season not found");const k=p.data[0].id;let T=r.conferences.filter(B=>B.dbConferenceId);if(s&&(T=T.filter(B=>B.id===s)),T.length===0){console.log("No conferences found for selected season"),c([]);return}const P=T.map(B=>B.dbConferenceId),F=await H.getTeams({});if(F.error||!F.data)throw new Error("Failed to fetch teams");const L=await H.getTeamConferenceJunctions({filters:[{column:"conference_id",operator:"in",value:P}]});if(L.error||!L.data)throw new Error("Failed to fetch team conference mappings");const E=L.data.map(B=>B.team_id),R=F.data.filter(B=>E.includes(B.id)),A=await H.getTeamRecords({filters:[{column:"season_id",operator:"eq",value:k},{column:"conference_id",operator:"in",value:P}]});if(A.error||!A.data)throw new Error("Failed to fetch team records");const U=await H.getConferences({filters:[{column:"id",operator:"in",value:P}]}),se=new Map;U.data&&U.data.forEach(B=>{se.set(B.id,B.conference_name)});const K=[];for(const B of R){const Z=A.data.find(ae=>ae.team_id===B.id);if(Z){const ae=L.data.find(y=>y.team_id===B.id),O=ae?se.get(ae.conference_id):"Unknown",_=j(Z.wins,Z.losses),S=B.team_logourl?`https://sleepercdn.com/avatars/thumbs/${B.team_logourl}`:null;K.push({id:B.id.toString(),teamName:B.team_name,ownerName:B.owner_name,coOwnerName:B.co_owner_name||void 0,ownerAvatar:S,conference:O,record:{wins:Z.wins,losses:Z.losses,ties:0},pointsFor:Z.points_for,pointsAgainst:Z.points_against,rank:0,streak:_})}}K.sort((B,Z)=>B.record.wins!==Z.record.wins?Z.record.wins-B.record.wins:Z.pointsFor-B.pointsFor),K.forEach((B,Z)=>{B.rank=Z+1}),console.log("Final combined teams data:",K),c(K)}catch(p){console.error("Error fetching teams data:",p),h(p instanceof Error?p.message:"Failed to load teams data"),n({title:"Error Loading Teams",description:"Failed to load team data. Please try again.",variant:"destructive"})}finally{u(!1)}},j=(p,k)=>p>k?`W${Math.min(p-k,5)}`:k>p?`L${Math.min(k-p,5)}`:"T1";l.useEffect(()=>{v()},[t,s]);const b=i.filter(p=>a===""||p.teamName.toLowerCase().includes(a.toLowerCase())||p.ownerName.toLowerCase().includes(a.toLowerCase())||p.coOwnerName&&p.coOwnerName.toLowerCase().includes(a.toLowerCase())),g=(p,k)=>{const T=p/(p+k);return T>=.7?"default":T>=.5?"secondary":"destructive"},x=p=>p.startsWith("W")?"text-green-600":p.startsWith("L")?"text-red-600":"text-muted-foreground";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(bs,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Teams"})]}),e.jsxs("p",{className:"text-muted-foreground",children:[t," Season  ",s?(N=r.conferences.find(p=>p.id===s))==null?void 0:N.name:"All Conferences","  ",b.length," teams"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Cs,{placeholder:"Search teams or owners...",value:a,onChange:p=>o(p.target.value),className:"pl-10"})]}),e.jsx(X,{variant:"outline",onClick:()=>o(""),children:"Clear"}),e.jsxs(X,{variant:"outline",onClick:v,disabled:d,children:[e.jsx(Ke,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),"Refresh"]})]}),d&&e.jsx(V,{children:e.jsxs(Y,{className:"py-12 text-center",children:[e.jsx(Ke,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4 animate-spin"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Loading Teams"}),e.jsx("p",{className:"text-muted-foreground",children:"Fetching team data from database..."})]})}),m&&!d&&e.jsx(V,{children:e.jsxs(Y,{className:"py-12 text-center",children:[e.jsx(Je,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Teams"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:m}),e.jsxs(X,{onClick:v,children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}),!d&&!m&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(p=>e.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(oe,{className:"pb-2",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(vt,{className:"h-10 w-10",children:[e.jsx(wt,{src:p.ownerAvatar||void 0}),e.jsx(Nt,{className:"bg-primary/10",children:p.ownerName.split(" ").map(k=>k[0]).join("").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx(ce,{className:"text-base leading-tight",children:p.teamName}),e.jsxs(Ce,{className:"text-sm",children:[p.ownerName,p.coOwnerName&&` & ${p.coOwnerName}`]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[p.rank<=3&&e.jsx(hs,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("span",{className:"text-sm font-semibold",children:["#",p.rank]})]})]})}),e.jsxs(Y,{className:"space-y-3",children:[e.jsx(zt,{conferenceName:p.conference,size:"sm"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Record"}),e.jsxs(ee,{variant:g(p.record.wins,p.record.losses),children:[p.record.wins,"-",p.record.losses,p.record.ties>0&&`-${p.record.ties}`]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Streak"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Rt,{className:`h-3 w-3 ${x(p.streak)}`}),e.jsx("span",{className:`text-sm font-semibold ${x(p.streak)}`,children:p.streak})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Points For"}),e.jsx("p",{className:"font-semibold",children:p.pointsFor.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Points Against"}),e.jsx("p",{className:"font-semibold",children:p.pointsAgainst.toFixed(1)})]})]}),e.jsx(Ts,{to:`/teams/${p.id}`,className:"w-full",children:e.jsxs(X,{variant:"outline",className:"w-full text-sm py-1.5",children:[e.jsx(cn,{className:"mr-2 h-3 w-3"}),"View Team Details"]})})]})]},p.id))}),!d&&!m&&b.length===0&&e.jsx(V,{children:e.jsxs(Y,{className:"py-12 text-center",children:[e.jsx(bs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No teams found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"No teams match your current search criteria."}),e.jsx(X,{variant:"outline",onClick:()=>o(""),children:"Clear Search"})]})}),!d&&!m&&b.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(V,{children:e.jsxs(oe,{className:"pb-2",children:[e.jsx(Ce,{children:"Average Points For"}),e.jsx(ce,{className:"text-2xl",children:(b.reduce((p,k)=>p+k.pointsFor,0)/b.length).toFixed(1)})]})}),e.jsx(V,{children:e.jsxs(oe,{className:"pb-2",children:[e.jsx(Ce,{children:"Highest Scoring Team"}),e.jsx(ce,{className:"text-lg",children:b.reduce((p,k)=>p.pointsFor>k.pointsFor?p:k).teamName})]})})]})]})},nc=({transaction:t})=>{const s=()=>{switch(t.type){case"trade":return e.jsx(hd,{className:"h-4 w-4"});case"free_agent":return e.jsx(zr,{className:"h-4 w-4"});case"waiver":return e.jsx(Rt,{className:"h-4 w-4"});default:return e.jsx(gr,{className:"h-4 w-4"})}},r=()=>{switch(t.type){case"trade":return"bg-blue-100 text-blue-800";case"free_agent":return"bg-green-100 text-green-800";case"waiver":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},n=()=>{switch(t.status){case"complete":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},a=i=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).format(i),o=i=>{switch(i){case"free_agent":return"Free Agent";case"waiver":return"Waiver";case"trade":return"Trade";default:return i.charAt(0).toUpperCase()+i.slice(1)}};return e.jsxs(V,{className:"mb-4 hover:shadow-md transition-shadow",children:[e.jsx(oe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`p-2 rounded-full ${r()}`,children:s()}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:r(),children:o(t.type)}),e.jsxs(ee,{variant:"outline",children:["Week ",t.week]}),e.jsx(ee,{className:n(),children:t.status})]}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1 text-sm text-muted-foreground",children:[e.jsx(st,{className:"h-3 w-3"}),e.jsx("span",{children:a(t.date)})]})]})]}),t.waiverBid&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-muted-foreground",children:[e.jsx(qn,{className:"h-3 w-3"}),e.jsxs("span",{children:["$",t.waiverBid]})]})]})}),e.jsx(Y,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-foreground",children:t.details})}),t.teams.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Teams:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.teams.map((i,c)=>e.jsx(ee,{variant:"secondary",className:"text-xs",children:i},c))})]}),(t.players.added.length>0||t.players.dropped.length>0)&&e.jsxs("div",{className:"space-y-2",children:[t.players.added.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground mb-1 flex items-center",children:[e.jsx(zr,{className:"h-3 w-3 mr-1 text-green-600"}),"Added:"]}),e.jsx("div",{className:"space-y-1",children:t.players.added.map((i,c)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:i.name}),e.jsxs(ee,{variant:"outline",className:"text-xs",children:["to ",i.team]})]},c))})]}),t.players.dropped.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground mb-1 flex items-center",children:[e.jsx(ru,{className:"h-3 w-3 mr-1 text-red-600"}),"Dropped:"]}),e.jsx("div",{className:"space-y-1",children:t.players.dropped.map((i,c)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:i.name}),e.jsxs(ee,{variant:"outline",className:"text-xs",children:["from ",i.team]})]},c))})]})]}),t.draftPicks.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Draft Picks:"}),e.jsx("div",{className:"space-y-1",children:t.draftPicks.map((i,c)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium",children:[i.season," Round ",i.round]}),e.jsxs("span",{className:"text-muted-foreground ml-2",children:["(Roster ",i.previous_owner_id,"  Roster ",i.owner_id,")"]})]},c))})]}),t.waiverBudget.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground mb-1 flex items-center",children:[e.jsx(qn,{className:"h-3 w-3 mr-1"}),"FAAB Transfers:"]}),e.jsx("div",{className:"space-y-1",children:t.waiverBudget.map((i,c)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium",children:["$",i.amount]}),e.jsxs("span",{className:"text-muted-foreground ml-2",children:["(Roster ",i.sender,"  Roster ",i.receiver,")"]})]},c))})]}),t.notes&&e.jsxs(e.Fragment,{children:[e.jsx(ma,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Notes:"}),e.jsx("p",{className:"text-sm italic text-muted-foreground",children:t.notes})]})]})]})})]})},Yh=()=>{const{teamId:t}=ra(),{selectedSeason:s,currentSeasonConfig:r}=Hs(),n=_r(),[a,o]=l.useState("roster"),[i,c]=l.useState(null),[d,u]=l.useState([]),[m,h]=l.useState(!1),[v,j]=l.useState([]),[b,g]=l.useState(!1),[x,N]=l.useState(null),[p,k]=l.useState(null),[T,P]=l.useState(0),[F,L]=l.useState(null),[E,R]=l.useState(!0),[A,U]=l.useState(null),{toast:se}=Is();l.useEffect(()=>{t&&r&&K(parseInt(t))},[t,r]),l.useEffect(()=>{a==="transactions"&&i&&d.length===0&&B()},[a,i]),l.useEffect(()=>{a==="schedule"&&i&&v.length===0&&Z()},[a,i,s]),l.useEffect(()=>{(a==="schedule"||a==="performance")&&i&&!x&&ae()},[a,i,s]),l.useEffect(()=>{a==="performance"&&i&&!p&&O()},[a,i,s]),l.useEffect(()=>{a==="performance"&&i&&T===0&&_()},[a,i,s]),l.useEffect(()=>{i&&!F&&S()},[i,s]),l.useEffect(()=>{v.length>0&&j([]),x&&N(null)},[s]),l.useEffect(()=>{k(null),P(0),L(null)},[s]);const K=async Q=>{try{R(!0),U(null),console.log(`Fetching data for team ID: ${Q}`);const D=await H.getTeams({filters:[{column:"id",operator:"eq",value:Q}]});if(D.error||!D.data||D.data.length===0)throw new Error("Team not found");const de=D.data[0];console.log("Team data:",de);const xe=await H.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:Q}]});if(xe.error||!xe.data||xe.data.length===0)throw new Error("Team conference mapping not found");const J=xe.data[0],he=J.roster_id;console.log("Junction data:",J,"Roster ID:",he),console.log("All junctions for this team:",xe.data);const pe=await H.getConferences({filters:[{column:"id",operator:"eq",value:J.conference_id}]});if(pe.error||!pe.data||pe.data.length===0)throw new Error("Conference not found");const _e=pe.data[0];console.log("Conference data:",_e),console.log(`Fetching Sleeper data for league ${_e.league_id}, roster ${he}`);const ye=await ke.getTeamRosterData(_e.league_id,he);c({...ye,teamData:de,conferenceData:_e}),console.log("Successfully loaded team roster data")}catch(D){console.error("Error fetching team data:",D);const de=D instanceof Error?D.message:"Failed to load team data";U(de),se({title:"Error",description:de,variant:"destructive"})}finally{R(!1)}},B=async()=>{if(i)try{h(!0),console.log(`Fetching transactions for team ${i.teamData.team_name} across all conferences`);const Q=await H.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:i.teamData.id}]});if(Q.error||!Q.data||Q.data.length===0)throw new Error("Team conference mappings not found");const D=Q.data.map(ve=>ve.conference_id);console.log(`Team participates in conferences: ${D.join(", ")}`);const de=await H.getTransactions({filters:[{column:"conference_id",operator:"in",value:D}],orderBy:{column:"created_at",ascending:!1}});if(de.error||!de.data)throw new Error(de.error||"Failed to fetch transactions");const xe=await H.getTeams({}),J=await H.getTeamConferenceJunctions({filters:[{column:"conference_id",operator:"in",value:D}]}),he=await H.getAllPlayersForMapping(),pe=new Map;he.forEach(ve=>{ve.sleeper_id&&pe.set(String(ve.sleeper_id),ve.player_name)});const ye=(await Promise.all(de.data.map(async ve=>{var Ue,Ze,Xe;let we={};try{we=typeof ve.data=="string"?JSON.parse(ve.data):ve.data||{}}catch(me){console.warn("Failed to parse transaction data:",me)}const ws=i.teamData.id,Te=ve.conference_id,ze=we.roster_ids||[],ks=(Ue=Q.data)==null?void 0:Ue.find(me=>me.team_id===ws&&me.conference_id===Te);if(!ks||!ze.includes(ks.roster_id))return null;const ss=me=>{var ts;const Pe=(ts=J.data)==null?void 0:ts.find(Oe=>Oe.roster_id.toString()===me.toString()&&Oe.conference_id===ve.conference_id);if(Pe&&xe.data){const Oe=xe.data.find(qs=>qs.id===Pe.team_id);return(Oe==null?void 0:Oe.team_name)||"Unknown Team"}return"Unknown Team"},De=[],Ee=[],Qe=me=>{const Pe=String(me);return pe.get(Pe)||`Player ${Pe}`};if(we.adds)for(const[me,Pe]of Object.entries(we.adds)){const ts=Qe(me),Oe=ss(Pe);De.push({name:ts,team:Oe})}if(we.drops)for(const[me,Pe]of Object.entries(we.drops)){const ts=Qe(me),Oe=ss(Pe);Ee.push({name:ts,team:Oe})}let ys="";const Ks=we.type||ve.type,Ws=new Set;we.roster_ids&&we.roster_ids.forEach(me=>{const Pe=ss(me);Pe!=="Unknown Team"&&Ws.add(Pe)});const $s=i.teamData.team_name,te=((Xe=(Ze=(await H.getConferences({filters:[{column:"id",operator:"eq",value:ve.conference_id}]})).data)==null?void 0:Ze[0])==null?void 0:Xe.conference_name)||"Unknown Conference";switch(Ks){case"trade":if(De.length>0||Ee.length>0){const me=[];De.forEach(Pe=>me.push(`${Pe.name} to ${Pe.team}`)),Ee.forEach(Pe=>me.push(`${Pe.name} from ${Pe.team}`)),Ws.size>1?ys=`[${te}] Trade between ${Array.from(Ws).join(" and ")}: ${me.join(", ")}`:ys=`[${te}] ${$s} trade: ${me.join(", ")}`}else if(we.draft_picks&&we.draft_picks.length>0){const me=we.draft_picks.map(Pe=>`${Pe.season} Round ${Pe.round} pick`);ys=`[${te}] Trade involving ${me.join(", ")}`}else ys=`[${te}] Trade between ${Array.from(Ws).join(" and ")}`;break;case"waiver":De.length>0&&Ee.length>0?ys=`[${te}] ${$s} claimed ${De.map(me=>me.name).join(", ")} from waivers, dropped ${Ee.map(me=>me.name).join(", ")}`:De.length>0?ys=`[${te}] ${$s} claimed ${De.map(me=>me.name).join(", ")} from waivers`:Ee.length>0?ys=`[${te}] ${$s} dropped ${Ee.map(me=>me.name).join(", ")} to waivers`:ys=`[${te}] ${$s} made a waiver claim`;break;case"free_agent":De.length>0&&Ee.length>0?ys=`[${te}] ${$s} added ${De.map(me=>me.name).join(", ")}, dropped ${Ee.map(me=>me.name).join(", ")}`:De.length>0?ys=`[${te}] ${$s} added ${De.map(me=>me.name).join(", ")} from free agency`:Ee.length>0?ys=`[${te}] ${$s} dropped ${Ee.map(me=>me.name).join(", ")}`:ys=`[${te}] ${$s} made a free agent transaction`;break;default:ys=`[${te}] ${$s} completed a ${Ks||"transaction"}`}const He=we.type==="trade"?"trade":we.type==="waiver"?"waiver":we.type==="free_agent"?"free_agent":"commissioner";return{id:ve.id.toString(),type:He,date:new Date(ve.created_at||new Date),details:ys,teams:[$s],players:{added:De.map(me=>({id:"",name:me.name,team:me.team})),dropped:Ee.map(me=>({id:"",name:me.name,team:me.team}))},week:we.leg||0,status:"completed",rosterIds:we.roster_ids||[],draftPicks:we.draft_picks||[],waiverBudget:we.waiver_budget||[]}}))).filter(ve=>ve!==null);u(ye),console.log(`Loaded ${ye.length} transactions for this team across all conferences`),se({title:"Transactions Loaded",description:`Found ${ye.length} transactions for this team across all seasons`})}catch(Q){console.error("Error fetching transactions:",Q);const D=Q instanceof Error?Q.message:"Failed to load transactions";se({title:"Error Loading Transactions",description:D,variant:"destructive"})}finally{h(!1)}},Z=async()=>{var Q,D,de;if(!(!i||!r))try{g(!0),console.log(`Fetching schedule for team ${i.teamData.team_name} for season ${s}`);const xe=r.conferences.filter(te=>te.dbConferenceId);if(xe.length===0){console.log("No conferences found for selected season"),j([]);return}const J=await H.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:i.teamData.id}]});if(J.error||!J.data)throw new Error("Failed to get team conference mappings");const he=xe.map(te=>te.dbConferenceId),pe=J.data.find(te=>he.includes(te.conference_id));if(!pe){console.log(`Team not found in any conference for season ${s}`),j([]);return}const _e=await H.getTeams({}),ye=new Map;_e.data&&_e.data.forEach(te=>{ye.set(te.id,te.team_name)});const ve=await H.getSeasons({filters:[{column:"season_year",operator:"eq",value:s}]});if(ve.error||!ve.data||ve.data.length===0)throw new Error("Season not found");const we=ve.data[0].id,Te=((Q=(await H.getConferences({filters:[{column:"season_id",operator:"eq",value:we}]})).data)==null?void 0:Q.map(te=>te.id))||[],ze=await H.getMatchups({filters:[{column:"conference_id",operator:"eq",value:pe.conference_id},{column:"week",operator:"lte",value:12}],orderBy:{column:"week",ascending:!0}}),ks=new Set;(D=ze.data)==null||D.forEach(te=>{te.manual_override&&ks.add(te.week)});let ss=[];ks.size>0&&(console.log(`Found manual override weeks: ${Array.from(ks).join(", ")}`),ss=(await H.getMatchups({filters:[{column:"conference_id",operator:"in",value:Te},{column:"week",operator:"in",value:Array.from(ks)}],orderBy:{column:"week",ascending:!0}})).data||[],console.log(`Found ${ss.length} cross-conference matchups for manual override weeks`));const De=await H.getMatchupAdminOverrides({filters:[{column:"conference_id",operator:"eq",value:pe.conference_id},{column:"is_active",operator:"eq",value:!0}]}),Ee=[];(ze.data||[]).filter(te=>!te.manual_override).forEach(te=>{var Pe;const He=(Pe=De.data)==null?void 0:Pe.find(ts=>ts.conference_id===te.conference_id&&ts.week===parseInt(te.week)&&ts.is_active);let Ue,Ze,Xe=!1,me=null;if(He?(Ue=He.override_team1_id,Ze=He.override_team2_id,Xe=!0,me=He.override_reason,console.log(`Week ${te.week}: Using admin override - teams ${Ue} vs ${Ze}`)):(Ue=te.team1_id,Ze=te.team2_id),Ue===i.teamData.id||Ze===i.teamData.id){const ts=Ue===i.teamData.id,Oe=ts?Ze:Ue,qs=ye.get(Oe)||"Unknown Team";let Os="TBD",zs=null,tt=null;te.team1_score!==null&&te.team2_score!==null&&(ts?(zs=te.team1_score,tt=te.team2_score):(zs=te.team2_score,tt=te.team1_score),zs>tt?Os="W":zs<tt?Os="L":Os="T"),Ee.push({week:te.week,opponent:qs,isHome:ts,result:Os,teamScore:zs,opponentScore:tt,isPlayoff:!1,isOverridden:Xe,overrideReason:me,matchupStatus:te.matchup_status||"scheduled",playoffRoundName:null,matchupId:te.id})}}),ss.forEach(te=>{const He=te.team1_id,Ue=te.team2_id;if(He===i.teamData.id||Ue===i.teamData.id){console.log(`Week ${te.week}: Found cross-conference manual override matchup - teams ${He} vs ${Ue}`);const Ze=He===i.teamData.id,Xe=Ze?Ue:He,me=ye.get(Xe)||"Unknown Team";let Pe="TBD",ts=null,Oe=null;te.team1_score!==null&&te.team2_score!==null&&(Ze?(ts=te.team1_score,Oe=te.team2_score):(ts=te.team2_score,Oe=te.team1_score),ts>Oe?Pe="W":ts<Oe?Pe="L":Pe="T"),Ee.push({week:te.week,opponent:me,isHome:Ze,result:Pe,teamScore:ts,opponentScore:Oe,isPlayoff:!1,isOverridden:!0,overrideReason:"Interconference",matchupStatus:te.matchup_status||"scheduled",playoffRoundName:null,matchupId:te.id})}});const Ks=((de=(await H.getPlayoffBrackets({filters:[{column:"season_id",operator:"eq",value:we}],orderBy:{column:"week",ascending:!0}})).data)==null?void 0:de.filter(te=>te.team1_id===i.teamData.id||te.team2_id===i.teamData.id))||[],Ws=te=>{switch(te){case 13:return"Conference Championship";case 14:return"Wildcard";case 15:return"Quarterfinals";case 16:return"Semifinals";case 17:return"Colosseum Championship";default:return`Playoff Week ${te}`}},$s=Ks.map(te=>{let He="Unknown Team",Ue=!0;if(te.is_bye&&te.week===14)He="BYE",Ue=te.team1_id===i.teamData.id;else{Ue=te.team1_id===i.teamData.id;const Pe=Ue?te.team2_id:te.team1_id;He=ye.get(Pe)||"Unknown Team"}let Ze="TBD",Xe=null,me=null;return te.is_bye&&te.week===14?(Ze="W",Xe=null,me=null):te.team1_score!==null&&te.team2_score!==null&&(Ue?(Xe=te.team1_score,me=te.team2_score):(Xe=te.team2_score,me=te.team1_score),Xe>me?Ze="W":Xe<me?Ze="L":Ze="T"),{week:te.week.toString(),opponent:He,isHome:Ue,result:Ze,teamScore:Xe,opponentScore:me,isPlayoff:!0,isOverridden:!1,overrideReason:null,matchupStatus:te.winning_team_id?"completed":"scheduled",playoffRoundName:Ws(te.week),matchupId:te.id}});Ee.sort((te,He)=>parseInt(te.week)-parseInt(He.week));const ft=[...Ee,...$s];j(ft),console.log(`Loaded ${ft.length} matchups for ${s} season (${Ee.length} regular season, ${$s.length} playoff)`),se({title:"Schedule Loaded",description:`Found ${ft.length} matchups for ${s} season`})}catch(xe){console.error("Error fetching schedule:",xe);const J=xe instanceof Error?xe.message:"Failed to load schedule";se({title:"Error Loading Schedule",description:J,variant:"destructive"})}finally{g(!1)}},ae=async()=>{if(!(!i||!r))try{console.log(`Fetching team record for team ${i.teamData.team_name} for season ${s}`);const Q=await H.getSeasons({filters:[{column:"season_year",operator:"eq",value:s}]});if(Q.error||!Q.data||Q.data.length===0)throw new Error("Season not found");const D=Q.data[0].id,de=r.conferences.filter(we=>we.dbConferenceId);if(de.length===0){console.log("No conferences found for selected season");return}const xe=await H.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:i.teamData.id}]});if(xe.error||!xe.data)throw new Error("Failed to get team conference mappings");const J=de.map(we=>we.dbConferenceId),he=xe.data.find(we=>J.includes(we.conference_id));if(!he){console.log(`Team not found in any conference for season ${s}`);return}const pe=await H.getTeamRecords({filters:[{column:"team_id",operator:"eq",value:i.teamData.id},{column:"conference_id",operator:"eq",value:he.conference_id},{column:"season_id",operator:"eq",value:D}]});if(pe.error||!pe.data||pe.data.length===0){console.log("No team record found for this season");return}const _e=pe.data[0],ye=await H.getTeamRecords({filters:[{column:"conference_id",operator:"eq",value:he.conference_id},{column:"season_id",operator:"eq",value:D}]});if(ye.data){const ws=ye.data.sort((Te,ze)=>ze.wins!==Te.wins?ze.wins-Te.wins:ze.points_for-Te.points_for).findIndex(Te=>Te.team_id===i.teamData.id)+1;_e.rank=ws}const ve=await H.getTeamRecords({filters:[{column:"season_id",operator:"eq",value:D}]});if(ve.data){const ws=ve.data.slice().sort((De,Ee)=>Ee.points_for-De.points_for).findIndex(De=>De.team_id===i.teamData.id)+1;_e.leagueRankPointsFor=ws;const ze=ve.data.slice().sort((De,Ee)=>De.points_against-Ee.points_against).findIndex(De=>De.team_id===i.teamData.id)+1;_e.leagueRankPointsAgainst=ze;const ss=ve.data.slice().sort((De,Ee)=>Ee.point_diff-De.point_diff).findIndex(De=>De.team_id===i.teamData.id)+1;_e.leagueRankPointDiff=ss,console.log(`League rankings - Points For: #${ws}, Points Against: #${ze}, Point Diff: #${ss}`)}N(_e),console.log("Loaded team record:",_e)}catch(Q){console.error("Error fetching team record:",Q)}},O=async()=>{if(!(!i||!r))try{console.log(`Fetching season waiver data for team ${i.teamData.team_name} for season ${s}`);const Q=r.conferences.filter(we=>we.dbConferenceId);if(Q.length===0){console.log("No conferences found for selected season");return}const D=await H.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:i.teamData.id}]});if(D.error||!D.data)throw new Error("Failed to get team conference mappings");const de=Q.map(we=>we.dbConferenceId),xe=D.data.find(we=>de.includes(we.conference_id));if(!xe){console.log(`Team not found in any conference for season ${s}`);return}const J=await H.getConferences({filters:[{column:"id",operator:"eq",value:xe.conference_id}]});if(J.error||!J.data||J.data.length===0)throw new Error("Conference not found");const pe=J.data[0].league_id,_e=xe.roster_id;console.log(`Fetching Sleeper roster data for league ${pe}, roster ${_e}`);const ye=await ke.getTeamRosterData(pe,_e),ve=100-ye.roster.settings.waiver_budget_used;k({position:ye.roster.settings.waiver_position,budget:ve}),console.log(`Loaded season waiver data: position ${ye.roster.settings.waiver_position}, budget remaining $${ve}`)}catch(Q){console.error("Error fetching season waiver data:",Q)}},_=async()=>{if(!(!i||!r))try{console.log(`Fetching season transaction count for team ${i.teamData.team_name} for season ${s}`);const Q=await H.getSeasons({filters:[{column:"season_year",operator:"eq",value:s}]});if(Q.error||!Q.data||Q.data.length===0)throw new Error("Season not found");const D=Q.data[0].id,de=r.conferences.filter(ye=>ye.dbConferenceId);if(de.length===0){console.log("No conferences found for selected season");return}const xe=await H.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:i.teamData.id}]});if(xe.error||!xe.data)throw new Error("Failed to get team conference mappings");const J=de.map(ye=>ye.dbConferenceId),he=xe.data.find(ye=>J.includes(ye.conference_id));if(!he){console.log(`Team not found in any conference for season ${s}`),P(0);return}const pe=await H.getTransactions({filters:[{column:"season_id",operator:"eq",value:D},{column:"conference_id",operator:"eq",value:he.conference_id}]});if(pe.error||!pe.data)throw new Error("Failed to fetch transactions");let _e=0;for(const ye of pe.data){let ve={};try{ve=typeof ye.data=="string"?JSON.parse(ye.data):ye.data||{}}catch(ws){console.warn("Failed to parse transaction data:",ws);continue}(ve.roster_ids||[]).includes(he.roster_id)&&_e++}P(_e),console.log(`Loaded season transaction count: ${_e} for season ${s}`)}catch(Q){console.error("Error fetching season transaction count:",Q),P(0)}},S=async()=>{var Q;if(!(!i||!r))try{console.log(`Fetching header stats for team ${i.teamData.team_name} for season ${s}`);const D=await H.getSeasons({filters:[{column:"season_year",operator:"eq",value:s.toString()}]});if(D.error||!D.data||D.data.length===0)throw new Error("Season not found");const de=D.data[0].id,xe=r.conferences.filter(ss=>ss.dbConferenceId);if(xe.length===0){console.log("No conferences found for selected season");return}const J=await H.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:i.teamData.id}]});if(J.error||!J.data)throw new Error("Failed to get team conference mappings");const he=xe.map(ss=>ss.dbConferenceId),pe=J.data.find(ss=>he.includes(ss.conference_id));if(!pe){console.log(`Team not found in any conference for season ${s}`),L({wins:0,losses:0,pointsFor:0,gamesPlayed:0});return}const _e=await H.getTeamRecords({filters:[{column:"team_id",operator:"eq",value:i.teamData.id},{column:"conference_id",operator:"eq",value:pe.conference_id},{column:"season_id",operator:"eq",value:de}]});let ye=0,ve=0,we=0;if(_e.data&&_e.data.length>0){const ss=_e.data[0];ye=ss.wins,ve=ss.losses,we=ss.points_for,console.log(`Found team record: ${ye}-${ve}, Points For: ${we}`)}else console.log("No team record found, using default values");const ws=await H.getMatchups({filters:[{column:"conference_id",operator:"eq",value:pe.conference_id},{column:"week",operator:"lte",value:12}]});let Te=0;if(ws.data){Te=ws.data.filter(Ee=>{const Qe=Ee.team1_id===i.teamData.id||Ee.team2_id===i.teamData.id,ys=Ee.team1_score!==null&&Ee.team2_score!==null;return Qe&&ys}).length;const De=new Set;if(ws.data.forEach(Ee=>{Ee.manual_override&&De.add(Ee.week)}),De.size>0){const Qe=((Q=(await H.getConferences({filters:[{column:"season_id",operator:"eq",value:de}]})).data)==null?void 0:Q.map(Ks=>Ks.id))||[],ys=await H.getMatchups({filters:[{column:"conference_id",operator:"in",value:Qe},{column:"week",operator:"in",value:Array.from(De)},{column:"week",operator:"lte",value:12}]});if(ys.data){const Ks=ys.data.filter(Ws=>{const $s=Ws.team1_id===i.teamData.id||Ws.team2_id===i.teamData.id,ft=Ws.team1_score!==null&&Ws.team2_score!==null,te=Ws.conference_id!==pe.conference_id;return $s&&ft&&te});Te+=Ks.length}}console.log(`Games played from completed matchups: ${Te}`)}const ze=new Date().getFullYear();!(s===ze)&&Te===0&&(Te=12,console.log("Past season detected, setting games played to 12")),L({wins:ye,losses:ve,pointsFor:we,gamesPlayed:Te}),console.log(`Loaded header stats: ${ye}-${ve}, Points For: ${we}, Games Played: ${Te}`)}catch(D){console.error("Error fetching header stats:",D),L({wins:0,losses:0,pointsFor:0,gamesPlayed:0})}},y=Q=>{switch(Q){case"QB":return"bg-red-100 text-red-800";case"RB":return"bg-green-100 text-green-800";case"WR":return"bg-blue-100 text-blue-800";case"TE":return"bg-yellow-100 text-yellow-800";case"K":return"bg-purple-100 text-purple-800";case"DEF":return"bg-gray-100 text-gray-800";case"FLEX":return"bg-orange-100 text-orange-800";case"SUPER_FLEX":return"bg-pink-100 text-pink-800";case"SFLEX":return"bg-pink-100 text-pink-800";default:return"bg-gray-100 text-gray-800"}},f=Q=>{if(!Q||Q==="Active")return null;const D={IR:"destructive",Out:"destructive",Doubtful:"destructive",Questionable:"secondary",Probable:"outline"};return e.jsx(ee,{variant:D[Q]||"outline",className:"text-xs",children:Q})};if(E)return e.jsx("div",{className:"flex items-center justify-center min-h-64",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading team data..."})]})});if(A||!i)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ts,{to:"/teams",children:e.jsxs(X,{variant:"ghost",className:"mb-4",children:[e.jsx(Et,{className:"mr-2 h-4 w-4"}),"Back to Teams"]})}),e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center min-h-64",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(Je,{className:"h-12 w-12 text-destructive mx-auto"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Team"}),e.jsx("p",{className:"text-muted-foreground",children:A||"Team data not available"}),e.jsx(X,{onClick:()=>t&&K(parseInt(t)),children:"Try Again"})]})})})]});const{roster:w,organizedRoster:C,allPlayers:$,teamData:W,conferenceData:q}=i,re=(x==null?void 0:x.points_for)??ke.formatPoints(w.settings.fpts,w.settings.fpts_decimal),M=(x==null?void 0:x.points_against)??ke.formatPoints(w.settings.fpts_against,w.settings.fpts_against_decimal),le=x?x.wins+x.losses+(x.ties||0):w.settings.wins+w.settings.losses+w.settings.ties,ne=ke.calculatePointsPerGame(re,le),ie=le>0?((x==null?void 0:x.wins)??w.settings.wins)/le*100:0,ue=(F==null?void 0:F.wins)??w.settings.wins,je=(F==null?void 0:F.losses)??w.settings.losses,be=(F==null?void 0:F.pointsFor)??ke.formatPoints(w.settings.fpts,w.settings.fpts_decimal),Se=(F==null?void 0:F.gamesPlayed)??w.settings.wins+w.settings.losses+w.settings.ties,Ie=Se>0?be/Se:0,ds=Se>0?ue/Se*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ts,{to:"/teams",children:e.jsxs(X,{variant:"ghost",className:"mb-4",children:[e.jsx(Et,{className:"mr-2 h-4 w-4"}),"Back to Teams"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(vt,{className:"h-16 w-16",children:[e.jsx(wt,{src:W.team_logo_url||void 0}),e.jsx(Nt,{className:"bg-primary/10 text-lg",style:{backgroundColor:W.team_primary_color+"20"},children:W.team_name.split(" ").map(Q=>Q[0]).join("").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:W.team_name}),e.jsxs("p",{className:"text-muted-foreground",children:["Owned by ",W.owner_name]}),W.co_owner_name&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Co-owner: ",W.co_owner_name]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(zt,{conferenceName:q.conference_name,variant:"secondary"}),e.jsxs(ee,{variant:"secondary",children:["Roster #",w.roster_id]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:F?`${ue}-${je}`:`${w.settings.wins}-${w.settings.losses}`}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Record"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:F?be.toFixed(1):re.toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Points For"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:F?Ie.toFixed(1):ne.toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg/Game"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[F?ds.toFixed(1):ie.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Win %"})]})]})]}),e.jsxs(ut,{value:a,onValueChange:o,className:"w-full",children:[e.jsxs(lt,{className:"grid w-full grid-cols-4",children:[e.jsx(Me,{value:"roster",children:"Roster"}),e.jsx(Me,{value:"performance",children:"Performance"}),e.jsx(Me,{value:"transactions",children:"Transactions"}),e.jsx(Me,{value:"schedule",children:"Schedule"})]}),e.jsxs(Le,{value:"roster",className:"space-y-4",children:[e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(Ur,{className:"h-5 w-5"}),e.jsx("span",{children:"Starting Lineup"})]}),e.jsx(Ce,{children:"Current starting players for this roster"})]}),e.jsx(Y,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{children:"Position"}),e.jsx(G,{children:"Player"}),e.jsx(G,{children:"NFL Team"}),e.jsx(G,{children:"Status"})]})}),e.jsx(Ls,{children:C.starters.map((Q,D)=>{const de=$[Q.playerId];return e.jsxs($e,{children:[e.jsx(z,{children:e.jsx(ee,{className:y(Q.slotPosition),children:Q.slotPosition==="FLEX"?"W/R/T":Q.slotPosition==="SUPER_FLEX"||Q.slotPosition==="SFLEX"?"Q/W/R/T":Q.slotPosition})}),e.jsx(z,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:de?ke.getPlayerName(de):"Unknown Player"}),de&&e.jsx(ee,{className:y(de.position),children:de.position})]})}),e.jsx(z,{children:(de==null?void 0:de.team)||"N/A"}),e.jsx(z,{children:f(de==null?void 0:de.injury_status)})]},`starter-${D}`)})})]})})})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(bs,{className:"h-5 w-5"}),e.jsxs("span",{children:["Bench (",C.bench.length,")"]})]}),e.jsx(Ce,{children:"Players available as substitutes"})]}),e.jsx(Y,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{children:"Player"}),e.jsx(G,{children:"Position"}),e.jsx(G,{children:"NFL Team"}),e.jsx(G,{children:"Status"})]})}),e.jsxs(Ls,{children:[C.bench.map(Q=>{const D=$[Q];return e.jsxs($e,{children:[e.jsx(z,{className:"font-medium",children:D?ke.getPlayerName(D):"Unknown Player"}),e.jsx(z,{children:D&&e.jsx(ee,{className:y(D.position),children:D.position})}),e.jsx(z,{children:(D==null?void 0:D.team)||"N/A"}),e.jsx(z,{children:f(D==null?void 0:D.injury_status)})]},`bench-${Q}`)}),C.bench.length===0&&e.jsx($e,{children:e.jsx(z,{colSpan:4,className:"text-center text-muted-foreground py-4",children:"No bench players"})})]})]})})})]}),C.ir.length>0&&e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"h-5 w-5"}),e.jsxs("span",{children:["Injured Reserve (",C.ir.length,")"]})]}),e.jsx(Ce,{children:"Players on injured reserve"})]}),e.jsx(Y,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{children:"Player"}),e.jsx(G,{children:"Position"}),e.jsx(G,{children:"NFL Team"}),e.jsx(G,{children:"Status"})]})}),e.jsx(Ls,{children:C.ir.map(Q=>{const D=$[Q];return e.jsxs($e,{children:[e.jsx(z,{className:"font-medium",children:D?ke.getPlayerName(D):"Unknown Player"}),e.jsx(z,{children:D&&e.jsx(ee,{className:y(D.position),children:D.position})}),e.jsx(z,{children:(D==null?void 0:D.team)||"N/A"}),e.jsx(z,{children:e.jsx(ee,{variant:"destructive",className:"text-xs",children:"IR"})})]},`ir-${Q}`)})})]})})})]})]}),e.jsx(Le,{value:"performance",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"h-5 w-5"}),e.jsxs("span",{children:[s," Season Stats"]})]}),e.jsx(Ce,{children:x?"Official season statistics from team records":"Statistics from current roster data"})]}),e.jsx(Y,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Points For"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-2xl font-bold",children:re.toFixed(1)}),(x==null?void 0:x.leagueRankPointsFor)&&e.jsxs(ee,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:["#",x.leagueRankPointsFor]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Points Against"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-2xl font-bold",children:M.toFixed(1)}),(x==null?void 0:x.leagueRankPointsAgainst)&&e.jsxs(ee,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:["#",x.leagueRankPointsAgainst]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Point Differential"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("p",{className:`text-2xl font-bold ${re-M>0?"text-green-600":"text-red-600"}`,children:[re-M>0?"+":"",(re-M).toFixed(1)]}),(x==null?void 0:x.leagueRankPointDiff)&&e.jsxs(ee,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700",children:["#",x.leagueRankPointDiff]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Win Percentage"}),e.jsxs("p",{className:"text-2xl font-bold",children:[ie.toFixed(1),"%"]})]}),x&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Conference Rank"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x.rank?`#${x.rank}`:"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Streak"}),e.jsx("p",{className:"text-2xl font-bold",children:x.streak||"-"})]})]})]})})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(Rt,{className:"h-5 w-5"}),e.jsx("span",{children:"Team Management"})]}),e.jsxs(Ce,{children:["Waiver and transaction data for ",s," season"]})]}),e.jsx(Y,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Waiver Position"}),e.jsx("p",{className:"text-2xl font-bold",children:p?p.position:w.settings.waiver_position})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Waiver Budget"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",p?p.budget:100-w.settings.waiver_budget_used]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Moves"}),e.jsx("p",{className:"text-2xl font-bold",children:T})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Games Played"}),e.jsx("p",{className:"text-2xl font-bold",children:le})]})]})})]})]})}),e.jsxs(Le,{value:"transactions",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Transaction History"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All trades, waivers, and roster moves for this team across all seasons"})]}),e.jsx(X,{onClick:B,disabled:m,variant:"outline",size:"sm",children:m?e.jsxs(e.Fragment,{children:[e.jsx(ms,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),m&&d.length===0?e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center min-h-32",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading transactions..."})]})})}):d.length===0?e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center min-h-32",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(st,{className:"h-12 w-12 text-muted-foreground mx-auto"}),e.jsx("h3",{className:"text-lg font-semibold",children:"No Transactions Found"}),e.jsx("p",{className:"text-muted-foreground",children:"This team hasn't made any trades, waiver claims, or free agent pickups this season."}),e.jsx("div",{className:"mt-4",children:e.jsxs(ee,{variant:"secondary",children:["Total moves: ",w.settings.total_moves," (all seasons)"]})})]})})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",d.length," transaction",d.length!==1?"s":""]}),e.jsxs(ee,{variant:"secondary",children:["Total moves: ",w.settings.total_moves," (all seasons)"]})]}),e.jsx("div",{className:"space-y-3",children:d.map(Q=>e.jsx(nc,{transaction:Q},Q.id))})]})]}),e.jsxs(Le,{value:"schedule",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Season Schedule"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Complete schedule and results for ",s," season"]})]}),e.jsx(X,{onClick:Z,disabled:b,variant:"outline",size:"sm",children:b?e.jsxs(e.Fragment,{children:[e.jsx(ms,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),b&&v.length===0?e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center min-h-32",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading schedule..."})]})})}):v.length===0?e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center min-h-32",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(st,{className:"h-12 w-12 text-muted-foreground mx-auto"}),e.jsx("h3",{className:"text-lg font-semibold",children:"No Schedule Found"}),e.jsxs("p",{className:"text-muted-foreground",children:["No matchups found for this team in the ",s," season."]})]})})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(V,{children:[e.jsx(oe,{children:e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"h-5 w-5"}),e.jsxs("span",{children:[s," Season Schedule"]})]})}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:(x==null?void 0:x.wins)??v.filter(Q=>Q.result==="W").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Wins"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:(x==null?void 0:x.losses)??v.filter(Q=>Q.result==="L").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Losses"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:(x==null?void 0:x.ties)??v.filter(Q=>Q.result==="T").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Ties"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:v.filter(Q=>Q.result==="TBD").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Remaining"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x!=null&&x.rank?`#${x.rank}`:"-"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Rank"})]})]})})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Matchup Results"}),e.jsx(Ce,{children:"Week-by-week schedule and results"})]}),e.jsx(Y,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{className:"w-16",children:"Week"}),e.jsx(G,{children:"Opponent"}),e.jsx(G,{className:"w-16",children:"@/vs"}),e.jsx(G,{className:"w-20",children:"Result"}),e.jsx(G,{className:"w-24",children:"Score"}),e.jsx(G,{className:"w-16",children:"Status"})]})}),e.jsx(Ls,{children:v.map((Q,D)=>e.jsxs($e,{className:Q.matchupId?"cursor-pointer hover:bg-muted/50 transition-colors":"",onClick:()=>{Q.matchupId&&n(`/matchups/${Q.matchupId}`)},children:[e.jsx(z,{className:"font-medium",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:Q.week}),Q.isPlayoff&&Q.playoffRoundName&&e.jsx(ee,{variant:"secondary",className:"text-xs mt-1 w-fit bg-purple-100 text-purple-800",children:Q.playoffRoundName})]})}),e.jsx(z,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:Q.opponent}),Q.isOverridden&&e.jsx(ee,{variant:"outline",className:`text-xs ${Q.overrideReason==="Interconference"?"bg-orange-100 text-orange-800 border-orange-300":"bg-blue-100 text-blue-800 border-blue-300"}`,title:Q.overrideReason||"Matchup Override",children:Q.overrideReason==="Interconference"?"Interconference":"Override"})]})}),e.jsx(z,{className:"text-center",children:Q.isHome?"vs":"@"}),e.jsx(z,{children:e.jsx(ee,{variant:Q.result==="W"?"default":Q.result==="L"?"destructive":Q.result==="T"?"secondary":"outline",className:"w-8 justify-center",children:Q.result})}),e.jsx(z,{children:Q.teamScore!==null&&Q.opponentScore!==null?e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:Q.result==="W"?"font-bold":"",children:Q.teamScore}),e.jsx("span",{className:"text-muted-foreground mx-1",children:"-"}),e.jsx("span",{className:Q.result==="L"?"font-bold":"",children:Q.opponentScore})]}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(z,{children:e.jsx(ee,{variant:"outline",className:"text-xs",children:Q.matchupStatus})})]},`matchup-${D}`))})]})})})]})]})]})]})]})};async function Jh(t={},s=1,r=25,n=!1){try{const{data:{session:a},error:o}=await Js.auth.getSession();if(o)throw console.error("Session error:",o),new Error(`Authentication error: ${o.message}`);console.log("Fetching players directly from database...");let i=Js.from("players_with_roster_status").select(`
        id,
        player_name,
        position,
        nfl_team,
        sleeper_id,
        injury_status,
        total_points,
        avg_points,
        is_rostered,
        rostered_by_teams,
        playing_status
      `,{count:"exact"});t.search&&(i=i.or(`player_name.ilike.%${t.search}%,nfl_team.ilike.%${t.search}%`)),t.position&&t.position!=="all"&&(i=i.eq("position",t.position)),t.is_rostered!==""&&(i=i.eq("is_rostered",t.is_rostered)),t.nfl_team&&t.nfl_team!==""&&(i=i.eq("nfl_team",t.nfl_team));let c="total_points",d=!1;if(t.sort_field&&t.sort_field!==""&&(c=t.sort_field,d=t.sort_direction==="asc"),c==="ownership"&&(c="total_points"),i=i.order(c,{ascending:d}),n)i=i.range(0,49999);else{const v=(s-1)*r,j=v+r-1;i=i.range(v,j)}const{data:u,error:m,count:h}=await i;if(m)throw console.error("Database query error:",m),new Error(`Database error: ${m.message}`);return console.log(` Fetched ${(u==null?void 0:u.length)||0} players (total: ${h})`),{data:u||[],count:n?(u==null?void 0:u.length)||0:h||0}}catch(a){throw console.error("fetchPlayersFromApi error:",a),a}}const Xh=()=>{const{selectedSeason:t,selectedConference:s,currentSeasonConfig:r}=Hs(),n=_r(),{toast:a}=Is(),[o,i]=l.useState([]),[c,d]=l.useState(0),[u,m]=l.useState(1),h=50,[v,j]=l.useState(!0),[b,g]=l.useState(null),[x,N]=l.useState(""),[p,k]=l.useState("all"),[T,P]=l.useState("free_agent"),[F,L]=l.useState("all"),[E,R]=l.useState(t.toString()),[A,U]=l.useState(new Map),[se,K]=l.useState(new Map),[B,Z]=l.useState("all-players"),[ae,O]=l.useState({}),[_,S]=l.useState(!1),[y,f]=l.useState(""),[w,C]=l.useState("desc"),[$,W]=l.useState([]),[q,re]=l.useState(""),[M,le]=l.useState(0),ne=["QB","RB","WR","TE"],ie=["ARI","ATL","BAL","BUF","CAR","CHI","CIN","CLE","DAL","DEN","DET","GB","HOU","IND","JAX","KC","LV","LAC","LAR","MIA","MIN","NE","NO","NYG","NYJ","PHI","PIT","SF","SEA","TB","TEN","WAS"],ue=["2020","2021","2022","2023","2024","2025"],je=J=>{y===J?C(w==="asc"?"desc":"asc"):(f(J),C("desc")),m(1)},be=J=>y!==J?e.jsx(kt,{className:"h-4 w-4 ml-1 opacity-50"}):w==="asc"?e.jsx(jd,{className:"h-4 w-4 ml-1"}):e.jsx(ud,{className:"h-4 w-4 ml-1"}),Se=J=>JSON.stringify({search:J.search,position:J.position,is_rostered:J.is_rostered,nfl_team:J.nfl_team}),Ie=async J=>{let he=[],pe=1;const _e=1e3;let ye=!0;for(;ye;){const{data:ve,count:we}=await Jh(J,pe,_e);if(ve&&ve.length>0?(he=[...he,...ve],ye=ve.length===_e,pe++):ye=!1,pe>10){console.warn("Reached maximum page limit, stopping fetch");break}}return{data:he,count:he.length}},ds=async()=>{S(!0);try{const J=await ke.getNFLState(),he=J.week===0?1:J.week,pe=J.season;console.log(`Fetching ownership data for season ${pe}, week ${he}`);const _e=await ke.fetchPlayerResearch("regular",pe,he);O(_e)}catch(J){console.error("Error fetching ownership data:",J),a({title:"Error Loading Ownership Data",description:"Could not load player ownership percentages",variant:"destructive"})}finally{S(!1)}};l.useEffect(()=>{(async()=>{try{const{data:he,error:pe}=await Js.from("teams").select("id, team_name");if(pe){console.error("Error loading teams:",pe);return}const _e=new Map,ye=new Map;(he||[]).forEach(ve=>{_e.set(ve.id,ve.team_name),ye.set(ve.team_name,ve.id)}),U(_e),K(ye)}catch(he){console.error("Error setting up team lookup:",he)}})()},[]),l.useEffect(()=>{ds()},[]),l.useEffect(()=>{Object.keys(ae).length>0&&$.length>0&&y===""&&(console.log("Auto-setting sort to ownership"),f("ownership"),C("desc"))},[ae,$,y]),l.useEffect(()=>{Object.keys(ae).length>0&&y==="ownership"&&(console.log("Ownership data loaded, re-triggering sort"),le(J=>J+1))},[ae,y]),l.useEffect(()=>{(async()=>{j(!0),g(null);try{const he={search:x,position:p,is_rostered:T==="rostered"?!0:T==="free_agent"?!1:"",nfl_team:F==="all"?"":F,sort_field:y,sort_direction:w},pe=Se(he);let _e=$;if(q!==pe||$.length===0){console.log("Cache miss - fetching all filtered data...");const{data:Te,count:ze}=await Ie({...he,sort_field:"",sort_direction:"desc"});_e=Te,W(Te),re(pe),console.log(`Cached ${Te.length} players for filters:`,pe)}else console.log("Cache hit - using cached data");let ye=[..._e];y==="ownership"?Object.keys(ae).length>0?ye.sort((Te,ze)=>{var De,Ee;const ks=((De=ae[Te.sleeper_id])==null?void 0:De.owned)||0,ss=((Ee=ae[ze.sleeper_id])==null?void 0:Ee.owned)||0;return w==="asc"?ks-ss:ss-ks}):ye.sort((Te,ze)=>ze.total_points-Te.total_points):y==="total_points"?ye.sort((Te,ze)=>w==="asc"?Te.total_points-ze.total_points:ze.total_points-Te.total_points):y==="avg_points"?ye.sort((Te,ze)=>w==="asc"?Te.avg_points-ze.avg_points:ze.avg_points-Te.avg_points):y===""&&ye.sort((Te,ze)=>ze.total_points-Te.total_points);const ve=(u-1)*h,we=ve+h,ws=ye.slice(ve,we);i(ws),d(ye.length)}catch(he){const pe=he instanceof Error?he.message:"Failed to fetch players";g(pe),a({title:"Error",description:pe,variant:"destructive"})}finally{j(!1)}})()},[x,p,T,F,y,w,u,t,s,M]);const Q=J=>{switch(J){case"QB":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"RB":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"WR":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"TE":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},D=(J,he)=>{if(he){const pe={IR:"destructive",O:"destructive",D:"destructive",Q:"secondary",P:"outline"};return e.jsx(ee,{variant:pe[he]||"outline",className:"text-xs",children:he})}return J?e.jsx(ee,{variant:"default",className:"text-xs",children:"Rostered"}):e.jsx(ee,{variant:"outline",className:"text-xs",children:"FA"})},de=J=>ae[J]?`${ae[J].owned.toFixed(1)}%`:"-",xe=J=>!J||J.length===0?null:e.jsx("div",{className:"flex flex-col gap-1",children:J.map((he,pe)=>{let _e,ye;if(typeof he=="number")_e=he,ye=A.get(_e)||`Team ${_e}`;else if(typeof he=="string")ye=he,_e=se.get(ye)||0;else return console.warn("Unexpected team data structure:",he),null;return _e===0?(console.warn(`Could not find team ID for team name: ${ye}`),e.jsx(ee,{variant:"outline",className:"text-xs",children:ye},pe)):e.jsx(Ts,{to:`/teams/${_e}`,children:e.jsx(ee,{variant:"outline",className:"text-xs hover:bg-primary hover:text-primary-foreground cursor-pointer transition-colors",children:ye})},_e)})});return v&&o.length===0?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ms,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading Players"}),e.jsx("p",{className:"text-muted-foreground",children:"Fetching player data..."})]})}):b&&o.length===0?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs(V,{className:"w-full max-w-md",children:[e.jsx(oe,{children:e.jsx(ce,{className:"flex items-center gap-2 text-destructive",children:"Error Loading Players"})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:b}),e.jsx(X,{onClick:()=>window.location.reload(),className:"w-full",children:"Retry"})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Yt,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Players"})]}),e.jsxs("p",{className:"text-muted-foreground",children:[E," Season  ",c," players"]})]}),e.jsxs(ut,{value:B,onValueChange:Z,className:"w-full",children:[e.jsxs(lt,{className:"grid w-full grid-cols-2",children:[e.jsxs(Me,{value:"all-players",className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"}),"All Players"]}),e.jsxs(Me,{value:"trending",className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"h-4 w-4"}),"Trending Players"]})]}),e.jsxs(Le,{value:"all-players",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Cs,{placeholder:"Search players...",value:x,onChange:J=>{N(J.target.value),m(1)},className:"pl-10"})]}),e.jsxs(cs,{value:p,onValueChange:J=>{k(J),m(1)},children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"All Positions"})}),e.jsxs(as,{children:[e.jsx(Re,{value:"all",children:"All Positions"}),ne.map(J=>e.jsx(Re,{value:J,children:J},J))]})]}),e.jsxs(cs,{value:T,onValueChange:J=>{P(J),m(1)},children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"All Status"})}),e.jsxs(as,{children:[e.jsx(Re,{value:"all",children:"All Status"}),e.jsx(Re,{value:"rostered",children:"Rostered"}),e.jsx(Re,{value:"free_agent",children:"Free Agent"})]})]}),e.jsxs(cs,{value:F,onValueChange:J=>{L(J),m(1)},children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"All Teams"})}),e.jsxs(as,{children:[e.jsx(Re,{value:"all",children:"All Teams"}),ie.map(J=>e.jsx(Re,{value:J,children:J},J))]})]}),e.jsxs(cs,{value:E,onValueChange:J=>{R(J),m(1)},children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"Season"})}),e.jsx(as,{children:ue.map(J=>e.jsx(Re,{value:J,children:J},J))})]})]}),e.jsx(V,{children:e.jsxs(Y,{className:"pt-6",children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{children:"Player"}),e.jsx(G,{className:"text-center",children:"Pos"}),e.jsx(G,{className:"text-center hidden md:table-cell cursor-pointer hover:bg-muted/50 select-none",onClick:()=>je("ownership"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Own%",be("ownership")]})}),e.jsx(G,{className:"text-center hidden sm:table-cell",children:"NFL Team"}),e.jsx(G,{className:"text-center cursor-pointer hover:bg-muted/50 select-none",onClick:()=>je("total_points"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Points",be("total_points")]})}),e.jsx(G,{className:"text-center hidden md:table-cell cursor-pointer hover:bg-muted/50 select-none",onClick:()=>je("avg_points"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Avg",be("avg_points")]})}),e.jsx(G,{className:"text-center",children:"Status"}),e.jsx(G,{className:"text-center hidden lg:table-cell",children:"Rostered By"})]})}),e.jsx(Ls,{children:v?e.jsx($e,{children:e.jsx(z,{colSpan:8,className:"text-center py-8",children:e.jsx(ms,{className:"h-6 w-6 animate-spin mx-auto"})})}):o.length===0?e.jsx($e,{children:e.jsx(z,{colSpan:8,className:"text-center py-8",children:"No players found."})}):o.map(J=>e.jsxs($e,{className:"hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>n(`/players/${J.sleeper_id}`),children:[e.jsx(z,{children:e.jsx("div",{className:"font-medium",children:J.player_name})}),e.jsx(z,{className:"text-center",children:e.jsx(ee,{className:Q(J.position),children:J.position})}),e.jsx(z,{className:"text-center font-mono hidden md:table-cell",children:_?e.jsx(ms,{className:"h-3 w-3 animate-spin"}):de(J.sleeper_id)}),e.jsx(z,{className:"text-center hidden sm:table-cell",children:J.nfl_team||"FA"}),e.jsx(z,{className:"text-center font-mono",children:J.total_points.toFixed(1)}),e.jsx(z,{className:"text-center font-mono hidden md:table-cell",children:J.avg_points.toFixed(1)}),e.jsx(z,{className:"text-center",children:D(J.is_rostered,J.injury_status)}),e.jsx(z,{className:"text-center hidden lg:table-cell",children:xe(J.rostered_by_teams)})]},J.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",Math.min((u-1)*h+1,c)," to ",Math.min(u*h,c)," of ",c," players"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",size:"sm",onClick:()=>m(J=>Math.max(1,J-1)),disabled:u===1,children:"Previous"}),e.jsxs("span",{className:"text-sm",children:["Page ",u," of ",Math.ceil(c/h)]}),e.jsx(X,{variant:"outline",size:"sm",onClick:()=>m(J=>J+1),disabled:u*h>=c,children:"Next"})]})]})]})})]}),e.jsx(Le,{value:"trending",className:"space-y-6",children:e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"h-5 w-5"}),"Trending Players (Last 24 Hours)"]}),e.jsx(Ce,{children:"Most added players across all Sleeper leagues in the past 24 hours"})]}),e.jsx(Y,{className:"flex justify-center",children:e.jsx("iframe",{src:"https://sleeper.app/embed/players/nfl/trending/add?lookback_hours=24&limit=25",width:"350",height:"500",allowTransparency:!0,frameBorder:"0",className:"rounded-lg border",title:"Trending Players"})})]})})]})]})};var ja="Progress",ya=100,[Kh,Up]=Ft(ja),[Qh,Zh]=Kh(ja),ac=l.forwardRef((t,s)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:o=ef,...i}=t;(a||a===0)&&!Ua(a)&&console.error(sf(`${a}`,"Progress"));const c=Ua(a)?a:ya;n!==null&&!Wa(n,c)&&console.error(tf(`${n}`,"Progress"));const d=Wa(n,c)?n:null,u=Gr(d)?o(d,c):void 0;return e.jsx(Qh,{scope:r,value:d,max:c,children:e.jsx(fs.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Gr(d)?d:void 0,"aria-valuetext":u,role:"progressbar","data-state":cc(d,c),"data-value":d??void 0,"data-max":c,...i,ref:s})})});ac.displayName=ja;var oc="ProgressIndicator",ic=l.forwardRef((t,s)=>{const{__scopeProgress:r,...n}=t,a=Zh(oc,r);return e.jsx(fs.div,{"data-state":cc(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:s})});ic.displayName=oc;function ef(t,s){return`${Math.round(t/s*100)}%`}function cc(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function Gr(t){return typeof t=="number"}function Ua(t){return Gr(t)&&!isNaN(t)&&t>0}function Wa(t,s){return Gr(t)&&!isNaN(t)&&t<=s&&t>=0}function sf(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${ya}\`.`}function tf(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${ya} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var lc=ac,rf=ic;const gt=l.forwardRef(({className:t,value:s,...r},n)=>e.jsx(lc,{ref:n,className:Ne("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...r,children:e.jsx(rf,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));gt.displayName=lc.displayName;const nf=()=>{const{playerId:t}=ra(),{selectedSeason:s,selectedConference:r,currentSeasonConfig:n}=Hs(),{toast:a}=Is(),[o,i]=l.useState("overview"),[c,d]=l.useState(null),[u,m]=l.useState(!0),[h,v]=l.useState(null),[j,b]=l.useState([]),[g,x]=l.useState([]),[N,p]=l.useState(""),[k,T]=l.useState(!1),[P,F]=l.useState("weekly"),[L,E]=l.useState({fantasyPoints:0,gamesPlayed:0,positionalRank:"N/A",overallRank:"N/A"}),[R,A]=l.useState(!1),U=async()=>{if(!(!t||!n))try{m(!0),v(null),console.log("Fetching player detail for ID:",t);const y=await H.getPlayers({filters:[{column:"sleeper_id",operator:"eq",value:t},{column:"playing_status",operator:"eq",value:"Active"},{column:"position",operator:"in",value:["QB","RB","WR","TE"]}]});if(y.error||!y.data||y.data.length===0)throw new Error("Player not found or not active");const f=y.data[0];console.log("Found player:",f);const w=new Date().getFullYear(),C=f.years_exp||0,$=[];for(let D=0;D<C;D++)$.push((w-1-D).toString());$.unshift(w.toString()),x($);const W=$.length>1?$[1]:$[0];if(p(W),W){console.log(` Loading initial stats for default season: ${W}`);const D=await ke.fetchPlayerSeasonStats(t,W),de=D.map(xe=>({...xe,season:W}));b(de),console.log(` Initial stats loaded: ${D.length} weeks for season ${W}`)}let q=n.conferences;r&&r!=="all"&&(q=n.conferences.filter(D=>D.id===r));const re=q.filter(D=>D.dbConferenceId).map(D=>D.dbConferenceId);if(re.length===0)throw new Error("No valid conference IDs found");const M=await H.getTeamConferenceJunctions({filters:[{column:"conference_id",operator:"in",value:re}]});if(M.error||!M.data)throw new Error("Failed to fetch team mappings");const le=[...new Set(M.data.map(D=>D.team_id))],ne=await H.getTeams({filters:[{column:"id",operator:"in",value:le}]});if(ne.error||!ne.data)throw new Error("Failed to fetch teams");const ie=await Promise.all(q.map(async D=>{try{if(!D.leagueId)return console.warn(`No league ID for conference ${D.name}`),{conference:D,rosters:[]};const de=await ke.fetchLeagueRosters(D.leagueId);return{conference:D,rosters:de}}catch(de){return console.warn(`Failed to fetch rosters for conference ${D.name}:`,de),{conference:D,rosters:[]}}})),ue=[];ie.forEach(({conference:D,rosters:de})=>{de.forEach(xe=>{var J,he;if(xe.players&&xe.players.includes(t)){const pe=(J=M.data)==null?void 0:J.find(_e=>_e.conference_id===D.dbConferenceId&&_e.roster_id===xe.roster_id);if(pe){const _e=(he=ne.data)==null?void 0:he.find(ye=>ye.id===pe.team_id);_e&&ue.push({conference_id:D.dbConferenceId,conference_name:D.name,team_id:_e.id,team_name:_e.team_name,owner_name:_e.owner_name,roster_id:xe.roster_id,league_id:D.leagueId})}}})});const je=[],be=O(),Se=[...new Set(ue.map(D=>D.league_id))];for(const D of Se){const de=ue.find(xe=>xe.league_id===D);if(de)for(let xe=1;xe<=Math.min(be,17);xe++)try{const he=(await ke.fetchMatchups(D,xe)).find(pe=>pe.players&&pe.players.includes(t));if(he&&he.players_points){const pe=he.players_points[t]||0;je.push({week:xe,points:pe,league_id:D,conference_name:de.conference_name})}}catch(J){console.warn(`Failed to fetch matchup data for league ${D}, week ${xe}:`,J)}}const Ie={totalPoints:je.reduce((D,de)=>D+de.points,0),gamesPlayed:je.length,bestGame:je.length>0?Math.max(...je.map(D=>D.points)):0,worstGame:je.length>0?Math.min(...je.map(D=>D.points)):0,avgPoints:0,consistency:0,weeklyPerformance:je};if(Ie.avgPoints=Ie.gamesPlayed>0?Ie.totalPoints/Ie.gamesPlayed:0,Ie.gamesPlayed>1){const D=Ie.avgPoints,de=je.reduce((he,pe)=>he+Math.pow(pe.points-D,2),0)/Ie.gamesPlayed,xe=Math.sqrt(de),J=D>0?xe/D:0;Ie.consistency=Math.max(0,100-J*100)}let ds;ue.length===0?ds="free_agent":ue.length===1?ds="rostered":ds="multi_rostered";const Q={id:f.id,sleeper_id:f.sleeper_id,player_name:f.player_name,position:f.position,nfl_team:f.nfl_team||"FA",number:f.number||0,age:f.age||0,height:f.height||0,weight:f.weight||0,college:f.college||"Unknown",playing_status:f.playing_status||"Active",injury_status:f.injury_status,depth_chart:f.depth_chart||1,rostered_by:ue,availability_status:ds,season_stats:Ie};d(Q),console.log("Loaded player detail:",Q),await se()}catch(y){console.error("Error fetching player data:",y);const f=y instanceof Error?y.message:"Failed to fetch player data";v(f),a({title:"Error Loading Player",description:f,variant:"destructive"})}finally{m(!1)}},se=async()=>{if(t)try{A(!0);const y=new Date().getFullYear().toString();console.log(` Fetching current season summary for player ${t}, season ${y}`);const f=await ke.fetchPlayerSeasonStatsComplete(t,"regular",y);if(console.log(" Current season stats received:",f),f&&f.length>0){const w=f[0];console.log(" Season data structure:",w),w&&w.stats?(E({fantasyPoints:w.stats.pts_ppr||0,gamesPlayed:w.stats.gp||0,positionalRank:w.stats.pos_rank_ppr?w.stats.pos_rank_ppr.toString():"N/A",overallRank:w.stats.rank_ppr?w.stats.rank_ppr.toString():"N/A"}),console.log(` Current season summary loaded for ${y}:`,{fantasyPoints:w.stats.pts_ppr||0,gamesPlayed:w.stats.gp||0,positionalRank:w.stats.pos_rank_ppr||"N/A",overallRank:w.stats.rank_ppr||"N/A"})):(console.log(` Season data exists but no stats object found for ${y}`),E({fantasyPoints:0,gamesPlayed:0,positionalRank:"N/A",overallRank:"N/A"}))}else console.log(` No current season data available for player ${t}, season ${y}`),E({fantasyPoints:0,gamesPlayed:0,positionalRank:"N/A",overallRank:"N/A"})}catch(y){console.error(" Error fetching current season summary:",y),E({fantasyPoints:0,gamesPlayed:0,positionalRank:"N/A",overallRank:"N/A"})}finally{A(!1)}},K=async y=>{if(!(!t||!y))try{T(!0),console.log(` Fetching performance stats for player ${t}, season ${y}`);const f=await ke.fetchPlayerSeasonStats(t,y);console.log(" Raw stats received:",f);const w=f.map(C=>({...C,season:y}));b(C=>{const W=[...C.filter(q=>q.season!==y),...w];return console.log(` Updated performance stats. Total: ${W.length}, For season ${y}: ${w.length}`),W}),f.length>0?console.log(` Successfully loaded ${f.length} weekly stats for season ${y}`):console.log(` No data found for player ${t}, season ${y}`)}catch(f){console.error(` Error fetching performance stats for season ${y}:`,f),a({title:"Error Loading Performance Data",description:`Failed to load stats for ${y} season`,variant:"destructive"})}finally{T(!1)}},B=y=>{console.log(` Season changed to: ${y}`),p(y),K(y)};window.debugPlayerStats=()=>{console.log(" Debug Info:"),console.log("Player ID:",t),console.log("Available Seasons:",g),console.log("Selected Season:",N),console.log("Performance Sub Tab:",P),console.log("Performance Stats Count:",j.length),console.log("Performance Stats:",j),console.log("Seasons in data:",[...new Set(j.map(y=>y.season))]),console.log("Season Totals:",Z())};const Z=()=>{const y={};return j.forEach(f=>{const w=f.season;y[w]||(y[w]={season:w,pts_ppr:0,rush_att:0,rush_yd:0,rush_td:0,rec:0,rec_tgt:0,rec_yd:0,rec_td:0,pass_comp:0,pass_inc:0,pass_yd:0,pass_int:0,pass_td:0,fum:0,rush_2pt:0,rec_2pt:0,pass_2pt:0,games:0});const C=y[w];C.pts_ppr+=f.pts_ppr||0,C.rush_att+=f.rush_att||0,C.rush_yd+=f.rush_yd||0,C.rush_td+=f.rush_td||0,C.rec+=f.rec||0,C.rec_tgt+=f.rec_tgt||0,C.rec_yd+=f.rec_yd||0,C.rec_td+=f.rec_td||0,C.pass_comp+=f.pass_comp||0,C.pass_inc+=f.pass_inc||0,C.pass_yd+=f.pass_yd||0,C.pass_int+=f.pass_int||0,C.pass_td+=f.pass_td||0,C.fum+=f.fum||0,C.rush_2pt+=f.rush_2pt||0,C.rec_2pt+=f.rec_2pt||0,C.pass_2pt+=f.pass_2pt||0,C.games+=1}),Object.values(y).sort((f,w)=>parseInt(w.season)-parseInt(f.season))};window.testPlayerAPI=async(y,f)=>{const w=y||t,C=f||N;console.log(` Testing API for player ${w}, season ${C}`);try{const $=`https://api.sleeper.com/stats/nfl/player/${w}?season_type=regular&season=${C}&grouping=week`;console.log(" API URL:",$);const W=await fetch($);console.log(" Response status:",W.status,W.statusText);const q=await W.json();return console.log(" Raw response:",q),console.log(" Response type:",typeof q),console.log(" Keys:",Object.keys(q||{})),q}catch($){return console.error(" API test failed:",$),null}},l.useEffect(()=>{t&&n&&U()},[t,s,r,n]),l.useEffect(()=>{t&&se()},[t]),l.useEffect(()=>{N&&t&&K(N)},[N,t]);const ae=async()=>{if(!(!t||g.length===0)){console.log(" Loading all seasons data for season totals view..."),T(!0);try{const y=[...new Set(j.map(w=>w.season))],f=g.filter(w=>!y.includes(w));if(console.log(" Seasons to load:",f),console.log(" Already loaded:",y),f.length>0){const C=(await Promise.all(f.map(async $=>(await ke.fetchPlayerSeasonStats(t,$)).map(q=>({...q,season:$}))))).flat();b($=>[...$,...C]),console.log(` Loaded ${C.length} additional weekly stats across ${f.length} seasons`)}else console.log(" All seasons already loaded")}catch(y){console.error(" Error loading all seasons data:",y)}finally{T(!1)}}};l.useEffect(()=>{P==="season"&&g.length>0&&ae()},[P,g]);const O=()=>{const y=new Date,f=new Date(y.getFullYear(),8,1),w=Math.floor((y.getTime()-f.getTime())/(7*24*60*60*1e3));return Math.min(Math.max(w+1,1),17)},_=y=>{switch(y){case"QB":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"RB":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"WR":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"TE":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},S=y=>{if(!y||y==="Healthy")return null;const f={IR:"destructive",Out:"destructive",Doubtful:"destructive",Questionable:"secondary",Probable:"secondary",Q:"secondary",D:"destructive",O:"destructive"};return e.jsx(ee,{variant:f[y]||"outline",children:y})};return u?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ms,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading player data..."})]})}):h?e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ts,{to:"/players",children:e.jsxs(X,{variant:"ghost",className:"mb-4",children:[e.jsx(Et,{className:"mr-2 h-4 w-4"}),"Back to Players"]})}),e.jsxs(qe,{variant:"destructive",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(Ve,{children:h})]}),e.jsx("div",{className:"text-center",children:e.jsxs(X,{onClick:U,variant:"outline",children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Try Again"]})})]}):c?e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ts,{to:"/players",children:e.jsxs(X,{variant:"ghost",className:"mb-4",children:[e.jsx(Et,{className:"mr-2 h-4 w-4"}),"Back to Players"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-16 w-16 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(Au,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:c.player_name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(ee,{className:_(c.position),children:c.position}),e.jsxs(ee,{variant:"outline",children:[c.nfl_team," #",c.number]}),S(c.injury_status)]}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:[c.age," years old  ",c.height,'"", ',c.weight," lbs  ",c.college]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:L.fantasyPoints.toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Fantasy Points"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:L.gamesPlayed}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Games Played"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:L.positionalRank}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Positional Rank"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:L.overallRank}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Overall Rank"})]})]})]}),c.rostered_by.length>0&&e.jsx(V,{children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Currently rostered by:"}),c.rostered_by.map((y,f)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"font-semibold",children:y.team_name}),e.jsx("span",{className:"text-muted-foreground",children:""}),e.jsx("p",{className:"text-muted-foreground",children:y.owner_name})]}),c.rostered_by.length>1&&e.jsx("p",{className:"text-sm text-blue-600",children:y.conference_name})]}),e.jsx(Ts,{to:`/teams/${y.team_id}`,children:e.jsx(X,{variant:"outline",size:"sm",children:"View Team"})})]},f))]})})}),e.jsxs(ut,{value:o,onValueChange:i,className:"w-full",children:[e.jsxs(lt,{className:"grid w-full grid-cols-3",children:[e.jsx(Me,{value:"overview",children:"Overview"}),e.jsx(Me,{value:"performance",children:"Performance"}),e.jsx(Me,{value:"details",children:"Details"})]}),e.jsx(Le,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(V,{children:[e.jsx(oe,{children:e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"h-5 w-5"}),e.jsx("span",{children:"Season Summary"})]})}),e.jsxs(Y,{className:"space-y-4",children:[R?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin mr-2"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading current season data..."})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fantasy Points"}),e.jsx("p",{className:"text-2xl font-bold",children:L.fantasyPoints.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Games Played"}),e.jsx("p",{className:"text-2xl font-bold",children:L.gamesPlayed})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Positional Rank"}),e.jsx("p",{className:"text-2xl font-bold",children:L.positionalRank})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Overall Rank"}),e.jsx("p",{className:"text-2xl font-bold",children:L.overallRank})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Availability Status"}),e.jsx("span",{className:"capitalize",children:c.availability_status.replace("_"," ")})]}),e.jsx(gt,{value:c.availability_status==="multi_rostered"?100:c.availability_status==="rostered"?75:25,className:"h-2"})]})]})]}),e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{children:"Player Info"})}),e.jsx(Y,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Position"}),e.jsx("p",{className:"font-medium",children:c.position})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"NFL Team"}),e.jsx("p",{className:"font-medium",children:c.nfl_team})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Number"}),e.jsxs("p",{className:"font-medium",children:["#",c.number]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Depth Chart"}),e.jsx("p",{className:"font-medium",children:c.depth_chart})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Height"}),e.jsxs("p",{className:"font-medium",children:[c.height,'""']})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Weight"}),e.jsxs("p",{className:"font-medium",children:[c.weight," lbs"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"College"}),e.jsx("p",{className:"font-medium",children:c.college})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Age"}),e.jsx("p",{className:"font-medium",children:c.age})]})]})})]})]})}),e.jsx(Le,{value:"performance",className:"space-y-4",children:e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(Rt,{className:"h-5 w-5"}),e.jsx("span",{children:"Player Performance"})]}),e.jsx(Ce,{children:"Detailed statistics and game logs"})]}),e.jsx(Y,{className:"space-y-4",children:e.jsxs(ut,{value:P,onValueChange:F,className:"w-full",children:[e.jsxs(lt,{className:"grid w-full grid-cols-2",children:[e.jsx(Me,{value:"weekly",children:"Weekly Stats"}),e.jsx(Me,{value:"season",children:"Season Totals"})]}),e.jsxs(Le,{value:"weekly",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{htmlFor:"season-select",className:"text-sm font-medium",children:"Season:"}),e.jsxs(cs,{value:N,onValueChange:B,children:[e.jsx(ns,{className:"w-32",children:e.jsx(ls,{placeholder:"Select season"})}),e.jsx(as,{children:g.map(y=>e.jsx(Re,{value:y,children:y},y))})]})]}),k&&e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin mr-2"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading performance data..."})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(As,{children:[e.jsxs(Ms,{children:[e.jsxs($e,{children:[e.jsx(G,{className:"text-center border-r",colSpan:3,children:"Fantasy"}),e.jsx(G,{className:"text-center border-r",colSpan:3,children:"Rushing"}),e.jsx(G,{className:"text-center border-r",colSpan:4,children:"Receiving"}),e.jsx(G,{className:"text-center border-r",colSpan:4,children:"Passing"}),e.jsx(G,{className:"text-center",colSpan:2,children:"Misc"})]}),e.jsxs($e,{children:[e.jsx(G,{children:"Week"}),e.jsx(G,{children:"Pts"}),e.jsx(G,{className:"border-r",children:"Pos Rank"}),e.jsx(G,{children:"Att"}),e.jsx(G,{children:"Yds"}),e.jsx(G,{className:"border-r",children:"TD"}),e.jsx(G,{children:"Rec"}),e.jsx(G,{children:"Tar"}),e.jsx(G,{children:"Yds"}),e.jsx(G,{className:"border-r",children:"TD"}),e.jsx(G,{children:"Cmp"}),e.jsx(G,{children:"Att"}),e.jsx(G,{children:"Yds"}),e.jsx(G,{children:"Int"}),e.jsx(G,{className:"border-r",children:"TD"}),e.jsx(G,{children:"Fum"}),e.jsx(G,{children:"2pt"})]})]}),e.jsx(Ls,{children:(()=>{const y=j.filter(w=>w.season===N);console.log(` Displaying ${y.length} stats for season ${N}`),console.log("Available seasons in data:",[...new Set(j.map(w=>w.season))]),console.log("Sample stat for debugging:",y[0]);const f=y.reduce((w,C)=>({pts_ppr:w.pts_ppr+(C.pts_ppr||0),rush_att:w.rush_att+(C.rush_att||0),rush_yd:w.rush_yd+(C.rush_yd||0),rush_td:w.rush_td+(C.rush_td||0),rec:w.rec+(C.rec||0),rec_tgt:w.rec_tgt+(C.rec_tgt||0),rec_yd:w.rec_yd+(C.rec_yd||0),rec_td:w.rec_td+(C.rec_td||0),pass_comp:w.pass_comp+(C.pass_comp||0),pass_inc:w.pass_inc+(C.pass_inc||0),pass_yd:w.pass_yd+(C.pass_yd||0),pass_int:w.pass_int+(C.pass_int||0),pass_td:w.pass_td+(C.pass_td||0),fum:w.fum+(C.fum||0),rush_2pt:w.rush_2pt+(C.rush_2pt||0),rec_2pt:w.rec_2pt+(C.rec_2pt||0),pass_2pt:w.pass_2pt+(C.pass_2pt||0)}),{pts_ppr:0,rush_att:0,rush_yd:0,rush_td:0,rec:0,rec_tgt:0,rec_yd:0,rec_td:0,pass_comp:0,pass_inc:0,pass_yd:0,pass_int:0,pass_td:0,fum:0,rush_2pt:0,rec_2pt:0,pass_2pt:0});return e.jsxs(e.Fragment,{children:[e.jsxs($e,{className:"font-semibold bg-muted/50",children:[e.jsx(z,{children:"Total"}),e.jsx(z,{className:"font-bold",children:f.pts_ppr.toFixed(1)}),e.jsx(z,{className:"border-r",children:"-"}),e.jsx(z,{children:f.rush_att}),e.jsx(z,{children:f.rush_yd}),e.jsx(z,{className:"border-r",children:f.rush_td}),e.jsx(z,{children:f.rec}),e.jsx(z,{children:f.rec_tgt}),e.jsx(z,{children:f.rec_yd}),e.jsx(z,{className:"border-r",children:f.rec_td}),e.jsx(z,{children:f.pass_comp}),e.jsx(z,{children:f.pass_comp+f.pass_inc}),e.jsx(z,{children:f.pass_yd}),e.jsx(z,{children:f.pass_int}),e.jsx(z,{className:"border-r",children:f.pass_td}),e.jsx(z,{children:f.fum}),e.jsx(z,{children:f.rush_2pt+f.rec_2pt+f.pass_2pt})]}),y.length>0?y.sort((w,C)=>(C.week||0)-(w.week||0)).map((w,C)=>e.jsxs($e,{children:[e.jsx(z,{children:w.week||"-"}),e.jsx(z,{className:"font-bold",children:(w.pts_ppr||0).toFixed(1)}),e.jsx(z,{className:"border-r",children:w.pos_rank_ppr||"-"}),e.jsx(z,{children:w.rush_att||0}),e.jsx(z,{children:w.rush_yd||0}),e.jsx(z,{className:"border-r",children:w.rush_td||0}),e.jsx(z,{children:w.rec||0}),e.jsx(z,{children:w.rec_tgt||0}),e.jsx(z,{children:w.rec_yd||0}),e.jsx(z,{className:"border-r",children:w.rec_td||0}),e.jsx(z,{children:w.pass_comp||0}),e.jsx(z,{children:(w.pass_comp||0)+(w.pass_inc||0)}),e.jsx(z,{children:w.pass_yd||0}),e.jsx(z,{children:w.pass_int||0}),e.jsx(z,{className:"border-r",children:w.pass_td||0}),e.jsx(z,{children:w.fum||0}),e.jsx(z,{children:(w.rush_2pt||0)+(w.rec_2pt||0)+(w.pass_2pt||0)})]},C)):e.jsx($e,{children:e.jsxs(z,{colSpan:17,className:"text-center py-8 text-muted-foreground",children:["No data available for ",N," season"]})})]})})()})]})})]}),e.jsxs(Le,{value:"season",className:"space-y-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Career totals by season. Most recent season highlighted."})}),k&&e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin mr-2"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading career statistics..."})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(As,{children:[e.jsxs(Ms,{children:[e.jsxs($e,{children:[e.jsx(G,{className:"text-center border-r",colSpan:3,children:"Fantasy"}),e.jsx(G,{className:"text-center border-r",colSpan:3,children:"Rushing"}),e.jsx(G,{className:"text-center border-r",colSpan:4,children:"Receiving"}),e.jsx(G,{className:"text-center border-r",colSpan:4,children:"Passing"}),e.jsx(G,{className:"text-center",colSpan:2,children:"Misc"})]}),e.jsxs($e,{children:[e.jsx(G,{children:"Season"}),e.jsx(G,{children:"Pts"}),e.jsx(G,{className:"border-r",children:"Games"}),e.jsx(G,{children:"Att"}),e.jsx(G,{children:"Yds"}),e.jsx(G,{className:"border-r",children:"TD"}),e.jsx(G,{children:"Rec"}),e.jsx(G,{children:"Tar"}),e.jsx(G,{children:"Yds"}),e.jsx(G,{className:"border-r",children:"TD"}),e.jsx(G,{children:"Cmp"}),e.jsx(G,{children:"Att"}),e.jsx(G,{children:"Yds"}),e.jsx(G,{children:"Int"}),e.jsx(G,{className:"border-r",children:"TD"}),e.jsx(G,{children:"Fum"}),e.jsx(G,{children:"2pt"})]})]}),e.jsx(Ls,{children:(()=>{const y=Z();return console.log(" Season totals calculated:",y),y.length>0?y.map((f,w)=>e.jsxs($e,{className:w===0?"bg-muted/30":"",children:[e.jsx(z,{className:"font-semibold",children:f.season}),e.jsx(z,{className:"font-bold",children:f.pts_ppr.toFixed(1)}),e.jsx(z,{className:"border-r",children:f.games}),e.jsx(z,{children:f.rush_att}),e.jsx(z,{children:f.rush_yd}),e.jsx(z,{className:"border-r",children:f.rush_td}),e.jsx(z,{children:f.rec}),e.jsx(z,{children:f.rec_tgt}),e.jsx(z,{children:f.rec_yd}),e.jsx(z,{className:"border-r",children:f.rec_td}),e.jsx(z,{children:f.pass_comp}),e.jsx(z,{children:f.pass_comp+f.pass_inc}),e.jsx(z,{children:f.pass_yd}),e.jsx(z,{children:f.pass_int}),e.jsx(z,{className:"border-r",children:f.pass_td}),e.jsx(z,{children:f.fum}),e.jsx(z,{children:f.rush_2pt+f.rec_2pt+f.pass_2pt})]},w)):e.jsx($e,{children:e.jsx(z,{colSpan:17,className:"text-center py-8 text-muted-foreground",children:"No season data available. Load some weekly stats first."})})})()})]})})]})]})})]})}),e.jsxs(Le,{value:"details",className:"space-y-4",children:[e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Roster Information"}),e.jsx(Ce,{children:"Current roster status across all conferences"})]}),e.jsx(Y,{children:c.rostered_by.length>0?e.jsx("div",{className:"space-y-4",children:c.rostered_by.map((y,f)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:y.team_name}),e.jsx(ee,{variant:"secondary",className:$i(y.conference_name),children:y.conference_name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Owner"}),e.jsx("p",{className:"font-medium",children:y.owner_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Roster ID"}),e.jsx("p",{className:"font-medium",children:y.roster_id})]})]})]},f))}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Player is currently a free agent"})})})]}),c.injury_status&&e.jsxs(V,{children:[e.jsx(oe,{children:e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{children:"Injury Status"})]})}),e.jsx(Y,{children:e.jsxs("div",{className:"flex items-start space-x-3 p-4 border rounded-lg bg-yellow-50 dark:bg-yellow-900/20",children:[e.jsx(Je,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:["Status: ",c.injury_status]}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Player is currently listed with an injury designation. Monitor status updates."})]})]})})]})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ts,{to:"/players",children:e.jsxs(X,{variant:"ghost",className:"mb-4",children:[e.jsx(Et,{className:"mr-2 h-4 w-4"}),"Back to Players"]})}),e.jsxs(qe,{children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(Ve,{children:"Player not found or not available in the current season configuration."})]})]})},af=()=>{var P,F,L;const{toast:t}=Is(),{selectedConference:s,currentSeasonConfig:r,loading:n,error:a}=Hs(),[o,i]=l.useState([]),[c,d]=l.useState([]),[u,m]=l.useState(!0),[h,v]=l.useState(null),[j,b]=l.useState({team:"all",player:"",type:"all",conference:"all"}),g=async()=>{if(!r){m(!1);return}try{m(!0),v(null);const E=s==="all"||s===null?r.conferences:r.conferences.filter(ae=>ae.id===s),R=E.filter(ae=>ae.dbConferenceId).map(ae=>ae.dbConferenceId);if(R.length===0){i([]),d([]);return}const A=await H.getTransactions({filters:[{column:"conference_id",operator:"in",value:R}],orderBy:{column:"created_at",ascending:!1}});if(A.error||!A.data)throw new Error(A.error||"Failed to fetch transactions");const U=await H.getTeams({}),se=await H.getTeamConferenceJunctions({filters:[{column:"conference_id",operator:"in",value:R}]}),K=await H.getAllPlayersForMapping([{column:"playing_status",operator:"eq",value:"Active"},{column:"position",operator:"in",value:["QB","RB","WR","TE"]}]),B=new Map;K.forEach(ae=>{ae.sleeper_id&&B.set(String(ae.sleeper_id),ae.player_name)});const Z=await Promise.all(A.data.map(async ae=>{let O={};try{O=typeof ae.data=="string"?JSON.parse(ae.data):ae.data||{}}catch(M){console.warn("Failed to parse transaction data:",M)}const _=E.find(M=>M.dbConferenceId===ae.conference_id),S=M=>{var ne;const le=(ne=se.data)==null?void 0:ne.find(ie=>ie.roster_id.toString()===M.toString()&&ie.conference_id===ae.conference_id);if(le&&U.data){const ie=U.data.find(ue=>ue.id===le.team_id);return(ie==null?void 0:ie.team_name)||"Unknown Team"}return"Unknown Team"};let y="Unknown Team";O.roster_ids&&O.roster_ids.length>0&&(y=S(O.roster_ids[0]));const f=[],w=[],C=M=>{const le=String(M);return B.get(le)||`Player ${le}`};if(O.adds)for(const[M,le]of Object.entries(O.adds)){const ne=C(M),ie=S(le);f.push({name:ne,team:ie})}if(O.drops)for(const[M,le]of Object.entries(O.drops)){const ne=C(M),ie=S(le);w.push({name:ne,team:ie})}let $="";const W=O.type||ae.type,q=new Set;switch(O.roster_ids&&O.roster_ids.forEach(M=>{const le=S(M);le!=="Unknown Team"&&q.add(le)}),W){case"trade":if(f.length>0||w.length>0){const M=[];f.forEach(le=>M.push(`${le.name} to ${le.team}`)),w.forEach(le=>M.push(`${le.name} from ${le.team}`)),q.size>1?$=`Trade between ${Array.from(q).join(" and ")}: ${M.join(", ")}`:$=`${y} trade: ${M.join(", ")}`}else O.draft_picks&&O.draft_picks.length>0?$=`Trade involving ${O.draft_picks.map(le=>`${le.season} Round ${le.round} pick`).join(", ")}`:$=`Trade between ${Array.from(q).join(" and ")}`;break;case"waiver":f.length>0&&w.length>0?$=`${y} claimed ${f.map(M=>M.name).join(", ")} from waivers, dropped ${w.map(M=>M.name).join(", ")}`:f.length>0?$=`${y} claimed ${f.map(M=>M.name).join(", ")} from waivers`:w.length>0?$=`${y} dropped ${w.map(M=>M.name).join(", ")} to waivers`:$=`${y} made a waiver claim`;break;case"free_agent":f.length>0&&w.length>0?$=`${y} added ${f.map(M=>M.name).join(", ")}, dropped ${w.map(M=>M.name).join(", ")}`:f.length>0?$=`${y} added ${f.map(M=>M.name).join(", ")} from free agency`:w.length>0?$=`${y} dropped ${w.map(M=>M.name).join(", ")}`:$=`${y} made a free agent transaction`;break;default:$=`${y} completed a ${W||"transaction"}`}const re=O.type==="trade"?"trade":O.type==="waiver"?"waiver":O.type==="free_agent"?"free_agent":"commissioner";return{id:ae.id.toString(),type:re,date:new Date(ae.created_at||new Date),details:$,teams:[y],players:{added:f.map(M=>({id:"",name:M.name,team:M.team})),dropped:w.map(M=>({id:"",name:M.name,team:M.team}))},week:O.leg||0,status:"completed",rosterIds:O.roster_ids||[],draftPicks:O.draft_picks||[],waiverBudget:O.waiver_budget||[],conference:(_==null?void 0:_.name)||"Unknown Conference",conferenceId:ae.conference_id.toString()}}));i(Z),d(Z)}catch(E){console.error("Error fetching transactions:",E),v("Failed to load transactions. Please try again."),t({title:"Error",description:"Failed to load transactions. Please try again.",variant:"destructive"})}finally{m(!1)}},x=()=>{let E=[...o];j.team&&j.team!=="all"&&(E=E.filter(R=>R.teams.some(A=>A.toLowerCase().includes(j.team.toLowerCase())))),j.player&&(E=E.filter(R=>{const A=R.players.added||[],U=R.players.dropped||[];return[...A,...U].some(se=>se.name.toLowerCase().includes(j.player.toLowerCase()))})),j.type&&j.type!=="all"&&(E=E.filter(R=>R.type===j.type)),j.conference&&j.conference!=="all"&&(E=E.filter(R=>R.conferenceId===j.conference)),d(E)},N=()=>{b({team:"all",player:"",type:"all",conference:"all"})},p=(E,R)=>{b(A=>({...A,[E]:R}))};l.useEffect(()=>{g()},[r,s]),l.useEffect(()=>{x()},[j,o]);const k=()=>{const E=new Set(o.map(R=>R.type));return Array.from(E).filter(R=>R&&R.trim()!=="")},T=()=>{const E=new Set;return o.forEach(R=>{R.teams.forEach(A=>{A&&A.trim()!==""&&E.add(A)})}),Array.from(E).sort()};return n?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transactions"}),e.jsx("p",{className:"text-muted-foreground",children:"All roster moves and trades across conferences"})]})}),e.jsx("div",{className:"grid gap-4",children:[...Array(5)].map((E,R)=>e.jsx(V,{className:"animate-pulse",children:e.jsxs(Y,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},R))})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transactions"}),e.jsx("p",{className:"text-muted-foreground",children:"All roster moves and trades across conferences"})]})}),e.jsx(qe,{variant:"destructive",children:e.jsxs(Ve,{children:["App Error: ",a]})})]}):r?u?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transactions"}),e.jsx("p",{className:"text-muted-foreground",children:"All roster moves and trades across conferences"})]})}),e.jsx("div",{className:"grid gap-4",children:[...Array(5)].map((E,R)=>e.jsx(V,{className:"animate-pulse",children:e.jsxs(Y,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},R))})]}):h?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transactions"}),e.jsx("p",{className:"text-muted-foreground",children:"All roster moves and trades across conferences"})]})}),e.jsx(qe,{variant:"destructive",children:e.jsx(Ve,{children:h})}),e.jsxs(X,{onClick:g,className:"w-full",children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Try Again"]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transactions"}),e.jsx("p",{className:"text-muted-foreground",children:"All roster moves and trades across conferences"})]}),e.jsxs(X,{onClick:g,variant:"outline",size:"sm",children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Refresh"]})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(Zo,{className:"h-5 w-5"}),e.jsx("span",{children:"Filters"})]}),e.jsx(Ce,{children:"Filter transactions by team, player, type, or conference"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Team"}),e.jsxs(cs,{value:j.team,onValueChange:E=>p("team",E),children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"All teams"})}),e.jsxs(as,{children:[e.jsx(Re,{value:"all",children:"All teams"}),T().filter(E=>E&&E.trim()!=="").map(E=>e.jsx(Re,{value:E,children:E},E))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Player"}),e.jsxs("div",{className:"relative",children:[e.jsx(ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Cs,{placeholder:"Search players...",value:j.player,onChange:E=>p("player",E.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Type"}),e.jsxs(cs,{value:j.type,onValueChange:E=>p("type",E),children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"All types"})}),e.jsxs(as,{children:[e.jsx(Re,{value:"all",children:"All types"}),k().filter(E=>E&&E.trim()!=="").map(E=>e.jsx(Re,{value:E,children:E==="trade"?"Trade":E==="free_agent"?"Free Agent":E==="waiver"?"Waiver":E==="commissioner"?"Commissioner":E},E))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Conference"}),e.jsxs(cs,{value:j.conference,onValueChange:E=>p("conference",E),children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"All conferences"})}),e.jsxs(as,{children:[e.jsx(Re,{value:"all",children:"All conferences"}),(P=r==null?void 0:r.conferences)==null?void 0:P.filter(E=>{var A;const R=((A=E.dbConferenceId)==null?void 0:A.toString())||E.id;return R&&R.trim()!==""}).map(E=>{var A;const R=((A=E.dbConferenceId)==null?void 0:A.toString())||E.id;return e.jsx(Re,{value:R,children:E.name},R)})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:(j.team!=="all"||j.player!==""||j.type!=="all"||j.conference!=="all")&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),j.team!=="all"&&e.jsxs(ee,{variant:"secondary",children:["Team: ",j.team]}),j.player!==""&&e.jsxs(ee,{variant:"secondary",children:["Player: ",j.player]}),j.type!=="all"&&e.jsxs(ee,{variant:"secondary",children:["Type: ",j.type]}),j.conference!=="all"&&e.jsxs(ee,{variant:"secondary",children:["Conference: ",(L=(F=r==null?void 0:r.conferences)==null?void 0:F.filter(E=>{var A;const R=((A=E.dbConferenceId)==null?void 0:A.toString())||E.id;return R&&R.trim()!==""}).find(E=>{var R;return((R=E.dbConferenceId)==null?void 0:R.toString())===j.conference}))==null?void 0:L.name]})]})}),(j.team!=="all"||j.player!==""||j.type!=="all"||j.conference!=="all")&&e.jsx(X,{variant:"outline",size:"sm",onClick:N,children:"Reset Filters"})]})]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bt,{className:"h-5 w-5 text-primary"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Showing ",c.length," of ",o.length," transactions"]})]})}),e.jsx("div",{className:"space-y-4",children:c.length>0?c.map((E,R)=>e.jsx(nc,{transaction:E},R)):e.jsx(V,{children:e.jsxs(Y,{className:"p-12 text-center",children:[e.jsx(Bt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No transactions found"}),e.jsx("p",{className:"text-muted-foreground",children:j.team!=="all"||j.player!==""||j.type!=="all"||j.conference!=="all"?"No transactions match your current filters. Try adjusting your search criteria.":"No transactions available at this time."}),(j.team!=="all"||j.player!==""||j.type!=="all"||j.conference!=="all")&&e.jsx(X,{variant:"outline",onClick:N,className:"mt-4",children:"Clear Filters"})]})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transactions"}),e.jsx("p",{className:"text-muted-foreground",children:"All roster moves and trades across conferences"})]})}),e.jsx("div",{className:"grid gap-4",children:[...Array(5)].map((E,R)=>e.jsx(V,{className:"animate-pulse",children:e.jsxs(Y,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},R))})]})},of=()=>{var O;const{selectedSeason:t,selectedConference:s}=Hs(),{toast:r}=Is(),[n,a]=l.useState(1),[o,i]=l.useState("board"),[c,d]=l.useState(!0),[u,m]=l.useState([]),[h,v]=l.useState([]),[j,b]=l.useState([]),[g,x]=l.useState({}),[N,p]=l.useState([]),[k,T]=l.useState(!1),[P,F]=l.useState(new Set);l.useEffect(()=>{L()},[]),l.useEffect(()=>{t&&j.length>0&&h.length>0&&N.length>0&&Object.keys(g).length>0&&E()},[t,s,j,h,N,g]);const L=async()=>{d(!0);try{const _=await H.getSeasons({orderBy:{column:"season_year",ascending:!1},limit:50});if(_.error)throw _.error;b(_.data||[]);const S=await H.getConferences({orderBy:{column:"conference_name",ascending:!0},limit:50});if(S.error)throw S.error;v(S.data||[]);const y=await H.getTeams({orderBy:{column:"team_name",ascending:!0},limit:100});if(y.error)throw y.error;p(y.data||[]);try{const f=await H.getAllPlayersForMapping(),w={};f.forEach(C=>{C.sleeper_id&&(w[C.sleeper_id]=C)}),x(w),console.log(` Loaded ${Object.keys(w).length} players from database (${f.length} total players)`)}catch(f){console.warn("Could not load players data from database:",f),x({})}}catch(_){console.error("Error loading initial data:",_),r({title:"Error",description:`Failed to load initial data: ${_}`,variant:"destructive"})}finally{d(!1)}},E=async()=>{var _;if(!t){console.log(" No selectedSeason, skipping draft data load");return}if(j.length===0){console.log(" Seasons not loaded yet, skipping draft data load");return}if(h.length===0){console.log(" Conferences not loaded yet, skipping draft data load");return}if(N.length===0){console.log(" Teams not loaded yet, skipping draft data load");return}if(Object.keys(g).length===0){console.log(" Players not loaded yet, skipping draft data load");return}T(!0);try{if(console.log(` Loading draft data for season ${t}, conference: ${s||"all"}`),console.log(` Available data: seasons=${j.length}, conferences=${h.length}, teams=${N.length}, players=${Object.keys(g).length}`),!j.find($=>$.season_year===t.toString())){console.warn(` Season ${t} not found in database`),console.log("Available seasons:",j.map($=>$.season_year)),m([]);return}const y=[{column:"draft_year",operator:"eq",value:t.toString()}];console.log(" Draft query filters:",y);const f=await H.getDraftResults({filters:y,orderBy:{column:"pick_number",ascending:!0},limit:1e3});if(f.error)throw f.error;console.log(` Loaded ${((_=f.data)==null?void 0:_.length)||0} draft picks`);const w=f.data||[],C=w.map($=>{const W=h.find(M=>M.league_id===$.league_id),q=g[$.sleeper_id],re=N.find(M=>M.owner_id===$.owner_id);return w.indexOf($)<3&&console.log(` Processing pick ${$.pick_number}:`,{sleeper_id:$.sleeper_id,player_found:!!q,player_name:q==null?void 0:q.player_name,conference_found:!!W,team_found:!!re}),{...$,conference_name:(W==null?void 0:W.conference_name)||"Unknown Conference",player_name:(q==null?void 0:q.player_name)||"Unknown Player",position:(q==null?void 0:q.position)||"UNK",nfl_team:(q==null?void 0:q.nfl_team)||"UNK",owner_name:(re==null?void 0:re.owner_name)||"Unknown Owner",team_name:(re==null?void 0:re.team_name)||"Unknown Team",conference_id:W==null?void 0:W.id,team_id:re==null?void 0:re.id,player_id:$.sleeper_id}});console.log(` Processed ${C.length} draft picks`),console.log("First few picks:",C.slice(0,3)),m(C)}catch(S){console.error("Error loading draft data:",S),r({title:"Error",description:`Failed to load draft data: ${S}`,variant:"destructive"}),m([])}finally{T(!1)}},R=_=>{const S=new Set(P);S.has(_)?S.delete(_):S.add(_),F(S)},A=()=>{if(!s){const w=j.find($=>$.season_year===t.toString());if(!w)return console.log(" Season not found for getConferencesToShow"),[];const C=h.filter($=>$.season_id===w.id);return console.log(` Showing ${C.length} conferences for season ${t}`),C}const S={thelegionsofmars:"The Legions of Mars",theguardiansofjupiter:"The Guardians of Jupiter",vulcansoathsworn:"Vulcan's Oathsworn"}[s];if(!S)return console.log(` Unknown conference ID: ${s}`),[];const y=j.find(w=>w.season_year===t.toString());if(!y)return console.log(" Season not found for specific conference"),[];const f=h.find(w=>w.season_id===y.id&&w.conference_name===S);return console.log(` Selected conference: ${S}, found: ${f?"yes":"no"}`),f?[f]:[]},U=_=>{switch(_){case"QB":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"RB":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"WR":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"TE":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"K":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"DEF":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},se=_=>{let y=u.filter(f=>f.conference_id===_.id).filter(f=>parseInt(f.round)===n);return y.sort((f,w)=>parseInt(f.draft_slot)-parseInt(w.draft_slot)),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(jr,{className:"h-5 w-5"}),e.jsx("span",{children:_.conference_name})]}),e.jsxs(Ce,{children:["Round ",n,"  ",y.length," picks"]})]}),e.jsx(Y,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{className:"w-16",children:"Pick"}),e.jsx(G,{className:"w-16",children:"Overall"}),e.jsx(G,{children:"Player"}),e.jsx(G,{children:"Position"}),e.jsx(G,{className:"hidden sm:table-cell",children:"NFL Team"}),e.jsx(G,{children:"Drafted By"})]})}),e.jsx(Ls,{children:y.length>0?y.map(f=>e.jsxs($e,{children:[e.jsx(z,{className:"font-medium",children:f.draft_slot}),e.jsx(z,{className:"font-medium",children:f.pick_number}),e.jsx(z,{className:"font-semibold",children:f.player_name}),e.jsx(z,{children:e.jsx(ee,{className:U(f.position),children:f.position})}),e.jsx(z,{className:"hidden sm:table-cell",children:f.nfl_team}),e.jsx(z,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:f.team_name}),e.jsx("div",{className:"text-muted-foreground",children:f.owner_name})]})})]},`${_.id}-${f.pick_number}`)):e.jsx($e,{children:e.jsxs(z,{colSpan:6,className:"text-center text-muted-foreground py-8",children:["No picks found for round ",n]})})})]})})})]},_.id)},K=()=>{const _=A();return e.jsx("div",{className:"space-y-6",children:_.map(S=>{const y=u.filter(C=>C.conference_id===S.id),f=new Map;y.forEach(C=>{const $=C.team_id;f.has($)||f.set($,{team_id:C.team_id,owner_name:C.owner_name,team_name:C.team_name,picks:[]}),f.get($).picks.push(C)}),f.forEach(C=>{C.picks.sort(($,W)=>{const q=parseInt($.round),re=parseInt(W.round);return q!==re?q-re:parseInt($.draft_slot)-parseInt(W.draft_slot)})});const w=Array.from(f.values());return e.jsxs(V,{children:[e.jsx(oe,{children:e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(bs,{className:"h-5 w-5"}),e.jsxs("span",{children:[S.conference_name," - Team Draft Summary"]})]})}),e.jsxs(Y,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.map(C=>{const $=P.has(C.team_id),W=$?C.picks:C.picks.slice(0,8);return e.jsxs(V,{children:[e.jsxs(oe,{className:"pb-2",children:[e.jsx(ce,{className:"text-lg",children:C.team_name}),e.jsxs(Ce,{children:[C.owner_name,"  ",C.picks.length," picks"]})]}),e.jsx(Y,{children:e.jsxs("div",{className:"space-y-2",children:[W.map(q=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-accent/50",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(ee,{variant:"outline",className:"text-xs",children:["R",q.round]}),e.jsx("span",{className:"font-medium text-sm",children:q.player_name}),e.jsx(ee,{className:`${U(q.position)} text-xs`,children:q.position})]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["#",q.pick_number]})]},q.pick_number)),C.picks.length>8&&e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx(X,{variant:"ghost",size:"sm",onClick:()=>R(C.team_id),className:"text-xs",children:$?e.jsxs(e.Fragment,{children:[e.jsx(ia,{className:"h-3 w-3 mr-1"}),"Show Less"]}):e.jsxs(e.Fragment,{children:[e.jsx(on,{className:"h-3 w-3 mr-1"}),"Show All ",C.picks.length," Picks"]})})})]})})]},C.team_id)})}),w.length===0&&e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(Je,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"No draft picks found for this conference"}),e.jsx("p",{className:"text-sm",children:"Try syncing draft data from the Admin panel"})]})]})]},S.id)})})};if(c)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-b-2 border-blue-600 rounded-full"})});console.log(" Render debug:",{selectedSeason:t,selectedConference:s,draftPicksCount:u.length,seasonsCount:j.length,conferencesCount:h.length,teamsCount:N.length});const B=A();console.log(" Conferences to show:",B.length);const Z=B.reduce((_,S)=>{const y=new Set(u.filter(f=>f.conference_id===S.id).map(f=>f.team_id));return _+y.size},0),ae=Math.max(...u.map(_=>parseInt(_.round)),1);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Lr,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Draft Results"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-muted-foreground",children:[t," Season  ",s?((O=B[0])==null?void 0:O.conference_name)||"Conference":"All Conferences"]}),e.jsxs(X,{variant:"outline",size:"sm",onClick:E,disabled:k,children:[k?e.jsx(Ke,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(V,{children:e.jsxs(oe,{className:"pb-2",children:[e.jsx(Ce,{children:"Total Conferences"}),e.jsx(ce,{className:"text-2xl",children:B.length})]})}),e.jsx(V,{children:e.jsxs(oe,{className:"pb-2",children:[e.jsx(Ce,{children:"Total Teams"}),e.jsx(ce,{className:"text-2xl",children:Z})]})}),e.jsx(V,{children:e.jsxs(oe,{className:"pb-2",children:[e.jsx(Ce,{children:"Total Picks"}),e.jsx(ce,{className:"text-2xl",children:u.length})]})}),e.jsx(V,{children:e.jsxs(oe,{className:"pb-2",children:[e.jsx(Ce,{children:"Max Rounds"}),e.jsx(ce,{className:"text-2xl",children:ae})]})})]}),u.length===0?e.jsx(V,{children:e.jsxs(Y,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Je,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Draft Results Found"}),e.jsxs("p",{className:"text-muted-foreground text-center mb-4",children:["No draft picks found for the ",t," season",s?` in ${s}`:"","."]}),e.jsxs("div",{className:"text-sm text-muted-foreground text-center space-y-2",children:[e.jsx("p",{children:"Try:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Selecting a different season from the dropdown above"}),e.jsx("li",{children:'Choosing "All Conferences" if you have a conference selected'}),e.jsx("li",{children:"Syncing draft data from Admin  Data Sync  Draft Sync"})]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(cs,{value:n.toString(),onValueChange:_=>a(parseInt(_)),children:[e.jsx(ns,{className:"w-32",children:e.jsx(ls,{})}),e.jsx(as,{children:Array.from({length:ae},(_,S)=>e.jsxs(Re,{value:(S+1).toString(),children:["Round ",S+1]},S+1))})]})})}),e.jsxs(ut,{value:o,onValueChange:_=>i(_),className:"w-full",children:[e.jsxs(lt,{children:[e.jsx(Me,{value:"board",children:"Draft Board"}),e.jsx(Me,{value:"team",children:"Team View"})]}),e.jsx(Le,{value:"board",className:"space-y-6",children:B.map(_=>se(_))}),e.jsx(Le,{value:"team",className:"space-y-6",children:K()})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"h-5 w-5"}),e.jsx("span",{children:"Draft Analysis"})]}),e.jsx(Ce,{children:"Draft insights and position trends"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.filter(_=>_.position==="RB").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Running Backs Drafted"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold",children:u.filter(_=>_.position==="QB").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Quarterbacks Drafted"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold",children:u.filter(_=>_.position==="WR").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Wide Receivers Drafted"})]})]})})]})]})]})},cf={pass_yd:{category:"passing",key:"passingYards",description:"passing yards",per:25},pass_td:{category:"passing",key:"passingTDs",description:"passing touchdown",per:1},pass_int:{category:"passing",key:"interceptions",description:"interception",per:1},pass_2pt:{category:"passing",key:"passing2pt",description:"2-point conversion",per:1},rush_yd:{category:"rushing",key:"rushingYards",description:"rushing yards",per:10},rush_td:{category:"rushing",key:"rushingTDs",description:"rushing touchdown",per:1},rush_2pt:{category:"rushing",key:"rushing2pt",description:"2-point conversion",per:1},rec_yd:{category:"receiving",key:"receivingYards",description:"receiving yards",per:10},rec:{category:"receiving",key:"receptions",description:"reception (PPR)",per:1},rec_td:{category:"receiving",key:"receivingTDs",description:"receiving touchdown",per:1},rec_2pt:{category:"receiving",key:"receiving2pt",description:"2-point conversion",per:1}},lf=()=>{const{selectedSeason:t}=Hs(),[s,r]=l.useState(null),[n,a]=l.useState(!0),[o,i]=l.useState(null),c=u=>{const m={passing:{},rushing:{},receiving:{}};return Object.entries(u).forEach(([h,v])=>{const j=cf[h];j&&(m[j.category][j.key]={points:v,per:j.per,description:`${v>0?"+":""}${v} point${Math.abs(v)!==1?"s":""} per ${j.description}`})}),m},d=async()=>{if(!t){i("No season selected"),a(!1);return}try{a(!0),i(null);const{data:u}=await H.getSeasons({filters:[{column:"season_year",operator:"eq",value:t}]});if(!u||u.length===0){i("Season not found"),a(!1);return}const m=u[0];if(m.scoring_settings){const h=c(m.scoring_settings);r(h)}else{if(console.log("Scoring settings not found, fetching from Sleeper API..."),!(await H.updateSeasonScoringSettings(m.id)).success){i("Failed to fetch scoring settings from Sleeper API"),a(!1);return}const{data:v}=await H.getSeasons({filters:[{column:"season_year",operator:"eq",value:t}]});if(v&&v.length>0&&v[0].scoring_settings){const j=c(v[0].scoring_settings);r(j)}else i("Failed to update scoring settings")}}catch(u){console.error("Error fetching scoring settings:",u),i("Failed to load scoring settings")}finally{a(!1)}};return l.useEffect(()=>{d()},[t]),{scoringSettings:s,loading:n,error:o,refetch:d}},Fn={positions:{QB:1,RB:2,WR:2,TE:1,FLEX:1,SUPER_FLEX:1,DEF:1,BENCH:6},totalRosterSize:15,startingLineupSize:9,benchSize:6},df=()=>{const{selectedSeason:t}=Hs(),[s,r]=l.useState(null),[n,a]=l.useState(!0),[o,i]=l.useState(null),c=u=>{const m={};u.forEach(b=>{m[b]=(m[b]||0)+1});const h=u.length,v=15,j=v-h;return j>0&&(m.BENCH=j),{positions:m,totalRosterSize:v,startingLineupSize:h,benchSize:j}},d=async()=>{if(!t){i("No season selected"),a(!1);return}try{a(!0),i(null);const{data:u}=await H.getSeasons({filters:[{column:"season_year",operator:"eq",value:t}]});if(!u||u.length===0){i("Season not found"),a(!1);return}const m=u[0];if(m.roster_positions){const h=c(m.roster_positions);r(h)}else{if(console.log("Roster positions not found, fetching from Sleeper API..."),!(await H.updateSeasonRosterPositions(m.id)).success){console.warn("Failed to fetch roster positions from Sleeper API, using defaults"),r(Fn),a(!1);return}const{data:v}=await H.getSeasons({filters:[{column:"season_year",operator:"eq",value:t}]});if(v&&v.length>0&&v[0].roster_positions){const j=c(v[0].roster_positions);r(j)}else r(Fn)}}catch(u){console.error("Error fetching roster settings:",u),i("Failed to load roster settings"),r(Fn)}finally{a(!1)}};return l.useEffect(()=>{d()},[t]),{rosterSettings:s,loading:n,error:o,refetch:d}},Dn={id:0,season_id:0,playoff_teams:10,week_14_byes:6,reseed:!0,playoff_start_week:14,championship_week:17,is_active:!0},uf=()=>{const{selectedSeason:t}=Hs(),[s,r]=l.useState(null),[n,a]=l.useState(!0),[o,i]=l.useState(null),c=async()=>{if(!t){i("No season selected"),a(!1);return}try{a(!0),i(null);const{data:d}=await H.getSeasons({filters:[{column:"season_year",operator:"eq",value:t}]});if(!d||d.length===0){i("Season not found"),r(Dn),a(!1);return}const u=d[0],{data:m}=await H.getPlayoffFormats({filters:[{column:"season_id",operator:"eq",value:u.id},{column:"is_active",operator:"eq",value:!0}]});m&&m.length>0?r(m[0]):(console.warn("No playoff format found for season, using defaults"),r(Dn))}catch(d){console.error("Error fetching playoff format:",d),i("Failed to load playoff format"),r(Dn)}finally{a(!1)}};return l.useEffect(()=>{c()},[t]),{playoffFormat:s,loading:n,error:o,refetch:c}};class Ir{static async initializeBucket(){try{const{data:s}=await Js.storage.listBuckets();if(!(s==null?void 0:s.some(n=>n.name===this.BUCKET_NAME))){const{error:n}=await Js.storage.createBucket(this.BUCKET_NAME,{public:!0,allowedMimeTypes:this.ALLOWED_FILE_TYPES,fileSizeLimit:this.MAX_FILE_SIZE});if(n)throw console.error("Error creating charter bucket:",n),n}}catch(s){throw console.error("Error initializing charter bucket:",s),s}}static async uploadCharter(s,r,n){try{const a=this.validateFile(r);if(!a.valid)return{success:!1,error:a.error};await this.initializeBucket();const o=r.name.split(".").pop(),c=`charters/${`charter-season-${s}-${Date.now()}.${o}`}`,{data:d,error:u}=await Js.storage.from(this.BUCKET_NAME).upload(c,r,{cacheControl:"3600",upsert:!0});if(u)return console.error("Error uploading charter:",u),{success:!1,error:"Failed to upload file"};const{data:m}=Js.storage.from(this.BUCKET_NAME).getPublicUrl(c);if(!m.publicUrl)return{success:!1,error:"Failed to get file URL"};const{error:h}=await H.updateSeason(s,{charter_file_url:m.publicUrl,charter_file_name:r.name,charter_uploaded_at:new Date().toISOString(),charter_uploaded_by:n});return h?(console.error("Error updating season with charter info:",h),await this.deleteCharterFile(c),{success:!1,error:"Failed to save charter information"}):{success:!0,fileUrl:m.publicUrl,fileName:r.name}}catch(a){return console.error("Error in uploadCharter:",a),{success:!1,error:"Unexpected error during upload"}}}static async getCharterInfo(s){try{const{data:r}=await H.getSeasons({filters:[{column:"id",operator:"eq",value:s}]});if(!r||r.length===0)return null;const n=r[0];return!n.charter_file_url||!n.charter_file_name?null:{fileUrl:n.charter_file_url,fileName:n.charter_file_name,uploadedAt:n.charter_uploaded_at||"",uploadedBy:n.charter_uploaded_by||""}}catch(r){return console.error("Error getting charter info:",r),null}}static async deleteCharter(s){try{const r=await this.getCharterInfo(s);if(!r)return{success:!1,error:"No charter found for this season"};const a=new URL(r.fileUrl).pathname.split("/").slice(-2).join("/"),{error:o}=await Js.storage.from(this.BUCKET_NAME).remove([a]);o&&console.error("Error deleting charter file:",o);const{error:i}=await H.updateSeason(s,{charter_file_url:null,charter_file_name:null,charter_uploaded_at:null,charter_uploaded_by:null});return i?(console.error("Error updating season after charter deletion:",i),{success:!1,error:"Failed to update season record"}):{success:!0}}catch(r){return console.error("Error in deleteCharter:",r),{success:!1,error:"Unexpected error during deletion"}}}static validateFile(s){return s.size>this.MAX_FILE_SIZE?{valid:!1,error:"File size must be less than 10MB"}:this.ALLOWED_FILE_TYPES.includes(s.type)?{valid:!0}:{valid:!1,error:"File must be PDF, Word document, or text file"}}static async deleteCharterFile(s){try{await Js.storage.from(this.BUCKET_NAME).remove([s])}catch(r){console.error("Error deleting charter file:",r)}}static getFileIcon(s){var n;switch((n=s.split(".").pop())==null?void 0:n.toLowerCase()){case"pdf":return"";case"doc":case"docx":return"";case"txt":return"";default:return""}}}Es(Ir,"BUCKET_NAME","league-documents"),Es(Ir,"ALLOWED_FILE_TYPES",["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"]),Es(Ir,"MAX_FILE_SIZE",10*1024*1024);const mf=()=>{const{selectedSeason:t}=Hs(),[s,r]=l.useState(null),[n,a]=l.useState(!0),[o,i]=l.useState(null),c=async()=>{if(!t){i("No season selected"),a(!1);return}try{a(!0),i(null);const{data:d}=await H.getSeasons({filters:[{column:"season_year",operator:"eq",value:t}]});if(!d||d.length===0){i("Season not found"),a(!1);return}const u=d[0],m=await Ir.getCharterInfo(u.id);r(m)}catch(d){console.error("Error fetching charter info:",d),i("Failed to load charter information"),r(null)}finally{a(!1)}};return l.useEffect(()=>{c()},[t]),{charterInfo:s,loading:n,error:o,refetch:c,hasCharter:!!s}},hf=({fileUrl:t,fileName:s,className:r=""})=>{const[n,a]=l.useState(!1),[o,i]=l.useState(!0),[c,d]=l.useState(null),[u,m]=l.useState("iframe"),[h,v]=l.useState(!0),j=()=>{const p=navigator.mimeTypes&&navigator.mimeTypes["application/pdf"],k=/Chrome/.test(navigator.userAgent),T=/Firefox/.test(navigator.userAgent),P=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);return p||k||T||P},b=()=>{v(!1),d(null)},g=()=>{v(!1),d("Failed to load PDF in iframe. Trying alternative method..."),u==="iframe"?m("embed"):u==="embed"&&m("object")},x=()=>{d(null),v(!0),m("iframe")},N=()=>{const p={width:"100%",height:"100%",title:s,onLoad:b,onError:g},k=`${t}#toolbar=1&navpanes=1&scrollbar=1&view=FitH`;switch(u){case"iframe":return e.jsx("iframe",{src:k,className:"border-0 w-full h-full",...p});case"embed":return e.jsx("embed",{src:k,type:"application/pdf",className:"w-full h-full",...p});case"object":return e.jsx("object",{data:k,type:"application/pdf",className:"w-full h-full",...p,children:e.jsxs("p",{children:["Your browser doesn't support PDF viewing.",e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-primary underline ml-1",children:"Click here to download the PDF"})]})});default:return null}};return o?e.jsxs("div",{className:`space-y-4 ${r}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{variant:"secondary",children:"PDF Viewer"}),!j()&&e.jsx(ee,{variant:"destructive",children:"Limited Browser Support"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(X,{variant:"outline",size:"sm",onClick:x,disabled:h,children:[e.jsx(Ke,{className:`h-4 w-4 mr-1 ${h?"animate-spin":""}`}),"Reload"]}),e.jsxs(X,{variant:"outline",size:"sm",onClick:()=>i(!1),children:[e.jsx(ur,{className:"h-4 w-4 mr-1"}),"Hide"]}),e.jsxs(X,{variant:"outline",size:"sm",onClick:()=>a(!n),children:[n?e.jsx(Hn,{className:"h-4 w-4 mr-1"}):e.jsx(Vn,{className:"h-4 w-4 mr-1"}),n?"Minimize":"Expand"]}),e.jsxs(X,{variant:"outline",size:"sm",onClick:()=>window.open(t,"_blank"),children:[e.jsx(cn,{className:"h-4 w-4 mr-1"}),"New Tab"]}),e.jsxs(X,{variant:"outline",size:"sm",onClick:()=>{const p=document.createElement("a");p.href=t,p.download=s,document.body.appendChild(p),p.click(),document.body.removeChild(p)},children:[e.jsx(Ko,{className:"h-4 w-4 mr-1"}),"Download"]})]})]}),e.jsxs("div",{className:`border rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 relative ${n?"fixed inset-4 z-50 bg-white dark:bg-gray-900":"h-96 md:h-[600px]"}`,children:[h&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-900 z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading PDF..."})]})}),c?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-900 z-10",children:e.jsxs(qe,{variant:"destructive",className:"max-w-md",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsxs(Ve,{children:[c,e.jsxs("div",{className:"mt-2 space-x-2",children:[e.jsx(X,{size:"sm",variant:"outline",onClick:x,children:"Try Again"}),e.jsx(X,{size:"sm",variant:"outline",onClick:()=>window.open(t,"_blank"),children:"Open in New Tab"})]})]})]})}):N()]}),!j()&&e.jsxs(qe,{children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(Ve,{children:"Your browser may have limited PDF viewing support. For the best experience, try opening the PDF in a new tab or downloading it."})]}),e.jsxs(qe,{children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsxs(Ve,{children:[e.jsx("strong",{children:"Tips:"}),` Use the expand button for full-screen viewing. If the PDF doesn't load properly, try the "New Tab" or "Download" options.`]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ur,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"PDF viewer hidden"}),e.jsxs(X,{variant:"outline",onClick:()=>i(!0),className:"mt-2",children:[e.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Show PDF"]})]})},ff=({fileUrl:t,fileName:s,uploadedAt:r})=>{const[n,a]=l.useState(!1),[o,i]=l.useState(!0),[c,d]=l.useState(null),u=x=>{var N;return((N=x.split(".").pop())==null?void 0:N.toLowerCase())||""},m=x=>{switch(u(x)){case"pdf":return"PDF Document";case"doc":case"docx":return"Word Document";case"txt":return"Text Document";default:return"Document"}},h=()=>{const x=u(s);if(!o)return e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ur,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Document viewer hidden"}),e.jsxs(X,{variant:"outline",onClick:()=>i(!0),className:"mt-2",children:[e.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Show Document"]})]});switch(x){case"pdf":return v();case"doc":case"docx":return j();case"txt":return b();default:return g()}},v=()=>e.jsx(hf,{fileUrl:t,fileName:s}),j=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{variant:"secondary",children:"Document Viewer"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(X,{variant:"outline",size:"sm",onClick:()=>i(!1),children:[e.jsx(ur,{className:"h-4 w-4 mr-1"}),"Hide"]}),e.jsxs(X,{variant:"outline",size:"sm",onClick:()=>a(!n),children:[n?e.jsx(Hn,{className:"h-4 w-4 mr-1"}):e.jsx(Vn,{className:"h-4 w-4 mr-1"}),n?"Minimize":"Expand"]})]})]}),e.jsx("div",{className:`border rounded-lg overflow-hidden ${n?"h-screen":"h-96"}`,children:e.jsx("iframe",{src:`https://docs.google.com/viewer?url=${encodeURIComponent(t)}&embedded=true`,width:"100%",height:"100%",title:s,className:"border-0",onError:()=>d("Failed to load document. Please try downloading the file.")})}),e.jsxs(qe,{children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(Ve,{children:"Word documents are displayed using Google Docs Viewer. For best experience, consider uploading as PDF."})]})]}),b=()=>{const[x,N]=l.useState(""),[p,k]=l.useState(!0);return is.useEffect(()=>{fetch(t).then(T=>T.text()).then(T=>{N(T),k(!1)}).catch(T=>{console.error("Error loading text file:",T),d("Failed to load text file content."),k(!1)})},[t]),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{variant:"secondary",children:"Text Viewer"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(X,{variant:"outline",size:"sm",onClick:()=>i(!1),children:[e.jsx(ur,{className:"h-4 w-4 mr-1"}),"Hide"]}),e.jsxs(X,{variant:"outline",size:"sm",onClick:()=>a(!n),children:[n?e.jsx(Hn,{className:"h-4 w-4 mr-1"}):e.jsx(Vn,{className:"h-4 w-4 mr-1"}),n?"Minimize":"Expand"]})]})]}),e.jsx("div",{className:`border rounded-lg p-4 bg-gray-50 dark:bg-gray-900 overflow-auto ${n?"h-screen":"h-96"}`,children:p?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:x})})]})},g=()=>e.jsxs(qe,{children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(yt,{children:"Preview Not Available"}),e.jsx(Ve,{children:"This file type cannot be previewed in the browser. Please download the file to view its contents."})]});return e.jsxs(V,{children:[e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(gr,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx(ce,{className:"text-lg",children:s}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[m(s),"  Last updated: ",new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(X,{variant:"outline",size:"sm",onClick:()=>window.open(t,"_blank"),children:[e.jsx(cn,{className:"h-4 w-4 mr-1"}),"Open in New Tab"]}),e.jsxs(X,{variant:"outline",size:"sm",onClick:()=>{const x=document.createElement("a");x.href=t,x.download=s,document.body.appendChild(x),x.click(),document.body.removeChild(x)},children:[e.jsx(Ko,{className:"h-4 w-4 mr-1"}),"Download"]})]})]})}),e.jsx(Y,{children:c?e.jsxs(qe,{variant:"destructive",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(yt,{children:"Viewer Error"}),e.jsx(Ve,{children:c})]}):h()})]})},Lt={scoring:{passing:{passingYards:{points:1,per:25,description:"1 point per 25 passing yards"},passingTDs:{points:4,per:1,description:"4 points per passing touchdown"},interceptions:{points:-2,per:1,description:"-2 points per interception"},passing2pt:{points:2,per:1,description:"2 points per 2-point conversion"}},rushing:{rushingYards:{points:1,per:10,description:"1 point per 10 rushing yards"},rushingTDs:{points:6,per:1,description:"6 points per rushing touchdown"},rushing2pt:{points:2,per:1,description:"2 points per 2-point conversion"}},receiving:{receivingYards:{points:1,per:10,description:"1 point per 10 receiving yards"},receptions:{points:.5,per:1,description:"0.5 points per reception (PPR)"},receivingTDs:{points:6,per:1,description:"6 points per receiving touchdown"},receiving2pt:{points:2,per:1,description:"2 points per 2-point conversion"}}},roster:{positions:{QB:1,RB:2,WR:2,TE:1,FLEX:1,K:1,DEF:1,BENCH:6},waiverSystem:"FAAB",waiverBudget:100,waiverClearTime:"Wednesday 3:00 AM ET"}},xf=()=>{var k,T,P,F,L,E;const{selectedSeason:t,selectedConference:s,currentSeasonConfig:r}=Hs(),{scoringSettings:n,loading:a,error:o}=lf(),{rosterSettings:i,loading:c,error:d}=df(),{playoffFormat:u,loading:m,error:h}=uf(),{charterInfo:v,loading:j,error:b,hasCharter:g}=mf(),[x,N]=l.useState("scoring"),p=(R,A)=>!A||Object.keys(A).length===0?e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{className:"capitalize",children:R})}),e.jsx(Y,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:["No ",R," scoring rules configured"]})})]}):e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{className:"capitalize",children:R})}),e.jsx(Y,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{children:"Statistic"}),e.jsx(G,{className:"text-right",children:"Points"}),e.jsx(G,{className:"hidden md:table-cell",children:"Description"})]})}),e.jsx(Ls,{children:Object.entries(A).map(([U,se])=>e.jsxs($e,{children:[e.jsx(z,{className:"font-medium",children:U.replace(/([A-Z])/g," $1").replace(/^./,K=>K.toUpperCase())}),e.jsx(z,{className:"text-right font-mono",children:e.jsxs(ee,{variant:se.points>0?"default":"destructive",children:[se.points>0?"+":"",se.points]})}),e.jsx(z,{className:"hidden md:table-cell text-sm text-muted-foreground",children:se.description})]},U))})]})})})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gr,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"League Rules"})]}),e.jsxs("p",{className:"text-muted-foreground",children:[t," Season  Official rules and regulations for the Gladiator League"]})]}),e.jsxs(qe,{children:[e.jsx(Mt,{className:"h-4 w-4"}),e.jsx(yt,{children:"League Information"}),e.jsx(Ve,{children:"These rules apply to all three conferences within the Gladiator League. Conference-specific variations are noted where applicable."})]}),e.jsxs(ut,{value:x,onValueChange:N,className:"w-full",children:[e.jsxs(lt,{className:"grid w-full grid-cols-5",children:[e.jsx(Me,{value:"scoring",children:"Scoring"}),e.jsx(Me,{value:"roster",children:"Roster"}),e.jsx(Me,{value:"schedule",children:"Schedule"}),e.jsx(Me,{value:"payouts",children:"Payouts"}),e.jsx(Me,{value:"charter",children:"Charter"})]}),e.jsxs(Le,{value:"scoring",className:"space-y-6",children:[a?e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading scoring settings..."})]})})}):o?e.jsxs(qe,{variant:"destructive",children:[e.jsx(Mt,{className:"h-4 w-4"}),e.jsx(yt,{children:"Error Loading Scoring Settings"}),e.jsxs(Ve,{children:[o,". Using default scoring rules as fallback."]})]}):null,e.jsx("div",{className:"grid gap-6",children:n?e.jsxs(e.Fragment,{children:[p("passing",n.passing),p("rushing",n.rushing),p("receiving",n.receiving)]}):e.jsxs(e.Fragment,{children:[p("passing",Lt.scoring.passing),p("rushing",Lt.scoring.rushing),p("receiving",Lt.scoring.receiving)]})}),e.jsxs(V,{children:[e.jsx(oe,{children:e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(Br,{className:"h-5 w-5"}),e.jsx("span",{children:"Scoring Summary"})]})}),e.jsx(Y,{children:n?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold",children:n.receiving.receptions?`${n.receiving.receptions.points} PPR`:"Standard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.receiving.receptions?`${n.receiving.receptions.points} Points per Reception`:"No PPR Scoring"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[((k=n.passing.passingTDs)==null?void 0:k.points)||0,"/",((T=n.rushing.rushingTDs)==null?void 0:T.points)||((P=n.receiving.receivingTDs)==null?void 0:P.points)||0]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pass TD / Rush-Rec TD"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[((F=n.passing.passingYards)==null?void 0:F.per)||25,"/",((L=n.rushing.rushingYards)==null?void 0:L.per)||((E=n.receiving.receivingYards)==null?void 0:E.per)||10]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pass Yards / Rush-Rec Yards"})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold",children:"PPR"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"0.5 Points per Reception"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold",children:"4/6"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pass TD / Rush-Rec TD"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold",children:"25/10"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pass Yards / Rush-Rec Yards"})]})]})})]})]}),e.jsxs(Le,{value:"roster",className:"space-y-6",children:[c?e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading roster settings..."})]})})}):d?e.jsxs(qe,{variant:"destructive",children:[e.jsx(Mt,{className:"h-4 w-4"}),e.jsx(yt,{children:"Error Loading Roster Settings"}),e.jsxs(Ve,{children:[d,". Using default roster configuration as fallback."]})]}):null,e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(bs,{className:"h-5 w-5"}),e.jsx("span",{children:"Starting Lineup"})]}),e.jsx(Ce,{children:"Required positions for weekly lineup"})]}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-3",children:Object.entries((i==null?void 0:i.positions)||Lt.roster.positions).filter(([R])=>R!=="BENCH").map(([R,A])=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{variant:"outline",children:R}),e.jsx("span",{className:"text-sm text-muted-foreground",children:R==="FLEX"?"RB/WR/TE":R==="SUPER_FLEX"?"QB/RB/WR/TE":R==="DEF"?"Team Defense":R})]}),e.jsx("span",{className:"font-semibold",children:A})]},R))})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsxs(oe,{className:"pb-3",children:[e.jsx(ce,{className:"text-lg",children:"Roster Management"}),e.jsx(Ce,{className:"text-sm",children:"Roster size and configuration"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Roster Size"}),e.jsx("p",{className:"text-xl font-bold",children:"21"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Starting Lineup"}),e.jsx("p",{className:"text-xl font-bold",children:"9"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bench"}),e.jsx("p",{className:"text-xl font-bold",children:"12"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"IR"}),e.jsx("p",{className:"text-xl font-bold",children:"2"})]})]})})]}),e.jsxs(V,{children:[e.jsxs(oe,{className:"pb-3",children:[e.jsx(ce,{className:"text-lg",children:"Waiver & Trade Rules"}),e.jsx(Ce,{className:"text-sm",children:"League transaction settings"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Waiver System"}),e.jsx("p",{className:"font-semibold",children:Lt.roster.waiverSystem})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"FAAB Budget"}),e.jsxs("p",{className:"font-semibold",children:["$",Lt.roster.waiverBudget]})]})]}),e.jsxs("div",{className:"pt-3 mt-3 border-t",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Waiver Clear Time"}),e.jsx("p",{className:"text-sm font-medium",children:Lt.roster.waiverClearTime})]})]})]})]})]})]}),e.jsxs(Le,{value:"schedule",className:"space-y-6",children:[m?e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading schedule information..."})]})})}):h?e.jsxs(qe,{variant:"destructive",children:[e.jsx(Mt,{className:"h-4 w-4"}),e.jsx(yt,{children:"Error Loading Schedule Information"}),e.jsxs(Ve,{children:[h,". Using default schedule information as fallback."]})]}):null,e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"h-5 w-5"}),e.jsx("span",{children:"Season Structure"})]}),e.jsx(Ce,{children:"Regular season and playoff format"})]}),e.jsx(Y,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Regular Season"}),e.jsx("p",{className:"text-2xl font-bold",children:"12 weeks"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Playoffs"}),e.jsx("p",{className:"text-2xl font-bold",children:"5 weeks"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Playoff Teams"}),e.jsxs("p",{className:"text-2xl font-bold",children:[(u==null?void 0:u.playoff_teams)||10,"/36"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"First Round Byes"}),e.jsx("p",{className:"text-2xl font-bold",children:(u==null?void 0:u.week_14_byes)||6})]})]})})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Important Dates"}),e.jsxs(Ce,{children:[t," season timeline"]})]}),e.jsxs(Y,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Regular Season"}),e.jsx("span",{className:"text-sm",children:"Weeks 1-12"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Conference Championships"}),e.jsx("span",{className:"text-sm",children:"Week 13"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Playoffs Begin"}),e.jsxs("span",{className:"text-sm",children:["Week ",(u==null?void 0:u.playoff_start_week)||14]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Coliseum Championship"}),e.jsxs("span",{className:"text-sm",children:["Week ",(u==null?void 0:u.championship_week)||17]})]})]})]})]}),e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{children:"Playoff Format"})}),e.jsx(Y,{children:e.jsxs("div",{className:"prose prose-sm max-w-none",children:[e.jsxs("p",{className:"mb-4",children:["The playoffs consist of ",(u==null?void 0:u.playoff_teams)||10," teams total across all conferences, with the following structure:"]}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Week 13: Conference Championships"})," - Top 2 teams from each conference compete to become Conference Champion"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Playoff Seeding:"}),e.jsxs("ul",{className:"ml-4 mt-2 space-y-1",children:[e.jsx("li",{children:" Top 3 seeds go to Conference Champions"}),e.jsx("li",{children:" Seeds 4-6 go to losing teams of Conference Championship"}),e.jsxs("li",{children:[" Seeds 7-",(u==null?void 0:u.playoff_teams)||10," go to next highest ranked teams, across all Conferences"]})]})]}),e.jsxs("li",{children:[e.jsxs("strong",{children:["Week ",(u==null?void 0:u.playoff_start_week)||14,": Wildcard Round"]})," - Top ",(u==null?void 0:u.week_14_byes)||6," teams get byes. Remaining teams are matched up based on seeding."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Week 15: Quarterfinals Round"})," - Teams are reseeded, includes winners of Wildcard round matchups and teams on bye"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Week 16: Semifinals Round"})," - Teams are reseeded, includes winners of Quarterfinals"]}),e.jsxs("li",{children:[e.jsxs("strong",{children:["Week ",(u==null?void 0:u.championship_week)||17,": Coliseum Championship"]})," - Winners of Semifinals compete to become the Coliseum Champion"]})]}),e.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:u!=null&&u.reseed?"Teams are reseeded after each round based on original seeding.":"Teams maintain their bracket position throughout the playoffs."})]})})]})]}),e.jsx(Le,{value:"payouts",className:"space-y-6",children:e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center space-x-2",children:[e.jsx(qn,{className:"h-5 w-5"}),e.jsx("span",{children:"Prize Structure"})]}),e.jsx(Ce,{children:"Annual dues: $100 per team  Total prize pool: $3,600"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Coliseum Championship Payouts"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-yellow-50 dark:bg-yellow-900/20",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"font-medium",children:"Coliseum Champion"})]}),e.jsx("span",{className:"font-bold text-lg",children:"$1,200"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Runner-up"}),e.jsx("span",{className:"font-bold",children:"$800"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Regular Season Awards"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Conference Champions"}),e.jsx("span",{className:"font-bold",children:"$500 each"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Single Week High Score"}),e.jsx("span",{className:"font-bold",children:"$100"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{children:"Conference champions are determined by regular season record within each conference."}),e.jsx("p",{className:"mt-2",children:"Single week high score award goes to the team with the most points in a single week during the regular season."})]})]})]})]})})]})}),e.jsxs(Le,{value:"charter",className:"space-y-6",children:[j?e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading charter information..."})]})})}):b?e.jsxs(qe,{variant:"destructive",children:[e.jsx(Mt,{className:"h-4 w-4"}),e.jsx(yt,{children:"Error Loading Charter"}),e.jsxs(Ve,{children:[b,". Please contact an administrator if this issue persists."]})]}):null,e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"League Charter"}),e.jsxs(Ce,{children:["Official constitution and bylaws of the Gladiator League - ",t," Season"]})]}),e.jsx(Y,{children:g&&v?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(qe,{children:[e.jsx(Mt,{className:"h-4 w-4"}),e.jsx(yt,{children:"Official League Document"}),e.jsx(Ve,{children:"This charter contains the complete rules, policies, and procedures for the Gladiator League. All league members are expected to be familiar with its contents."})]}),e.jsx(ff,{fileUrl:v.fileUrl,fileName:v.fileName,uploadedAt:v.uploadedAt})]}):e.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[e.jsx(gr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Charter Available"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:["The league charter document for the ",t," season has not been uploaded yet."]}),e.jsxs(qe,{className:"max-w-md mx-auto",children:[e.jsx(Mt,{className:"h-4 w-4"}),e.jsx(Ve,{children:"League administrators can upload the charter document through the admin panel."})]})]})})]}),e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{children:"League History"})}),e.jsx(Y,{children:e.jsxs("div",{className:"prose prose-sm max-w-none",children:[e.jsx("p",{children:"The Gladiator League was founded in 2024 as a premier fantasy football competition consisting of three competitive conferences: Legions of Mars, Guardians of Jupiter, and Vulcan's Oathsworn."}),e.jsx("p",{className:"mt-4",children:"Each conference operates as an independent league while following unified rules and participating in inter-conference competition during special events."}),e.jsx("p",{className:"mt-4",children:"The league charter serves as the official constitution, outlining all rules, procedures, and policies that govern league operations and member conduct."})]})})]})]})]})]})},pf=()=>{const{toast:t}=Is(),[s,r]=l.useState(!1),[n,a]=l.useState([]),o={2024:["1072580179844857856","1072593839715667968","1072593416955015168"],2025:["1204854057169072128","1204857692007440384","1204857608989577216"]},i={2024:1,2025:2},c=async u=>{try{console.log(`Fetching data for league ID: ${u}`);const m=await fetch(`https://api.sleeper.app/v1/league/${u}`);if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const h=await m.json();return console.log(`Data received for league ${u}:`,h),{name:h.name||"",league_id:h.league_id||u,season:h.season||"",draft_id:h.draft_id||"",status:h.status||"",avatar:h.avatar||""}}catch(m){return console.error(`Error fetching data for league ${u}:`,m),null}},d=async()=>{r(!0);const u=[];try{const m=[...o[2024],...o[2025]];for(const v of m){const j=await c(v);j&&u.push(j)}console.log("All fetched data:",u),a(u);const h=u.map(v=>{const j=i[v.season]||0,b=v.avatar?`https://sleepercdn.com/avatars/thumbs/${v.avatar}`:"";return{conference_name:v.name,league_id:v.league_id,season_id:j,draft_id:v.draft_id,status:v.status,league_logo_url:b}});console.log("Conference records to insert:",h);for(const v of h)try{const{error:j}=await window.ezsite.apis.tableCreate("12820",v);if(j)throw console.error("Error inserting conference record:",j),new Error(j)}catch(j){console.error("Failed to insert conference record:",j),t({title:"Error",description:`Failed to insert conference: ${v.conference_name}`,variant:"destructive"})}t({title:"Success",description:`Successfully loaded ${h.length} conferences from Sleeper API`})}catch(m){console.error("Error loading conferences data:",m),t({title:"Error",description:"Failed to load conferences data from Sleeper API",variant:"destructive"})}finally{r(!1)}};return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Conferences Data Loader"}),e.jsx("button",{onClick:d,disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-700 transition-colors",children:s?"Loading...":"Load Conferences Data"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:"This will fetch data from Sleeper API for the following league IDs:"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"2024 Season:"})," ",o[2024].join(", ")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"2025 Season:"})," ",o[2025].join(", ")]})]})]}),n.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Loaded Data Preview:"}),e.jsx("div",{className:"space-y-2",children:n.map((u,m)=>e.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50",children:[e.jsx("div",{className:"font-medium",children:u.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["League ID: ",u.league_id," | Season: ",u.season," | Status: ",u.status]})]},m))})]})]})},gf=()=>{const{toast:t}=Is(),[s,r]=l.useState([]),[n,a]=l.useState([]),[o,i]=l.useState(!0),[c,d]=l.useState(!1),u=async()=>{try{const{data:b,error:g}=await window.ezsite.apis.tablePage("12818",{PageNo:1,PageSize:10,OrderByField:"season_year",IsAsc:!0,Filters:[]});if(g)throw new Error(g);a(b.List||[])}catch(b){console.error("Error fetching seasons:",b),t({title:"Error",description:"Failed to load seasons data",variant:"destructive"})}},m=async()=>{try{const{data:b,error:g}=await window.ezsite.apis.tablePage("12820",{PageNo:1,PageSize:50,OrderByField:"conference_name",IsAsc:!0,Filters:[]});if(g)throw new Error(g);r(b.List||[])}catch(b){console.error("Error fetching conferences:",b),t({title:"Error",description:"Failed to load conferences data",variant:"destructive"})}};l.useEffect(()=>{(async()=>{i(!0),await Promise.all([u(),m()]),i(!1)})()},[]);const h=b=>{const g=n.find(x=>x.id===b);return g?g.season_name:`Season ${b}`},v=b=>{switch(b.toLowerCase()){case"in_season":return"bg-green-500";case"complete":return"bg-blue-500";case"drafting":return"bg-orange-500";case"pre_draft":return"bg-yellow-500";default:return"bg-gray-500"}},j=b=>b.replace(/_/g," ").replace(/\b\w/g,g=>g.toUpperCase());return o?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading conferences..."})})}):e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(hs,{className:"h-8 w-8 text-yellow-600"}),"Conferences"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Fantasy football conferences and leagues"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(X,{variant:"outline",onClick:()=>d(!c),children:[c?"Hide":"Show"," Data Loader"]}),e.jsx(X,{onClick:()=>{m(),t({title:"Refreshed",description:"Conferences data has been refreshed"})},children:"Refresh Data"})]})]}),c&&e.jsx(V,{children:e.jsx(Y,{className:"p-0",children:e.jsx(pf,{})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(V,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(bs,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Conferences"})]})]})})}),e.jsx(V,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.filter(b=>b.status==="in_season").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Seasons"})]})]})})}),e.jsx(V,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(hs,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Seasons"})]})]})})})]}),e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{children:"Conference Details"})}),e.jsx(Y,{children:s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"No conferences found."}),e.jsx(X,{onClick:()=>d(!0),variant:"outline",children:"Load Conferences Data"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{children:"Logo"}),e.jsx(G,{children:"Conference Name"}),e.jsx(G,{children:"Season"}),e.jsx(G,{children:"Status"}),e.jsx(G,{children:"League ID"}),e.jsx(G,{children:"Draft ID"}),e.jsx(G,{children:"Actions"})]})}),e.jsx(Ls,{children:s.map(b=>e.jsxs($e,{children:[e.jsx(z,{children:b.league_logo_url?e.jsx("img",{src:b.league_logo_url,alt:`${b.conference_name} logo`,className:"w-10 h-10 rounded-full object-cover",onError:g=>{g.target.src="/placeholder.svg"}}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(hs,{className:"h-5 w-5 text-gray-400"})})}),e.jsx(z,{className:"font-medium",children:b.conference_name}),e.jsx(z,{children:e.jsx(ee,{variant:"secondary",children:h(b.season_id)})}),e.jsx(z,{children:e.jsx(ee,{className:`text-white ${v(b.status)}`,children:j(b.status)})}),e.jsx(z,{className:"font-mono text-sm",children:b.league_id}),e.jsx(z,{className:"font-mono text-sm",children:b.draft_id||"N/A"}),e.jsx(z,{children:e.jsx(X,{variant:"ghost",size:"sm",onClick:()=>{window.open(`https://sleeper.app/leagues/${b.league_id}`,"_blank")},children:e.jsx(cn,{className:"h-4 w-4"})})})]},b.id))})]})})})]})]})};var jf="Label",dc=l.forwardRef((t,s)=>e.jsx(fs.label,{...t,ref:s,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));dc.displayName=jf;var uc=dc;const yf=er("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),js=l.forwardRef(({className:t,...s},r)=>e.jsx(uc,{ref:r,className:Ne(yf(),t),...s}));js.displayName=uc.displayName;const qa=fo,Va=xo,vf=mo,mc=l.forwardRef(({className:t,...s},r)=>e.jsx(sn,{ref:r,className:Ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));mc.displayName=sn.displayName;const Xn=l.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(vf,{children:[e.jsx(mc,{}),e.jsxs(tn,{ref:n,className:Ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[s,e.jsxs(ho,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Wt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Xn.displayName=tn.displayName;const Kn=({className:t,...s})=>e.jsx("div",{className:Ne("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});Kn.displayName="DialogHeader";const Qn=l.forwardRef(({className:t,...s},r)=>e.jsx(rn,{ref:r,className:Ne("text-lg font-semibold leading-none tracking-tight",t),...s}));Qn.displayName=rn.displayName;const Zn=l.forwardRef(({className:t,...s},r)=>e.jsx(nn,{ref:r,className:Ne("text-sm text-muted-foreground",t),...s}));Zn.displayName=nn.displayName;const wf=()=>{const[t,s]=l.useState([]),[r,n]=l.useState([]),[a,o]=l.useState(null),[i,c]=l.useState(null),[d,u]=l.useState(!1),[m,h]=l.useState(!1),[v,j]=l.useState(!0),[b,g]=l.useState(!1),[x,N]=l.useState(null),{toast:p}=Is(),[k,T]=l.useState(""),[P,F]=l.useState(""),[L,E]=l.useState(""),[R,A]=l.useState("");l.useEffect(()=>{U()},[]),l.useEffect(()=>{a&&se()},[a]);const U=async()=>{try{const _=await H.getSeasons({orderBy:{column:"season_year",ascending:!1}});if(_.error)throw _.error;const S=_.data||[];s(S);const y=S.find(f=>f.is_current);y?o(y.id):S.length>0&&o(S[0].id)}catch(_){console.error("Error loading seasons:",_),p({title:"Error",description:`Failed to load seasons: ${_}`,variant:"destructive"})}finally{j(!1)}},se=async()=>{if(a)try{const _=await H.getConferences({filters:[{column:"season_id",operator:"eq",value:a}],orderBy:{column:"conference_name",ascending:!0}});if(_.error)throw _.error;n(_.data||[])}catch(_){console.error("Error loading conferences:",_),p({title:"Error",description:`Failed to load conferences: ${_}`,variant:"destructive"})}},K=async _=>{if(_.preventDefault(),!(!k||!P))try{g(!0);const S=await H.createSeason({season_year:k,season_name:P,is_current:!1});if(S.error)throw S.error;p({title:"Season Added",description:`${P} has been created successfully`}),T(""),F(""),u(!1),U()}catch(S){console.error("Error adding season:",S),p({title:"Error",description:`Failed to add season: ${S}`,variant:"destructive"})}finally{g(!1)}},B=async _=>{if(_.preventDefault(),!(!L||!R||!a))try{g(!0);const S=await H.createConference({conference_name:L,league_id:R,season_id:a,status:"draft"});if(S.error)throw S.error;p({title:"League Added",description:`${L} has been created successfully`}),E(""),A(""),h(!1),se()}catch(S){console.error("Error adding league:",S),p({title:"Error",description:`Failed to add league: ${S}`,variant:"destructive"})}finally{g(!1)}},Z=async _=>{try{g(!0);const S=await H.updateConference(_.id,{conference_name:_.conference_name,league_id:_.league_id,season_id:_.season_id,draft_id:_.draft_id||void 0,status:_.status,league_logo_url:_.league_logo_url||void 0});if(S.error)throw S.error;p({title:"Conference Updated",description:"Conference details have been saved successfully"}),c(null),se()}catch(S){console.error("Error saving conference:",S),p({title:"Error",description:`Failed to save conference: ${S}`,variant:"destructive"})}finally{g(!1)}},ae=async _=>{if(_)try{N(_);const S=await fetch(`https://api.sleeper.app/v1/league/${_}`);if(S.ok){const y=await S.json();p({title:"Connection Successful",description:`League "${y.name}" found on Sleeper API`})}else throw new Error(`API returned ${S.status}`)}catch(S){console.error("Error testing connection:",S),p({title:"Connection Failed",description:`Unable to connect to Sleeper API for league ID: ${_}`,variant:"destructive"})}finally{N(null)}},O=t.find(_=>_.id===a);return v?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-b-2 border-blue-600 rounded-full"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Season Management"}),e.jsx(Ce,{children:"Select and manage fantasy football seasons"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(js,{htmlFor:"season-select",children:"Select Season"}),e.jsxs(cs,{value:(a==null?void 0:a.toString())||"",onValueChange:_=>o(parseInt(_)),children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"Select a season"})}),e.jsx(as,{children:t.map(_=>e.jsx(Re,{value:_.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[_.season_name,_.is_current&&e.jsx(ee,{variant:"secondary",className:"text-xs",children:"Current"})]})},_.id))})]})]}),e.jsxs(qa,{open:d,onOpenChange:u,children:[e.jsx(Va,{asChild:!0,children:e.jsx(X,{variant:"outline",size:"icon",children:e.jsx(zr,{className:"h-4 w-4"})})}),e.jsxs(Xn,{children:[e.jsxs(Kn,{children:[e.jsx(Qn,{children:"Add New Season"}),e.jsx(Zn,{children:"Create a new fantasy football season"})]}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{htmlFor:"season-year",children:"Season Year"}),e.jsx(Cs,{id:"season-year",type:"number",value:k,onChange:_=>T(_.target.value),placeholder:"2025",min:"2020",max:"2030"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{htmlFor:"season-name",children:"Season Name"}),e.jsx(Cs,{id:"season-name",value:P,onChange:_=>F(_.target.value),placeholder:"2025 Season"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(X,{type:"submit",disabled:b,children:b?"Adding...":"Add Season"})]})]})]})]})]})})]}),O&&e.jsxs(V,{children:[e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ce,{children:["Conferences - ",O.season_name]}),e.jsxs(Ce,{children:["Manage league IDs and conference settings for ",O.season_name]})]}),e.jsxs(qa,{open:m,onOpenChange:h,children:[e.jsx(Va,{asChild:!0,children:e.jsxs(X,{children:[e.jsx(zr,{className:"h-4 w-4 mr-2"}),"Add New League"]})}),e.jsxs(Xn,{children:[e.jsxs(Kn,{children:[e.jsx(Qn,{children:"Add New League"}),e.jsxs(Zn,{children:["Add a new conference/league to ",O.season_name]})]}),e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{htmlFor:"league-name",children:"League Name"}),e.jsx(Cs,{id:"league-name",value:L,onChange:_=>E(_.target.value),placeholder:"Conference Name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{htmlFor:"league-id",children:"Sleeper League ID"}),e.jsx(Cs,{id:"league-id",value:R,onChange:_=>A(_.target.value),placeholder:"123456789012345678"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(X,{type:"submit",disabled:b,children:b?"Adding...":"Add League"})]})]})]})]})]})}),e.jsx(Y,{children:r.length===0?e.jsx(qe,{children:e.jsxs(Ve,{children:["No conferences found for ",O.season_name,". Add a new league to get started."]})}):e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{children:"Conference Name"}),e.jsx(G,{children:"League ID"}),e.jsx(G,{children:"Draft ID"}),e.jsx(G,{children:"Status"}),e.jsx(G,{children:"Actions"})]})}),e.jsx(Ls,{children:r.map(_=>e.jsxs($e,{children:[e.jsx(z,{children:(i==null?void 0:i.id)===_.id?e.jsx(Cs,{value:i.conference_name,onChange:S=>c({...i,conference_name:S.target.value})}):e.jsx("span",{className:"font-medium",children:_.conference_name})}),e.jsx(z,{children:(i==null?void 0:i.id)===_.id?e.jsx(Cs,{value:i.league_id,onChange:S=>c({...i,league_id:S.target.value})}):e.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:_.league_id})}),e.jsx(z,{children:(i==null?void 0:i.id)===_.id?e.jsx(Cs,{value:i.draft_id||"",onChange:S=>c({...i,draft_id:S.target.value})}):e.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:_.draft_id||"Not set"})}),e.jsx(z,{children:e.jsx(ee,{variant:_.status==="in_season"?"default":_.status==="complete"?"secondary":"outline",children:_.status})}),e.jsx(z,{children:e.jsx("div",{className:"flex items-center gap-2",children:(i==null?void 0:i.id)===_.id?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:"sm",onClick:()=>Z(i),disabled:b,children:e.jsx(ln,{className:"h-4 w-4"})}),e.jsx(X,{size:"sm",variant:"outline",onClick:()=>c(null),children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{size:"sm",variant:"outline",onClick:()=>c(_),children:e.jsx(Ut,{className:"h-4 w-4"})}),e.jsx(X,{size:"sm",variant:"outline",onClick:()=>ae(_.league_id),disabled:x===_.league_id,children:x===_.league_id?e.jsx("div",{className:"animate-spin h-4 w-4 border-b-2 border-blue-600 rounded-full"}):e.jsx(Su,{className:"h-4 w-4"})})]})})})]},_.id))})]})})]})]})};var fn="Checkbox",[Nf,Wp]=Ft(fn),[bf,va]=Nf(fn);function _f(t){const{__scopeCheckbox:s,checked:r,children:n,defaultChecked:a,disabled:o,form:i,name:c,onCheckedChange:d,required:u,value:m="on",internal_do_not_use_render:h}=t,[v,j]=br({prop:r,defaultProp:a??!1,onChange:d,caller:fn}),[b,g]=l.useState(null),[x,N]=l.useState(null),p=l.useRef(!1),k=b?!!i||!!b.closest("form"):!0,T={checked:v,disabled:o,setChecked:j,control:b,setControl:g,name:c,form:i,value:m,hasConsumerStoppedPropagationRef:p,required:u,defaultChecked:Pt(a)?!1:a,isFormControl:k,bubbleInput:x,setBubbleInput:N};return e.jsx(bf,{scope:s,...T,children:Sf(h)?h(T):n})}var hc="CheckboxTrigger",fc=l.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:r,...n},a)=>{const{control:o,value:i,disabled:c,checked:d,required:u,setControl:m,setChecked:h,hasConsumerStoppedPropagationRef:v,isFormControl:j,bubbleInput:b}=va(hc,t),g=_t(a,m),x=l.useRef(d);return l.useEffect(()=>{const N=o==null?void 0:o.form;if(N){const p=()=>h(x.current);return N.addEventListener("reset",p),()=>N.removeEventListener("reset",p)}},[o,h]),e.jsx(fs.button,{type:"button",role:"checkbox","aria-checked":Pt(d)?"mixed":d,"aria-required":u,"data-state":yc(d),"data-disabled":c?"":void 0,disabled:c,value:i,...n,ref:g,onKeyDown:Ns(s,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:Ns(r,N=>{h(p=>Pt(p)?!0:!p),b&&j&&(v.current=N.isPropagationStopped(),v.current||N.stopPropagation())})})});fc.displayName=hc;var wa=l.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:o,required:i,disabled:c,value:d,onCheckedChange:u,form:m,...h}=t;return e.jsx(_f,{__scopeCheckbox:r,checked:a,defaultChecked:o,disabled:c,required:i,onCheckedChange:u,name:n,form:m,value:d,internal_do_not_use_render:({isFormControl:v})=>e.jsxs(e.Fragment,{children:[e.jsx(fc,{...h,ref:s,__scopeCheckbox:r}),v&&e.jsx(jc,{__scopeCheckbox:r})]})})});wa.displayName=fn;var xc="CheckboxIndicator",pc=l.forwardRef((t,s)=>{const{__scopeCheckbox:r,forceMount:n,...a}=t,o=va(xc,r);return e.jsx(Zt,{present:n||Pt(o.checked)||o.checked===!0,children:e.jsx(fs.span,{"data-state":yc(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:s,style:{pointerEvents:"none",...t.style}})})});pc.displayName=xc;var gc="CheckboxBubbleInput",jc=l.forwardRef(({__scopeCheckbox:t,...s},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:i,required:c,disabled:d,name:u,value:m,form:h,bubbleInput:v,setBubbleInput:j}=va(gc,t),b=_t(r,j),g=So(o),x=Co(n);l.useEffect(()=>{const p=v;if(!p)return;const k=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(k,"checked").set,F=!a.current;if(g!==o&&P){const L=new Event("click",{bubbles:F});p.indeterminate=Pt(o),P.call(p,Pt(o)?!1:o),p.dispatchEvent(L)}},[v,g,o,a]);const N=l.useRef(Pt(o)?!1:o);return e.jsx(fs.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??N.current,required:c,disabled:d,name:u,value:m,form:h,...s,tabIndex:-1,ref:b,style:{...s.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});jc.displayName=gc;function Sf(t){return typeof t=="function"}function Pt(t){return t==="indeterminate"}function yc(t){return Pt(t)?"indeterminate":t?"checked":"unchecked"}const Na=l.forwardRef(({className:t,...s},r)=>e.jsx(wa,{ref:r,className:Ne("checkbox-root peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(pc,{className:Ne("flex items-center justify-center text-current"),children:e.jsx(sr,{className:"h-4 w-4"})})}));Na.displayName=wa.displayName;class vc{static async fetchLeagueDrafts(s){try{console.log(`Fetching drafts for league: ${s}`);const r=await fetch(`${this.baseUrl}/league/${s}/drafts`);if(!r.ok)throw new Error(`Failed to fetch drafts: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched ${n.length} drafts for league ${s}`),n}catch(r){throw console.error("Error fetching league drafts:",r),r}}static async fetchDraftPicks(s){try{console.log(`Fetching picks for draft: ${s}`);const r=await fetch(`${this.baseUrl}/draft/${s}/picks`);if(!r.ok)throw new Error(`Failed to fetch draft picks: ${r.status} ${r.statusText}`);const n=await r.json();return console.log(`Fetched ${n.length} picks for draft ${s}`),n}catch(r){throw console.error("Error fetching draft picks:",r),r}}static async getTeamIdFromOwnerMatcher(s,r){var n,a;try{const{data:o,error:i}=await window.ezsite.apis.tablePage(12853,{PageNo:1,PageSize:1,Filters:[{name:"roster_id",op:"Equal",value:s},{name:"conference_id",op:"Equal",value:r},{name:"is_active",op:"Equal",value:!0}]});if(!i&&((n=o==null?void 0:o.List)==null?void 0:n.length)>0){const u=o.List[0].team_id;return console.log(`Found team ID ${u} for roster_id ${s} in conference ${r}`),u}const{data:c,error:d}=await window.ezsite.apis.tablePage(12852,{PageNo:1,PageSize:1,Filters:[{name:"owner_id",op:"Equal",value:s}]});return d?(console.error(`Error finding team for owner_id ${s}:`,d),null):((a=c==null?void 0:c.List)==null?void 0:a.length)>0?(console.log(`Found team ID ${c.List[0].id} for owner_id ${s} (legacy mapping)`),c.List[0].id):(console.warn(`No team found for Sleeper roster_id/owner_id ${s} in conference ${r}`),null)}catch(o){return console.error("Error in getTeamIdFromOwnerMatcher:",o),null}}static async processDraftPicksForDatabase(s,r,n){var a,o;try{console.log(`Processing ${n.length} draft picks for conference ${s}, season ${r}`);const i=[];for(const c of n){const d=await this.getTeamIdFromOwnerMatcher(c.picked_by,s);if(!d){console.warn(`Skipping pick ${c.pick_no} - no team found for roster_id ${c.picked_by}`);continue}i.push({season_id:r,conference_id:s,round:c.round,draft_slot:c.draft_slot,pick_number:c.pick_no,team_id:d,player_id:c.player_id,player_name:c.metadata?`${c.metadata.first_name||""} ${c.metadata.last_name||""}`.trim():"Unknown Player",position:((a=c.metadata)==null?void 0:a.position)||"UNK",nfl_team:((o=c.metadata)==null?void 0:o.team)||"UNK",draft_id:c.draft_id})}return console.log(`Processed ${i.length} draft picks (${n.length-i.length} skipped due to missing team mapping)`),i}catch(i){throw console.error("Error processing draft picks:",i),i}}static async fetchAndStoreDraftResults(){try{console.log(" Starting draft results sync for all conferences...");const{data:s,error:r}=await window.ezsite.apis.tablePage(12820,{PageNo:1,PageSize:50,OrderByField:"id",IsAsc:!0});if(r)throw new Error(`Failed to fetch conferences: ${r}`);const n=(s==null?void 0:s.List)||[];console.log(`Found ${n.length} conferences`);const{data:a,error:o}=await window.ezsite.apis.tablePage(12818,{PageNo:1,PageSize:50,OrderByField:"season_year",IsAsc:!1});if(o)throw new Error(`Failed to fetch seasons: ${o}`);const i=(a==null?void 0:a.List)||[];console.log(`Found ${i.length} seasons`);let c=0;const d=[];for(const u of n)try{console.log(`
 Processing conference: ${u.conference_name} (League ID: ${u.league_id})`);const m=i.find(v=>v.id===u.season_id);if(!m){console.warn(` Season not found for conference ${u.conference_name}`);continue}const h=await this.fetchLeagueDrafts(u.league_id);if(h.length===0){console.warn(` No drafts found for league ${u.league_id}`);continue}for(const v of h){console.log(` Processing draft: ${v.draft_id} for season ${m.season_year}`);const j=await this.fetchDraftPicks(v.draft_id);if(j.length===0){console.warn(` No picks found for draft ${v.draft_id}`);continue}const b=await this.processDraftPicksForDatabase(u.id,m.id,j);console.log(` Clearing existing draft results for conference ${u.id}, season ${m.id}`);const{data:g,error:x}=await window.ezsite.apis.tablePage(27845,{PageNo:1,PageSize:1e3,Filters:[{name:"conference_id",op:"Equal",value:u.id},{name:"season_id",op:"Equal",value:m.id}]});if(!x&&(g!=null&&g.List))for(const N of g.List)await window.ezsite.apis.tableDelete(27845,{ID:N.id});console.log(` Inserting ${b.length} draft picks into database...`);for(const N of b){const{error:p}=await window.ezsite.apis.tableCreate(27845,{season_id:N.season_id,conference_id:N.conference_id,round:N.round,draft_slot:N.draft_slot,pick_number:N.pick_number,team_id:N.team_id,player_id:N.player_id});p?console.error(` Error inserting pick ${N.pick_number}:`,p):c++}d.push({conference:u.conference_name,season:m.season_year,draftId:v.draft_id,picksProcessed:b.length})}}catch(m){console.error(` Error processing conference ${u.conference_name}:`,m),d.push({conference:u.conference_name,error:m.message})}return console.log(`
 Draft sync completed! Total picks processed: ${c}`),{success:!0,message:`Successfully processed ${c} draft picks across ${d.length} conference/season combinations`,data:d}}catch(s){return console.error(" Error in draft sync:",s),{success:!1,message:`Draft sync failed: ${s.message}`}}}}Es(vc,"baseUrl","https://api.sleeper.app/v1");const Cf=()=>{const[t,s]=l.useState([]),[r,n]=l.useState([]),[a,o]=l.useState([]),[i,c]=l.useState(null),[d,u]=l.useState(!1),[m,h]=l.useState(!1),[v,j]=l.useState(!1),[b,g]=l.useState(!1),[x,N]=l.useState(!1),[p,k]=l.useState(!1),[T,P]=l.useState(0),[F,L]=l.useState(0),[E,R]=l.useState(0),[A,U]=l.useState(0),[se,K]=l.useState(0),[B,Z]=l.useState(0),[ae,O]=l.useState([]),[_,S]=l.useState([]),[y,f]=l.useState(null),[w,C]=l.useState(null),[$,W]=l.useState(null),[q,re]=l.useState(null),[M,le]=l.useState(null),[ne,ie]=l.useState(null),[ue,je]=l.useState(null),[be,Se]=l.useState(null),[Ie,ds]=l.useState(null),[Q,D]=l.useState(null),[de,xe]=l.useState(!0),[J,he]=l.useState("all"),[pe,_e]=l.useState("all"),[ye,ve]=l.useState("all"),[we,ws]=l.useState("all"),[Te,ze]=l.useState(1),[ks,ss]=l.useState(17),[De,Ee]=l.useState([]),{toast:Qe}=Is();l.useEffect(()=>{ys(),Ws(),$s(),ft(),te(),He(),Ue(),Ze()},[]),l.useEffect(()=>{i&&Ks()},[i]);const ys=async()=>{try{const I=await H.getSeasons(),ge=Array.isArray(I)?I:(I==null?void 0:I.data)||[];s(ge);const os=ge.find(Ge=>Ge.is_current_season);os?c(os.id):ge.length>0&&c(ge[0].id)}catch(I){console.error("Error loading seasons:",I),Qe({title:"Error",description:`Failed to load seasons: ${I}`,variant:"destructive"})}finally{xe(!1)}},Ks=async()=>{if(i)try{const I=await H.getConferences(),ge=Array.isArray(I)?I:(I==null?void 0:I.data)||[];n(ge)}catch(I){console.error("Error loading conferences:",I),Qe({title:"Error",description:`Failed to load conferences: ${I}`,variant:"destructive"})}},Ws=()=>{const I=localStorage.getItem("last_data_sync");I&&le(new Date(I).toLocaleString())},$s=()=>{const I=localStorage.getItem("last_teams_sync");I&&ie(new Date(I).toLocaleString())},ft=()=>{const I=localStorage.getItem("last_players_sync");I&&je(new Date(I).toLocaleString())},te=()=>{const I=localStorage.getItem("last_matchups_sync");I&&Se(new Date(I).toLocaleString())},He=()=>{const I=localStorage.getItem("last_draft_sync");I&&ds(new Date(I).toLocaleString())},Ue=()=>{const I=localStorage.getItem("last_rosters_sync");I&&D(new Date(I).toLocaleString())},Ze=async()=>{try{const I=await H.getTeams(),ge=Array.isArray(I)?I:(I==null?void 0:I.data)||[];o(ge)}catch(I){console.error("Error loading teams:",I)}},Xe=()=>{switch(we){case"range":const I=[];for(let ge=Te;ge<=ks;ge++)I.push(ge);return I;case"specific":return[...De];case"all":default:return Array.from({length:17},(ge,os)=>os+1)}},me=I=>{Ee(ge=>ge.includes(I)?ge.filter(os=>os!==I):[...ge,I].sort((os,Ge)=>os-Ge))},Pe=()=>{Ee(Array.from({length:17},(I,ge)=>ge+1))},ts=()=>{Ee([])};is.useEffect(()=>{Te>ks&&ss(Te)},[Te,ks]);const Oe=async()=>{var ge,os;if(!i||r.length===0){Qe({title:"No Data to Sync",description:"Please select a season with conferences to sync rosters",variant:"destructive"});return}const I=Xe();if(I.length===0){Qe({title:"No Weeks Selected",description:"Please select at least one week to sync",variant:"destructive"});return}k(!0),Z(0),re(null);try{console.log("Starting team rosters sync from Sleeper API..."),console.log(`Syncing weeks: ${I.join(", ")}`),Z(5);let Ge=0,us=0,_s=0,xs=0,Ss=0;const Ye=r.length*I.length;let rs=0;for(const es of r)try{console.log(`Processing rosters for league ${es.league_id}...`);for(const Ae of I){try{console.log(`Fetching roster data for league ${es.league_id}, week ${Ae}...`);const vs=await fetch(`https://api.sleeper.app/v1/league/${es.league_id}/matchups/${Ae}`);if(!vs.ok){if(vs.status===404){console.log(`No matchups found for league ${es.league_id}, week ${Ae} (404 - may not exist yet)`);continue}throw new Error(`API returned ${vs.status}: ${vs.statusText}`)}const Vs=await vs.json();if(console.log(`Received ${Vs.length} roster entries for league ${es.league_id}, week ${Ae}`),!Array.isArray(Vs)||Vs.length===0){console.log(`No matchup data available for league ${es.league_id}, week ${Ae}`);continue}for(const Us of Vs){if(!Us.roster_id||!Us.players||!Array.isArray(Us.players)){console.warn("Skipping entry with missing roster_id or players array:",Us);continue}const Gs=await qs(Us.roster_id,es.id);if(!Gs){console.warn(`Could not find team ID for roster_id ${Us.roster_id} in conference ${es.id}`);continue}for(const nt of Us.players)if(nt)try{const{data:Qs,error:Fs}=await window.ezsite.apis.tablePage(12870,{PageNo:1,PageSize:1,Filters:[{name:"sleeper_player_id",op:"Equal",value:nt}]});if(Fs){console.error(`Error searching for player ${nt}:`,Fs);continue}if(((ge=Qs==null?void 0:Qs.List)==null?void 0:ge.length)>0){const at=Qs.List[0].id,{data:pt,error:ot}=await window.ezsite.apis.tablePage(27886,{PageNo:1,PageSize:1,Filters:[{name:"team_id",op:"Equal",value:Gs},{name:"player_id",op:"Equal",value:at},{name:"season_id",op:"Equal",value:i},{name:"week",op:"Equal",value:Ae}]});if(ot){console.error("Error searching for existing roster record:",ot);continue}const Rr={team_id:Gs,player_id:at,season_id:i,week:Ae};if(((os=pt==null?void 0:pt.List)==null?void 0:os.length)>0){const it=pt.List[0],Sn={...Rr,ID:it.id},{error:Ys}=await Vt("tableUpdate");Ys?console.error("Error updating roster record:",Ys):(_s++,Ge++)}else{const{error:it}=await cr("tableCreate");it?console.error("Error creating roster record:",it):(us++,Ge++)}}else console.warn(`Player with sleeper_player_id ${nt} not found in database`)}catch(Qs){console.error(`Error processing player ${nt}:`,Qs)}}Ss++,await new Promise(Us=>setTimeout(Us,100))}catch(vs){console.error(`Error processing week ${Ae} for league ${es.league_id}:`,vs)}rs++;const Bs=5+rs/Ye*90;Z(Bs)}xs++,console.log(` Completed processing rosters for league ${es.league_id}`),await new Promise(Ae=>setTimeout(Ae,200))}catch(Ae){console.error(`Error processing league ${es.league_id}:`,Ae)}re({success:!0,players_processed:Ge,rosters_created:us,rosters_updated:_s,leagues_processed:xs,weeks_processed:Ss}),console.log(` Successfully synced rosters: ${us} created, ${_s} updated, ${Ge} total player assignments`);const ps=new Date().toISOString();localStorage.setItem("last_rosters_sync",ps),D(new Date(ps).toLocaleString()),Qe({title:"Team Rosters Sync Complete",description:`${us} rosters created, ${_s} updated across ${xs} leagues`,variant:"default"})}catch(Ge){console.error(" Error syncing rosters:",Ge),re({success:!1,error:Ge.toString(),players_processed:0,rosters_created:0,rosters_updated:0,leagues_processed:0,weeks_processed:0}),Qe({title:"Team Rosters Sync Failed",description:`Failed to sync rosters: ${Ge}`,variant:"destructive"})}finally{k(!1),Z(100)}},qs=async(I,ge)=>{var os;try{const{data:Ge,error:us}=await window.ezsite.apis.tablePage(12853,{PageNo:1,PageSize:1,Filters:[{name:"roster_id",op:"Equal",value:I},{name:"conference_id",op:"Equal",value:ge},{name:"is_active",op:"Equal",value:!0}]});return us?(console.error(`Error finding team for roster_id ${I}:`,us),null):((os=Ge==null?void 0:Ge.List)==null?void 0:os.length)>0?Ge.List[0].team_id:(console.warn(`No team found for roster_id ${I} in conference ${ge}`),null)}catch(Ge){return console.error("Error in getTeamIdFromRosterId:",Ge),null}},Os=async()=>{if(!i||r.length===0){Qe({title:"No Data to Sync",description:"Please select a season with conferences to sync",variant:"destructive"});return}u(!0),P(0),O([]);const I=[],ge=r.length;for(let _s=0;_s<r.length;_s++){const xs=r[_s];P((_s+1)/ge*100);try{console.log(`Syncing league ${xs.league_id}...`);const Ss=await fetch(`https://api.sleeper.app/v1/league/${xs.league_id}`);if(!Ss.ok)throw new Error(`API returned ${Ss.status}: ${Ss.statusText}`);const Ye=await Ss.json();console.log("Sleeper API response:",Ye);const rs={ID:xs.id,conference_name:Ye.name||xs.conference_name,league_id:Ye.league_id||xs.league_id,season_id:xs.season_id,draft_id:Ye.draft_id||xs.draft_id,status:Ye.status||xs.status,league_logo_url:Ye.avatar?`https://sleepercdn.com/avatars/thumbs/${Ye.avatar}`:xs.league_logo_url},{error:ps}=await Vt("tableUpdate");if(ps)throw ps;I.push({league_id:xs.league_id,success:!0,data:Ye}),console.log(`Successfully synced league ${xs.league_id}`)}catch(Ss){console.error(`Error syncing league ${xs.league_id}:`,Ss),I.push({league_id:xs.league_id,success:!1,error:Ss.toString()})}await new Promise(Ss=>setTimeout(Ss,200))}O(I),u(!1),P(100);const os=new Date().toISOString();localStorage.setItem("last_data_sync",os),le(new Date(os).toLocaleString()),Ks();const Ge=I.filter(_s=>_s.success).length,us=I.filter(_s=>!_s.success).length;Qe({title:"Data Sync Complete",description:`${Ge} successful, ${us} failed`,variant:us>0?"destructive":"default"})},zs=async()=>{var I,ge,os,Ge;if(!i||r.length===0){Qe({title:"No Data to Sync",description:"Please select a season with conferences to sync teams",variant:"destructive"});return}h(!0),L(0),S([]);try{console.log("Starting teams sync from Sleeper API..."),L(5);const us=[],_s=r.length;let xs=0,Ss=0;for(let es=0;es<r.length;es++){const Ae=r[es];L(5+es/_s*90);try{console.log(`Processing teams for league ${Ae.league_id}...`);const[Bs,vs,Vs]=await Promise.all([fetch(`https://api.sleeper.app/v1/league/${Ae.league_id}`),fetch(`https://api.sleeper.app/v1/league/${Ae.league_id}/rosters`),fetch(`https://api.sleeper.app/v1/league/${Ae.league_id}/users`)]);if(!Bs.ok||!vs.ok||!Vs.ok)throw new Error(`API request failed for league ${Ae.league_id}`);const[Us,Gs,nt]=await Promise.all([Bs.json(),vs.json(),Vs.json()]);console.log(`Fetched ${Gs.length} rosters and ${nt.length} users for league ${Ae.league_id}`);for(const Qs of Gs){const Fs=nt.find(Ys=>Ys.user_id===Qs.owner_id);if(!Fs){console.warn(`No user found for roster ${Qs.roster_id}`);continue}const Pr={team_name:((I=Fs.metadata)==null?void 0:I.team_name)||Fs.display_name||Fs.username,owner_name:Fs.display_name||Fs.username,owner_id:Fs.user_id,co_owner_name:"",co_owner_id:"",team_logo_url:Fs.avatar?`https://sleepercdn.com/avatars/thumbs/${Fs.avatar}`:"",team_primary_color:"#1f2937",team_secondary_color:"#6b7280"},{data:at,error:pt}=await window.ezsite.apis.tablePage(12852,{PageNo:1,PageSize:1,Filters:[{name:"owner_id",op:"Equal",value:Fs.user_id}]});if(pt){console.error("Error searching for existing team:",pt);continue}let ot;if(((ge=at==null?void 0:at.List)==null?void 0:ge.length)>0){const Ys=at.List[0],qt={...Pr,ID:Ys.id},{error:At}=await Vt("tableUpdate");if(At){console.error("Error updating team:",At);continue}ot=Ys.id}else{const{error:Ys}=await cr("tableCreate");if(Ys){console.error("Error creating team:",Ys);continue}const{data:qt,error:At}=await window.ezsite.apis.tablePage(12852,{PageNo:1,PageSize:1,Filters:[{name:"owner_id",op:"Equal",value:Fs.user_id}]});if(At||!((os=qt==null?void 0:qt.List)!=null&&os.length)){console.error("Error retrieving new team ID");continue}ot=qt.List[0].id,xs++}const Rr={team_id:ot,conference_id:Ae.id,roster_id:Qs.roster_id.toString(),is_active:!0,joined_date:new Date().toISOString()},{data:it,error:Sn}=await window.ezsite.apis.tablePage(12853,{PageNo:1,PageSize:1,Filters:[{name:"team_id",op:"Equal",value:ot},{name:"conference_id",op:"Equal",value:Ae.id}]});if(Sn){console.error("Error searching for existing junction:",Sn);continue}if(((Ge=it==null?void 0:it.List)==null?void 0:Ge.length)>0){const Ys=it.List[0],qt={...Rr,ID:Ys.id},{error:At}=await Vt("tableUpdate");At&&console.error("Error updating junction:",At)}else{const{error:Ys}=await cr("tableCreate");Ys?console.error("Error creating junction:",Ys):Ss++}}us.push({league_id:Ae.league_id,success:!0,teams_created:xs,junction_records_created:Ss}),console.log(` Completed teams sync for league ${Ae.league_id}`)}catch(Bs){console.error(`Error syncing teams for league ${Ae.league_id}:`,Bs),us.push({league_id:Ae.league_id,success:!1,error:Bs.toString(),teams_created:0,junction_records_created:0})}await new Promise(Bs=>setTimeout(Bs,200))}S(us),L(100);const Ye=new Date().toISOString();localStorage.setItem("last_teams_sync",Ye),ie(new Date(Ye).toLocaleString()),Ze();const rs=us.filter(es=>es.success).length,ps=us.filter(es=>!es.success).length;Qe({title:"Teams Sync Complete",description:`${rs} successful, ${ps} failed`,variant:ps>0?"destructive":"default"})}catch(us){console.error(" Error syncing teams:",us),Qe({title:"Teams Sync Failed",description:`Failed to sync teams: ${us}`,variant:"destructive"})}finally{h(!1)}},tt=async()=>{var I;j(!0),R(0),f(null);try{console.log("Starting players sync from Sleeper API..."),R(5);const ge=await fetch("https://api.sleeper.app/v1/players/nfl");if(!ge.ok)throw new Error(`API returned ${ge.status}: ${ge.statusText}`);const os=await ge.json(),Ge=Object.keys(os);console.log(`Fetched ${Ge.length} players from Sleeper API`),R(20);let us=0,_s=0;const xs=Ge.length;for(let Ye=0;Ye<Ge.length;Ye++){const rs=Ge[Ye],ps=os[rs];if(!ps)continue;const es=20+Ye/xs*75;R(es);try{const{data:Ae,error:Bs}=await window.ezsite.apis.tablePage(12870,{PageNo:1,PageSize:1,Filters:[{name:"sleeper_player_id",op:"Equal",value:rs}]});if(Bs){console.error(`Error searching for player ${rs}:`,Bs);continue}const vs={sleeper_player_id:rs,player_name:`${ps.first_name||""} ${ps.last_name||""}`.trim()||"Unknown Player",position:ps.position||"UNK",team_id:0,nfl_team:ps.team||"FA",jersey_number:ps.jersey_number||0,status:ps.status||"Active",injury_status:ps.injury_status||"Healthy",age:ps.age||0,height:ps.height||"",weight:ps.weight||0,years_experience:ps.years_exp||0,depth_chart_position:ps.depth_chart_position||1,college:ps.college||"",is_current_data:!0,last_updated:new Date().toISOString(),data_version:1};if(((I=Ae==null?void 0:Ae.List)==null?void 0:I.length)>0){const Vs=Ae.List[0],Us={...vs,ID:Vs.id},{error:Gs}=await Vt("tableUpdate");Gs?console.error(`Error updating player ${rs}:`,Gs):_s++}else{const{error:Vs}=await cr("tableCreate");Vs?console.error(`Error creating player ${rs}:`,Vs):us++}}catch(Ae){console.error(`Error processing player ${rs}:`,Ae)}Ye%100===0&&await new Promise(Ae=>setTimeout(Ae,50))}f({success:!0,players_created:us,players_updated:_s}),console.log(` Successfully synced players: ${us} created, ${_s} updated`);const Ss=new Date().toISOString();localStorage.setItem("last_players_sync",Ss),je(new Date(Ss).toLocaleString()),Qe({title:"Players Sync Complete",description:`${us} players created, ${_s} updated`,variant:"default"})}catch(ge){console.error(" Error syncing players:",ge),f({success:!1,error:ge.toString(),players_created:0,players_updated:0}),Qe({title:"Players Sync Failed",description:`Failed to sync players: ${ge}`,variant:"destructive"})}finally{j(!1),R(100)}},Dt=async()=>{var I;if(!i||r.length===0){Qe({title:"No Data to Sync",description:"Please select a season with conferences to sync matchups",variant:"destructive"});return}g(!0),U(0),C(null);try{console.log("Starting matchups sync from Sleeper API..."),U(5);let ge=0,os=0,Ge=0,us=0;const _s=r.length*17;let xs=0;for(const Ye of r)try{console.log(`Processing matchups for league ${Ye.league_id}...`);for(let rs=1;rs<=17;rs++){try{console.log(`Fetching matchups for league ${Ye.league_id}, week ${rs}...`);const es=await fetch(`https://api.sleeper.app/v1/league/${Ye.league_id}/matchups/${rs}`);if(!es.ok){if(es.status===404){console.log(`No matchups found for league ${Ye.league_id}, week ${rs} (404)`);continue}throw new Error(`API returned ${es.status}: ${es.statusText}`)}const Ae=await es.json();if(console.log(`Received ${Ae.length} matchup entries for league ${Ye.league_id}, week ${rs}`),!Array.isArray(Ae)||Ae.length===0){console.log(`No matchup data available for league ${Ye.league_id}, week ${rs}`);continue}const Bs=new Map;Ae.forEach(vs=>{Bs.has(vs.matchup_id)||Bs.set(vs.matchup_id,[]),Bs.get(vs.matchup_id).push(vs)});for(const[vs,Vs]of Bs.entries()){if(Vs.length!==2){console.warn(`Skipping incomplete matchup ${vs} - only ${Vs.length} teams`);continue}const[Us,Gs]=Vs,nt=await qs(Us.roster_id.toString(),Ye.id),Qs=await qs(Gs.roster_id.toString(),Ye.id);if(!nt||!Qs){console.warn(`Could not find team IDs for matchup ${vs}`);continue}let Fs=0;Us.points>Gs.points?Fs=nt:Gs.points>Us.points&&(Fs=Qs);const Pr={conference_id:Ye.id,week:rs,team_1_id:nt,team_2_id:Qs,is_playoff:rs>14,sleeper_matchup_id:vs.toString(),team_1_score:Us.points||0,team_2_score:Gs.points||0,winner_id:Fs,is_manual_override:!1,status:Us.points>0||Gs.points>0?"complete":"pending",matchup_date:new Date().toISOString(),notes:""},{data:at,error:pt}=await window.ezsite.apis.tablePage(13329,{PageNo:1,PageSize:1,Filters:[{name:"conference_id",op:"Equal",value:Ye.id},{name:"week",op:"Equal",value:rs},{name:"sleeper_matchup_id",op:"Equal",value:vs.toString()}]});if(pt){console.error("Error searching for existing matchup:",pt);continue}if(((I=at==null?void 0:at.List)==null?void 0:I.length)>0){const ot=at.List[0],Rr={...Pr,ID:ot.id},{error:it}=await Vt("tableUpdate");it?console.error("Error updating matchup:",it):os++}else{const{error:ot}=await cr("tableCreate");ot?console.error("Error creating matchup:",ot):ge++}}us++,await new Promise(vs=>setTimeout(vs,100))}catch(es){console.error(`Error processing week ${rs} for league ${Ye.league_id}:`,es)}xs++;const ps=5+xs/_s*90;U(ps)}Ge++,console.log(` Completed matchups sync for league ${Ye.league_id}`),await new Promise(rs=>setTimeout(rs,200))}catch(rs){console.error(`Error processing league ${Ye.league_id}:`,rs)}C({success:!0,matchups_created:ge,matchups_updated:os,leagues_processed:Ge,weeks_processed:us}),console.log(` Successfully synced matchups: ${ge} created, ${os} updated`);const Ss=new Date().toISOString();localStorage.setItem("last_matchups_sync",Ss),Se(new Date(Ss).toLocaleString()),Qe({title:"Matchups Sync Complete",description:`${ge} matchups created, ${os} updated across ${Ge} leagues`,variant:"default"})}catch(ge){console.error(" Error syncing matchups:",ge),C({success:!1,error:ge.toString(),matchups_created:0,matchups_updated:0,leagues_processed:0,weeks_processed:0}),Qe({title:"Matchups Sync Failed",description:`Failed to sync matchups: ${ge}`,variant:"destructive"})}finally{g(!1),U(100)}},xt=async()=>{N(!0),K(0),W(null);try{console.log("Starting draft sync from Sleeper API..."),K(5);const I=await vc.fetchAndStoreDraftResults();if(K(100),I.success){W({success:!0,message:I.message,data:I.data});const ge=new Date().toISOString();localStorage.setItem("last_draft_sync",ge),ds(new Date(ge).toLocaleString()),Qe({title:"Draft Sync Complete",description:I.message,variant:"default"})}else W({success:!1,error:I.message,message:I.message}),Qe({title:"Draft Sync Failed",description:I.message,variant:"destructive"})}catch(I){console.error(" Error syncing draft:",I),W({success:!1,error:I.toString(),message:`Draft sync failed: ${I}`}),Qe({title:"Draft Sync Failed",description:`Failed to sync draft: ${I}`,variant:"destructive"})}finally{N(!1)}},Rs=t.find(I=>I.id===i);return de?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-b-2 border-blue-600 rounded-full"})}):e.jsx("div",{className:"space-y-6",children:e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"h-5 w-5"}),"Data Synchronization"]}),e.jsx(Ce,{children:"Sync conference, team, and player data from Sleeper API to update database records"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"flex-1",children:e.jsxs(cs,{value:(i==null?void 0:i.toString())||"",onValueChange:I=>c(parseInt(I)),children:[e.jsx(ns,{className:"w-[200px]",children:e.jsx(ls,{placeholder:"Select season"})}),e.jsx(as,{children:t.map(I=>e.jsx(Re,{value:I.id.toString(),children:I.season_name},I.id))})]})})})}),Rs&&e.jsxs(e.Fragment,{children:[r.length===0&&e.jsxs(qe,{className:"mb-6",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsxs(Ve,{children:["No conferences found for ",Rs.season_name,". Conference and Team sync require leagues to be added first, but Player sync can be performed independently."]})]}),e.jsxs(ut,{defaultValue:r.length>0?"conferences":"players",className:"space-y-6",children:[e.jsxs(lt,{className:"grid w-full grid-cols-6",children:[e.jsxs(Me,{value:"conferences",className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-4 w-4"}),"Conference Sync"]}),e.jsxs(Me,{value:"teams",className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4"}),"Teams Sync"]}),e.jsxs(Me,{value:"matchups",className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Matchups Sync"]}),e.jsxs(Me,{value:"draft",className:"flex items-center gap-2",children:[e.jsx(Lr,{className:"h-4 w-4"}),"Draft Sync"]}),e.jsxs(Me,{value:"rosters",className:"flex items-center gap-2",children:[e.jsx(En,{className:"h-4 w-4"}),"Team Rosters"]}),e.jsxs(Me,{value:"players",className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"}),"Players Sync"]})]}),e.jsx(Le,{value:"rosters",children:r.length===0?e.jsxs(qe,{children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(Ve,{children:"No conferences available for team rosters synchronization. Please add leagues in the League Manager tab first."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:Q&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(rt,{className:"h-4 w-4"}),"Last rosters sync: ",Q]})}),e.jsx(X,{onClick:Oe,disabled:p||!i||r.length===0,children:p?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(En,{className:"h-4 w-4 mr-2"}),"Sync Team Rosters"]})})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center gap-2",children:[e.jsx(Zo,{className:"h-5 w-5"}),"Week Filtering Options"]}),e.jsx(Ce,{children:"Choose which weeks to sync for team rosters data"})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(cs,{value:we,onValueChange:ws,children:[e.jsx(ns,{className:"w-[200px]",children:e.jsx(ls,{placeholder:"Select sync mode"})}),e.jsxs(as,{children:[e.jsx(Re,{value:"all",children:"All Weeks (1-17)"}),e.jsx(Re,{value:"range",children:"Week Range"}),e.jsx(Re,{value:"specific",children:"Specific Weeks"})]})]}),we==="range"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:"From week:"}),e.jsxs(cs,{value:Te.toString(),onValueChange:I=>ze(parseInt(I)),children:[e.jsx(ns,{className:"w-20",children:e.jsx(ls,{})}),e.jsx(as,{children:Array.from({length:17},(I,ge)=>ge+1).map(I=>e.jsx(Re,{value:I.toString(),children:I},I))})]}),e.jsx("span",{className:"text-sm",children:"to week:"}),e.jsxs(cs,{value:ks.toString(),onValueChange:I=>ss(parseInt(I)),children:[e.jsx(ns,{className:"w-20",children:e.jsx(ls,{})}),e.jsx(as,{children:Array.from({length:17},(I,ge)=>ge+1).filter(I=>I>=Te).map(I=>e.jsx(Re,{value:I.toString(),children:I},I))})]})]})]}),we==="specific"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{variant:"outline",size:"sm",onClick:Pe,className:"text-xs",children:"Select All"}),e.jsx(X,{variant:"outline",size:"sm",onClick:ts,className:"text-xs",children:"Clear All"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[De.length," weeks selected"]})]}),e.jsx("div",{className:"grid grid-cols-9 gap-2",children:Array.from({length:17},(I,ge)=>ge+1).map(I=>e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Na,{id:`week-${I}`,checked:De.includes(I),onCheckedChange:()=>me(I)}),e.jsx("label",{htmlFor:`week-${I}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:I})]},I))})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(st,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Sync Summary"})]}),e.jsx("div",{className:"text-sm text-blue-700",children:(()=>{const I=Xe();return`Will sync ${I.length} week${I.length!==1?"s":""} (${I.join(", ")}) across ${r.length} conference${r.length!==1?"s":""} = ${I.length*r.length} total operations`})()})]})]})]}),p&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Synchronizing team rosters..."}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(B),"%"]})]}),e.jsx(gt,{value:B,className:"w-full"})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"text-lg",children:["Team Rosters Synchronization - ",Rs.season_name]}),e.jsxs(Ce,{children:["Sync weekly team roster data from Sleeper API using matchups endpoint for ",r.length," conference",r.length!==1?"s":""," across selected weeks"]})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(En,{className:"h-5 w-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold",children:"Roster Data"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Fetches weekly roster information including:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Player assignments to teams by week"}),e.jsx("li",{children:" Active roster compositions"}),e.jsx("li",{children:" Team-player relationships over time"}),e.jsx("li",{children:" Historical roster tracking"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ht,{className:"h-5 w-5 text-green-600"}),e.jsx("h4",{className:"font-semibold",children:"Data Mapping"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Uses existing data for accurate mapping:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Maps roster_id to team_id via junction table"}),e.jsx("li",{children:" Maps sleeper_player_id to player_id"}),e.jsx("li",{children:" Creates weekly roster assignments"}),e.jsxs("li",{children:[" Processes ",r.length*17," total operations"]})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Sync Process Overview:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:[e.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Step 1: API Calls"}),e.jsx("div",{className:"text-xs text-blue-600",children:"Fetch matchups for each league & week"})]}),e.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"text-sm font-medium text-yellow-800",children:"Step 2: Data Mapping"}),e.jsx("div",{className:"text-xs text-yellow-600",children:"Map roster_id & player_id to database"})]}),e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded",children:[e.jsx("div",{className:"text-sm font-medium text-green-800",children:"Step 3: Store Rosters"}),e.jsx("div",{className:"text-xs text-green-600",children:"Save weekly roster assignments"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Conferences to Process:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:r.map(I=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[e.jsx(ee,{variant:"outline",className:"text-xs",children:I.league_id}),e.jsx("span",{className:"text-sm truncate",children:I.conference_name})]},I.id))}),e.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Total operations: ",r.length," leagues  ",Xe().length," weeks = ",r.length*Xe().length," API calls"]})]}),e.jsxs(qe,{className:"mt-4",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsxs(Ve,{children:[e.jsx("strong",{children:"Note:"}),` This sync processes team rosters for the selected weeks across all conferences using the matchups endpoint. The "players" array from each matchup entry contains all players on that team's roster for that specific week. Weeks that don't exist yet (future weeks) will be skipped automatically.`]})]})]})]}),q&&e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsx(ce,{className:"text-lg",children:"Team Rosters Sync Results"}),e.jsx(Ce,{children:"Results from the last team rosters synchronization"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[q.success?e.jsx(lr,{className:"h-5 w-5 text-green-600"}):e.jsx(Je,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"font-medium",children:"Team Rosters Synchronization"})]}),e.jsx("div",{className:"text-sm",children:q.success?e.jsx("span",{className:"text-green-600",children:"Success"}):e.jsx("span",{className:"text-red-600",children:"Failed"})})]}),q.success&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"}),e.jsx("div",{className:"text-lg font-semibold text-green-600",children:q.rosters_created})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Updated:"}),e.jsx("div",{className:"text-lg font-semibold text-blue-600",children:q.rosters_updated})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Players:"}),e.jsx("div",{className:"text-lg font-semibold text-purple-600",children:q.players_processed})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Leagues:"}),e.jsx("div",{className:"text-lg font-semibold text-orange-600",children:q.leagues_processed})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Weeks:"}),e.jsx("div",{className:"text-lg font-semibold text-teal-600",children:q.weeks_processed})]})]}),q.error&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:q.error})]})})]})]})}),e.jsx(Le,{value:"conferences",children:r.length===0?e.jsxs(qe,{children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(Ve,{children:"No conferences available. Please add leagues in the League Manager tab first."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:M&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(rt,{className:"h-4 w-4"}),"Last sync: ",M]})}),e.jsx(X,{onClick:Os,disabled:d||!i||r.length===0,children:d?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),"Sync Conference Data"]})})]}),d&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Synchronizing conferences..."}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(T),"%"]})]}),e.jsx(gt,{value:T,className:"w-full"})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"text-lg",children:["Conference Synchronization - ",Rs==null?void 0:Rs.season_name]}),e.jsx(Ce,{children:"Sync conference data from Sleeper API to update league information"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Conferences to Process:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:r.map(I=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[e.jsx(ee,{variant:"outline",className:"text-xs",children:I.league_id}),e.jsx("span",{className:"text-sm truncate",children:I.conference_name})]},I.id))})]})})]}),ae.length>0&&e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{className:"text-lg",children:"Sync Results"})}),e.jsx(Y,{children:e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{children:"League ID"}),e.jsx(G,{children:"Status"}),e.jsx(G,{children:"Details"})]})}),e.jsx(Ls,{children:ae.map((I,ge)=>e.jsxs($e,{children:[e.jsx(z,{className:"font-medium",children:I.league_id}),e.jsx(z,{children:I.success?e.jsx(ee,{variant:"default",children:"Success"}):e.jsx(ee,{variant:"destructive",children:"Failed"})}),e.jsx(z,{children:I.success?e.jsx("span",{className:"text-green-600",children:"Updated successfully"}):e.jsx("span",{className:"text-red-600",children:I.error})})]},ge))})]})})]})]})}),e.jsx(Le,{value:"teams",children:r.length===0?e.jsxs(qe,{children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(Ve,{children:"No conferences available for team synchronization. Please add leagues in the League Manager tab first."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:ne&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(rt,{className:"h-4 w-4"}),"Last teams sync: ",ne]})}),e.jsx(X,{onClick:zs,disabled:m||!i||r.length===0,children:m?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),"Sync Teams"]})})]}),m&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Synchronizing teams..."}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(F),"%"]})]}),e.jsx(gt,{value:F,className:"w-full"})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"text-lg",children:["Teams Synchronization - ",Rs==null?void 0:Rs.season_name]}),e.jsx(Ce,{children:"Sync team data from Sleeper API including owners, team names, and roster mappings"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(bs,{className:"h-5 w-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold",children:"Team Data"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Creates teams and junction records:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Team names and owner information"}),e.jsx("li",{children:" Avatar/logo URLs"}),e.jsx("li",{children:" Roster ID mappings"}),e.jsx("li",{children:" Conference relationships"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ht,{className:"h-5 w-5 text-green-600"}),e.jsx("h4",{className:"font-semibold",children:"Data Structure"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Updates database tables:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Teams table (team info)"}),e.jsx("li",{children:" Junction table (team-conference mapping)"}),e.jsx("li",{children:" Roster ID associations"}),e.jsx("li",{children:" Active status tracking"})]})]})]})})]}),_.length>0&&e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{className:"text-lg",children:"Teams Sync Results"})}),e.jsx(Y,{children:e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{children:"League ID"}),e.jsx(G,{children:"Status"}),e.jsx(G,{children:"Teams Created"}),e.jsx(G,{children:"Junction Records"}),e.jsx(G,{children:"Details"})]})}),e.jsx(Ls,{children:_.map((I,ge)=>e.jsxs($e,{children:[e.jsx(z,{className:"font-medium",children:I.league_id}),e.jsx(z,{children:I.success?e.jsx(ee,{variant:"default",children:"Success"}):e.jsx(ee,{variant:"destructive",children:"Failed"})}),e.jsx(z,{children:I.success?I.teams_created:0}),e.jsx(z,{children:I.success?I.junction_records_created:0}),e.jsx(z,{children:I.success?e.jsx("span",{className:"text-green-600",children:"Updated successfully"}):e.jsx("span",{className:"text-red-600",children:I.error})})]},ge))})]})})]})]})}),e.jsx(Le,{value:"matchups",children:r.length===0?e.jsxs(qe,{children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(Ve,{children:"No conferences available for matchup synchronization. Please add leagues in the League Manager tab first."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:be&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(rt,{className:"h-4 w-4"}),"Last matchups sync: ",be]})}),e.jsx(X,{onClick:Dt,disabled:b||!i||r.length===0,children:b?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Sync Matchups"]})})]}),b&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Synchronizing matchups..."}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(A),"%"]})]}),e.jsx(gt,{value:A,className:"w-full"})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"text-lg",children:["Matchups Synchronization - ",Rs==null?void 0:Rs.season_name]}),e.jsx(Ce,{children:"Sync matchup data from Sleeper API for all weeks across all conferences"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ke,{className:"h-5 w-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold",children:"Matchup Data"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Processes matchup information:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Team matchups for all weeks"}),e.jsx("li",{children:" Scores and results"}),e.jsx("li",{children:" Winner determination"}),e.jsx("li",{children:" Playoff vs regular season"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(st,{className:"h-5 w-5 text-green-600"}),e.jsx("h4",{className:"font-semibold",children:"Season Coverage"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Covers the entire season:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Weeks 1-17 for each conference"}),e.jsx("li",{children:" Regular season and playoffs"}),e.jsxs("li",{children:[" ",r.length*17," total operations"]}),e.jsx("li",{children:" Automatic status detection"})]})]})]})})]}),w&&e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{className:"text-lg",children:"Matchups Sync Results"})}),e.jsx(Y,{children:e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[w.success?e.jsx(lr,{className:"h-5 w-5 text-green-600"}):e.jsx(Je,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"font-medium",children:"Matchups Synchronization"})]}),e.jsx("div",{className:"text-sm",children:w.success?e.jsx("span",{className:"text-green-600",children:"Success"}):e.jsx("span",{className:"text-red-600",children:"Failed"})})]}),w.success&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"}),e.jsx("div",{className:"text-lg font-semibold text-green-600",children:w.matchups_created})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Updated:"}),e.jsx("div",{className:"text-lg font-semibold text-blue-600",children:w.matchups_updated})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Leagues:"}),e.jsx("div",{className:"text-lg font-semibold text-orange-600",children:w.leagues_processed})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Weeks:"}),e.jsx("div",{className:"text-lg font-semibold text-purple-600",children:w.weeks_processed})]})]}),w.error&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:w.error})]})})]})]})}),e.jsx(Le,{value:"draft",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:Ie&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(rt,{className:"h-4 w-4"}),"Last draft sync: ",Ie]})}),e.jsx(X,{onClick:xt,disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Lr,{className:"h-4 w-4 mr-2"}),"Sync Draft Results"]})})]}),x&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Synchronizing draft results..."}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(se),"%"]})]}),e.jsx(gt,{value:se,className:"w-full"})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsx(ce,{className:"text-lg",children:"Draft Results Synchronization"}),e.jsx(Ce,{children:"Sync draft results from Sleeper API for all conferences and seasons"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Lr,{className:"h-5 w-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold",children:"Draft Data"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Processes draft information:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Draft picks by round and position"}),e.jsx("li",{children:" Player information and positions"}),e.jsx("li",{children:" Team assignments"}),e.jsx("li",{children:" Historical draft tracking"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ht,{className:"h-5 w-5 text-green-600"}),e.jsx("h4",{className:"font-semibold",children:"Data Processing"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Updates draft results table:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Maps roster IDs to team IDs"}),e.jsx("li",{children:" Processes all conferences"}),e.jsx("li",{children:" Handles multiple seasons"}),e.jsx("li",{children:" Clears and refreshes data"})]})]})]}),e.jsxs(qe,{children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsxs(Ve,{children:[e.jsx("strong",{children:"Note:"})," This sync processes draft results for all conferences and seasons. It will clear existing draft data and repopulate it with the latest information from Sleeper API."]})]})]})]}),$&&e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{className:"text-lg",children:"Draft Sync Results"})}),e.jsx(Y,{children:e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[$.success?e.jsx(lr,{className:"h-5 w-5 text-green-600"}):e.jsx(Je,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"font-medium",children:"Draft Synchronization"})]}),e.jsx("div",{className:"text-sm",children:$.success?e.jsx("span",{className:"text-green-600",children:"Success"}):e.jsx("span",{className:"text-red-600",children:"Failed"})})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:$.message}),$.error&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:$.error})]})})]})]})}),e.jsx(Le,{value:"players",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:ue&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(rt,{className:"h-4 w-4"}),"Last players sync: ",ue]})}),e.jsx(X,{onClick:tt,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Sync Players"]})})]}),v&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Synchronizing players..."}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(E),"%"]})]}),e.jsx(gt,{value:E,className:"w-full"})]}),e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsx(ce,{className:"text-lg",children:"Players Synchronization"}),e.jsx(Ce,{children:"Sync all NFL players data from Sleeper API - this operation is independent of conferences"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Yt,{className:"h-5 w-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold",children:"Player Data"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Syncs comprehensive player information:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Names and positions"}),e.jsx("li",{children:" NFL team affiliations"}),e.jsx("li",{children:" Physical attributes"}),e.jsx("li",{children:" Injury status"}),e.jsx("li",{children:" College and experience"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ht,{className:"h-5 w-5 text-green-600"}),e.jsx("h4",{className:"font-semibold",children:"Data Management"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Updates player database:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Creates new player records"}),e.jsx("li",{children:" Updates existing player info"}),e.jsx("li",{children:" Maintains Sleeper ID mappings"}),e.jsx("li",{children:" Processes thousands of players"})]})]})]}),e.jsxs(qe,{children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsxs(Ve,{children:[e.jsx("strong",{children:"Note:"})," This sync processes all NFL players from Sleeper API. It can take several minutes to complete and will update or create thousands of player records."]})]})]})]}),y&&e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{className:"text-lg",children:"Players Sync Results"})}),e.jsx(Y,{children:e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[y.success?e.jsx(lr,{className:"h-5 w-5 text-green-600"}):e.jsx(Je,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"font-medium",children:"Players Synchronization"})]}),e.jsx("div",{className:"text-sm",children:y.success?e.jsx("span",{className:"text-green-600",children:"Success"}):e.jsx("span",{className:"text-red-600",children:"Failed"})})]}),y.success&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"}),e.jsx("div",{className:"text-lg font-semibold text-green-600",children:y.players_created})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Updated:"}),e.jsx("div",{className:"text-lg font-semibold text-blue-600",children:y.players_updated})]})]}),y.error&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:y.error})]})})]})]})})]})]})]})]})})},Vt=async(t,s)=>(console.log(`Placeholder Update: ${t}`,s),{error:null}),cr=async(t,s)=>(console.log(`Placeholder Create: ${t}`,s),{error:null});function kf(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return l.useMemo(()=>n=>{s.forEach(a=>a(n))},s)}const xn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rr(t){const s=Object.prototype.toString.call(t);return s==="[object Window]"||s==="[object global]"}function ba(t){return"nodeType"in t}function Xs(t){var s,r;return t?rr(t)?t:ba(t)&&(s=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?s:window:window}function _a(t){const{Document:s}=Xs(t);return t instanceof s}function kr(t){return rr(t)?!1:t instanceof Xs(t).HTMLElement}function wc(t){return t instanceof Xs(t).SVGElement}function nr(t){return t?rr(t)?t.document:ba(t)?_a(t)?t:kr(t)||wc(t)?t.ownerDocument:document:document:document}const mt=xn?l.useLayoutEffect:l.useEffect;function pn(t){const s=l.useRef(t);return mt(()=>{s.current=t}),l.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return s.current==null?void 0:s.current(...n)},[])}function $f(){const t=l.useRef(null),s=l.useCallback((n,a)=>{t.current=setInterval(n,a)},[]),r=l.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[s,r]}function vr(t,s){s===void 0&&(s=[t]);const r=l.useRef(t);return mt(()=>{r.current!==t&&(r.current=t)},s),r}function $r(t,s){const r=l.useRef();return l.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...s])}function Yr(t){const s=pn(t),r=l.useRef(null),n=l.useCallback(a=>{a!==r.current&&(s==null||s(a,r.current)),r.current=a},[]);return[r,n]}function Jr(t){const s=l.useRef();return l.useEffect(()=>{s.current=t},[t]),s.current}let An={};function Tr(t,s){return l.useMemo(()=>{if(s)return s;const r=An[t]==null?0:An[t]+1;return An[t]=r,t+"-"+r},[t,s])}function Nc(t){return function(s){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((o,i)=>{const c=Object.entries(i);for(const[d,u]of c){const m=o[d];m!=null&&(o[d]=m+t*u)}return o},{...s})}}const Xt=Nc(1),wr=Nc(-1);function Tf(t){return"clientX"in t&&"clientY"in t}function gn(t){if(!t)return!1;const{KeyboardEvent:s}=Xs(t.target);return s&&t instanceof s}function Ef(t){if(!t)return!1;const{TouchEvent:s}=Xs(t.target);return s&&t instanceof s}function Xr(t){if(Ef(t)){if(t.touches&&t.touches.length){const{clientX:s,clientY:r}=t.touches[0];return{x:s,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:s,clientY:r}=t.changedTouches[0];return{x:s,y:r}}}return Tf(t)?{x:t.clientX,y:t.clientY}:null}const bt=Object.freeze({Translate:{toString(t){if(!t)return;const{x:s,y:r}=t;return"translate3d("+(s?Math.round(s):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:s,scaleY:r}=t;return"scaleX("+s+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[bt.Translate.toString(t),bt.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:s,duration:r,easing:n}=t;return s+" "+r+"ms "+n}}}),Ha="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Pf(t){return t.matches(Ha)?t:t.querySelector(Ha)}const Rf={display:"none"};function Ff(t){let{id:s,value:r}=t;return is.createElement("div",{id:s,style:Rf},r)}function Df(t){let{id:s,announcement:r,ariaLiveType:n="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return is.createElement("div",{id:s,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function Af(){const[t,s]=l.useState("");return{announce:l.useCallback(n=>{n!=null&&s(n)},[]),announcement:t}}const bc=l.createContext(null);function Mf(t){const s=l.useContext(bc);l.useEffect(()=>{if(!s)throw new Error("useDndMonitor must be used within a children of <DndContext>");return s(t)},[t,s])}function Lf(){const[t]=l.useState(()=>new Set),s=l.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[l.useCallback(n=>{let{type:a,event:o}=n;t.forEach(i=>{var c;return(c=i[a])==null?void 0:c.call(i,o)})},[t]),s]}const If={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Of={onDragStart(t){let{active:s}=t;return"Picked up draggable item "+s.id+"."},onDragOver(t){let{active:s,over:r}=t;return r?"Draggable item "+s.id+" was moved over droppable area "+r.id+".":"Draggable item "+s.id+" is no longer over a droppable area."},onDragEnd(t){let{active:s,over:r}=t;return r?"Draggable item "+s.id+" was dropped over droppable area "+r.id:"Draggable item "+s.id+" was dropped."},onDragCancel(t){let{active:s}=t;return"Dragging was cancelled. Draggable item "+s.id+" was dropped."}};function zf(t){let{announcements:s=Of,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=If}=t;const{announce:o,announcement:i}=Af(),c=Tr("DndLiveRegion"),[d,u]=l.useState(!1);if(l.useEffect(()=>{u(!0)},[]),Mf(l.useMemo(()=>({onDragStart(h){let{active:v}=h;o(s.onDragStart({active:v}))},onDragMove(h){let{active:v,over:j}=h;s.onDragMove&&o(s.onDragMove({active:v,over:j}))},onDragOver(h){let{active:v,over:j}=h;o(s.onDragOver({active:v,over:j}))},onDragEnd(h){let{active:v,over:j}=h;o(s.onDragEnd({active:v,over:j}))},onDragCancel(h){let{active:v,over:j}=h;o(s.onDragCancel({active:v,over:j}))}}),[o,s])),!d)return null;const m=is.createElement(is.Fragment,null,is.createElement(Ff,{id:n,value:a.draggable}),is.createElement(Df,{id:c,announcement:i}));return r?Ot.createPortal(m,r):m}var Ps;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ps||(Ps={}));function Kr(){}function Qr(t,s){return l.useMemo(()=>({sensor:t,options:s??{}}),[t,s])}function _c(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return l.useMemo(()=>[...s].filter(n=>n!=null),[...s])}const ht=Object.freeze({x:0,y:0});function Sc(t,s){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function Bf(t,s){const r=Xr(t);if(!r)return"0 0";const n={x:(r.x-s.left)/s.width*100,y:(r.y-s.top)/s.height*100};return n.x+"% "+n.y+"%"}function Cc(t,s){let{data:{value:r}}=t,{data:{value:n}}=s;return r-n}function Uf(t,s){let{data:{value:r}}=t,{data:{value:n}}=s;return n-r}function Ga(t){let{left:s,top:r,height:n,width:a}=t;return[{x:s,y:r},{x:s+a,y:r},{x:s,y:r+n},{x:s+a,y:r+n}]}function kc(t,s){if(!t||t.length===0)return null;const[r]=t;return r[s]}function Ya(t,s,r){return s===void 0&&(s=t.left),r===void 0&&(r=t.top),{x:s+t.width*.5,y:r+t.height*.5}}const $c=t=>{let{collisionRect:s,droppableRects:r,droppableContainers:n}=t;const a=Ya(s,s.left,s.top),o=[];for(const i of n){const{id:c}=i,d=r.get(c);if(d){const u=Sc(Ya(d),a);o.push({id:c,data:{droppableContainer:i,value:u}})}}return o.sort(Cc)},Wf=t=>{let{collisionRect:s,droppableRects:r,droppableContainers:n}=t;const a=Ga(s),o=[];for(const i of n){const{id:c}=i,d=r.get(c);if(d){const u=Ga(d),m=a.reduce((v,j,b)=>v+Sc(u[b],j),0),h=Number((m/4).toFixed(4));o.push({id:c,data:{droppableContainer:i,value:h}})}}return o.sort(Cc)};function qf(t,s){const r=Math.max(s.top,t.top),n=Math.max(s.left,t.left),a=Math.min(s.left+s.width,t.left+t.width),o=Math.min(s.top+s.height,t.top+t.height),i=a-n,c=o-r;if(n<a&&r<o){const d=s.width*s.height,u=t.width*t.height,m=i*c,h=m/(d+u-m);return Number(h.toFixed(4))}return 0}const Vf=t=>{let{collisionRect:s,droppableRects:r,droppableContainers:n}=t;const a=[];for(const o of n){const{id:i}=o,c=r.get(i);if(c){const d=qf(c,s);d>0&&a.push({id:i,data:{droppableContainer:o,value:d}})}}return a.sort(Uf)};function Hf(t,s,r){return{...t,scaleX:s&&r?s.width/r.width:1,scaleY:s&&r?s.height/r.height:1}}function Tc(t,s){return t&&s?{x:t.left-s.left,y:t.top-s.top}:ht}function Gf(t){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return a.reduce((i,c)=>({...i,top:i.top+t*c.y,bottom:i.bottom+t*c.y,left:i.left+t*c.x,right:i.right+t*c.x}),{...r})}}const Yf=Gf(1);function Ec(t){if(t.startsWith("matrix3d(")){const s=t.slice(9,-1).split(/, /);return{x:+s[12],y:+s[13],scaleX:+s[0],scaleY:+s[5]}}else if(t.startsWith("matrix(")){const s=t.slice(7,-1).split(/, /);return{x:+s[4],y:+s[5],scaleX:+s[0],scaleY:+s[3]}}return null}function Jf(t,s,r){const n=Ec(s);if(!n)return t;const{scaleX:a,scaleY:o,x:i,y:c}=n,d=t.left-i-(1-a)*parseFloat(r),u=t.top-c-(1-o)*parseFloat(r.slice(r.indexOf(" ")+1)),m=a?t.width/a:t.width,h=o?t.height/o:t.height;return{width:m,height:h,top:u,right:d+m,bottom:u+h,left:d}}const Xf={ignoreTransform:!1};function ar(t,s){s===void 0&&(s=Xf);let r=t.getBoundingClientRect();if(s.ignoreTransform){const{transform:u,transformOrigin:m}=Xs(t).getComputedStyle(t);u&&(r=Jf(r,u,m))}const{top:n,left:a,width:o,height:i,bottom:c,right:d}=r;return{top:n,left:a,width:o,height:i,bottom:c,right:d}}function Ja(t){return ar(t,{ignoreTransform:!0})}function Kf(t){const s=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:s,bottom:r,width:s,height:r}}function Qf(t,s){return s===void 0&&(s=Xs(t).getComputedStyle(t)),s.position==="fixed"}function Zf(t,s){s===void 0&&(s=Xs(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=s[a];return typeof o=="string"?r.test(o):!1})}function jn(t,s){const r=[];function n(a){if(s!=null&&r.length>=s||!a)return r;if(_a(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!kr(a)||wc(a)||r.includes(a))return r;const o=Xs(t).getComputedStyle(a);return a!==t&&Zf(a,o)&&r.push(a),Qf(a,o)?r:n(a.parentNode)}return t?n(t):r}function Pc(t){const[s]=jn(t,1);return s??null}function Mn(t){return!xn||!t?null:rr(t)?t:ba(t)?_a(t)||t===nr(t).scrollingElement?window:kr(t)?t:null:null}function Rc(t){return rr(t)?t.scrollX:t.scrollLeft}function Fc(t){return rr(t)?t.scrollY:t.scrollTop}function ea(t){return{x:Rc(t),y:Fc(t)}}var Ds;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ds||(Ds={}));function Dc(t){return!xn||!t?!1:t===document.scrollingElement}function Ac(t){const s={x:0,y:0},r=Dc(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},a=t.scrollTop<=s.y,o=t.scrollLeft<=s.x,i=t.scrollTop>=n.y,c=t.scrollLeft>=n.x;return{isTop:a,isLeft:o,isBottom:i,isRight:c,maxScroll:n,minScroll:s}}const ex={x:.2,y:.2};function sx(t,s,r,n,a){let{top:o,left:i,right:c,bottom:d}=r;n===void 0&&(n=10),a===void 0&&(a=ex);const{isTop:u,isBottom:m,isLeft:h,isRight:v}=Ac(t),j={x:0,y:0},b={x:0,y:0},g={height:s.height*a.y,width:s.width*a.x};return!u&&o<=s.top+g.height?(j.y=Ds.Backward,b.y=n*Math.abs((s.top+g.height-o)/g.height)):!m&&d>=s.bottom-g.height&&(j.y=Ds.Forward,b.y=n*Math.abs((s.bottom-g.height-d)/g.height)),!v&&c>=s.right-g.width?(j.x=Ds.Forward,b.x=n*Math.abs((s.right-g.width-c)/g.width)):!h&&i<=s.left+g.width&&(j.x=Ds.Backward,b.x=n*Math.abs((s.left+g.width-i)/g.width)),{direction:j,speed:b}}function tx(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:i}=window;return{top:0,left:0,right:o,bottom:i,width:o,height:i}}const{top:s,left:r,right:n,bottom:a}=t.getBoundingClientRect();return{top:s,left:r,right:n,bottom:a,width:t.clientWidth,height:t.clientHeight}}function Mc(t){return t.reduce((s,r)=>Xt(s,ea(r)),ht)}function rx(t){return t.reduce((s,r)=>s+Rc(r),0)}function nx(t){return t.reduce((s,r)=>s+Fc(r),0)}function Lc(t,s){if(s===void 0&&(s=ar),!t)return;const{top:r,left:n,bottom:a,right:o}=s(t);Pc(t)&&(a<=0||o<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const ax=[["x",["left","right"],rx],["y",["top","bottom"],nx]];class Sa{constructor(s,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=jn(r),a=Mc(n);this.rect={...s},this.width=s.width,this.height=s.height;for(const[o,i,c]of ax)for(const d of i)Object.defineProperty(this,d,{get:()=>{const u=c(n),m=a[o]-u;return this.rect[d]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class mr{constructor(s){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=s}add(s,r,n){var a;(a=this.target)==null||a.addEventListener(s,r,n),this.listeners.push([s,r,n])}}function ox(t){const{EventTarget:s}=Xs(t);return t instanceof s?t:nr(t)}function Ln(t,s){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof s=="number"?Math.sqrt(r**2+n**2)>s:"x"in s&&"y"in s?r>s.x&&n>s.y:"x"in s?r>s.x:"y"in s?n>s.y:!1}var ct;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ct||(ct={}));function Xa(t){t.preventDefault()}function ix(t){t.stopPropagation()}var We;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(We||(We={}));const Ic={start:[We.Space,We.Enter],cancel:[We.Esc],end:[We.Space,We.Enter,We.Tab]},cx=(t,s)=>{let{currentCoordinates:r}=s;switch(t.code){case We.Right:return{...r,x:r.x+25};case We.Left:return{...r,x:r.x-25};case We.Down:return{...r,y:r.y+25};case We.Up:return{...r,y:r.y-25}}};class yn{constructor(s){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=s;const{event:{target:r}}=s;this.props=s,this.listeners=new mr(nr(r)),this.windowListeners=new mr(Xs(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ct.Resize,this.handleCancel),this.windowListeners.add(ct.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ct.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:s,onStart:r}=this.props,n=s.node.current;n&&Lc(n),r(ht)}handleKeyDown(s){if(gn(s)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:o=Ic,coordinateGetter:i=cx,scrollBehavior:c="smooth"}=a,{code:d}=s;if(o.end.includes(d)){this.handleEnd(s);return}if(o.cancel.includes(d)){this.handleCancel(s);return}const{collisionRect:u}=n.current,m=u?{x:u.left,y:u.top}:ht;this.referenceCoordinates||(this.referenceCoordinates=m);const h=i(s,{active:r,context:n.current,currentCoordinates:m});if(h){const v=wr(h,m),j={x:0,y:0},{scrollableAncestors:b}=n.current;for(const g of b){const x=s.code,{isTop:N,isRight:p,isLeft:k,isBottom:T,maxScroll:P,minScroll:F}=Ac(g),L=tx(g),E={x:Math.min(x===We.Right?L.right-L.width/2:L.right,Math.max(x===We.Right?L.left:L.left+L.width/2,h.x)),y:Math.min(x===We.Down?L.bottom-L.height/2:L.bottom,Math.max(x===We.Down?L.top:L.top+L.height/2,h.y))},R=x===We.Right&&!p||x===We.Left&&!k,A=x===We.Down&&!T||x===We.Up&&!N;if(R&&E.x!==h.x){const U=g.scrollLeft+v.x,se=x===We.Right&&U<=P.x||x===We.Left&&U>=F.x;if(se&&!v.y){g.scrollTo({left:U,behavior:c});return}se?j.x=g.scrollLeft-U:j.x=x===We.Right?g.scrollLeft-P.x:g.scrollLeft-F.x,j.x&&g.scrollBy({left:-j.x,behavior:c});break}else if(A&&E.y!==h.y){const U=g.scrollTop+v.y,se=x===We.Down&&U<=P.y||x===We.Up&&U>=F.y;if(se&&!v.x){g.scrollTo({top:U,behavior:c});return}se?j.y=g.scrollTop-U:j.y=x===We.Down?g.scrollTop-P.y:g.scrollTop-F.y,j.y&&g.scrollBy({top:-j.y,behavior:c});break}}this.handleMove(s,Xt(wr(h,this.referenceCoordinates),j))}}}handleMove(s,r){const{onMove:n}=this.props;s.preventDefault(),n(r)}handleEnd(s){const{onEnd:r}=this.props;s.preventDefault(),this.detach(),r()}handleCancel(s){const{onCancel:r}=this.props;s.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}yn.activators=[{eventName:"onKeyDown",handler:(t,s,r)=>{let{keyboardCodes:n=Ic,onActivation:a}=s,{active:o}=r;const{code:i}=t.nativeEvent;if(n.start.includes(i)){const c=o.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function Ka(t){return!!(t&&"distance"in t)}function Qa(t){return!!(t&&"delay"in t)}class Ca{constructor(s,r,n){var a;n===void 0&&(n=ox(s.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=s,this.events=r;const{event:o}=s,{target:i}=o;this.props=s,this.events=r,this.document=nr(i),this.documentListeners=new mr(this.document),this.listeners=new mr(n),this.windowListeners=new mr(Xs(i)),this.initialCoordinates=(a=Xr(o))!=null?a:ht,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:s,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(s.move.name,this.handleMove,{passive:!1}),this.listeners.add(s.end.name,this.handleEnd),s.cancel&&this.listeners.add(s.cancel.name,this.handleCancel),this.windowListeners.add(ct.Resize,this.handleCancel),this.windowListeners.add(ct.DragStart,Xa),this.windowListeners.add(ct.VisibilityChange,this.handleCancel),this.windowListeners.add(ct.ContextMenu,Xa),this.documentListeners.add(ct.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Qa(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Ka(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(s,r){const{active:n,onPending:a}=this.props;a(n,s,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:s}=this,{onStart:r}=this.props;s&&(this.activated=!0,this.documentListeners.add(ct.Click,ix,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ct.SelectionChange,this.removeTextSelection),r(s))}handleMove(s){var r;const{activated:n,initialCoordinates:a,props:o}=this,{onMove:i,options:{activationConstraint:c}}=o;if(!a)return;const d=(r=Xr(s))!=null?r:ht,u=wr(a,d);if(!n&&c){if(Ka(c)){if(c.tolerance!=null&&Ln(u,c.tolerance))return this.handleCancel();if(Ln(u,c.distance))return this.handleStart()}if(Qa(c)&&Ln(u,c.tolerance))return this.handleCancel();this.handlePending(c,u);return}s.cancelable&&s.preventDefault(),i(d)}handleEnd(){const{onAbort:s,onEnd:r}=this.props;this.detach(),this.activated||s(this.props.active),r()}handleCancel(){const{onAbort:s,onCancel:r}=this.props;this.detach(),this.activated||s(this.props.active),r()}handleKeydown(s){s.code===We.Esc&&this.handleCancel()}removeTextSelection(){var s;(s=this.document.getSelection())==null||s.removeAllRanges()}}const lx={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class vn extends Ca{constructor(s){const{event:r}=s,n=nr(r.target);super(s,lx,n)}}vn.activators=[{eventName:"onPointerDown",handler:(t,s)=>{let{nativeEvent:r}=t,{onActivation:n}=s;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const dx={move:{name:"mousemove"},end:{name:"mouseup"}};var sa;(function(t){t[t.RightClick=2]="RightClick"})(sa||(sa={}));class ux extends Ca{constructor(s){super(s,dx,nr(s.event.target))}}ux.activators=[{eventName:"onMouseDown",handler:(t,s)=>{let{nativeEvent:r}=t,{onActivation:n}=s;return r.button===sa.RightClick?!1:(n==null||n({event:r}),!0)}}];const In={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class mx extends Ca{constructor(s){super(s,In)}static setup(){return window.addEventListener(In.move.name,s,{capture:!1,passive:!1}),function(){window.removeEventListener(In.move.name,s)};function s(){}}}mx.activators=[{eventName:"onTouchStart",handler:(t,s)=>{let{nativeEvent:r}=t,{onActivation:n}=s;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var hr;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(hr||(hr={}));var Zr;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Zr||(Zr={}));function hx(t){let{acceleration:s,activator:r=hr.Pointer,canScroll:n,draggingRect:a,enabled:o,interval:i=5,order:c=Zr.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:m,delta:h,threshold:v}=t;const j=xx({delta:h,disabled:!o}),[b,g]=$f(),x=l.useRef({x:0,y:0}),N=l.useRef({x:0,y:0}),p=l.useMemo(()=>{switch(r){case hr.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case hr.DraggableRect:return a}},[r,a,d]),k=l.useRef(null),T=l.useCallback(()=>{const F=k.current;if(!F)return;const L=x.current.x*N.current.x,E=x.current.y*N.current.y;F.scrollBy(L,E)},[]),P=l.useMemo(()=>c===Zr.TreeOrder?[...u].reverse():u,[c,u]);l.useEffect(()=>{if(!o||!u.length||!p){g();return}for(const F of P){if((n==null?void 0:n(F))===!1)continue;const L=u.indexOf(F),E=m[L];if(!E)continue;const{direction:R,speed:A}=sx(F,E,p,s,v);for(const U of["x","y"])j[U][R[U]]||(A[U]=0,R[U]=0);if(A.x>0||A.y>0){g(),k.current=F,b(T,i),x.current=A,N.current=R;return}}x.current={x:0,y:0},N.current={x:0,y:0},g()},[s,T,n,g,o,i,JSON.stringify(p),JSON.stringify(j),b,u,P,m,JSON.stringify(v)])}const fx={x:{[Ds.Backward]:!1,[Ds.Forward]:!1},y:{[Ds.Backward]:!1,[Ds.Forward]:!1}};function xx(t){let{delta:s,disabled:r}=t;const n=Jr(s);return $r(a=>{if(r||!n||!a)return fx;const o={x:Math.sign(s.x-n.x),y:Math.sign(s.y-n.y)};return{x:{[Ds.Backward]:a.x[Ds.Backward]||o.x===-1,[Ds.Forward]:a.x[Ds.Forward]||o.x===1},y:{[Ds.Backward]:a.y[Ds.Backward]||o.y===-1,[Ds.Forward]:a.y[Ds.Forward]||o.y===1}}},[r,s,n])}function px(t,s){const r=s!=null?t.get(s):void 0,n=r?r.node.current:null;return $r(a=>{var o;return s==null?null:(o=n??a)!=null?o:null},[n,s])}function gx(t,s){return l.useMemo(()=>t.reduce((r,n)=>{const{sensor:a}=n,o=a.activators.map(i=>({eventName:i.eventName,handler:s(i.handler,n)}));return[...r,...o]},[]),[t,s])}var Nr;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Nr||(Nr={}));var ta;(function(t){t.Optimized="optimized"})(ta||(ta={}));const Za=new Map;function jx(t,s){let{dragging:r,dependencies:n,config:a}=s;const[o,i]=l.useState(null),{frequency:c,measure:d,strategy:u}=a,m=l.useRef(t),h=x(),v=vr(h),j=l.useCallback(function(N){N===void 0&&(N=[]),!v.current&&i(p=>p===null?N:p.concat(N.filter(k=>!p.includes(k))))},[v]),b=l.useRef(null),g=$r(N=>{if(h&&!r)return Za;if(!N||N===Za||m.current!==t||o!=null){const p=new Map;for(let k of t){if(!k)continue;if(o&&o.length>0&&!o.includes(k.id)&&k.rect.current){p.set(k.id,k.rect.current);continue}const T=k.node.current,P=T?new Sa(d(T),T):null;k.rect.current=P,P&&p.set(k.id,P)}return p}return N},[t,o,r,h,d]);return l.useEffect(()=>{m.current=t},[t]),l.useEffect(()=>{h||j()},[r,h]),l.useEffect(()=>{o&&o.length>0&&i(null)},[JSON.stringify(o)]),l.useEffect(()=>{h||typeof c!="number"||b.current!==null||(b.current=setTimeout(()=>{j(),b.current=null},c))},[c,h,j,...n]),{droppableRects:g,measureDroppableContainers:j,measuringScheduled:o!=null};function x(){switch(u){case Nr.Always:return!1;case Nr.BeforeDragging:return r;default:return!r}}}function ka(t,s){return $r(r=>t?r||(typeof s=="function"?s(t):t):null,[s,t])}function yx(t,s){return ka(t,s)}function vx(t){let{callback:s,disabled:r}=t;const n=pn(s),a=l.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(n)},[n,r]);return l.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function wn(t){let{callback:s,disabled:r}=t;const n=pn(s),a=l.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(n)},[r]);return l.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function wx(t){return new Sa(ar(t),t)}function eo(t,s,r){s===void 0&&(s=wx);const[n,a]=l.useState(null);function o(){a(d=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=d??r)!=null?u:null}const m=s(t);return JSON.stringify(d)===JSON.stringify(m)?d:m})}const i=vx({callback(d){if(t)for(const u of d){const{type:m,target:h}=u;if(m==="childList"&&h instanceof HTMLElement&&h.contains(t)){o();break}}}}),c=wn({callback:o});return mt(()=>{o(),t?(c==null||c.observe(t),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),i==null||i.disconnect())},[t]),n}function Nx(t){const s=ka(t);return Tc(t,s)}const so=[];function bx(t){const s=l.useRef(t),r=$r(n=>t?n&&n!==so&&t&&s.current&&t.parentNode===s.current.parentNode?n:jn(t):so,[t]);return l.useEffect(()=>{s.current=t},[t]),r}function _x(t){const[s,r]=l.useState(null),n=l.useRef(t),a=l.useCallback(o=>{const i=Mn(o.target);i&&r(c=>c?(c.set(i,ea(i)),new Map(c)):null)},[]);return l.useEffect(()=>{const o=n.current;if(t!==o){i(o);const c=t.map(d=>{const u=Mn(d);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,ea(u)]):null}).filter(d=>d!=null);r(c.length?new Map(c):null),n.current=t}return()=>{i(t),i(o)};function i(c){c.forEach(d=>{const u=Mn(d);u==null||u.removeEventListener("scroll",a)})}},[a,t]),l.useMemo(()=>t.length?s?Array.from(s.values()).reduce((o,i)=>Xt(o,i),ht):Mc(t):ht,[t,s])}function to(t,s){s===void 0&&(s=[]);const r=l.useRef(null);return l.useEffect(()=>{r.current=null},s),l.useEffect(()=>{const n=t!==ht;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?wr(t,r.current):ht}function Sx(t){l.useEffect(()=>{if(!xn)return;const s=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of s)r==null||r()}},t.map(s=>{let{sensor:r}=s;return r}))}function Cx(t,s){return l.useMemo(()=>t.reduce((r,n)=>{let{eventName:a,handler:o}=n;return r[a]=i=>{o(i,s)},r},{}),[t,s])}function Oc(t){return l.useMemo(()=>t?Kf(t):null,[t])}const ro=[];function kx(t,s){s===void 0&&(s=ar);const[r]=t,n=Oc(r?Xs(r):null),[a,o]=l.useState(ro);function i(){o(()=>t.length?t.map(d=>Dc(d)?n:new Sa(s(d),d)):ro)}const c=wn({callback:i});return mt(()=>{c==null||c.disconnect(),i(),t.forEach(d=>c==null?void 0:c.observe(d))},[t]),a}function zc(t){if(!t)return null;if(t.children.length>1)return t;const s=t.children[0];return kr(s)?s:t}function $x(t){let{measure:s}=t;const[r,n]=l.useState(null),a=l.useCallback(u=>{for(const{target:m}of u)if(kr(m)){n(h=>{const v=s(m);return h?{...h,width:v.width,height:v.height}:v});break}},[s]),o=wn({callback:a}),i=l.useCallback(u=>{const m=zc(u);o==null||o.disconnect(),m&&(o==null||o.observe(m)),n(m?s(m):null)},[s,o]),[c,d]=Yr(i);return l.useMemo(()=>({nodeRef:c,rect:r,setRef:d}),[r,c,d])}const Tx=[{sensor:vn,options:{}},{sensor:yn,options:{}}],Ex={current:{}},Or={draggable:{measure:Ja},droppable:{measure:Ja,strategy:Nr.WhileDragging,frequency:ta.Optimized},dragOverlay:{measure:ar}};class fr extends Map{get(s){var r;return s!=null&&(r=super.get(s))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(s=>{let{disabled:r}=s;return!r})}getNodeFor(s){var r,n;return(r=(n=this.get(s))==null?void 0:n.node.current)!=null?r:void 0}}const Px={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new fr,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Kr},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Or,measureDroppableContainers:Kr,windowRect:null,measuringScheduled:!1},Bc={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Kr,draggableNodes:new Map,over:null,measureDroppableContainers:Kr},Er=l.createContext(Bc),Uc=l.createContext(Px);function Rx(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new fr}}}function Fx(t,s){switch(s.type){case Ps.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:s.initialCoordinates,active:s.active}};case Ps.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:s.coordinates.x-t.draggable.initialCoordinates.x,y:s.coordinates.y-t.draggable.initialCoordinates.y}}};case Ps.DragEnd:case Ps.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ps.RegisterDroppable:{const{element:r}=s,{id:n}=r,a=new fr(t.droppable.containers);return a.set(n,r),{...t,droppable:{...t.droppable,containers:a}}}case Ps.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=s,o=t.droppable.containers.get(r);if(!o||n!==o.key)return t;const i=new fr(t.droppable.containers);return i.set(r,{...o,disabled:a}),{...t,droppable:{...t.droppable,containers:i}}}case Ps.UnregisterDroppable:{const{id:r,key:n}=s,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const o=new fr(t.droppable.containers);return o.delete(r),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function Dx(t){let{disabled:s}=t;const{active:r,activatorEvent:n,draggableNodes:a}=l.useContext(Er),o=Jr(n),i=Jr(r==null?void 0:r.id);return l.useEffect(()=>{if(!s&&!n&&o&&i!=null){if(!gn(o)||document.activeElement===o.target)return;const c=a.get(i);if(!c)return;const{activatorNode:d,node:u}=c;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const m of[d.current,u.current]){if(!m)continue;const h=Pf(m);if(h){h.focus();break}}})}},[n,s,a,i,o]),null}function Wc(t,s){let{transform:r,...n}=s;return t!=null&&t.length?t.reduce((a,o)=>o({transform:a,...n}),r):r}function Ax(t){return l.useMemo(()=>({draggable:{...Or.draggable,...t==null?void 0:t.draggable},droppable:{...Or.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Or.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Mx(t){let{activeNode:s,measure:r,initialRect:n,config:a=!0}=t;const o=l.useRef(!1),{x:i,y:c}=typeof a=="boolean"?{x:a,y:a}:a;mt(()=>{if(!i&&!c||!s){o.current=!1;return}if(o.current||!n)return;const u=s==null?void 0:s.node.current;if(!u||u.isConnected===!1)return;const m=r(u),h=Tc(m,n);if(i||(h.x=0),c||(h.y=0),o.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const v=Pc(u);v&&v.scrollBy({top:h.y,left:h.x})}},[s,i,c,n,r])}const Nn=l.createContext({...ht,scaleX:1,scaleY:1});var $t;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})($t||($t={}));const qc=l.memo(function(s){var r,n,a,o;let{id:i,accessibility:c,autoScroll:d=!0,children:u,sensors:m=Tx,collisionDetection:h=Vf,measuring:v,modifiers:j,...b}=s;const g=l.useReducer(Fx,void 0,Rx),[x,N]=g,[p,k]=Lf(),[T,P]=l.useState($t.Uninitialized),F=T===$t.Initialized,{draggable:{active:L,nodes:E,translate:R},droppable:{containers:A}}=x,U=L!=null?E.get(L):null,se=l.useRef({initial:null,translated:null}),K=l.useMemo(()=>{var te;return L!=null?{id:L,data:(te=U==null?void 0:U.data)!=null?te:Ex,rect:se}:null},[L,U]),B=l.useRef(null),[Z,ae]=l.useState(null),[O,_]=l.useState(null),S=vr(b,Object.values(b)),y=Tr("DndDescribedBy",i),f=l.useMemo(()=>A.getEnabled(),[A]),w=Ax(v),{droppableRects:C,measureDroppableContainers:$,measuringScheduled:W}=jx(f,{dragging:F,dependencies:[R.x,R.y],config:w.droppable}),q=px(E,L),re=l.useMemo(()=>O?Xr(O):null,[O]),M=ft(),le=yx(q,w.draggable.measure);Mx({activeNode:L!=null?E.get(L):null,config:M.layoutShiftCompensation,initialRect:le,measure:w.draggable.measure});const ne=eo(q,w.draggable.measure,le),ie=eo(q?q.parentElement:null),ue=l.useRef({activatorEvent:null,active:null,activeNode:q,collisionRect:null,collisions:null,droppableRects:C,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),je=A.getNodeFor((r=ue.current.over)==null?void 0:r.id),be=$x({measure:w.dragOverlay.measure}),Se=(n=be.nodeRef.current)!=null?n:q,Ie=F?(a=be.rect)!=null?a:ne:null,ds=!!(be.nodeRef.current&&be.rect),Q=Nx(ds?null:ne),D=Oc(Se?Xs(Se):null),de=bx(F?je??q:null),xe=kx(de),J=Wc(j,{transform:{x:R.x-Q.x,y:R.y-Q.y,scaleX:1,scaleY:1},activatorEvent:O,active:K,activeNodeRect:ne,containerNodeRect:ie,draggingNodeRect:Ie,over:ue.current.over,overlayNodeRect:be.rect,scrollableAncestors:de,scrollableAncestorRects:xe,windowRect:D}),he=re?Xt(re,R):null,pe=_x(de),_e=to(pe),ye=to(pe,[ne]),ve=Xt(J,_e),we=Ie?Yf(Ie,J):null,ws=K&&we?h({active:K,collisionRect:we,droppableRects:C,droppableContainers:f,pointerCoordinates:he}):null,Te=kc(ws,"id"),[ze,ks]=l.useState(null),ss=ds?J:Xt(J,ye),De=Hf(ss,(o=ze==null?void 0:ze.rect)!=null?o:null,ne),Ee=l.useRef(null),Qe=l.useCallback((te,He)=>{let{sensor:Ue,options:Ze}=He;if(B.current==null)return;const Xe=E.get(B.current);if(!Xe)return;const me=te.nativeEvent,Pe=new Ue({active:B.current,activeNode:Xe,event:me,options:Ze,context:ue,onAbort(Oe){if(!E.get(Oe))return;const{onDragAbort:Os}=S.current,zs={id:Oe};Os==null||Os(zs),p({type:"onDragAbort",event:zs})},onPending(Oe,qs,Os,zs){if(!E.get(Oe))return;const{onDragPending:Dt}=S.current,xt={id:Oe,constraint:qs,initialCoordinates:Os,offset:zs};Dt==null||Dt(xt),p({type:"onDragPending",event:xt})},onStart(Oe){const qs=B.current;if(qs==null)return;const Os=E.get(qs);if(!Os)return;const{onDragStart:zs}=S.current,tt={activatorEvent:me,active:{id:qs,data:Os.data,rect:se}};Ot.unstable_batchedUpdates(()=>{zs==null||zs(tt),P($t.Initializing),N({type:Ps.DragStart,initialCoordinates:Oe,active:qs}),p({type:"onDragStart",event:tt}),ae(Ee.current),_(me)})},onMove(Oe){N({type:Ps.DragMove,coordinates:Oe})},onEnd:ts(Ps.DragEnd),onCancel:ts(Ps.DragCancel)});Ee.current=Pe;function ts(Oe){return async function(){const{active:Os,collisions:zs,over:tt,scrollAdjustedTranslate:Dt}=ue.current;let xt=null;if(Os&&Dt){const{cancelDrop:Rs}=S.current;xt={activatorEvent:me,active:Os,collisions:zs,delta:Dt,over:tt},Oe===Ps.DragEnd&&typeof Rs=="function"&&await Promise.resolve(Rs(xt))&&(Oe=Ps.DragCancel)}B.current=null,Ot.unstable_batchedUpdates(()=>{N({type:Oe}),P($t.Uninitialized),ks(null),ae(null),_(null),Ee.current=null;const Rs=Oe===Ps.DragEnd?"onDragEnd":"onDragCancel";if(xt){const I=S.current[Rs];I==null||I(xt),p({type:Rs,event:xt})}})}}},[E]),ys=l.useCallback((te,He)=>(Ue,Ze)=>{const Xe=Ue.nativeEvent,me=E.get(Ze);if(B.current!==null||!me||Xe.dndKit||Xe.defaultPrevented)return;const Pe={active:me};te(Ue,He.options,Pe)===!0&&(Xe.dndKit={capturedBy:He.sensor},B.current=Ze,Qe(Ue,He))},[E,Qe]),Ks=gx(m,ys);Sx(m),mt(()=>{ne&&T===$t.Initializing&&P($t.Initialized)},[ne,T]),l.useEffect(()=>{const{onDragMove:te}=S.current,{active:He,activatorEvent:Ue,collisions:Ze,over:Xe}=ue.current;if(!He||!Ue)return;const me={active:He,activatorEvent:Ue,collisions:Ze,delta:{x:ve.x,y:ve.y},over:Xe};Ot.unstable_batchedUpdates(()=>{te==null||te(me),p({type:"onDragMove",event:me})})},[ve.x,ve.y]),l.useEffect(()=>{const{active:te,activatorEvent:He,collisions:Ue,droppableContainers:Ze,scrollAdjustedTranslate:Xe}=ue.current;if(!te||B.current==null||!He||!Xe)return;const{onDragOver:me}=S.current,Pe=Ze.get(Te),ts=Pe&&Pe.rect.current?{id:Pe.id,rect:Pe.rect.current,data:Pe.data,disabled:Pe.disabled}:null,Oe={active:te,activatorEvent:He,collisions:Ue,delta:{x:Xe.x,y:Xe.y},over:ts};Ot.unstable_batchedUpdates(()=>{ks(ts),me==null||me(Oe),p({type:"onDragOver",event:Oe})})},[Te]),mt(()=>{ue.current={activatorEvent:O,active:K,activeNode:q,collisionRect:we,collisions:ws,droppableRects:C,draggableNodes:E,draggingNode:Se,draggingNodeRect:Ie,droppableContainers:A,over:ze,scrollableAncestors:de,scrollAdjustedTranslate:ve},se.current={initial:Ie,translated:we}},[K,q,ws,we,E,Se,Ie,C,A,ze,de,ve]),hx({...M,delta:R,draggingRect:we,pointerCoordinates:he,scrollableAncestors:de,scrollableAncestorRects:xe});const Ws=l.useMemo(()=>({active:K,activeNode:q,activeNodeRect:ne,activatorEvent:O,collisions:ws,containerNodeRect:ie,dragOverlay:be,draggableNodes:E,droppableContainers:A,droppableRects:C,over:ze,measureDroppableContainers:$,scrollableAncestors:de,scrollableAncestorRects:xe,measuringConfiguration:w,measuringScheduled:W,windowRect:D}),[K,q,ne,O,ws,ie,be,E,A,C,ze,$,de,xe,w,W,D]),$s=l.useMemo(()=>({activatorEvent:O,activators:Ks,active:K,activeNodeRect:ne,ariaDescribedById:{draggable:y},dispatch:N,draggableNodes:E,over:ze,measureDroppableContainers:$}),[O,Ks,K,ne,N,y,E,ze,$]);return is.createElement(bc.Provider,{value:k},is.createElement(Er.Provider,{value:$s},is.createElement(Uc.Provider,{value:Ws},is.createElement(Nn.Provider,{value:De},u)),is.createElement(Dx,{disabled:(c==null?void 0:c.restoreFocus)===!1})),is.createElement(zf,{...c,hiddenTextDescribedById:y}));function ft(){const te=(Z==null?void 0:Z.autoScrollEnabled)===!1,He=typeof d=="object"?d.enabled===!1:d===!1,Ue=F&&!te&&!He;return typeof d=="object"?{...d,enabled:Ue}:{enabled:Ue}}}),Lx=l.createContext(null),no="button",Ix="Draggable";function Ox(t){let{id:s,data:r,disabled:n=!1,attributes:a}=t;const o=Tr(Ix),{activators:i,activatorEvent:c,active:d,activeNodeRect:u,ariaDescribedById:m,draggableNodes:h,over:v}=l.useContext(Er),{role:j=no,roleDescription:b="draggable",tabIndex:g=0}=a??{},x=(d==null?void 0:d.id)===s,N=l.useContext(x?Nn:Lx),[p,k]=Yr(),[T,P]=Yr(),F=Cx(i,s),L=vr(r);mt(()=>(h.set(s,{id:s,key:o,node:p,activatorNode:T,data:L}),()=>{const R=h.get(s);R&&R.key===o&&h.delete(s)}),[h,s]);const E=l.useMemo(()=>({role:j,tabIndex:g,"aria-disabled":n,"aria-pressed":x&&j===no?!0:void 0,"aria-roledescription":b,"aria-describedby":m.draggable}),[n,j,g,x,b,m.draggable]);return{active:d,activatorEvent:c,activeNodeRect:u,attributes:E,isDragging:x,listeners:n?void 0:F,node:p,over:v,setNodeRef:k,setActivatorNodeRef:P,transform:N}}function Vc(){return l.useContext(Uc)}const zx="Droppable",Bx={timeout:25};function Ux(t){let{data:s,disabled:r=!1,id:n,resizeObserverConfig:a}=t;const o=Tr(zx),{active:i,dispatch:c,over:d,measureDroppableContainers:u}=l.useContext(Er),m=l.useRef({disabled:r}),h=l.useRef(!1),v=l.useRef(null),j=l.useRef(null),{disabled:b,updateMeasurementsFor:g,timeout:x}={...Bx,...a},N=vr(g??n),p=l.useCallback(()=>{if(!h.current){h.current=!0;return}j.current!=null&&clearTimeout(j.current),j.current=setTimeout(()=>{u(Array.isArray(N.current)?N.current:[N.current]),j.current=null},x)},[x]),k=wn({callback:p,disabled:b||!i}),T=l.useCallback((E,R)=>{k&&(R&&(k.unobserve(R),h.current=!1),E&&k.observe(E))},[k]),[P,F]=Yr(T),L=vr(s);return l.useEffect(()=>{!k||!P.current||(k.disconnect(),h.current=!1,k.observe(P.current))},[P,k]),l.useEffect(()=>(c({type:Ps.RegisterDroppable,element:{id:n,key:o,disabled:r,node:P,rect:v,data:L}}),()=>c({type:Ps.UnregisterDroppable,key:o,id:n})),[n]),l.useEffect(()=>{r!==m.current.disabled&&(c({type:Ps.SetDroppableDisabled,id:n,key:o,disabled:r}),m.current.disabled=r)},[n,o,r,c]),{active:i,rect:v,isOver:(d==null?void 0:d.id)===n,node:P,over:d,setNodeRef:F}}function Wx(t){let{animation:s,children:r}=t;const[n,a]=l.useState(null),[o,i]=l.useState(null),c=Jr(r);return!r&&!n&&c&&a(c),mt(()=>{if(!o)return;const d=n==null?void 0:n.key,u=n==null?void 0:n.props.id;if(d==null||u==null){a(null);return}Promise.resolve(s(u,o)).then(()=>{a(null)})},[s,n,o]),is.createElement(is.Fragment,null,r,n?l.cloneElement(n,{ref:i}):null)}const qx={x:0,y:0,scaleX:1,scaleY:1};function Vx(t){let{children:s}=t;return is.createElement(Er.Provider,{value:Bc},is.createElement(Nn.Provider,{value:qx},s))}const Hx={position:"fixed",touchAction:"none"},Gx=t=>gn(t)?"transform 250ms ease":void 0,Yx=l.forwardRef((t,s)=>{let{as:r,activatorEvent:n,adjustScale:a,children:o,className:i,rect:c,style:d,transform:u,transition:m=Gx}=t;if(!c)return null;const h=a?u:{...u,scaleX:1,scaleY:1},v={...Hx,width:c.width,height:c.height,top:c.top,left:c.left,transform:bt.Transform.toString(h),transformOrigin:a&&n?Bf(n,c):void 0,transition:typeof m=="function"?m(n):m,...d};return is.createElement(r,{className:i,style:v,ref:s},o)}),Jx=t=>s=>{let{active:r,dragOverlay:n}=s;const a={},{styles:o,className:i}=t;if(o!=null&&o.active)for(const[c,d]of Object.entries(o.active))d!==void 0&&(a[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,d));if(o!=null&&o.dragOverlay)for(const[c,d]of Object.entries(o.dragOverlay))d!==void 0&&n.node.style.setProperty(c,d);return i!=null&&i.active&&r.node.classList.add(i.active),i!=null&&i.dragOverlay&&n.node.classList.add(i.dragOverlay),function(){for(const[d,u]of Object.entries(a))r.node.style.setProperty(d,u);i!=null&&i.active&&r.node.classList.remove(i.active)}},Xx=t=>{let{transform:{initial:s,final:r}}=t;return[{transform:bt.Transform.toString(s)},{transform:bt.Transform.toString(r)}]},Kx={duration:250,easing:"ease",keyframes:Xx,sideEffects:Jx({styles:{active:{opacity:"0"}}})};function Qx(t){let{config:s,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=t;return pn((o,i)=>{if(s===null)return;const c=r.get(o);if(!c)return;const d=c.node.current;if(!d)return;const u=zc(i);if(!u)return;const{transform:m}=Xs(i).getComputedStyle(i),h=Ec(m);if(!h)return;const v=typeof s=="function"?s:Zx(s);return Lc(d,a.draggable.measure),v({active:{id:o,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:i,rect:a.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:a,transform:h})})}function Zx(t){const{duration:s,easing:r,sideEffects:n,keyframes:a}={...Kx,...t};return o=>{let{active:i,dragOverlay:c,transform:d,...u}=o;if(!s)return;const m={x:c.rect.left-i.rect.left,y:c.rect.top-i.rect.top},h={scaleX:d.scaleX!==1?i.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?i.rect.height*d.scaleY/c.rect.height:1},v={x:d.x-m.x,y:d.y-m.y,...h},j=a({...u,active:i,dragOverlay:c,transform:{initial:d,final:v}}),[b]=j,g=j[j.length-1];if(JSON.stringify(b)===JSON.stringify(g))return;const x=n==null?void 0:n({active:i,dragOverlay:c,...u}),N=c.node.animate(j,{duration:s,easing:r,fill:"forwards"});return new Promise(p=>{N.onfinish=()=>{x==null||x(),p()}})}}let ao=0;function ep(t){return l.useMemo(()=>{if(t!=null)return ao++,ao},[t])}const Hc=is.memo(t=>{let{adjustScale:s=!1,children:r,dropAnimation:n,style:a,transition:o,modifiers:i,wrapperElement:c="div",className:d,zIndex:u=999}=t;const{activatorEvent:m,active:h,activeNodeRect:v,containerNodeRect:j,draggableNodes:b,droppableContainers:g,dragOverlay:x,over:N,measuringConfiguration:p,scrollableAncestors:k,scrollableAncestorRects:T,windowRect:P}=Vc(),F=l.useContext(Nn),L=ep(h==null?void 0:h.id),E=Wc(i,{activatorEvent:m,active:h,activeNodeRect:v,containerNodeRect:j,draggingNodeRect:x.rect,over:N,overlayNodeRect:x.rect,scrollableAncestors:k,scrollableAncestorRects:T,transform:F,windowRect:P}),R=ka(v),A=Qx({config:n,draggableNodes:b,droppableContainers:g,measuringConfiguration:p}),U=R?x.setRef:void 0;return is.createElement(Vx,null,is.createElement(Wx,{animation:A},h&&L?is.createElement(Yx,{key:L,id:h.id,ref:U,as:c,activatorEvent:m,adjustScale:s,className:d,transition:o,rect:R,style:{zIndex:u,...a},transform:E},r):null))});function Gc(t,s,r){const n=t.slice();return n.splice(r<0?n.length+r:r,0,n.splice(s,1)[0]),n}function sp(t,s){return t.reduce((r,n,a)=>{const o=s.get(n);return o&&(r[a]=o),r},Array(t.length))}function Dr(t){return t!==null&&t>=0}function tp(t,s){if(t===s)return!0;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==s[r])return!1;return!0}function rp(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const bn=t=>{let{rects:s,activeIndex:r,overIndex:n,index:a}=t;const o=Gc(s,n,r),i=s[a],c=o[a];return!c||!i?null:{x:c.left-i.left,y:c.top-i.top,scaleX:c.width/i.width,scaleY:c.height/i.height}},Yc="Sortable",Jc=is.createContext({activeIndex:-1,containerId:Yc,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:bn,disabled:{draggable:!1,droppable:!1}});function Xc(t){let{children:s,id:r,items:n,strategy:a=bn,disabled:o=!1}=t;const{active:i,dragOverlay:c,droppableRects:d,over:u,measureDroppableContainers:m}=Vc(),h=Tr(Yc,r),v=c.rect!==null,j=l.useMemo(()=>n.map(F=>typeof F=="object"&&"id"in F?F.id:F),[n]),b=i!=null,g=i?j.indexOf(i.id):-1,x=u?j.indexOf(u.id):-1,N=l.useRef(j),p=!tp(j,N.current),k=x!==-1&&g===-1||p,T=rp(o);mt(()=>{p&&b&&m(j)},[p,j,b,m]),l.useEffect(()=>{N.current=j},[j]);const P=l.useMemo(()=>({activeIndex:g,containerId:h,disabled:T,disableTransforms:k,items:j,overIndex:x,useDragOverlay:v,sortedRects:sp(j,d),strategy:a}),[g,h,T.draggable,T.droppable,k,j,x,d,v,a]);return is.createElement(Jc.Provider,{value:P},s)}const np=t=>{let{id:s,items:r,activeIndex:n,overIndex:a}=t;return Gc(r,n,a).indexOf(s)},ap=t=>{let{containerId:s,isSorting:r,wasDragging:n,index:a,items:o,newIndex:i,previousItems:c,previousContainerId:d,transition:u}=t;return!u||!n||c!==o&&a===i?!1:r?!0:i!==a&&s===d},op={duration:200,easing:"ease"},Kc="transform",ip=bt.Transition.toString({property:Kc,duration:0,easing:"linear"}),cp={roleDescription:"sortable"};function lp(t){let{disabled:s,index:r,node:n,rect:a}=t;const[o,i]=l.useState(null),c=l.useRef(r);return mt(()=>{if(!s&&r!==c.current&&n.current){const d=a.current;if(d){const u=ar(n.current,{ignoreTransform:!0}),m={x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height};(m.x||m.y)&&i(m)}}r!==c.current&&(c.current=r)},[s,r,n,a]),l.useEffect(()=>{o&&i(null)},[o]),o}function Qc(t){let{animateLayoutChanges:s=ap,attributes:r,disabled:n,data:a,getNewIndex:o=np,id:i,strategy:c,resizeObserverConfig:d,transition:u=op}=t;const{items:m,containerId:h,activeIndex:v,disabled:j,disableTransforms:b,sortedRects:g,overIndex:x,useDragOverlay:N,strategy:p}=l.useContext(Jc),k=dp(n,j),T=m.indexOf(i),P=l.useMemo(()=>({sortable:{containerId:h,index:T,items:m},...a}),[h,a,T,m]),F=l.useMemo(()=>m.slice(m.indexOf(i)),[m,i]),{rect:L,node:E,isOver:R,setNodeRef:A}=Ux({id:i,data:P,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:F,...d}}),{active:U,activatorEvent:se,activeNodeRect:K,attributes:B,setNodeRef:Z,listeners:ae,isDragging:O,over:_,setActivatorNodeRef:S,transform:y}=Ox({id:i,data:P,attributes:{...cp,...r},disabled:k.draggable}),f=kf(A,Z),w=!!U,C=w&&!b&&Dr(v)&&Dr(x),$=!N&&O,W=$&&C?y:null,re=C?W??(c??p)({rects:g,activeNodeRect:K,activeIndex:v,overIndex:x,index:T}):null,M=Dr(v)&&Dr(x)?o({id:i,items:m,activeIndex:v,overIndex:x}):T,le=U==null?void 0:U.id,ne=l.useRef({activeId:le,items:m,newIndex:M,containerId:h}),ie=m!==ne.current.items,ue=s({active:U,containerId:h,isDragging:O,isSorting:w,id:i,index:T,items:m,newIndex:ne.current.newIndex,previousItems:ne.current.items,previousContainerId:ne.current.containerId,transition:u,wasDragging:ne.current.activeId!=null}),je=lp({disabled:!ue,index:T,node:E,rect:L});return l.useEffect(()=>{w&&ne.current.newIndex!==M&&(ne.current.newIndex=M),h!==ne.current.containerId&&(ne.current.containerId=h),m!==ne.current.items&&(ne.current.items=m)},[w,M,h,m]),l.useEffect(()=>{if(le===ne.current.activeId)return;if(le!=null&&ne.current.activeId==null){ne.current.activeId=le;return}const Se=setTimeout(()=>{ne.current.activeId=le},50);return()=>clearTimeout(Se)},[le]),{active:U,activeIndex:v,attributes:B,data:P,rect:L,index:T,newIndex:M,items:m,isOver:R,isSorting:w,isDragging:O,listeners:ae,node:E,overIndex:x,over:_,setNodeRef:f,setActivatorNodeRef:S,setDroppableNodeRef:A,setDraggableNodeRef:Z,transform:je??re,transition:be()};function be(){if(je||ie&&ne.current.newIndex===T)return ip;if(!($&&!gn(se)||!u)&&(w||ue))return bt.Transition.toString({...u,property:Kc})}}function dp(t,s){var r,n;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(r=t==null?void 0:t.draggable)!=null?r:s.draggable,droppable:(n=t==null?void 0:t.droppable)!=null?n:s.droppable}}function en(t){if(!t)return!1;const s=t.data.current;return!!(s&&"sortable"in s&&typeof s.sortable=="object"&&"containerId"in s.sortable&&"items"in s.sortable&&"index"in s.sortable)}const up=[We.Down,We.Right,We.Up,We.Left],Zc=(t,s)=>{let{context:{active:r,collisionRect:n,droppableRects:a,droppableContainers:o,over:i,scrollableAncestors:c}}=s;if(up.includes(t.code)){if(t.preventDefault(),!r||!n)return;const d=[];o.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const v=a.get(h.id);if(v)switch(t.code){case We.Down:n.top<v.top&&d.push(h);break;case We.Up:n.top>v.top&&d.push(h);break;case We.Left:n.left>v.left&&d.push(h);break;case We.Right:n.left<v.left&&d.push(h);break}});const u=Wf({collisionRect:n,droppableRects:a,droppableContainers:d});let m=kc(u,"id");if(m===(i==null?void 0:i.id)&&u.length>1&&(m=u[1].id),m!=null){const h=o.get(r.id),v=o.get(m),j=v?a.get(v.id):null,b=v==null?void 0:v.node.current;if(b&&j&&h&&v){const x=jn(b).some((F,L)=>c[L]!==F),N=el(h,v),p=mp(h,v),k=x||!N?{x:0,y:0}:{x:p?n.width-j.width:0,y:p?n.height-j.height:0},T={x:j.left,y:j.top};return k.x&&k.y?T:wr(T,k)}}}};function el(t,s){return!en(t)||!en(s)?!1:t.data.current.sortable.containerId===s.data.current.sortable.containerId}function mp(t,s){return!en(t)||!en(s)||!el(t,s)?!1:t.data.current.sortable.index<s.data.current.sortable.index}const oo=({team:t,matchupId:s,teamPosition:r,isWinner:n,allTeams:a,onTeamChange:o})=>{var T;const[i,c]=l.useState(!1),[d,u]=l.useState(((T=t==null?void 0:t.id)==null?void 0:T.toString())||"");l.useEffect(()=>{var P;u(((P=t==null?void 0:t.id)==null?void 0:P.toString())||"")},[t==null?void 0:t.id]);const m=()=>{const P=parseInt(d);P&&P!==(t==null?void 0:t.id)&&o(s,r,P),c(!1)},h=()=>{var P;u(((P=t==null?void 0:t.id)==null?void 0:P.toString())||""),c(!1)},v=`${s}-${r}`,{attributes:j,listeners:b,setNodeRef:g,transform:x,transition:N,isDragging:p}=Qc({id:v,data:{type:"team",team:t,matchupId:s,teamPosition:r}}),k={transform:bt.Transform.toString(x),transition:N,opacity:p?.5:1};return i?e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded border border-blue-200 bg-blue-50",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(cs,{value:d,onValueChange:u,children:[e.jsx(ns,{className:"h-8 text-xs",children:e.jsx(ls,{placeholder:"Select team..."})}),e.jsx(as,{children:a.map(P=>e.jsx(Re,{value:P.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[P.team_logo_url&&e.jsx("img",{src:P.team_logo_url,alt:P.team_name,className:"w-4 h-4 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium",children:P.team_name}),e.jsx("div",{className:"text-xs text-gray-500",children:P.owner_name})]})]})},P.id))})]})}),e.jsx(X,{size:"sm",onClick:m,className:"h-6 w-6 p-0",children:e.jsx(sr,{className:"h-3 w-3"})}),e.jsx(X,{size:"sm",variant:"ghost",onClick:h,className:"h-6 w-6 p-0",children:e.jsx(Wt,{className:"h-3 w-3"})})]}):e.jsxs("div",{ref:g,style:k,className:`flex items-center gap-2 p-2 rounded transition-colors group
        ${p?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}
        ${n?"bg-green-50 border border-green-200":""}
      `,children:[e.jsx("div",{...j,...b,className:"cursor-grab hover:cursor-grabbing",children:e.jsx(ei,{className:"h-3 w-3 text-gray-400"})}),(t==null?void 0:t.team_logo_url)&&e.jsx("img",{src:t.team_logo_url,alt:t.team_name,className:"w-5 h-5 rounded-full"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium truncate",children:(t==null?void 0:t.team_name)||`Team ${r==="team1"?"1":"2"}`}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:t==null?void 0:t.owner_name})]}),e.jsx(X,{size:"sm",variant:"ghost",onClick:()=>c(!0),className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ut,{className:"h-3 w-3"})})]})},hp=({matchup:t,teams:s,allTeams:r,conferences:n,onToggleOverride:a,onUpdateScores:o,onTeamChange:i})=>{const c=s.find(k=>k.id===t.team1_id),d=s.find(k=>k.id===t.team2_id);n.find(k=>k.id===t.conference_id);const[u,m]=l.useState(!1),[h,v]=l.useState(t.team1_score),[j,b]=l.useState(t.team2_score);l.useEffect(()=>{v(t.team1_score),b(t.team2_score)},[t.team1_score,t.team2_score]);const g=t.winning_team_id===t.team1_id,x=t.winning_team_id===t.team2_id,N=()=>{o(t.id,h,j),m(!1)},p=()=>{v(t.team1_score),b(t.team2_score),m(!1)};return e.jsxs($e,{className:`transition-colors ${t.manual_override?"bg-orange-50 border-orange-200":""}`,children:[e.jsx(z,{className:"w-24",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["#",t.id]}),e.jsx("div",{className:"flex flex-col gap-1",children:t.manual_override&&e.jsx(ee,{variant:"outline",className:"text-xs text-orange-600 border-orange-300 px-1 py-0",children:"Override"})})]})}),e.jsx(z,{className:"w-48",children:e.jsx(oo,{team:c,matchupId:t.id,teamPosition:"team1",isWinner:g,allTeams:r,onTeamChange:i})}),e.jsx(z,{className:"w-32 text-center",children:u?e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(Cs,{type:"number",value:h,onChange:k=>v(parseFloat(k.target.value)||0),className:"w-12 h-6 text-xs text-center px-1",step:"0.1"}),e.jsx("span",{className:"text-xs text-gray-400",children:"-"}),e.jsx(Cs,{type:"number",value:j,onChange:k=>b(parseFloat(k.target.value)||0),className:"w-12 h-6 text-xs text-center px-1",step:"0.1"}),e.jsx(X,{size:"sm",onClick:N,className:"h-6 w-6 p-0",children:e.jsx(sr,{className:"h-3 w-3"})}),e.jsx(X,{size:"sm",variant:"ghost",onClick:p,className:"h-6 w-6 p-0",children:e.jsx(Wt,{className:"h-3 w-3"})})]}):e.jsxs("div",{className:"flex items-center gap-1 justify-center cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",onClick:()=>m(!0),children:[e.jsx("span",{className:`text-sm font-bold ${g?"text-green-600":""}`,children:t.team1_score}),e.jsx("span",{className:"text-xs text-gray-400",children:"-"}),e.jsx("span",{className:`text-sm font-bold ${x?"text-green-600":""}`,children:t.team2_score}),e.jsx(Ut,{className:"h-3 w-3 text-gray-400 ml-1"})]})}),e.jsx(z,{className:"w-48",children:e.jsx(oo,{team:d,matchupId:t.id,teamPosition:"team2",isWinner:x,allTeams:r,onTeamChange:i})}),e.jsx(z,{className:"w-24",children:e.jsx("div",{className:"text-xs text-gray-500 text-center",children:t.matchup_status})}),e.jsx(z,{className:"w-24 text-center",children:e.jsx(X,{variant:"ghost",size:"sm",onClick:()=>a(t.id),className:"h-6 px-2 text-xs",children:e.jsx(Ut,{className:"h-3 w-3"})})})]})},fp=()=>{const[t,s]=l.useState([]),[r,n]=l.useState([]),[a,o]=l.useState([]),[i,c]=l.useState([]),[d,u]=l.useState(""),[m,h]=l.useState(""),[v,j]=l.useState(!1),[b,g]=l.useState(!1),[x,N]=l.useState(!1),[p,k]=l.useState(null),{toast:T}=Is(),P=_c(Qr(vn),Qr(yn,{coordinateGetter:Zc})),F=async(y,f,w,C)=>{var $,W;try{console.log(`Fetching Sleeper scores for teams ${y} and ${f} for week ${C}`),console.log(`Note: Matchup conference_id ${w} will be ignored - checking each team's actual conference`);const[q,re]=await Promise.all([H.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:y}]}),H.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:f}]})]),M=($=q.data)==null?void 0:$[0],le=(W=re.data)==null?void 0:W[0];if(!M||!le)return console.warn(`Missing junction data - Team ${y}: ${M?"found":"missing"}, Team ${f}: ${le?"found":"missing"}`),{team1Score:0,team2Score:0};console.log(`Team ${y} junction:`,{conference_id:M.conference_id,roster_id:M.roster_id}),console.log(`Team ${f} junction:`,{conference_id:le.conference_id,roster_id:le.roster_id});const ne=r.find(be=>be.id===M.conference_id),ie=r.find(be=>be.id===le.conference_id);if(!ne||!ie)return console.warn(`Missing conference data - Team ${y} conference: ${ne?"found":"missing"}, Team ${f} conference: ${ie?"found":"missing"}`),{team1Score:0,team2Score:0};console.log(`Team ${y} in conference "${ne.conference_name}" (league_id: ${ne.league_id})`),console.log(`Team ${f} in conference "${ie.conference_name}" (league_id: ${ie.league_id})`);let ue=0,je=0;try{console.log(`Fetching Team ${y} score from league ${ne.league_id}, week ${C}`);const Se=(await ke.fetchMatchups(ne.league_id,C)).find(Ie=>Ie.roster_id===M.roster_id);ue=(Se==null?void 0:Se.points)||0,console.log(`Team ${y} score from Sleeper: ${ue} (roster_id: ${M.roster_id})`)}catch(be){console.error(`Error fetching Team ${y} score from league ${ne.league_id}:`,be)}try{console.log(`Fetching Team ${f} score from league ${ie.league_id}, week ${C}`);const Se=(await ke.fetchMatchups(ie.league_id,C)).find(Ie=>Ie.roster_id===le.roster_id);je=(Se==null?void 0:Se.points)||0,console.log(`Team ${f} score from Sleeper: ${je} (roster_id: ${le.roster_id})`)}catch(be){console.error(`Error fetching Team ${f} score from league ${ie.league_id}:`,be)}return console.log(` Final scores - Team ${y}: ${ue}, Team ${f}: ${je}`),console.log(" This properly handles interconference matchups by checking each team's actual conference"),{team1Score:ue,team2Score:je}}catch(q){return console.error("Error fetching Sleeper scores:",q),{team1Score:0,team2Score:0}}};l.useEffect(()=>{E(),A(),L()},[]),l.useEffect(()=>{d&&R()},[d]),l.useEffect(()=>{d&&m&&r.length>0&&U()},[d,m,r]);const L=async()=>{try{const y=await ke.getCurrentNFLWeek();console.log(`Setting current week to: ${y}`),y<=12?h(y.toString()):h("1")}catch(y){console.error("Error loading current week:",y),h("1")}},E=async()=>{try{const y=await H.getSeasons({limit:100,orderBy:{column:"season_year",ascending:!1}});if(y.error)throw new Error(y.error);const w=(y.data||[]).map($=>({id:$.id,season_year:parseInt($.season_year),season_name:$.season_name,is_current_season:$.is_current}));s(w);const C=w.find($=>$.is_current_season);C&&u(C.id.toString())}catch(y){console.error("Error loading seasons:",y),T({title:"Error",description:"Failed to load seasons",variant:"destructive"})}},R=async()=>{try{const{data:y,error:f}=await H.getConferences({filters:[{column:"season_id",operator:"eq",value:parseInt(d)}]});if(f)throw new Error(f);n(y||[])}catch(y){console.error("Error loading conferences:",y),T({title:"Error",description:"Failed to load conferences",variant:"destructive"})}},A=async()=>{try{const y=await H.getTeams({limit:100,orderBy:{column:"team_name",ascending:!0}});if(y.error)throw new Error(y.error);const f=y.data||[],w=await H.getTeamConferenceJunctions({limit:1e3,orderBy:{column:"team_id",ascending:!0}});if(w.error)throw new Error(w.error);const C=w.data||[],$=f.map(W=>{const q=C.find(re=>re.team_id===W.id);return{id:W.id,team_name:W.team_name,owner_name:W.owner_name,team_logo_url:W.team_logourl||"",conference_id:(q==null?void 0:q.conference_id)||0}});o($)}catch(y){console.error("Error loading teams:",y),T({title:"Error",description:"Failed to load teams",variant:"destructive"})}},U=async()=>{j(!0),console.log(`Loading regular season matchups for season ${d}, week ${m}`),console.log("Available conferences:",r.map(y=>({id:y.id,name:y.conference_name})));try{const y=r.map(w=>w.id);console.log("Conference IDs to query:",y);const f=[];for(const w of y){console.log(`Fetching regular season matchups for conference ${w}`);const{data:C,error:$}=await H.getMatchups({filters:[{column:"conference_id",operator:"eq",value:w},{column:"week",operator:"eq",value:parseInt(m)},{column:"is_playoff",operator:"eq",value:!1}],orderBy:{column:"id",ascending:!0}});if($)throw console.error(`Error fetching matchups for conference ${w}:`,$),new Error($);const W=C||[];console.log(`Found ${W.length} regular season matchups for conference ${w}`);const q=r.find(M=>M.id===w),re=W.map(M=>(console.log(`Loaded regular season matchup ${M.id}:`,{teams:`${M.team1_id} vs ${M.team2_id}`,scores:`${M.team1_score} - ${M.team2_score}`,status:M.matchup_status,manual_override:M.manual_override}),{...M,conference_name:q==null?void 0:q.conference_name}));f.push(...re)}f.sort((w,C)=>w.conference_id!==C.conference_id?w.conference_id-C.conference_id:w.id-C.id),console.log(`Total regular season matchups loaded: ${f.length}`),console.log("Regular season matchups breakdown by status:",{pending:f.filter(w=>w.matchup_status==="pending").length,complete:f.filter(w=>w.matchup_status==="complete").length,manual_overrides:f.filter(w=>w.manual_override).length}),c(f)}catch(y){console.error("Error loading regular season matchups:",y),T({title:"Error",description:`Failed to load regular season matchups: ${y}`,variant:"destructive"})}finally{j(!1)}},se=y=>{k(y.active.id)},K=async y=>{const{active:f,over:w}=y;if(k(null),!w||f.id===w.id)return;const C=f.data.current,$=w.data.current;if((C==null?void 0:C.type)==="team"&&($==null?void 0:$.type)==="team"){const W=C.matchupId,q=C.teamPosition,re=$.matchupId,M=$.teamPosition;if(W===re&&q===M)return;const le=[...i],ne=le.find(be=>be.id===W),ie=le.find(be=>be.id===re);if(!ne||!ie)return;const ue=q==="team1"?ne.team1_id:ne.team2_id,je=M==="team1"?ie.team1_id:ie.team2_id;q==="team1"?ne.team1_id=je:ne.team2_id=je,M==="team1"?ie.team1_id=ue:ie.team2_id=ue;try{const be=await F(ne.team1_id,ne.team2_id,ne.conference_id,ne.week);console.log(` DRAG DEBUG - Active matchup ${ne.id}: Setting scores ${be.team1Score} vs ${be.team2Score}`),ne.team1_score=be.team1Score,ne.team2_score=be.team2Score,be.team1Score>be.team2Score?ne.winning_team_id=ne.team1_id:be.team2Score>be.team1Score?ne.winning_team_id=ne.team2_id:ne.winning_team_id=null,console.log(` DRAG WINNER - Active matchup ${ne.id}: Winner=${ne.winning_team_id}`);const Se=await F(ie.team1_id,ie.team2_id,ie.conference_id,ie.week);console.log(` DRAG DEBUG - Over matchup ${ie.id}: Setting scores ${Se.team1Score} vs ${Se.team2Score}`),ie.team1_score=Se.team1Score,ie.team2_score=Se.team2Score,Se.team1Score>Se.team2Score?ie.winning_team_id=ie.team1_id:Se.team2Score>Se.team1Score?ie.winning_team_id=ie.team2_id:ie.winning_team_id=null,console.log(` DRAG WINNER - Over matchup ${ie.id}: Winner=${ie.winning_team_id}`),console.log(`Fetched Sleeper scores - Active matchup: ${be.team1Score} vs ${be.team2Score}, Over matchup: ${Se.team1Score} vs ${Se.team2Score}`)}catch(be){console.warn("Failed to fetch Sleeper scores, using 0:",be),ne.team1_score=0,ne.team2_score=0,ne.winning_team_id=null,ie.team1_score=0,ie.team2_score=0,ie.winning_team_id=null}ne.winning_team_id=null,ne.manual_override=!0,ne.matchup_status="pending",ie.winning_team_id=null,ie.manual_override=!0,ie.matchup_status="pending",console.log(`Teams swapped between matchups ${W} and ${re}`),console.log(`Active matchup now has teams ${ne.team1_id} vs ${ne.team2_id}`),console.log(`Over matchup now has teams ${ie.team1_id} vs ${ie.team2_id}`),c(le),N(!0),T({title:"Teams Swapped",description:"Team matchups have been updated with current scores. Remember to save your changes.",duration:3e3})}},B=y=>{var f;console.log(`Toggling manual override for matchup ${y}`),c(w=>w.map(C=>{if(C.id===y){const $=!C.manual_override;return console.log(`Matchup ${y} manual override: ${C.manual_override} -> ${$}`),{...C,manual_override:$,status:$?C.matchup_status:"pending"}}return C})),N(!0),T({title:"Override Toggled",description:`Manual override ${(f=i.find(w=>w.id===y))!=null&&f.manual_override?"removed":"enabled"} for matchup ${y}`,duration:2e3})},Z=(y,f,w)=>{console.log(`Updating scores for matchup ${y}: Team 1 = ${f}, Team 2 = ${w}`),c(C=>C.map($=>{if($.id===y){let W=null;return f>w?W=$.team1_id:w>f&&(W=$.team2_id),console.log(` WINNER CALC - Matchup ${y}: Team1(${$.team1_id})=${f}, Team2(${$.team2_id})=${w}, Winner=${W}`),{...$,team1_score:f,team2_score:w,winning_team_id:W,manual_override:!0,matchup_status:"complete"}}return $})),N(!0),T({title:"Scores Updated",description:`Matchup ${y} scores updated. Remember to save changes.`,duration:2e3})},ae=async(y,f,w)=>{console.log(`Changing team for regular season matchup ${y}, position ${f} to team ${w}`),c(W=>W.map(q=>{if(q.id===y){const re={...q,manual_override:!0};return f==="team1"?re.team1_id=w:re.team2_id=w,console.log(`Updated regular season matchup ${y}: team1_id=${re.team1_id}, team2_id=${re.team2_id}`),re}return q}));const C=i.find(W=>W.id===y);if(C)try{const W=f==="team1"?w:C.team1_id,q=f==="team2"?w:C.team2_id;console.log(`Fetching regular season scores for updated matchup ${y}: team1=${W}, team2=${q}, week=${C.week}`);const{team1Score:re,team2Score:M}=await F(W,q,C.conference_id,C.week);c(le=>le.map(ne=>{if(ne.id===y){let ie=null;return re>M?ie=W:M>re&&(ie=q),console.log(` REGULAR SEASON TEAM CHANGE WINNER - Matchup ${y}: Team1(${W})=${re}, Team2(${q})=${M}, Winner=${ie}`),{...ne,team1_score:re,team2_score:M,winning_team_id:ie}}return ne})),console.log(` Updated regular season matchup ${y} with scores: ${re} - ${M}`)}catch(W){console.error(`Error fetching regular season scores for matchup ${y}:`,W),c(q=>q.map(re=>re.id===y?{...re,team1_score:0,team2_score:0,winning_team_id:null}:re))}N(!0);const $=a.find(W=>W.id===w);T({title:"Team Changed",description:`Regular season matchup ${y} ${f} changed to ${$==null?void 0:$.team_name}. Scores updated automatically. Remember to save changes.`,duration:3e3})},O=async()=>{var C;g(!0),console.log("Starting save operation for",i.length,"regular season matchups");let y=0,f=0;const w=[];try{for(const $ of i){if(console.log(`Updating regular season matchup ${$.id}:`,{conference_id:$.conference_id,week:$.week,team1_id:$.team1_id,team2_id:$.team2_id,team1_score:$.team1_score,team2_score:$.team2_score,winning_team_id:$.winning_team_id,manual_override:$.manual_override,status:$.manual_override?"complete":$.matchup_status}),!$.id||$.conference_id<=0||$.week<=0){console.error(`Invalid matchup data for ID ${$.id}:`,{id:$.id,conference_id:$.conference_id,week:$.week}),f++,w.push($.id);continue}let W=null;$.team1_score>$.team2_score?W=$.team1_id:$.team2_score>$.team1_score&&(W=$.team2_id),console.log(` SAVE WINNER - Matchup ${$.id}: Team1(${$.team1_id})=${$.team1_score}, Team2(${$.team2_id})=${$.team2_score}, Calculated Winner=${W}`);const q={conference_id:$.conference_id,week:((C=$.week)==null?void 0:C.toString())||"1",team1_id:$.team1_id||0,team2_id:$.team2_id||0,is_playoff:!1,team1_score:$.team1_score||0,team2_score:$.team2_score||0,winning_team_id:W,manual_override:$.manual_override||!1,matchup_status:$.manual_override?"complete":$.matchup_status||"pending",notes:$.notes||""};console.log(`Sending update for regular season matchup ${$.id} with data:`,q);const re=await H.updateMatchup($.id,q);if(re.error){console.error(` Failed to update regular season matchup ${$.id}:`,re.error),console.error(" Update data was:",q),console.error(" Matchup object:",$),f++,w.push($.id);continue}else console.log(` Successfully updated regular season matchup ${$.id}`),console.log(" UPDATE RESULT:",re.data);console.log(`Successfully updated regular season matchup ${$.id}`),y++}console.log(`Save operation completed: ${y} successes, ${f} failures`),f>0?(console.error("Failed matchup IDs:",w),T({title:"Partial Success",description:`${y} regular season matchups updated successfully, ${f} failed. Check console for details.`,variant:"destructive"})):(N(!1),T({title:"Success",description:`All ${y} regular season matchups updated successfully`})),console.log("Reloading regular season matchups to verify changes persisted..."),await U()}catch($){console.error("Critical error during save operation:",$),T({title:"Error",description:`Failed to save regular season matchup changes: ${$}`,variant:"destructive"})}finally{g(!1),console.log("Save operation completed, saving state reset")}},_=()=>{U(),N(!1)},S=Array.from({length:12},(y,f)=>f+1);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(V,{children:e.jsxs(Y,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Season"}),e.jsxs(cs,{value:d,onValueChange:u,children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"Select season..."})}),e.jsx(as,{children:t.map(y=>e.jsxs(Re,{value:y.id.toString(),children:[y.season_name,y.is_current_season&&e.jsx(ee,{variant:"secondary",className:"ml-2",children:"Current"})]},y.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Week (Regular Season)"}),e.jsxs(cs,{value:m,onValueChange:h,disabled:!d,children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"Select week..."})}),e.jsx(as,{children:S.map(y=>e.jsxs(Re,{value:y.toString(),children:["Week ",y]},y))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("span",{children:[i.length," Total"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),e.jsxs("span",{children:[i.filter(y=>y.manual_override).length," Override"]})]})]})]}),e.jsx("div",{className:"space-y-2 flex items-end",children:x&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(X,{onClick:O,disabled:b,className:"flex items-center gap-2",children:[b?e.jsx(ms,{className:"h-4 w-4 animate-spin"}):e.jsx(ln,{className:"h-4 w-4"}),"Save"]}),e.jsxs(X,{variant:"outline",onClick:_,className:"flex items-center gap-2",children:[e.jsx(si,{className:"h-4 w-4"}),"Reset"]})]})})]}),x&&e.jsxs(qe,{className:"mb-4",children:[e.jsx(dn,{className:"h-4 w-4"}),e.jsx(Ve,{children:"You have unsaved changes. Remember to save your modifications."})]})]})}),v?e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading regular season matchups..."})]})})}):i.length===0&&m?e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(bs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Regular Season Matchups Found"}),e.jsx("p",{className:"text-gray-600",children:"No regular season matchups found for the selected week. They may need to be created first."})]})})}):i.length>0?e.jsx(V,{children:e.jsx(Y,{className:"p-0",children:e.jsxs(qc,{sensors:P,collisionDetection:$c,onDragStart:se,onDragEnd:K,children:[e.jsx(Xc,{items:i.flatMap(y=>[`${y.id}-team1`,`${y.id}-team2`]),strategy:bn,children:e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{className:"w-24",children:"Match"}),e.jsx(G,{className:"w-48",children:"Team 1"}),e.jsx(G,{className:"w-32 text-center",children:"Score"}),e.jsx(G,{className:"w-48",children:"Team 2"}),e.jsx(G,{className:"w-24 text-center",children:"Status"}),e.jsx(G,{className:"w-24 text-center",children:"Actions"})]})}),e.jsx(Ls,{children:r.map(y=>{const f=i.filter(w=>w.conference_id===y.id);return f.length===0?null:e.jsxs(is.Fragment,{children:[e.jsx($e,{children:e.jsx(z,{colSpan:6,className:"bg-gray-50 font-medium text-sm py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4 text-blue-600"}),y.conference_name,e.jsxs(ee,{variant:"secondary",className:"text-xs",children:[f.length," matchups"]})]})})}),f.map(w=>e.jsx(hp,{matchup:w,teams:a,allTeams:a,conferences:r,onToggleOverride:B,onUpdateScores:Z,onTeamChange:ae},w.id))]},y.id)})})]})}),e.jsx(Hc,{children:p?e.jsx("div",{className:"bg-white p-2 rounded-lg border-2 border-blue-400 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(bs,{className:"h-2 w-2 text-blue-600"})}),e.jsx("span",{className:"text-xs font-medium",children:"Moving team..."})]})}):null})]})})}):e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(bs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select Filters"}),e.jsx("p",{className:"text-gray-600",children:"Please select a season and week to manage regular season matchups across all conferences."})]})})})]})},io=({team:t,bracketId:s,teamPosition:r,isWinner:n,allTeams:a,onTeamChange:o})=>{var T;const[i,c]=l.useState(!1),[d,u]=l.useState(((T=t==null?void 0:t.id)==null?void 0:T.toString())||"");l.useEffect(()=>{var P;u(((P=t==null?void 0:t.id)==null?void 0:P.toString())||"")},[t==null?void 0:t.id]);const m=()=>{const P=parseInt(d);P&&P!==(t==null?void 0:t.id)&&o(s,r,P),c(!1)},h=()=>{var P;u(((P=t==null?void 0:t.id)==null?void 0:P.toString())||""),c(!1)},v=`${s}-${r}`,{attributes:j,listeners:b,setNodeRef:g,transform:x,transition:N,isDragging:p}=Qc({id:v,data:{type:"team",team:t,bracketId:s,teamPosition:r}}),k={transform:bt.Transform.toString(x),transition:N,opacity:p?.5:1};return i?e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded border border-blue-200 bg-blue-50",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(cs,{value:d,onValueChange:u,children:[e.jsx(ns,{className:"h-8 text-xs",children:e.jsx(ls,{placeholder:"Select team..."})}),e.jsx(as,{children:a.map(P=>e.jsx(Re,{value:P.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[P.team_logo_url&&e.jsx("img",{src:P.team_logo_url,alt:P.team_name,className:"w-4 h-4 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium",children:P.team_name}),e.jsx("div",{className:"text-xs text-gray-500",children:P.owner_name})]})]})},P.id))})]})}),e.jsx(X,{size:"sm",onClick:m,className:"h-6 w-6 p-0",children:e.jsx(sr,{className:"h-3 w-3"})}),e.jsx(X,{size:"sm",variant:"ghost",onClick:h,className:"h-6 w-6 p-0",children:e.jsx(Wt,{className:"h-3 w-3"})})]}):e.jsxs("div",{ref:g,style:k,className:`flex items-center gap-2 p-2 rounded transition-colors group
        ${p?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}
        ${n?"bg-green-50 border border-green-200":""}
      `,children:[e.jsx("div",{...j,...b,className:"cursor-grab hover:cursor-grabbing",children:e.jsx(ei,{className:"h-3 w-3 text-gray-400"})}),(t==null?void 0:t.team_logo_url)&&e.jsx("img",{src:t.team_logo_url,alt:t.team_name,className:"w-5 h-5 rounded-full"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium truncate",children:(t==null?void 0:t.team_name)||`Team ${r==="team1"?"1":"2"}`}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:t==null?void 0:t.owner_name})]}),e.jsx(X,{size:"sm",variant:"ghost",onClick:()=>c(!0),className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ut,{className:"h-3 w-3"})})]})},xp=({bracket:t,teams:s,allTeams:r,onToggleOverride:n,onUpdateScores:a,onUpdateTeams:o,onTeamChange:i})=>{const c=s.find(k=>k.id===t.team1_id),d=s.find(k=>k.id===t.team2_id),[u,m]=l.useState(!1),[h,v]=l.useState(t.team1_score||0),[j,b]=l.useState(t.team2_score||0);l.useEffect(()=>{v(t.team1_score||0),b(t.team2_score||0)},[t.team1_score,t.team2_score]);const g=t.winning_team_id===t.team1_id,x=t.winning_team_id===t.team2_id,N=()=>{a(t.id,h,j),m(!1)},p=()=>{v(t.team1_score||0),b(t.team2_score||0),m(!1)};return e.jsxs($e,{className:`transition-colors ${t.manual_override?"bg-orange-50 border-orange-200":""}`,children:[e.jsx(z,{className:"w-32",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:"text-sm font-medium",children:["#",t.id]}),e.jsx("div",{className:"text-xs text-gray-500",children:t.playoff_round_name||`Round ${t.round}`}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Week ",t.week]}),t.manual_override&&e.jsx(ee,{variant:"outline",className:"text-xs text-orange-600 border-orange-300 px-1 py-0",children:"Override"}),t.is_bye&&e.jsx(ee,{variant:"secondary",className:"text-xs px-1 py-0",children:"Bye"})]})}),e.jsx(z,{className:"w-48",children:e.jsx(io,{team:c,bracketId:t.id,teamPosition:"team1",isWinner:g,allTeams:r,onTeamChange:i})}),e.jsx(z,{className:"w-32 text-center",children:u?e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(Cs,{type:"number",value:h,onChange:k=>v(parseFloat(k.target.value)||0),className:"w-12 h-6 text-xs text-center px-1",step:"0.1"}),e.jsx("span",{className:"text-xs text-gray-400",children:"-"}),e.jsx(Cs,{type:"number",value:j,onChange:k=>b(parseFloat(k.target.value)||0),className:"w-12 h-6 text-xs text-center px-1",step:"0.1"}),e.jsx(X,{size:"sm",onClick:N,className:"h-6 w-6 p-0",children:e.jsx(sr,{className:"h-3 w-3"})}),e.jsx(X,{size:"sm",variant:"ghost",onClick:p,className:"h-6 w-6 p-0",children:e.jsx(Wt,{className:"h-3 w-3"})})]}):e.jsxs("div",{className:"flex items-center gap-1 justify-center cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",onClick:()=>m(!0),children:[e.jsx("span",{className:`text-sm font-bold ${g?"text-green-600":""}`,children:t.team1_score||0}),e.jsx("span",{className:"text-xs text-gray-400",children:"-"}),e.jsx("span",{className:`text-sm font-bold ${x?"text-green-600":""}`,children:t.team2_score||0}),e.jsx(Ut,{className:"h-3 w-3 text-gray-400 ml-1"})]})}),e.jsx(z,{className:"w-48",children:e.jsx(io,{team:d,bracketId:t.id,teamPosition:"team2",isWinner:x,allTeams:r,onTeamChange:i})}),e.jsx(z,{className:"w-24 text-center",children:e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsxs("div",{children:["#",t.team1_seed]}),e.jsx("div",{children:"vs"}),e.jsxs("div",{children:["#",t.team2_seed]})]})}),e.jsx(z,{className:"w-24 text-center",children:e.jsx(X,{variant:"ghost",size:"sm",onClick:()=>n(t.id),className:"h-6 px-2 text-xs",children:e.jsx(Ut,{className:"h-3 w-3"})})})]})},pp=()=>{const[t,s]=l.useState([]),[r,n]=l.useState([]),[a,o]=l.useState([]),[i,c]=l.useState(""),[d,u]=l.useState(""),[m,h]=l.useState(!1),[v,j]=l.useState(!1),[b,g]=l.useState(!1),[x,N]=l.useState(null),{toast:p}=Is(),k=_c(Qr(vn),Qr(yn,{coordinateGetter:Zc})),T=async(_,S,y)=>{var f,w,C,$;try{console.log(`Fetching playoff scores for teams ${_} and ${S} for week ${y}`);const[W,q]=await Promise.all([H.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:_}]}),H.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:S}]})]),re=(f=W.data)==null?void 0:f[0],M=(w=q.data)==null?void 0:w[0];if(!re||!M)return console.warn(`Missing junction data - Team ${_}: ${re?"found":"missing"}, Team ${S}: ${M?"found":"missing"}`),{team1Score:0,team2Score:0};const[le,ne]=await Promise.all([H.getConferences({filters:[{column:"id",operator:"eq",value:re.conference_id}]}),H.getConferences({filters:[{column:"id",operator:"eq",value:M.conference_id}]})]),ie=(C=le.data)==null?void 0:C[0],ue=($=ne.data)==null?void 0:$[0];if(!ie||!ue)return console.warn(`Missing conference data - Team ${_} conference: ${ie?"found":"missing"}, Team ${S} conference: ${ue?"found":"missing"}`),{team1Score:0,team2Score:0};console.log(`Team ${_} in conference "${ie.conference_name}" (league_id: ${ie.league_id})`),console.log(`Team ${S} in conference "${ue.conference_name}" (league_id: ${ue.league_id})`);let je=0,be=0;const{SleeperApiService:Se}=await On(async()=>{const{SleeperApiService:Ie}=await Promise.resolve().then(()=>Jn);return{SleeperApiService:Ie}},void 0);try{console.log(`Fetching Team ${_} playoff score from league ${ie.league_id}, week ${y}`);const ds=(await Se.fetchMatchups(ie.league_id,y)).find(Q=>Q.roster_id===re.roster_id);je=(ds==null?void 0:ds.points)||0,console.log(`Team ${_} playoff score from Sleeper: ${je} (roster_id: ${re.roster_id})`)}catch(Ie){console.error(`Error fetching Team ${_} playoff score from league ${ie.league_id}:`,Ie)}try{console.log(`Fetching Team ${S} playoff score from league ${ue.league_id}, week ${y}`);const ds=(await Se.fetchMatchups(ue.league_id,y)).find(Q=>Q.roster_id===M.roster_id);be=(ds==null?void 0:ds.points)||0,console.log(`Team ${S} playoff score from Sleeper: ${be} (roster_id: ${M.roster_id})`)}catch(Ie){console.error(`Error fetching Team ${S} playoff score from league ${ue.league_id}:`,Ie)}return console.log(` Final playoff scores - Team ${_}: ${je}, Team ${S}: ${be}`),{team1Score:je,team2Score:be}}catch(W){return console.error("Error fetching playoff scores:",W),{team1Score:0,team2Score:0}}};l.useEffect(()=>{F(),L(),P()},[]),l.useEffect(()=>{i&&d&&E()},[i,d]);const P=async()=>{try{u("14")}catch(_){console.error("Error setting default playoff week:",_),u("14")}},F=async()=>{try{const _=await H.getSeasons({limit:100,orderBy:{column:"season_year",ascending:!1}});if(_.error)throw new Error(_.error);const y=(_.data||[]).map(w=>({id:w.id,season_year:parseInt(w.season_year),season_name:w.season_name,is_current_season:w.is_current}));s(y);const f=y.find(w=>w.is_current_season);f&&c(f.id.toString())}catch(_){console.error("Error loading seasons:",_),p({title:"Error",description:"Failed to load seasons",variant:"destructive"})}},L=async()=>{try{const _=await H.getTeams({limit:100,orderBy:{column:"team_name",ascending:!0}});if(_.error)throw new Error(_.error);const y=(_.data||[]).map(f=>({id:f.id,team_name:f.team_name,owner_name:f.owner_name,team_logo_url:f.team_logourl||""}));n(y)}catch(_){console.error("Error loading teams:",_),p({title:"Error",description:"Failed to load teams",variant:"destructive"})}},E=async()=>{h(!0),console.log(`Loading playoff brackets for season ${i}, week ${d}`);try{const{data:_,error:S}=await H.getPlayoffBrackets({filters:[{column:"season_id",operator:"eq",value:parseInt(i)},{column:"week",operator:"eq",value:parseInt(d)}],orderBy:{column:"matchup_number",ascending:!0}});if(S)throw console.error("Error fetching playoff brackets:",S),new Error(S);const y=_||[];console.log(`Found ${y.length} playoff brackets`);const f=y.map(w=>({...w,manual_override:!1}));console.log("Playoff brackets breakdown:",{total:f.length,byes:f.filter(w=>w.is_bye).length,completed:f.filter(w=>w.winning_team_id).length}),o(f)}catch(_){console.error("Error loading playoff brackets:",_),p({title:"Error",description:`Failed to load playoff brackets: ${_}`,variant:"destructive"})}finally{h(!1)}},R=_=>{N(_.active.id)},A=async _=>{const{active:S,over:y}=_;if(N(null),!y||S.id===y.id)return;const f=S.data.current,w=y.data.current;if((f==null?void 0:f.type)==="team"&&(w==null?void 0:w.type)==="team"){const C=f.bracketId,$=f.teamPosition,W=w.bracketId,q=w.teamPosition;if(C===W&&$===q)return;const re=[...a],M=re.find(ue=>ue.id===C),le=re.find(ue=>ue.id===W);if(!M||!le)return;const ne=$==="team1"?M.team1_id:M.team2_id,ie=q==="team1"?le.team1_id:le.team2_id;$==="team1"?M.team1_id=ie:M.team2_id=ie,q==="team1"?le.team1_id=ne:le.team2_id=ne,M.manual_override=!0,le.manual_override=!0;try{const ue=await T(M.team1_id,M.team2_id,M.week);M.team1_score=ue.team1Score,M.team2_score=ue.team2Score,ue.team1Score>ue.team2Score?M.winning_team_id=M.team1_id:ue.team2Score>ue.team1Score?M.winning_team_id=M.team2_id:M.winning_team_id=null;const je=await T(le.team1_id,le.team2_id,le.week);le.team1_score=je.team1Score,le.team2_score=je.team2Score,je.team1Score>je.team2Score?le.winning_team_id=le.team1_id:je.team2Score>je.team1Score?le.winning_team_id=le.team2_id:le.winning_team_id=null,console.log(` Updated playoff scores - Active bracket: ${ue.team1Score} - ${ue.team2Score}, Over bracket: ${je.team1Score} - ${je.team2Score}`)}catch(ue){console.error("Error fetching playoff scores after team swap:",ue),M.team1_score=0,M.team2_score=0,M.winning_team_id=null,le.team1_score=0,le.team2_score=0,le.winning_team_id=null}console.log(`Teams swapped between playoff brackets ${C} and ${W}`),console.log(`Active bracket now has teams ${M.team1_id} vs ${M.team2_id}`),console.log(`Over bracket now has teams ${le.team1_id} vs ${le.team2_id}`),o(re),g(!0),p({title:"Teams Swapped",description:"Playoff matchup teams have been updated with current scores. Remember to save your changes.",duration:3e3})}},U=_=>{var S;console.log(`Toggling manual override for playoff bracket ${_}`),o(y=>y.map(f=>{if(f.id===_){const w=!f.manual_override;return console.log(`Playoff bracket ${_} manual override: ${f.manual_override} -> ${w}`),{...f,manual_override:w}}return f})),g(!0),p({title:"Override Toggled",description:`Manual override ${(S=a.find(y=>y.id===_))!=null&&S.manual_override?"removed":"enabled"} for playoff bracket ${_}`,duration:2e3})},se=(_,S,y)=>{console.log(`Updating scores for playoff bracket ${_}: Team 1 = ${S}, Team 2 = ${y}`),o(f=>f.map(w=>{if(w.id===_){let C=null;return S>y?C=w.team1_id:y>S&&(C=w.team2_id),console.log(` PLAYOFF WINNER CALC - Bracket ${_}: Team1(${w.team1_id})=${S}, Team2(${w.team2_id})=${y}, Winner=${C}`),{...w,team1_score:S,team2_score:y,winning_team_id:C,manual_override:!0}}return w})),g(!0),p({title:"Playoff Scores Updated",description:`Playoff bracket ${_} scores updated. Remember to save changes.`,duration:2e3})},K=(_,S,y)=>{o(f=>f.map(w=>w.id===_?{...w,team1_id:S,team2_id:y,manual_override:!0}:w)),g(!0)},B=async(_,S,y)=>{console.log(`Changing team for playoff bracket ${_}, position ${S} to team ${y}`),o(C=>C.map($=>{if($.id===_){const W={...$,manual_override:!0};return S==="team1"?W.team1_id=y:W.team2_id=y,console.log(`Updated bracket ${_}: team1_id=${W.team1_id}, team2_id=${W.team2_id}`),W}return $}));const f=a.find(C=>C.id===_);if(f)try{const C=S==="team1"?y:f.team1_id,$=S==="team2"?y:f.team2_id;console.log(`Fetching playoff scores for updated bracket ${_}: team1=${C}, team2=${$}, week=${f.week}`);const{team1Score:W,team2Score:q}=await T(C,$,f.week);o(re=>re.map(M=>{if(M.id===_){let le=null;return W>q?le=C:q>W&&(le=$),console.log(` TEAM CHANGE WINNER - Bracket ${_}: Team1(${C})=${W}, Team2(${$})=${q}, Winner=${le}`),{...M,team1_score:W,team2_score:q,winning_team_id:le}}return M})),console.log(` Updated bracket ${_} with scores: ${W} - ${q}`)}catch(C){console.error(`Error fetching playoff scores for bracket ${_}:`,C),o($=>$.map(W=>W.id===_?{...W,team1_score:0,team2_score:0,winning_team_id:null}:W))}g(!0);const w=r.find(C=>C.id===y);p({title:"Team Changed",description:`Playoff bracket ${_} ${S} changed to ${w==null?void 0:w.team_name}. Scores updated automatically. Remember to save changes.`,duration:3e3})},Z=async()=>{j(!0),console.log("Starting save operation for",a.length,"playoff brackets");let _=0,S=0;const y=[];try{for(const f of a){if(console.log(`Updating playoff bracket ${f.id}:`,{season_id:f.season_id,round:f.round,team1_id:f.team1_id,team2_id:f.team2_id,team1_score:f.team1_score,team2_score:f.team2_score,winning_team_id:f.winning_team_id,manual_override:f.manual_override}),!f.id||f.season_id<=0){console.error(`Invalid bracket data for ID ${f.id}:`,{id:f.id,season_id:f.season_id}),S++,y.push(f.id);continue}let w=null;f.team1_score&&f.team2_score&&(f.team1_score>f.team2_score?w=f.team1_id:f.team2_score>f.team1_score&&(w=f.team2_id)),console.log(` PLAYOFF SAVE WINNER - Bracket ${f.id}: Team1(${f.team1_id})=${f.team1_score}, Team2(${f.team2_id})=${f.team2_score}, Calculated Winner=${w}`);const C={season_id:f.season_id,round:f.round,team1_seed:f.team1_seed,team2_seed:f.team2_seed,team1_id:f.team1_id,team2_id:f.team2_id,winning_team_id:w,playoff_round_name:f.playoff_round_name||null,is_bye:f.is_bye||!1,matchup_number:f.matchup_number||null,week:f.week,team1_score:f.team1_score||0,team2_score:f.team2_score||0};console.log(`Sending update for playoff bracket ${f.id} with data:`,C);const $=await H.updatePlayoffBracket(f.id,C);if($.error){console.error(` Failed to update playoff bracket ${f.id}:`,$.error),console.error(" Update data was:",C),console.error(" Bracket object:",f),S++,y.push(f.id);continue}else console.log(` Successfully updated playoff bracket ${f.id}`),console.log(" UPDATE RESULT:",$.data);console.log(`Successfully updated playoff bracket ${f.id}`),_++}console.log(`Save operation completed: ${_} successes, ${S} failures`),S>0?(console.error("Failed bracket IDs:",y),p({title:"Partial Success",description:`${_} playoff brackets updated successfully, ${S} failed. Check console for details.`,variant:"destructive"})):(g(!1),p({title:"Success",description:`All ${_} playoff brackets updated successfully`})),console.log("Reloading playoff brackets to verify changes persisted..."),await E()}catch(f){console.error("Critical error during save operation:",f),p({title:"Error",description:`Failed to save playoff bracket changes: ${f}`,variant:"destructive"})}finally{j(!1),console.log("Save operation completed, saving state reset")}},ae=()=>{E(),g(!1)},O=Array.from({length:6},(_,S)=>S+13);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(V,{children:e.jsxs(Y,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Season"}),e.jsxs(cs,{value:i,onValueChange:c,children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"Select season..."})}),e.jsx(as,{children:t.map(_=>e.jsxs(Re,{value:_.id.toString(),children:[_.season_name,_.is_current_season&&e.jsx(ee,{variant:"secondary",className:"ml-2",children:"Current"})]},_.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Week (Playoffs)"}),e.jsxs(cs,{value:d,onValueChange:u,disabled:!i,children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"Select week..."})}),e.jsx(as,{children:O.map(_=>e.jsxs(Re,{value:_.toString(),children:["Week ",_]},_))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsxs("span",{children:[a.length," Total"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),e.jsxs("span",{children:[a.filter(_=>_.manual_override).length," Override"]})]})]})]}),e.jsx("div",{className:"space-y-2 flex items-end",children:b&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(X,{onClick:Z,disabled:v,className:"flex items-center gap-2",children:[v?e.jsx(ms,{className:"h-4 w-4 animate-spin"}):e.jsx(ln,{className:"h-4 w-4"}),"Save"]}),e.jsxs(X,{variant:"outline",onClick:ae,className:"flex items-center gap-2",children:[e.jsx(si,{className:"h-4 w-4"}),"Reset"]})]})})]}),b&&e.jsxs(qe,{className:"mb-4",children:[e.jsx(dn,{className:"h-4 w-4"}),e.jsx(Ve,{children:"You have unsaved changes. Remember to save your modifications."})]})]})}),m?e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading playoff brackets..."})]})})}):a.length===0&&d?e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(hs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Playoff Brackets Found"}),e.jsx("p",{className:"text-gray-600",children:"No playoff brackets found for the selected week. They may need to be created first."})]})})}):a.length>0?e.jsx(V,{children:e.jsx(Y,{className:"p-0",children:e.jsxs(qc,{sensors:k,collisionDetection:$c,onDragStart:R,onDragEnd:A,children:[e.jsx(Xc,{items:a.flatMap(_=>[`${_.id}-team1`,`${_.id}-team2`]),strategy:bn,children:e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{className:"w-32",children:"Bracket"}),e.jsx(G,{className:"w-48",children:"Team 1"}),e.jsx(G,{className:"w-32 text-center",children:"Score"}),e.jsx(G,{className:"w-48",children:"Team 2"}),e.jsx(G,{className:"w-24 text-center",children:"Seeds"}),e.jsx(G,{className:"w-24 text-center",children:"Actions"})]})}),e.jsx(Ls,{children:a.map(_=>e.jsx(xp,{bracket:_,teams:r,allTeams:r,onToggleOverride:U,onUpdateScores:se,onUpdateTeams:K,onTeamChange:B},_.id))})]})}),e.jsx(Hc,{children:x?e.jsx("div",{className:"bg-white p-2 rounded-lg border-2 border-purple-400 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(hs,{className:"h-2 w-2 text-purple-600"})}),e.jsx("span",{className:"text-xs font-medium",children:"Moving playoff team..."})]})}):null})]})})}):e.jsx(V,{children:e.jsx(Y,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(hs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select Filters"}),e.jsx("p",{className:"text-gray-600",children:"Please select a season and week to manage playoff brackets."})]})})})]})},gp=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-5 w-5"}),"Matchups & Overrides Management"]}),e.jsx(Ce,{children:"Manage regular season and playoff matchups, scores, and overrides across all conferences"})]}),e.jsx(Y,{children:e.jsxs(ut,{defaultValue:"regular-season",className:"space-y-6",children:[e.jsxs(lt,{className:"grid w-full grid-cols-2",children:[e.jsxs(Me,{value:"regular-season",className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Regular Season"]}),e.jsxs(Me,{value:"playoffs",className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-4 w-4"}),"Playoffs"]})]}),e.jsx(Le,{value:"regular-season",children:e.jsx(fp,{})}),e.jsx(Le,{value:"playoffs",children:e.jsx(pp,{})})]})})]})}),jp=()=>{const[t,s]=l.useState([]),[r,n]=l.useState(null),[a,o]=l.useState(null),[i,c]=l.useState(!1),[d,u]=l.useState(!1),[m,h]=l.useState({playoff_teams:10,first_round_byes:6,playoff_start_week:14,reseed:!0}),{toast:v}=Is();l.useEffect(()=>{j()},[]),l.useEffect(()=>{r&&b()},[r]);const j=async()=>{try{const p=await H.getSeasons({orderBy:{column:"season_year",ascending:!1}});if(p.error)throw new Error("Failed to load seasons");s(p.data);const k=p.data.find(T=>T.is_current);k&&n(k.id)}catch(p){console.error("Error loading seasons:",p),v({title:"Error",description:"Failed to load seasons",variant:"destructive"})}},b=async()=>{if(r){c(!0);try{const p=await H.getPlayoffFormats({filters:[{column:"season_id",operator:"eq",value:r},{column:"is_active",operator:"eq",value:!0}]});if(p.error)throw new Error("Failed to load playoff format");if(p.data.length>0){const k=p.data[0];o(k),h({playoff_teams:k.playoff_teams,first_round_byes:k.week_14_byes,playoff_start_week:k.playoff_start_week,reseed:k.reseed})}else o(null),h({playoff_teams:10,first_round_byes:6,playoff_start_week:14,reseed:!0})}catch(p){console.error("Error loading playoff format:",p),v({title:"Error",description:"Failed to load playoff format",variant:"destructive"})}finally{c(!1)}}},g=async()=>{if(!r){v({title:"Error",description:"Please select a season",variant:"destructive"});return}u(!0);try{const p={season_id:r,playoff_teams:m.playoff_teams,week_14_byes:m.first_round_byes,playoff_start_week:m.playoff_start_week,reseed:m.reseed,championship_week:17,is_active:!0};let k;if(a?k=await H.updatePlayoffFormat(a.id,p):k=await H.createPlayoffFormat(p),k.error)throw new Error("Failed to save playoff format");o(k.data),v({title:"Success",description:"Playoff format saved successfully"}),await b()}catch(p){console.error("Error saving playoff format:",p),v({title:"Error",description:"Failed to save playoff format",variant:"destructive"})}finally{u(!1)}},x=(p,k)=>{h(T=>({...T,[p]:k}))},N=t.find(p=>p.id===r);return e.jsx("div",{className:"space-y-6",children:e.jsxs(V,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-5 w-5"}),"Playoff Format Management"]}),e.jsx(Ce,{children:"Configure playoff settings for each season including teams, byes, and format rules"})]}),e.jsxs(Y,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{htmlFor:"season-select",children:"Season"}),e.jsxs(cs,{value:(r==null?void 0:r.toString())||"",onValueChange:p=>n(parseInt(p)),children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"Select a season"})}),e.jsx(as,{children:t.map(p=>e.jsxs(Re,{value:p.id.toString(),children:[p.season_name," (",p.season_year,")",p.is_current&&" - Current"]},p.id))})]})]}),r&&e.jsxs(e.Fragment,{children:[i?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Ke,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading playoff format..."})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{htmlFor:"playoff-teams",children:"Playoff Teams"}),e.jsx(Cs,{id:"playoff-teams",type:"number",min:"4",max:"16",value:m.playoff_teams,onChange:p=>x("playoff_teams",parseInt(p.target.value)),placeholder:"Number of teams in playoffs"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total number of teams that make the playoffs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{htmlFor:"first-round-byes",children:"First Round Byes"}),e.jsx(Cs,{id:"first-round-byes",type:"number",min:"0",max:"8",value:m.first_round_byes,onChange:p=>x("first_round_byes",parseInt(p.target.value)),placeholder:"Number of teams with first round byes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Number of top-seeded teams that skip the first round"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{htmlFor:"playoff-start-week",children:"Playoff Start Week"}),e.jsx(Cs,{id:"playoff-start-week",type:"number",min:"1",max:"18",value:m.playoff_start_week,onChange:p=>x("playoff_start_week",parseInt(p.target.value)),placeholder:"Week when playoffs begin"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"NFL week when playoff games start"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{children:"Playoff Reseeding"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Na,{id:"reseed",checked:m.reseed,onCheckedChange:p=>x("reseed",p)}),e.jsx(js,{htmlFor:"reseed",className:"text-sm font-normal",children:"Reseed teams after each playoff round"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"If checked, teams are reseeded after each round (highest seed plays lowest seed)"})]})]}),a&&!i&&e.jsx(qe,{children:e.jsxs(Ve,{children:[e.jsxs("strong",{children:["Current Settings for ",N==null?void 0:N.season_name,":"]}),e.jsx("br",{}),"Playoff Teams: ",a.playoff_teams," | First Round Byes: ",a.week_14_byes," | Start Week: ",a.playoff_start_week," | Reseed: ",a.reseed?"Yes":"No"]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(X,{onClick:g,disabled:d||i,className:"flex items-center gap-2",children:[d?e.jsx(Ke,{className:"h-4 w-4 animate-spin"}):e.jsx(ln,{className:"h-4 w-4"}),d?"Saving...":"Save Playoff Format"]})})]})]})]})})};var _n="Switch",[yp,qp]=Ft(_n),[vp,wp]=yp(_n),sl=l.forwardRef((t,s)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:o,required:i,disabled:c,value:d="on",onCheckedChange:u,form:m,...h}=t,[v,j]=l.useState(null),b=_t(s,k=>j(k)),g=l.useRef(!1),x=v?m||!!v.closest("form"):!0,[N,p]=br({prop:a,defaultProp:o??!1,onChange:u,caller:_n});return e.jsxs(vp,{scope:r,checked:N,disabled:c,children:[e.jsx(fs.button,{type:"button",role:"switch","aria-checked":N,"aria-required":i,"data-state":al(N),"data-disabled":c?"":void 0,disabled:c,value:d,...h,ref:b,onClick:Ns(t.onClick,k=>{p(T=>!T),x&&(g.current=k.isPropagationStopped(),g.current||k.stopPropagation())})}),x&&e.jsx(nl,{control:v,bubbles:!g.current,name:n,value:d,checked:N,required:i,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});sl.displayName=_n;var tl="SwitchThumb",rl=l.forwardRef((t,s)=>{const{__scopeSwitch:r,...n}=t,a=wp(tl,r);return e.jsx(fs.span,{"data-state":al(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:s})});rl.displayName=tl;var Np="SwitchBubbleInput",nl=l.forwardRef(({__scopeSwitch:t,control:s,checked:r,bubbles:n=!0,...a},o)=>{const i=l.useRef(null),c=_t(i,o),d=So(r),u=Co(s);return l.useEffect(()=>{const m=i.current;if(!m)return;const h=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(h,"checked").set;if(d!==r&&j){const b=new Event("click",{bubbles:n});j.call(m,r),m.dispatchEvent(b)}},[d,r,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:c,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});nl.displayName=Np;function al(t){return t?"checked":"unchecked"}var ol=sl,bp=rl;const il=l.forwardRef(({className:t,...s},r)=>e.jsx(ol,{className:Ne("switch-root peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...s,ref:r,children:e.jsx(bp,{className:Ne("switch-thumb pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform")})}));il.displayName=ol.displayName;class _p{constructor(){Es(this,"schedule",{enabled:!1,dayOfWeek:2,hour:9,minute:0,timezone:"America/New_York"});Es(this,"syncStatus",{id:"",status:"idle",progress:0,currentStep:"Waiting for next sync",processedMatchups:0,totalMatchups:0,errors:[]});Es(this,"syncHistory",[]);Es(this,"scheduleTimer",null);Es(this,"statusListeners",[]);Es(this,"historyListeners",[]);this.loadSettings(),this.scheduleNextSync()}getSchedule(){return{...this.schedule}}updateSchedule(s){this.schedule={...this.schedule,...s},this.saveSettings(),this.scheduleNextSync(),this.notifyStatusListeners()}getStatus(){return{...this.syncStatus}}getHistory(){return[...this.syncHistory]}async runManualSync(){if(this.syncStatus.status==="running")throw new Error("Sync is already running");await this.executeSync(!0)}onStatusChange(s){return this.statusListeners.push(s),()=>{this.statusListeners=this.statusListeners.filter(r=>r!==s)}}onHistoryChange(s){return this.historyListeners.push(s),()=>{this.historyListeners=this.historyListeners.filter(r=>r!==s)}}loadSettings(){try{const s=localStorage.getItem("weeklyAutoSyncSchedule");s&&(this.schedule={...this.schedule,...JSON.parse(s)});const r=localStorage.getItem("weeklyAutoSyncHistory");r&&(this.syncHistory=JSON.parse(r).map(n=>({...n,timestamp:new Date(n.timestamp)})))}catch(s){console.error("Failed to load sync settings:",s)}}saveSettings(){try{localStorage.setItem("weeklyAutoSyncSchedule",JSON.stringify(this.schedule)),localStorage.setItem("weeklyAutoSyncHistory",JSON.stringify(this.syncHistory))}catch(s){console.error("Failed to save sync settings:",s)}}scheduleNextSync(){if(this.scheduleTimer&&(clearTimeout(this.scheduleTimer),this.scheduleTimer=null),!this.schedule.enabled){this.updateSyncStatus({status:"idle",currentStep:"Automatic sync disabled",nextRunTime:void 0});return}const s=this.calculateNextRunTime(),r=new Date,n=s.getTime()-r.getTime();n>0&&(this.scheduleTimer=setTimeout(()=>{this.executeSync(!1)},n),this.updateSyncStatus({status:"scheduled",currentStep:"Scheduled for next run",nextRunTime:s}))}calculateNextRunTime(){const s=new Date,r=new Date(s);r.setHours(this.schedule.hour,this.schedule.minute,0,0);const n=s.getDay();let o=this.schedule.dayOfWeek-n;return(o<0||o===0&&s.getTime()>=r.getTime())&&(o+=7),r.setDate(r.getDate()+o),r}async executeSync(s){var c,d;const r=`sync_${Date.now()}`,n=new Date;this.updateSyncStatus({id:r,status:"running",startTime:n,progress:0,currentStep:"Initializing sync...",processedMatchups:0,totalMatchups:0,errors:[]});const a=[];let o=0,i=0;try{this.updateSyncStatus({currentStep:"Fetching active conferences...",progress:10});const{data:u}=await window.ezsite.apis.tablePage(12820,{PageNo:1,PageSize:100,Filters:[{name:"is_active",op:"Equal",value:!0}]});if(!((c=u==null?void 0:u.List)!=null&&c.length))throw new Error("No active conferences found");const{data:m}=await window.ezsite.apis.tablePage(12818,{PageNo:1,PageSize:1,Filters:[{name:"is_current_season",op:"Equal",value:!0}]});if(!((d=m==null?void 0:m.List)!=null&&d.length))throw new Error("No current season found");const h=m.List[0];this.updateSyncStatus({currentStep:"Fetching pending matchups...",progress:20});const{data:v}=await window.ezsite.apis.tablePage(13329,{PageNo:1,PageSize:1e3,Filters:[{name:"status",op:"Equal",value:"pending"},{name:"week",op:"Equal",value:h.current_week}]}),j=(v==null?void 0:v.List)||[];this.updateSyncStatus({totalMatchups:j.length,progress:30});for(const N of u.List){this.updateSyncStatus({currentStep:`Processing ${N.conference_name}...`,progress:30+o/j.length*40});try{const p=j.filter(k=>k.conference_id===N.id);for(const k of p)await this.processMatchup(k,N,h),o++,this.updateSyncStatus({processedMatchups:o,progress:30+o/j.length*40});await this.updateTeamRecords(N.id,h.id),i++}catch(p){const k=`Error processing ${N.conference_name}: ${p}`;a.push(k),console.error(k)}}this.updateSyncStatus({currentStep:"Finalizing sync...",progress:90});const b=new Date,g=b.getTime()-n.getTime(),x={id:r,timestamp:n,status:a.length>0?o>0?"partial":"failed":"success",duration:g,matchupsProcessed:o,recordsUpdated:i,errors:[...a],details:s?"Manual sync":"Scheduled sync"};this.syncHistory.unshift(x),this.syncHistory=this.syncHistory.slice(0,100),this.saveSettings(),this.notifyHistoryListeners(),this.updateSyncStatus({status:a.length>0?"failed":"completed",endTime:b,progress:100,currentStep:`Sync completed ${a.length>0?"with errors":"successfully"}`,errors:[...a],lastRunTime:n}),s||setTimeout(()=>this.scheduleNextSync(),5e3),a.length===0?Tt({title:"Sync Completed",description:`Processed ${o} matchups successfully`}):Tt({title:"Sync Completed with Errors",description:`Processed ${o} matchups with ${a.length} errors`,variant:"destructive"})}catch(u){const m=`Sync failed: ${u}`;a.push(m),this.updateSyncStatus({status:"failed",endTime:new Date,progress:0,currentStep:"Sync failed",errors:[...a]}),console.error("Sync execution failed:",u),Tt({title:"Sync Failed",description:m,variant:"destructive"}),s||setTimeout(()=>this.scheduleNextSync(),6e4)}}async processMatchup(s,r,n){var a,o,i,c;try{const d=await ke.getMatchups(r.league_id,s.week);if(!(d!=null&&d.length))throw new Error(`No Sleeper matchups found for week ${s.week}`);if(!d.find(N=>N.matchup_id===parseInt(s.sleeper_matchup_id)))throw new Error(`Sleeper matchup not found for ID ${s.sleeper_matchup_id}`);const{data:m}=await window.ezsite.apis.tablePage(12853,{PageNo:1,PageSize:1,Filters:[{name:"team_id",op:"Equal",value:s.team_1_id},{name:"conference_id",op:"Equal",value:r.id}]}),{data:h}=await window.ezsite.apis.tablePage(12853,{PageNo:1,PageSize:1,Filters:[{name:"team_id",op:"Equal",value:s.team_2_id},{name:"conference_id",op:"Equal",value:r.id}]});if(!((a=m==null?void 0:m.List)!=null&&a.length)||!((o=h==null?void 0:h.List)!=null&&o.length))throw new Error("Could not find team junction records");const v=m.List[0].roster_id,j=h.List[0].roster_id,b=((i=d.find(N=>N.roster_id===parseInt(v)))==null?void 0:i.points)||0,g=((c=d.find(N=>N.roster_id===parseInt(j)))==null?void 0:c.points)||0;let x=null;b>g?x=s.team_1_id:g>b&&(x=s.team_2_id),await window.ezsite.apis.tableUpdate(13329,{id:s.id,team_1_score:b,team_2_score:g,winner_id:x,status:"complete",is_manual_override:!1})}catch(d){throw new Error(`Failed to process matchup ${s.id}: ${d}`)}}async updateTeamRecords(s,r){var n,a,o;try{const{data:i}=await window.ezsite.apis.tablePage(13329,{PageNo:1,PageSize:1e3,Filters:[{name:"conference_id",op:"Equal",value:s},{name:"status",op:"Equal",value:"complete"}]});if(!((n=i==null?void 0:i.List)!=null&&n.length))return;const{data:c}=await window.ezsite.apis.tablePage(12853,{PageNo:1,PageSize:100,Filters:[{name:"conference_id",op:"Equal",value:s}]});if(!((a=c==null?void 0:c.List)!=null&&a.length))return;for(const d of c.List){const u=d.team_id,m=i.List.filter(T=>T.team_1_id===u||T.team_2_id===u);let h=0,v=0,j=0,b=0,g=0;for(const T of m){const P=T.team_1_id===u,F=P?T.team_1_score:T.team_2_score,L=P?T.team_2_score:T.team_1_score;b+=F,g+=L,T.winner_id===u?h++:T.winner_id===null?j++:v++}const x=h+v+j,N=x>0?h/x:0,{data:p}=await window.ezsite.apis.tablePage(13768,{PageNo:1,PageSize:1,Filters:[{name:"team_id",op:"Equal",value:u},{name:"conference_id",op:"Equal",value:s},{name:"season_id",op:"Equal",value:r}]}),k={team_id:u,conference_id:s,season_id:r,wins:h,losses:v,ties:j,points_for:b,points_against:g,win_percentage:N,last_updated:new Date().toISOString()};(o=p==null?void 0:p.List)!=null&&o.length?await window.ezsite.apis.tableUpdate(13768,{id:p.List[0].id,...k}):await window.ezsite.apis.tableCreate(13768,k)}}catch(i){throw new Error(`Failed to update team records: ${i}`)}}updateSyncStatus(s){this.syncStatus={...this.syncStatus,...s},this.notifyStatusListeners()}notifyStatusListeners(){this.statusListeners.forEach(s=>{try{s(this.getStatus())}catch(r){console.error("Error notifying status listener:",r)}})}notifyHistoryListeners(){this.historyListeners.forEach(s=>{try{s(this.getHistory())}catch(r){console.error("Error notifying history listener:",r)}})}}const It=new _p,Sp=()=>{const[t,s]=l.useState(It.getSchedule()),[r,n]=l.useState(It.getStatus()),[a,o]=l.useState(It.getHistory()),[i,c]=l.useState(!1),[d,u]=l.useState("overview");l.useEffect(()=>{const N=It.onStatusChange(n),p=It.onHistoryChange(o);return()=>{N(),p()}},[]);const m=N=>{const p={...t,...N};s(p),It.updateSchedule(N),Tt({title:"Schedule Updated",description:"Auto-sync schedule has been updated successfully."})},h=async()=>{if(r.status==="running"){Tt({title:"Sync Already Running",description:"Please wait for the current sync to complete.",variant:"destructive"});return}c(!0);try{await It.runManualSync(),Tt({title:"Manual Sync Started",description:"Sync has been initiated manually."})}catch(N){Tt({title:"Sync Failed",description:`Failed to start manual sync: ${N}`,variant:"destructive"})}finally{c(!1)}},v=N=>{switch(N){case"completed":case"success":return"bg-green-500";case"running":return"bg-blue-500";case"failed":return"bg-red-500";case"partial":return"bg-yellow-500";case"scheduled":return"bg-purple-500";default:return"bg-gray-500"}},j=N=>{switch(N){case"completed":case"success":return e.jsx(lr,{className:"w-4 h-4"});case"running":return e.jsx(Ke,{className:"w-4 h-4 animate-spin"});case"failed":return e.jsx(Td,{className:"w-4 h-4"});case"partial":return e.jsx(Je,{className:"w-4 h-4"});case"scheduled":return e.jsx(rt,{className:"w-4 h-4"});default:return e.jsx(iu,{className:"w-4 h-4"})}},b=N=>{const p=Math.floor(N/1e3),k=Math.floor(p/60),T=Math.floor(k/60);return T>0?`${T}h ${k%60}m ${p%60}s`:k>0?`${k}m ${p%60}s`:`${p}s`},g=N=>N?new Date(N).toLocaleString():"N/A",x=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Auto-Sync Manager"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage automatic weekly synchronization with Sleeper API"})]}),e.jsxs(X,{onClick:h,disabled:i||r.status==="running",className:"gap-2",children:[i||r.status==="running"?e.jsx(Ke,{className:"w-4 h-4 animate-spin"}):e.jsx(lu,{className:"w-4 h-4"}),i||r.status==="running"?"Syncing...":"Run Manual Sync"]})]}),e.jsxs(ut,{value:d,onValueChange:u,className:"w-full",children:[e.jsxs(lt,{className:"grid w-full grid-cols-4",children:[e.jsxs(Me,{value:"overview",className:"gap-2",children:[e.jsx(Bt,{className:"w-4 h-4"}),"Overview"]}),e.jsxs(Me,{value:"schedule",className:"gap-2",children:[e.jsx(st,{className:"w-4 h-4"}),"Schedule"]}),e.jsxs(Me,{value:"monitoring",className:"gap-2",children:[e.jsx(Wn,{className:"w-4 h-4"}),"Monitoring"]}),e.jsxs(Me,{value:"history",className:"gap-2",children:[e.jsx(Wd,{className:"w-4 h-4"}),"History"]})]}),e.jsxs(Le,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(V,{children:[e.jsxs(oe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ce,{className:"text-sm font-medium",children:"Sync Status"}),j(r.status)]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold capitalize",children:r.status}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.currentStep})]})]}),e.jsxs(V,{children:[e.jsxs(oe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ce,{className:"text-sm font-medium",children:"Auto-Sync"}),e.jsx(Br,{className:"w-4 h-4"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.enabled?"Enabled":"Disabled"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.enabled?`${x[t.dayOfWeek]} at ${t.hour}:${t.minute.toString().padStart(2,"0")}`:"Manual only"})]})]}),e.jsxs(V,{children:[e.jsxs(oe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ce,{className:"text-sm font-medium",children:"Last Run"}),e.jsx(ku,{className:"w-4 h-4"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r.lastRunTime?g(r.lastRunTime).split(" ")[1]:"Never"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.lastRunTime?g(r.lastRunTime).split(" ")[0]:"No previous runs"})]})]}),e.jsxs(V,{children:[e.jsxs(oe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ce,{className:"text-sm font-medium",children:"Next Run"}),e.jsx(rt,{className:"w-4 h-4"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r.nextRunTime?g(r.nextRunTime).split(" ")[1]:"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.nextRunTime?g(r.nextRunTime).split(" ")[0]:"No scheduled runs"})]})]})]}),r.status==="running"&&e.jsxs(V,{children:[e.jsx(oe,{children:e.jsxs(ce,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5 animate-spin"}),"Sync in Progress"]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:r.currentStep}),e.jsxs("span",{children:[r.progress,"%"]})]}),e.jsx(gt,{value:r.progress,className:"h-2"})]}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Matchups: ",r.processedMatchups," / ",r.totalMatchups]}),e.jsxs("span",{children:["Started: ",g(r.startTime)]})]})]})]}),r.errors.length>0&&e.jsxs(qe,{variant:"destructive",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsxs(Ve,{children:[e.jsx("div",{className:"font-medium",children:"Sync Errors:"}),e.jsx("ul",{className:"mt-1 space-y-1",children:r.errors.map((N,p)=>e.jsxs("li",{className:"text-sm",children:[" ",N]},p))})]})]})]}),e.jsx(Le,{value:"schedule",className:"space-y-4",children:e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{children:"Sync Schedule Configuration"})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(js,{htmlFor:"enable-sync",children:"Enable Automatic Sync"}),e.jsx(il,{id:"enable-sync",checked:t.enabled,onCheckedChange:N=>m({enabled:N})})]}),t.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{htmlFor:"day-of-week",children:"Day of Week"}),e.jsxs(cs,{value:t.dayOfWeek.toString(),onValueChange:N=>m({dayOfWeek:parseInt(N)}),children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"Select day"})}),e.jsx(as,{children:x.map((N,p)=>e.jsx(Re,{value:p.toString(),children:N},p))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{htmlFor:"hour",children:"Hour (24-hour format)"}),e.jsx(Cs,{id:"hour",type:"number",min:"0",max:"23",value:t.hour,onChange:N=>m({hour:parseInt(N.target.value)||0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{htmlFor:"minute",children:"Minute"}),e.jsx(Cs,{id:"minute",type:"number",min:"0",max:"59",value:t.minute,onChange:N=>m({minute:parseInt(N.target.value)||0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{htmlFor:"timezone",children:"Timezone"}),e.jsxs(cs,{value:t.timezone,onValueChange:N=>m({timezone:N}),children:[e.jsx(ns,{children:e.jsx(ls,{placeholder:"Select timezone"})}),e.jsxs(as,{children:[e.jsx(Re,{value:"America/New_York",children:"Eastern Time"}),e.jsx(Re,{value:"America/Chicago",children:"Central Time"}),e.jsx(Re,{value:"America/Denver",children:"Mountain Time"}),e.jsx(Re,{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]})]}),e.jsxs(qe,{children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsxs(Ve,{children:[e.jsx("strong",{children:"Note:"})," Automatic sync will only run when the browser is open and active. For production use, consider implementing server-side scheduling."]})]})]})]})}),e.jsx(Le,{value:"monitoring",className:"space-y-4",children:e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{children:"Real-time Monitoring"})}),e.jsx(Y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{children:"Current Status"}),e.jsx(ee,{variant:"outline",className:`${v(r.status)} text-white`,children:r.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{children:"Current Step"}),e.jsx("p",{className:"text-sm",children:r.currentStep})]})]}),r.status==="running"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{children:"Progress"}),e.jsx(gt,{value:r.progress,className:"h-2"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.progress,"% complete"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(js,{children:"Processed Matchups"}),e.jsx("p",{className:"text-2xl font-bold",children:r.processedMatchups})]}),e.jsxs("div",{children:[e.jsx(js,{children:"Total Matchups"}),e.jsx("p",{className:"text-2xl font-bold",children:r.totalMatchups})]})]})]}),r.startTime&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{children:"Started At"}),e.jsx("p",{className:"text-sm",children:g(r.startTime)})]}),r.endTime&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{children:"Completed At"}),e.jsx("p",{className:"text-sm",children:g(r.endTime)})]})]})})]})}),e.jsx(Le,{value:"history",className:"space-y-4",children:e.jsxs(V,{children:[e.jsx(oe,{children:e.jsx(ce,{children:"Sync History"})}),e.jsx(Y,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(As,{children:[e.jsx(Ms,{children:e.jsxs($e,{children:[e.jsx(G,{children:"Timestamp"}),e.jsx(G,{children:"Status"}),e.jsx(G,{children:"Duration"}),e.jsx(G,{children:"Matchups"}),e.jsx(G,{children:"Records"}),e.jsx(G,{children:"Errors"}),e.jsx(G,{children:"Details"})]})}),e.jsx(Ls,{children:a.length===0?e.jsx($e,{children:e.jsx(z,{colSpan:7,className:"text-center text-muted-foreground",children:"No sync history available"})}):a.map(N=>e.jsxs($e,{children:[e.jsx(z,{children:g(N.timestamp)}),e.jsx(z,{children:e.jsx(ee,{variant:"outline",className:`${v(N.status)} text-white`,children:N.status})}),e.jsx(z,{children:b(N.duration)}),e.jsx(z,{children:N.matchupsProcessed}),e.jsx(z,{children:N.recordsUpdated}),e.jsx(z,{children:N.errors.length>0?e.jsx(ee,{variant:"destructive",children:N.errors.length}):e.jsx("span",{className:"text-green-600",children:"None"})}),e.jsx(z,{className:"max-w-xs truncate",children:N.details})]},N.id))})]})})})]})})]})]})},Cp=()=>{const[t,s]=l.useState(!1),[r,n]=l.useState(""),[a,o]=l.useState(""),[i,c]=l.useState(null),[d,u]=l.useState(!0),{toast:m}=Is(),h="gladleague2025";l.useEffect(()=>{const b=sessionStorage.getItem("admin_authenticated"),g=sessionStorage.getItem("admin_login_time");if(b==="true"&&g){const x=new Date(g);(new Date().getTime()-x.getTime())/(1e3*60*60)<8?(s(!0),c(localStorage.getItem("admin_last_login"))):(sessionStorage.removeItem("admin_authenticated"),sessionStorage.removeItem("admin_login_time"))}u(!1)},[]);const v=b=>{if(b.preventDefault(),r===h){const g=new Date;s(!0),o(""),sessionStorage.setItem("admin_authenticated","true"),sessionStorage.setItem("admin_login_time",g.toISOString()),localStorage.setItem("admin_last_login",g.toLocaleString()),c(g.toLocaleString()),m({title:"Admin Access Granted",description:"Welcome to the admin panel"})}else o("Invalid password"),m({title:"Access Denied",description:"Invalid admin password",variant:"destructive"})},j=()=>{s(!1),n(""),sessionStorage.removeItem("admin_authenticated"),sessionStorage.removeItem("admin_login_time"),m({title:"Logged Out",description:"Admin session ended"})};return d?e.jsx("div",{className:"container mx-auto px-4 py-8","data-id":"ao89vvru5",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]","data-id":"pml7mynqn",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-b-2 border-blue-600 rounded-full","data-id":"10jeltn5k"})})}):t?e.jsxs("div",{className:"container mx-auto px-4 py-8","data-id":"zucmgzvwq",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8","data-id":"lro5ngqd4",children:[e.jsxs("div",{"data-id":"noo7qh20h",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3","data-id":"fmj1jcz8o",children:[e.jsx(Br,{className:"h-8 w-8 text-blue-600","data-id":"bdjtdbfnt"}),"Admin Panel"]}),e.jsx("p",{className:"text-muted-foreground mt-2","data-id":"amn1082i4",children:"Manage leagues, sync data, and perform administrative tasks"})]}),e.jsxs("div",{className:"flex items-center gap-4","data-id":"nw6oaovvh",children:[i&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground","data-id":"1kqkbfoj2",children:[e.jsx(rt,{className:"h-4 w-4","data-id":"u85cv9ybo"}),"Last login: ",i]}),e.jsxs(ee,{variant:"secondary",className:"flex items-center gap-1","data-id":"u49kieuap",children:[e.jsx(Bt,{className:"h-3 w-3","data-id":"fzemdjhv1"}),"Admin Active"]}),e.jsx(X,{variant:"outline",onClick:j,"data-id":"ssqzxi57s",children:"Logout"})]})]}),e.jsxs(ut,{defaultValue:"league-manager",className:"space-y-6","data-id":"ojttqdptv",children:[e.jsxs(lt,{className:"grid w-full grid-cols-5","data-id":"55g8xnp5m",children:[e.jsxs(Me,{value:"league-manager",className:"flex items-center gap-2","data-id":"mudt4s949",children:[e.jsx(Br,{className:"h-4 w-4","data-id":"vq59l6i0o"}),"League Manager"]}),e.jsxs(Me,{value:"data-sync",className:"flex items-center gap-2","data-id":"x1ln07h9l",children:[e.jsx(Ht,{className:"h-4 w-4","data-id":"gwzxvoplp"}),"Data Sync"]}),e.jsxs(Me,{value:"matchups-management",className:"flex items-center gap-2","data-id":"kq8s7gvio",children:[e.jsx(st,{className:"h-4 w-4","data-id":"930hxto7y"}),"Matchups & Overrides"]}),e.jsxs(Me,{value:"playoff-format",className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-4 w-4"}),"Playoff Format"]}),e.jsxs(Me,{value:"auto-sync",className:"flex items-center gap-2","data-id":"ufa49dbo7",children:[e.jsx(vd,{className:"h-4 w-4","data-id":"xv3rcuk8d"}),"Auto-Sync"]})]}),e.jsx(Le,{value:"league-manager","data-id":"9y7vx68ag",children:e.jsx(wf,{"data-id":"jqk7s5yut"})}),e.jsx(Le,{value:"data-sync","data-id":"mbmsyjmjw",children:e.jsx(Cf,{"data-id":"r02lgxd37"})}),e.jsx(Le,{value:"matchups-management","data-id":"2im6bg2ok",children:e.jsx(gp,{"data-id":"ddqsho0df"})}),e.jsx(Le,{value:"playoff-format",children:e.jsx(jp,{})}),e.jsx(Le,{value:"auto-sync","data-id":"cr5xmlzdc",children:e.jsx(Sp,{"data-id":"5st9c4lq3"})})]})]}):e.jsx("div",{className:"container mx-auto px-4 py-8","data-id":"sep77enuq",children:e.jsx("div",{className:"max-w-md mx-auto","data-id":"qkcxfcevx",children:e.jsxs(V,{"data-id":"7bka3yyd5",children:[e.jsxs(oe,{className:"text-center","data-id":"alhddkb9x",children:[e.jsx("div",{className:"flex justify-center mb-4","data-id":"20czuz7s8",children:e.jsx(jr,{className:"h-12 w-12 text-blue-600","data-id":"uj6wfwcyd"})}),e.jsxs(ce,{className:"flex items-center gap-2 justify-center","data-id":"easa7srw9",children:[e.jsx(Kd,{className:"h-5 w-5","data-id":"srgo1x52n"}),"Admin Access Required"]}),e.jsx(Ce,{"data-id":"dw6h33z8z",children:"Enter the admin password to access the admin panel"})]}),e.jsx(Y,{"data-id":"p54cgo0pa",children:e.jsxs("form",{onSubmit:v,className:"space-y-4","data-id":"nu7k5xnra",children:[e.jsxs("div",{className:"space-y-2","data-id":"rtr62f4xb",children:[e.jsx(js,{htmlFor:"password","data-id":"nell7jvlm",children:"Admin Password"}),e.jsx(Cs,{id:"password",type:"password",value:r,onChange:b=>n(b.target.value),placeholder:"Enter admin password",className:"w-full","data-id":"hjlpnn2yv"})]}),a&&e.jsx(qe,{variant:"destructive","data-id":"4zu7gxwp4",children:e.jsx(Ve,{"data-id":"js05q0hn6",children:a})}),e.jsx(X,{type:"submit",className:"w-full","data-id":"tthln8jfy",children:"Access Admin Panel"})]})})]})})})},kp=()=>{const t=ko();return l.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center space-y-6 p-8",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-8xl font-bold text-primary",children:"404"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold tracking-tight",children:"Page Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"Sorry, the page you are looking for does not exist or has been removed."})]}),e.jsx("div",{children:e.jsx(X,{asChild:!0,variant:"default",size:"lg",children:e.jsx("a",{href:"/",children:"Back to Home"})})})]})})};class dt{static convertEzSiteOptions(s){const r={};return s.PageNo&&s.PageSize&&(r.offset=(s.PageNo-1)*s.PageSize,r.limit=s.PageSize),s.OrderByField&&(r.orderBy={column:s.OrderByField,ascending:s.IsAsc!==!1}),s.Filters&&Array.isArray(s.Filters)&&(r.filters=s.Filters.map(n=>({column:n.name,operator:dt.convertEzSiteOperator(n.op),value:n.value}))),r}static convertEzSiteOperator(s){return{Equal:"eq",NotEqual:"neq",GreaterThan:"gt",GreaterThanOrEqual:"gte",LessThan:"lt",LessThanOrEqual:"lte",Contains:"ilike",In:"in",IsNull:"is",IsNotNull:"not"}[s]||"eq"}static getTableName(s){return{12818:"seasons",12820:"conferences",12852:"teams",12853:"team_conference_junction",13329:"matchups",13768:"team_records",12870:"players",draft_results:"draft_results",transactions:"transactions",playoff_bracket:"playoff_bracket",matchup_admin_override:"matchup_admin_override",team_rosters:"team_rosters"}[s.toString()]||s.toString()}static async tablePage(s,r={}){const n=dt.getTableName(s),a=dt.convertEzSiteOptions(r),o=await H.queryTable(n,a);return{data:{List:o.data,TotalCount:o.count||0},error:o.error}}static async tableCreate(s,r){const n=dt.getTableName(s),a={...r};delete a.ID;const o=await H.createRecord(n,a);return{data:o.data,error:o.error}}static async tableUpdate(s,r){const n=dt.getTableName(s);if(!r.ID&&!r.id)return{error:"Missing ID for update operation"};const a=r.ID||r.id,o={...r};delete o.ID,delete o.id;const i=await H.updateRecord(n,a,o);return{data:i.data,error:i.error}}static async tableDelete(s,r){const n=dt.getTableName(s);if(!r.ID&&!r.id)return{error:"Missing ID for delete operation"};const a=r.ID||r.id;return{data:null,error:(await H.deleteRecord(n,a)).error}}}const $p={tablePage:dt.tablePage,tableCreate:dt.tableCreate,tableUpdate:dt.tableUpdate,tableDelete:dt.tableDelete},Tp=new Fl,Ep=()=>(l.useEffect(()=>{window.ezsite||(window.ezsite={apis:$p});const t=document.createElement("script");return t.src="https://studio.pickaxe.co/api/embed/bundle.js",t.defer=!0,document.head.appendChild(t),()=>{const s=document.querySelector('script[src="https://studio.pickaxe.co/api/embed/bundle.js"]');s&&s.remove()}},[]),e.jsx(Dl,{client:Tp,children:e.jsx(zm,{children:e.jsx(qm,{children:e.jsxs(Pl,{children:[e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(sh,{}),e.jsx("main",{className:"container mx-auto px-4 py-6",children:e.jsxs(Rl,{children:[e.jsx(Zs,{path:"/",element:e.jsx(dh,{})}),e.jsx(Zs,{path:"/standings",element:e.jsx(hh,{})}),e.jsx(Zs,{path:"/matchups",element:e.jsx(Fh,{})}),e.jsx(Zs,{path:"/matchups/:matchupId",element:e.jsx(Bh,{})}),e.jsx(Zs,{path:"/teams",element:e.jsx(Gh,{})}),e.jsx(Zs,{path:"/teams/:teamId",element:e.jsx(Yh,{})}),e.jsx(Zs,{path:"/players",element:e.jsx(Xh,{})}),e.jsx(Zs,{path:"/players/:playerId",element:e.jsx(nf,{})}),e.jsx(Zs,{path:"/transactions",element:e.jsx(af,{})}),e.jsx(Zs,{path:"/draft",element:e.jsx(of,{})}),e.jsx(Zs,{path:"/rules",element:e.jsx(xf,{})}),e.jsx(Zs,{path:"/conferences",element:e.jsx(gf,{})}),e.jsx(Zs,{path:"/admin",element:e.jsx(Cp,{})}),e.jsx(Zs,{path:"*",element:e.jsx(kp,{})})]})})]}),e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsx("div",{id:"deployment-f277b3b5-018e-4ef6-a37c-d2fd421a7ba5"})}),e.jsx(wm,{})]})})})}));$o(document.getElementById("root")).render(e.jsx(Ep,{}));
