var e,s=Object.defineProperty,t=(e,t,a)=>((e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a)(e,"symbol"!=typeof t?t+"":t,a);import{c as a,a as r,u as n,j as i,B as l,P as c,b as o,d,e as m,f as u,V as h,R as x,g as p,h as f,i as g,k as j,D as v,C as y,l as w,m as N,A as b,n as _,S,O as k,o as C,p as T,q as E,T as P,r as R,s as D,t as F,v as M,I,w as A,x as $,y as L,z,E as O,L as B,F as q,G as W,H as U,J as H,K as V,M as Y,N as K,Q as J,U as G,W as X,X as Q,Y as Z,Z as ee}from"./ui-vendor-BEFcXjCc.js";import{a as se,r as te,u as ae,L as re,R as ne,e as ie,f as le,B as ce,h as oe,i as de}from"./react-vendor-C6bsqnQi.js";import{Q as me,a as ue}from"./query-vendor-DFoymwCq.js";import{c as he,_ as xe}from"./supabase-vendor-DW9XmO1q.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var pe=se;e=pe.createRoot,pe.hydrateRoot;let fe=0;const ge=new Map,je=e=>{if(ge.has(e))return;const s=setTimeout(()=>{ge.delete(e),Ne({type:"REMOVE_TOAST",toastId:e})},1e6);ge.set(e,s)},ve=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{const{toastId:t}=s;return t?je(t):e.toasts.forEach(e=>{je(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===s.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},ye=[];let we={toasts:[]};function Ne(e){we=ve(we,e),ye.forEach(e=>{e(we)})}function be({...e}){const s=(fe=(fe+1)%Number.MAX_SAFE_INTEGER,fe.toString()),t=()=>Ne({type:"DISMISS_TOAST",toastId:s});return Ne({type:"ADD_TOAST",toast:{...e,id:s,open:!0,onOpenChange:e=>{e||t()}}}),{id:s,dismiss:t,update:e=>Ne({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function _e(){const[e,s]=te.useState(we);return te.useEffect(()=>(ye.push(s),()=>{const e=ye.indexOf(s);e>-1&&ye.splice(e,1)}),[e]),{...e,toast:be,dismiss:e=>Ne({type:"DISMISS_TOAST",toastId:e})}}var Se="ToastProvider",[ke,Ce,Te]=r("Toast"),[Ee,Pe]=a("Toast",[Te]),[Re,De]=Ee(Se),Fe=e=>{const{__scopeToast:s,label:t="Notification",duration:a=5e3,swipeDirection:r="right",swipeThreshold:n=50,children:l}=e,[c,o]=te.useState(null),[d,m]=te.useState(0),u=te.useRef(!1),h=te.useRef(!1);return t.trim(),i.jsx(ke.Provider,{scope:s,children:i.jsx(Re,{scope:s,label:t,duration:a,swipeDirection:r,swipeThreshold:n,toastCount:d,viewport:c,onViewportChange:o,onToastAdd:te.useCallback(()=>m(e=>e+1),[]),onToastRemove:te.useCallback(()=>m(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:h,children:l})})};Fe.displayName=Se;var Me="ToastViewport",Ie=["F8"],Ae="toast.viewportPause",$e="toast.viewportResume",Le=te.forwardRef((e,s)=>{const{__scopeToast:t,hotkey:a=Ie,label:r="Notifications ({hotkey})",...o}=e,d=De(Me,t),m=Ce(t),u=te.useRef(null),h=te.useRef(null),x=te.useRef(null),p=te.useRef(null),f=n(s,p,d.onViewportChange),g=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=d.toastCount>0;te.useEffect(()=>{const e=e=>{var s;0!==a.length&&a.every(s=>e[s]||e.code===s)&&(null==(s=p.current)||s.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),te.useEffect(()=>{const e=u.current,s=p.current;if(j&&e&&s){const t=()=>{if(!d.isClosePausedRef.current){const e=new CustomEvent(Ae);s.dispatchEvent(e),d.isClosePausedRef.current=!0}},a=()=>{if(d.isClosePausedRef.current){const e=new CustomEvent($e);s.dispatchEvent(e),d.isClosePausedRef.current=!1}},r=s=>{!e.contains(s.relatedTarget)&&a()},n=()=>{e.contains(document.activeElement)||a()};return e.addEventListener("focusin",t),e.addEventListener("focusout",r),e.addEventListener("pointermove",t),e.addEventListener("pointerleave",n),window.addEventListener("blur",t),window.addEventListener("focus",a),()=>{e.removeEventListener("focusin",t),e.removeEventListener("focusout",r),e.removeEventListener("pointermove",t),e.removeEventListener("pointerleave",n),window.removeEventListener("blur",t),window.removeEventListener("focus",a)}}},[j,d.isClosePausedRef]);const v=te.useCallback(({tabbingDirection:e})=>{const s=m().map(s=>{const t=s.ref.current,a=[t,...ts(t)];return"forwards"===e?a:a.reverse()});return("forwards"===e?s.reverse():s).flat()},[m]);return te.useEffect(()=>{const e=p.current;if(e){const s=s=>{var t,a,r;const n=s.altKey||s.ctrlKey||s.metaKey;if("Tab"===s.key&&!n){const n=document.activeElement,i=s.shiftKey;if(s.target===e&&i)return void(null==(t=h.current)||t.focus());const l=v({tabbingDirection:i?"backwards":"forwards"}),c=l.findIndex(e=>e===n);as(l.slice(c+1))?s.preventDefault():i?null==(a=h.current)||a.focus():null==(r=x.current)||r.focus()}};return e.addEventListener("keydown",s),()=>e.removeEventListener("keydown",s)}},[m,v]),i.jsxs(l,{ref:u,role:"region","aria-label":r.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&i.jsx(Oe,{ref:h,onFocusFromOutsideViewport:()=>{as(v({tabbingDirection:"forwards"}))}}),i.jsx(ke.Slot,{scope:t,children:i.jsx(c.ol,{tabIndex:-1,...o,ref:f})}),j&&i.jsx(Oe,{ref:x,onFocusFromOutsideViewport:()=>{as(v({tabbingDirection:"backwards"}))}})]})});Le.displayName=Me;var ze="ToastFocusProxy",Oe=te.forwardRef((e,s)=>{const{__scopeToast:t,onFocusFromOutsideViewport:a,...r}=e,n=De(ze,t);return i.jsx(h,{"aria-hidden":!0,tabIndex:0,...r,ref:s,style:{position:"fixed"},onFocus:e=>{var s;const t=e.relatedTarget;!(null==(s=n.viewport)?void 0:s.contains(t))&&a()}})});Oe.displayName=ze;var Be="Toast",qe=te.forwardRef((e,s)=>{const{forceMount:t,open:a,defaultOpen:r,onOpenChange:n,...l}=e,[c,h]=o({prop:a,defaultProp:r??!0,onChange:n,caller:Be});return i.jsx(d,{present:t||c,children:i.jsx(He,{open:c,...l,ref:s,onClose:()=>h(!1),onPause:u(e.onPause),onResume:u(e.onResume),onSwipeStart:m(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:m(e.onSwipeMove,e=>{const{x:s,y:t}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${s}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${t}px`)}),onSwipeCancel:m(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:m(e.onSwipeEnd,e=>{const{x:s,y:t}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${s}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${t}px`),h(!1)})})})});qe.displayName=Be;var[We,Ue]=Ee(Be,{onClose(){}}),He=te.forwardRef((e,s)=>{const{__scopeToast:t,type:a="foreground",duration:r,open:l,onClose:o,onEscapeKeyDown:d,onPause:h,onResume:p,onSwipeStart:f,onSwipeMove:g,onSwipeCancel:j,onSwipeEnd:v,...y}=e,w=De(Be,t),[N,b]=te.useState(null),_=n(s,e=>b(e)),S=te.useRef(null),k=te.useRef(null),C=r||w.duration,T=te.useRef(0),E=te.useRef(C),P=te.useRef(0),{onToastAdd:R,onToastRemove:D}=w,F=u(()=>{var e;(null==N?void 0:N.contains(document.activeElement))&&(null==(e=w.viewport)||e.focus()),o()}),M=te.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(P.current),T.current=(new Date).getTime(),P.current=window.setTimeout(F,e))},[F]);te.useEffect(()=>{const e=w.viewport;if(e){const s=()=>{M(E.current),null==p||p()},t=()=>{const e=(new Date).getTime()-T.current;E.current=E.current-e,window.clearTimeout(P.current),null==h||h()};return e.addEventListener(Ae,t),e.addEventListener($e,s),()=>{e.removeEventListener(Ae,t),e.removeEventListener($e,s)}}},[w.viewport,C,h,p,M]),te.useEffect(()=>{l&&!w.isClosePausedRef.current&&M(C)},[l,C,w.isClosePausedRef,M]),te.useEffect(()=>(R(),()=>D()),[R,D]);const I=te.useMemo(()=>N?Ze(N):null,[N]);return w.viewport?i.jsxs(i.Fragment,{children:[I&&i.jsx(Ve,{__scopeToast:t,role:"status","aria-live":"foreground"===a?"assertive":"polite","aria-atomic":!0,children:I}),i.jsx(We,{scope:t,onClose:F,children:se.createPortal(i.jsx(ke.ItemSlot,{scope:t,children:i.jsx(x,{asChild:!0,onEscapeKeyDown:m(d,()=>{w.isFocusedToastEscapeKeyDownRef.current||F(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(c.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":w.swipeDirection,...y,ref:_,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:m(e.onKeyDown,e=>{"Escape"===e.key&&(null==d||d(e.nativeEvent),e.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:m(e.onPointerDown,e=>{0===e.button&&(S.current={x:e.clientX,y:e.clientY})}),onPointerMove:m(e.onPointerMove,e=>{if(!S.current)return;const s=e.clientX-S.current.x,t=e.clientY-S.current.y,a=Boolean(k.current),r=["left","right"].includes(w.swipeDirection),n=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,i=r?n(0,s):0,l=r?0:n(0,t),c="touch"===e.pointerType?10:2,o={x:i,y:l},d={originalEvent:e,delta:o};a?(k.current=o,es("toast.swipeMove",g,d,{discrete:!1})):ss(o,w.swipeDirection,c)?(k.current=o,es("toast.swipeStart",f,d,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(s)>c||Math.abs(t)>c)&&(S.current=null)}),onPointerUp:m(e.onPointerUp,e=>{const s=k.current,t=e.target;if(t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),k.current=null,S.current=null,s){const t=e.currentTarget,a={originalEvent:e,delta:s};ss(s,w.swipeDirection,w.swipeThreshold)?es("toast.swipeEnd",v,a,{discrete:!0}):es("toast.swipeCancel",j,a,{discrete:!0}),t.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),Ve=e=>{const{__scopeToast:s,children:t,...a}=e,r=De(Be,s),[n,l]=te.useState(!1),[c,o]=te.useState(!1);return function(e=()=>{}){const s=u(e);f(()=>{let e=0,t=0;return e=window.requestAnimationFrame(()=>t=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(t)}},[s])}(()=>l(!0)),te.useEffect(()=>{const e=window.setTimeout(()=>o(!0),1e3);return()=>window.clearTimeout(e)},[]),c?null:i.jsx(p,{asChild:!0,children:i.jsx(h,{...a,children:n&&i.jsxs(i.Fragment,{children:[r.label," ",t]})})})},Ye=te.forwardRef((e,s)=>{const{__scopeToast:t,...a}=e;return i.jsx(c.div,{...a,ref:s})});Ye.displayName="ToastTitle";var Ke=te.forwardRef((e,s)=>{const{__scopeToast:t,...a}=e;return i.jsx(c.div,{...a,ref:s})});Ke.displayName="ToastDescription";var Je=te.forwardRef((e,s)=>{const{altText:t,...a}=e;return t.trim()?i.jsx(Qe,{altText:t,asChild:!0,children:i.jsx(Xe,{...a,ref:s})}):null});Je.displayName="ToastAction";var Ge="ToastClose",Xe=te.forwardRef((e,s)=>{const{__scopeToast:t,...a}=e,r=Ue(Ge,t);return i.jsx(Qe,{asChild:!0,children:i.jsx(c.button,{type:"button",...a,ref:s,onClick:m(e.onClick,r.onClose)})})});Xe.displayName=Ge;var Qe=te.forwardRef((e,s)=>{const{__scopeToast:t,altText:a,...r}=e;return i.jsx(c.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...r,ref:s})});function Ze(e){const s=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&s.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const t=e.ariaHidden||e.hidden||"none"===e.style.display,a=""===e.dataset.radixToastAnnounceExclude;if(!t)if(a){const t=e.dataset.radixToastAnnounceAlt;t&&s.push(t)}else s.push(...Ze(e))}}),s}function es(e,s,t,{discrete:a}){const r=t.originalEvent.currentTarget,n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});s&&r.addEventListener(e,s,{once:!0}),a?g(r,n):r.dispatchEvent(n)}var ss=(e,s,t=0)=>{const a=Math.abs(e.x),r=Math.abs(e.y),n=a>r;return"left"===s||"right"===s?n&&a>t:!n&&r>t};function ts(e){const s=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const s="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||s?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)s.push(t.currentNode);return s}function as(e){const s=document.activeElement;return e.some(e=>e===s||(e.focus(),document.activeElement!==s))}var rs=Fe,ns=Le,is=qe,ls=Ye,cs=Ke,os=Je,ds=Xe;function ms(e){var s,t,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(s=0;s<r;s++)e[s]&&(t=ms(e[s]))&&(a&&(a+=" "),a+=t)}else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function us(){for(var e,s,t=0,a="",r=arguments.length;t<r;t++)(e=arguments[t])&&(s=ms(e))&&(a&&(a+=" "),a+=s);return a}const hs=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,xs=us,ps=(e,s)=>t=>{var a;if(null==(null==s?void 0:s.variants))return xs(e,null==t?void 0:t.class,null==t?void 0:t.className);const{variants:r,defaultVariants:n}=s,i=Object.keys(r).map(e=>{const s=null==t?void 0:t[e],a=null==n?void 0:n[e];if(null===s)return null;const i=hs(s)||hs(a);return r[e][i]}),l=t&&Object.entries(t).reduce((e,s)=>{let[t,a]=s;return void 0===a||(e[t]=a),e},{}),c=null==s||null===(a=s.compoundVariants)||void 0===a?void 0:a.reduce((e,s)=>{let{class:t,className:a,...r}=s;return Object.entries(r).every(e=>{let[s,t]=e;return Array.isArray(t)?t.includes({...n,...l}[s]):{...n,...l}[s]===t})?[...e,t,a]:e},[]);return xs(e,i,c,null==t?void 0:t.class,null==t?void 0:t.className)},fs=e=>{const s=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,t)=>t?t.toUpperCase():s.toLowerCase()))(e);return s.charAt(0).toUpperCase()+s.slice(1)},gs=(...e)=>e.filter((e,s,t)=>Boolean(e)&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim(),js=e=>{for(const s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0};
/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var vs={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=te.forwardRef(({color:e="currentColor",size:s=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:r="",children:n,iconNode:i,...l},c)=>te.createElement("svg",{ref:c,...vs,width:s,height:s,stroke:e,strokeWidth:a?24*Number(t)/Number(s):t,className:gs("lucide",r),...!n&&!js(l)&&{"aria-hidden":"true"},...l},[...i.map(([e,s])=>te.createElement(e,s)),...Array.isArray(n)?n:[n]])),ws=(e,s)=>{const t=te.forwardRef(({className:t,...a},r)=>{return te.createElement(ys,{ref:r,iconNode:s,className:gs(`lucide-${n=fs(e),n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,t),...a});var n});return t.displayName=fs(e),t},Ns=ws("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),bs=ws("arrow-left-right",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),_s=ws("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Ss=ws("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ks=ws("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),Cs=ws("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Ts=ws("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Es=ws("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Ps=ws("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Rs=ws("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Ds=ws("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Fs=ws("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ms=ws("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Is=ws("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),As=ws("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),$s=ws("cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]),Ls=ws("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),zs=ws("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Os=ws("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Bs=ws("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),qs=ws("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Ws=ws("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Us=ws("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Hs=ws("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),Vs=ws("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Ys=ws("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Ks=ws("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Js=ws("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Gs=ws("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Xs=ws("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Qs=ws("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Zs=ws("maximize-2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),et=ws("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),st=ws("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),tt=ws("minimize-2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),at=ws("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),rt=ws("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),nt=ws("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),it=ws("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),lt=ws("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ct=ws("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ot=ws("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),dt=ws("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),mt=ws("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),ut=ws("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),ht=ws("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),xt=ws("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),pt=ws("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),ft=ws("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),gt=ws("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),jt=ws("swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]),vt=ws("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),yt=ws("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),wt=ws("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Nt=ws("trending-down",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),bt=ws("trending-up",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),_t=ws("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),St=ws("trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),kt=ws("user-check",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Ct=ws("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Tt=ws("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Et=ws("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Pt=ws("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Rt=e=>{const s=It(e),{conflictingClassGroups:t,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:e=>{const t=e.split("-");return""===t[0]&&1!==t.length&&t.shift(),Dt(t,s)||Mt(e)},getConflictingClassGroupIds:(e,s)=>{const r=t[e]||[];return s&&a[e]?[...r,...a[e]]:r}}},Dt=(e,s)=>{var t;if(0===e.length)return s.classGroupId;const a=e[0],r=s.nextPart.get(a),n=r?Dt(e.slice(1),r):void 0;if(n)return n;if(0===s.validators.length)return;const i=e.join("-");return null==(t=s.validators.find(({validator:e})=>e(i)))?void 0:t.classGroupId},Ft=/^\[(.+)\]$/,Mt=e=>{if(Ft.test(e)){const s=Ft.exec(e)[1],t=null==s?void 0:s.substring(0,s.indexOf(":"));if(t)return"arbitrary.."+t}},It=e=>{const{theme:s,prefix:t}=e,a={nextPart:new Map,validators:[]};return zt(Object.entries(e.classGroups),t).forEach(([e,t])=>{At(t,a,e,s)}),a},At=(e,s,t,a)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?s:$t(s,e)).classGroupId=t)}if("function"==typeof e)return Lt(e)?void At(e(a),s,t,a):void s.validators.push({validator:e,classGroupId:t});Object.entries(e).forEach(([e,r])=>{At(r,$t(s,e),t,a)})})},$t=(e,s)=>{let t=e;return s.split("-").forEach(e=>{t.nextPart.has(e)||t.nextPart.set(e,{nextPart:new Map,validators:[]}),t=t.nextPart.get(e)}),t},Lt=e=>e.isThemeGetter,zt=(e,s)=>s?e.map(([e,t])=>[e,t.map(e=>"string"==typeof e?s+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,t])=>[s+e,t])):e)]):e,Ot=e=>{if(e<1)return{get:()=>{},set:()=>{}};let s=0,t=new Map,a=new Map;const r=(r,n)=>{t.set(r,n),s++,s>e&&(s=0,a=t,t=new Map)};return{get(e){let s=t.get(e);return void 0!==s?s:void 0!==(s=a.get(e))?(r(e,s),s):void 0},set(e,s){t.has(e)?t.set(e,s):r(e,s)}}},Bt=e=>{const{separator:s,experimentalParseClassName:t}=e,a=1===s.length,r=s[0],n=s.length,i=e=>{const t=[];let i,l=0,c=0;for(let m=0;m<e.length;m++){let o=e[m];if(0===l){if(o===r&&(a||e.slice(m,m+n)===s)){t.push(e.slice(c,m)),c=m+n;continue}if("/"===o){i=m;continue}}"["===o?l++:"]"===o&&l--}const o=0===t.length?e:e.substring(c),d=o.startsWith("!");return{modifiers:t,hasImportantModifier:d,baseClassName:d?o.substring(1):o,maybePostfixModifierPosition:i&&i>c?i-c:void 0}};return t?e=>t({className:e,parseClassName:i}):i},qt=e=>{if(e.length<=1)return e;const s=[];let t=[];return e.forEach(e=>{"["===e[0]?(s.push(...t.sort(),e),t=[]):t.push(e)}),s.push(...t.sort()),s},Wt=/\s+/;
/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Ut(){let e,s,t=0,a="";for(;t<arguments.length;)(e=arguments[t++])&&(s=Ht(e))&&(a&&(a+=" "),a+=s);return a}const Ht=e=>{if("string"==typeof e)return e;let s,t="";for(let a=0;a<e.length;a++)e[a]&&(s=Ht(e[a]))&&(t&&(t+=" "),t+=s);return t};function Vt(e,...s){let t,a,r,n=function(l){const c=s.reduce((e,s)=>s(e),e());return t=(e=>({cache:Ot(e.cacheSize),parseClassName:Bt(e),...Rt(e)}))(c),a=t.cache.get,r=t.cache.set,n=i,i(l)};function i(e){const s=a(e);if(s)return s;const n=((e,s)=>{const{parseClassName:t,getClassGroupId:a,getConflictingClassGroupIds:r}=s,n=[],i=e.trim().split(Wt);let l="";for(let c=i.length-1;c>=0;c-=1){const e=i[c],{modifiers:s,hasImportantModifier:o,baseClassName:d,maybePostfixModifierPosition:m}=t(e);let u=Boolean(m),h=a(u?d.substring(0,m):d);if(!h){if(!u){l=e+(l.length>0?" "+l:l);continue}if(h=a(d),!h){l=e+(l.length>0?" "+l:l);continue}u=!1}const x=qt(s).join(":"),p=o?x+"!":x,f=p+h;if(n.includes(f))continue;n.push(f);const g=r(h,u);for(let t=0;t<g.length;++t){const e=g[t];n.push(p+e)}l=e+(l.length>0?" "+l:l)}return l})(e,t);return r(e,n),n}return function(){return n(Ut.apply(null,arguments))}}const Yt=e=>{const s=s=>s[e]||[];return s.isThemeGetter=!0,s},Kt=/^\[(?:([a-z-]+):)?(.+)\]$/i,Jt=/^\d+\/\d+$/,Gt=new Set(["px","full","screen"]),Xt=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Qt=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Zt=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ea=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,sa=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ta=e=>ra(e)||Gt.has(e)||Jt.test(e),aa=e=>ga(e,"length",ja),ra=e=>Boolean(e)&&!Number.isNaN(Number(e)),na=e=>ga(e,"number",ra),ia=e=>Boolean(e)&&Number.isInteger(Number(e)),la=e=>e.endsWith("%")&&ra(e.slice(0,-1)),ca=e=>Kt.test(e),oa=e=>Xt.test(e),da=new Set(["length","size","percentage"]),ma=e=>ga(e,da,va),ua=e=>ga(e,"position",va),ha=new Set(["image","url"]),xa=e=>ga(e,ha,wa),pa=e=>ga(e,"",ya),fa=()=>!0,ga=(e,s,t)=>{const a=Kt.exec(e);return!!a&&(a[1]?"string"==typeof s?a[1]===s:s.has(a[1]):t(a[2]))},ja=e=>Qt.test(e)&&!Zt.test(e),va=()=>!1,ya=e=>ea.test(e),wa=e=>sa.test(e),Na=Vt(()=>{const e=Yt("colors"),s=Yt("spacing"),t=Yt("blur"),a=Yt("brightness"),r=Yt("borderColor"),n=Yt("borderRadius"),i=Yt("borderSpacing"),l=Yt("borderWidth"),c=Yt("contrast"),o=Yt("grayscale"),d=Yt("hueRotate"),m=Yt("invert"),u=Yt("gap"),h=Yt("gradientColorStops"),x=Yt("gradientColorStopPositions"),p=Yt("inset"),f=Yt("margin"),g=Yt("opacity"),j=Yt("padding"),v=Yt("saturate"),y=Yt("scale"),w=Yt("sepia"),N=Yt("skew"),b=Yt("space"),_=Yt("translate"),S=()=>["auto",ca,s],k=()=>[ca,s],C=()=>["",ta,aa],T=()=>["auto",ra,ca],E=()=>["","0",ca],P=()=>[ra,ca];return{cacheSize:500,separator:":",theme:{colors:[fa],spacing:[ta,aa],blur:["none","",oa,ca],brightness:P(),borderColor:[e],borderRadius:["none","","full",oa,ca],borderSpacing:k(),borderWidth:C(),contrast:P(),grayscale:E(),hueRotate:P(),invert:E(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[la,aa],inset:S(),margin:S(),opacity:P(),padding:k(),saturate:P(),scale:P(),sepia:E(),skew:P(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",ca]}],container:["container"],columns:[{columns:[oa]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",ca]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ia,ca]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ca]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",ia,ca]}],"grid-cols":[{"grid-cols":[fa]}],"col-start-end":[{col:["auto",{span:["full",ia,ca]},ca]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[fa]}],"row-start-end":[{row:["auto",{span:[ia,ca]},ca]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ca]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ca]}],gap:[{gap:[u]}],"gap-x":[{"gap-x":[u]}],"gap-y":[{"gap-y":[u]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[f]}],mx:[{mx:[f]}],my:[{my:[f]}],ms:[{ms:[f]}],me:[{me:[f]}],mt:[{mt:[f]}],mr:[{mr:[f]}],mb:[{mb:[f]}],ml:[{ml:[f]}],"space-x":[{"space-x":[b]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[b]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ca,s]}],"min-w":[{"min-w":[ca,s,"min","max","fit"]}],"max-w":[{"max-w":[ca,s,"none","full","min","max","fit","prose",{screen:[oa]},oa]}],h:[{h:[ca,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ca,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ca,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ca,s,"auto","min","max","fit"]}],"font-size":[{text:["base",oa,aa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",na]}],"font-family":[{font:[fa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ca]}],"line-clamp":[{"line-clamp":["none",ra,na]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ta,ca]}],"list-image":[{"list-image":["none",ca]}],"list-style-type":[{list:["none","disc","decimal",ca]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ta,aa]}],"underline-offset":[{"underline-offset":["auto",ta,ca]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ca]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ca]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",ua]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ma]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},xa]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[n]}],"rounded-s":[{"rounded-s":[n]}],"rounded-e":[{"rounded-e":[n]}],"rounded-t":[{"rounded-t":[n]}],"rounded-r":[{"rounded-r":[n]}],"rounded-b":[{"rounded-b":[n]}],"rounded-l":[{"rounded-l":[n]}],"rounded-ss":[{"rounded-ss":[n]}],"rounded-se":[{"rounded-se":[n]}],"rounded-ee":[{"rounded-ee":[n]}],"rounded-es":[{"rounded-es":[n]}],"rounded-tl":[{"rounded-tl":[n]}],"rounded-tr":[{"rounded-tr":[n]}],"rounded-br":[{"rounded-br":[n]}],"rounded-bl":[{"rounded-bl":[n]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[ta,ca]}],"outline-w":[{outline:[ta,aa]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[ta,aa]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",oa,pa]}],"shadow-color":[{shadow:[fa]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[a]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",oa,ca]}],grayscale:[{grayscale:[o]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[m]}],saturate:[{saturate:[v]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[o]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ca]}],duration:[{duration:P()}],ease:[{ease:["linear","in","out","in-out",ca]}],delay:[{delay:P()}],animate:[{animate:["none","spin","ping","pulse","bounce",ca]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[y]}],"scale-x":[{"scale-x":[y]}],"scale-y":[{"scale-y":[y]}],rotate:[{rotate:[ia,ca]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ca]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ca]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ca]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ta,aa,na]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function ba(...e){return Na(us(e))}const _a=rs,Sa=te.forwardRef(({className:e,...s},t)=>i.jsx(ns,{ref:t,className:ba("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...s}));Sa.displayName=ns.displayName;const ka=ps("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ca=te.forwardRef(({className:e,variant:s,...t},a)=>i.jsx(is,{ref:a,className:ba(ka({variant:s}),e),...t}));Ca.displayName=is.displayName;te.forwardRef(({className:e,...s},t)=>i.jsx(os,{ref:t,className:ba("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...s})).displayName=os.displayName;const Ta=te.forwardRef(({className:e,...s},t)=>i.jsx(ds,{ref:t,className:ba("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...s,children:i.jsx(Et,{className:"h-4 w-4"})}));Ta.displayName=ds.displayName;const Ea=te.forwardRef(({className:e,...s},t)=>i.jsx(ls,{ref:t,className:ba("text-sm font-semibold [&+div]:text-xs",e),...s}));Ea.displayName=ls.displayName;const Pa=te.forwardRef(({className:e,...s},t)=>i.jsx(cs,{ref:t,className:ba("text-sm opacity-90",e),...s}));function Ra(){const{toasts:e}=_e();return i.jsxs(_a,{children:[e.map(function({id:e,title:s,description:t,action:a,...r}){return i.jsxs(Ca,{...r,children:[i.jsxs("div",{className:"grid gap-1",children:[s&&i.jsx(Ea,{children:s}),t&&i.jsx(Pa,{children:t})]}),a,i.jsx(Ta,{})]},e)}),i.jsx(Sa,{})]})}Pa.displayName=cs.displayName;var[Da,Fa]=a("Tooltip",[j]),Ma=j(),Ia="TooltipProvider",Aa=700,$a="tooltip.open",[La,za]=Da(Ia),Oa=e=>{const{__scopeTooltip:s,delayDuration:t=Aa,skipDelayDuration:a=300,disableHoverableContent:r=!1,children:n}=e,l=te.useRef(!0),c=te.useRef(!1),o=te.useRef(0);return te.useEffect(()=>{const e=o.current;return()=>window.clearTimeout(e)},[]),i.jsx(La,{scope:s,isOpenDelayedRef:l,delayDuration:t,onOpen:te.useCallback(()=>{window.clearTimeout(o.current),l.current=!1},[]),onClose:te.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(()=>l.current=!0,a)},[a]),isPointerInTransitRef:c,onPointerInTransitChange:te.useCallback(e=>{c.current=e},[]),disableHoverableContent:r,children:n})};Oa.displayName=Ia;var Ba="Tooltip",[qa,Wa]=Da(Ba),Ua="TooltipTrigger";te.forwardRef((e,s)=>{const{__scopeTooltip:t,...a}=e,r=Wa(Ua,t),l=za(Ua,t),o=Ma(t),d=te.useRef(null),u=n(s,d,r.onTriggerChange),h=te.useRef(!1),x=te.useRef(!1),p=te.useCallback(()=>h.current=!1,[]);return te.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),i.jsx(b,{asChild:!0,...o,children:i.jsx(c.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...a,ref:u,onPointerMove:m(e.onPointerMove,e=>{"touch"!==e.pointerType&&(x.current||l.isPointerInTransitRef.current||(r.onTriggerEnter(),x.current=!0))}),onPointerLeave:m(e.onPointerLeave,()=>{r.onTriggerLeave(),x.current=!1}),onPointerDown:m(e.onPointerDown,()=>{r.open&&r.onClose(),h.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:m(e.onFocus,()=>{h.current||r.onOpen()}),onBlur:m(e.onBlur,r.onClose),onClick:m(e.onClick,r.onClose)})})}).displayName=Ua;var Ha="TooltipPortal",[Va,Ya]=Da(Ha,{forceMount:void 0}),Ka=e=>{const{__scopeTooltip:s,forceMount:t,children:a,container:r}=e,n=Wa(Ha,s);return i.jsx(Va,{scope:s,forceMount:t,children:i.jsx(d,{present:t||n.open,children:i.jsx(p,{asChild:!0,container:r,children:a})})})};Ka.displayName=Ha;var Ja="TooltipContent",Ga=te.forwardRef((e,s)=>{const t=Ya(Ja,e.__scopeTooltip),{forceMount:a=t.forceMount,side:r="top",...n}=e,l=Wa(Ja,e.__scopeTooltip);return i.jsx(d,{present:a||l.open,children:l.disableHoverableContent?i.jsx(sr,{side:r,...n,ref:s}):i.jsx(Xa,{side:r,...n,ref:s})})}),Xa=te.forwardRef((e,s)=>{const t=Wa(Ja,e.__scopeTooltip),a=za(Ja,e.__scopeTooltip),r=te.useRef(null),l=n(s,r),[c,o]=te.useState(null),{trigger:d,onClose:m}=t,u=r.current,{onPointerInTransitChange:h}=a,x=te.useCallback(()=>{o(null),h(!1)},[h]),p=te.useCallback((e,s)=>{const t=e.currentTarget,a={x:e.clientX,y:e.clientY},r=function(e,s,t=5){const a=[];switch(s){case"top":a.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":a.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":a.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":a.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t})}return a}(a,function(e,s){const t=Math.abs(s.top-e.y),a=Math.abs(s.bottom-e.y),r=Math.abs(s.right-e.x),n=Math.abs(s.left-e.x);switch(Math.min(t,a,r,n)){case n:return"left";case r:return"right";case t:return"top";case a:return"bottom";default:throw new Error("unreachable")}}(a,t.getBoundingClientRect())),n=function(e){const s=e.slice();return s.sort((e,s)=>e.x<s.x?-1:e.x>s.x?1:e.y<s.y?-1:e.y>s.y?1:0),function(e){if(e.length<=1)return e.slice();const s=[];for(let a=0;a<e.length;a++){const t=e[a];for(;s.length>=2;){const e=s[s.length-1],a=s[s.length-2];if(!((e.x-a.x)*(t.y-a.y)>=(e.y-a.y)*(t.x-a.x)))break;s.pop()}s.push(t)}s.pop();const t=[];for(let a=e.length-1;a>=0;a--){const s=e[a];for(;t.length>=2;){const e=t[t.length-1],a=t[t.length-2];if(!((e.x-a.x)*(s.y-a.y)>=(e.y-a.y)*(s.x-a.x)))break;t.pop()}t.push(s)}return t.pop(),1===s.length&&1===t.length&&s[0].x===t[0].x&&s[0].y===t[0].y?s:s.concat(t)}(s)}([...r,...function(e){const{top:s,right:t,bottom:a,left:r}=e;return[{x:r,y:s},{x:t,y:s},{x:t,y:a},{x:r,y:a}]}(s.getBoundingClientRect())]);o(n),h(!0)},[h]);return te.useEffect(()=>()=>x(),[x]),te.useEffect(()=>{if(d&&u){const e=e=>p(e,u),s=e=>p(e,d);return d.addEventListener("pointerleave",e),u.addEventListener("pointerleave",s),()=>{d.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",s)}}},[d,u,p,x]),te.useEffect(()=>{if(c){const e=e=>{const s=e.target,t={x:e.clientX,y:e.clientY},a=(null==d?void 0:d.contains(s))||(null==u?void 0:u.contains(s)),r=!function(e,s){const{x:t,y:a}=e;let r=!1;for(let n=0,i=s.length-1;n<s.length;i=n++){const e=s[n],l=s[i],c=e.x,o=e.y,d=l.x,m=l.y;o>a!=m>a&&t<(d-c)*(a-o)/(m-o)+c&&(r=!r)}return r}(t,c);a?x():r&&(x(),m())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[d,u,c,m,x]),i.jsx(sr,{...e,ref:l})}),[Qa,Za]=Da(Ba,{isInside:!1}),er=w("TooltipContent"),sr=te.forwardRef((e,s)=>{const{__scopeTooltip:t,children:a,"aria-label":r,onEscapeKeyDown:n,onPointerDownOutside:l,...c}=e,o=Wa(Ja,t),d=Ma(t),{onClose:m}=o;return te.useEffect(()=>(document.addEventListener($a,m),()=>document.removeEventListener($a,m)),[m]),te.useEffect(()=>{if(o.trigger){const e=e=>{const s=e.target;(null==s?void 0:s.contains(o.trigger))&&m()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[o.trigger,m]),i.jsx(v,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:n,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:m,children:i.jsxs(y,{"data-state":o.stateAttribute,...d,...c,ref:s,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(er,{children:a}),i.jsx(Qa,{scope:t,isInside:!0,children:i.jsx(N,{id:o.contentId,role:"tooltip",children:r||a})})]})})});Ga.displayName=Ja;var tr="TooltipArrow";te.forwardRef((e,s)=>{const{__scopeTooltip:t,...a}=e,r=Ma(t);return Za(tr,t).isInside?null:i.jsx(_,{...r,...a,ref:s})}).displayName=tr;var ar=Ka,rr=Ga;const nr=Oa;te.forwardRef(({className:e,sideOffset:s=4,...t},a)=>i.jsx(ar,{children:i.jsx(rr,{ref:a,sideOffset:s,className:ba("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...t})})).displayName=rr.displayName;const ir=he("https://pmtssnzfepkcqpziknbz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBtdHNzbnpmZXBrY3FwemlrbmJ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwMzQ5MDQsImV4cCI6MjA2NzYxMDkwNH0.KNIFrGxC-XaJFzN0m69NX85bMQR2XgCj0JDxfbPcHS0"),lr="seasons",cr="conferences",or="teams",dr="team_conference_junction",mr="matchups",ur="team_records",hr="players",xr="draft_results",pr="matchup_admin_override",fr="playoff_brackets",gr="playoff_formats",jr="transactions";class vr{static async queryTable(e,s={}){try{let t=ir.from(e).select("*",{count:"exact"});s.filters&&s.filters.forEach(e=>{t=this.applyFilter(t,e)}),s.orderBy&&(t=t.order(s.orderBy.column,{ascending:s.orderBy.ascending})),s.limit&&(t=t.limit(s.limit)),s.offset&&(t=t.range(s.offset,s.offset+(s.limit||100)-1));const{data:a,error:r,count:n}=await t;return r?{data:[],error:r}:{data:a||[],count:n||0}}catch(t){return{data:[],error:t}}}static async createRecord(e,s){try{const{data:t,error:a}=await ir.from(e).insert(s).select().single();return a?{data:null,error:a}:{data:t,error:null}}catch(t){return{data:null,error:t}}}static async updateRecord(e,s,t){try{const{data:a,error:r}=await ir.from(e).update(t).eq("id",s).select().single();return r?{data:null,error:r}:{data:a,error:null}}catch(a){return{data:null,error:a}}}static async deleteRecord(e,s){try{const{error:t}=await ir.from(e).delete().eq("id",s);return t?{error:t}:{error:null}}catch(t){return{error:t}}}static applyFilter(e,s){const{column:t,operator:a,value:r}=s;switch(a){case"eq":return e.eq(t,r);case"neq":return e.neq(t,r);case"gt":return e.gt(t,r);case"gte":return e.gte(t,r);case"lt":return e.lt(t,r);case"lte":return e.lte(t,r);case"like":return e.like(t,r);case"ilike":return e.ilike(t,r);case"in":return e.in(t,r);case"is":return e.is(t,r);case"not":return e.not(t,r);default:return e}}static async getSeasons(e){return this.queryTable(lr,e)}static async createSeason(e){return this.createRecord(lr,e)}static async updateSeason(e,s){return this.updateRecord(lr,e,s)}static async updateSeasonScoringSettings(e){try{const{data:s}=await this.getConferences({filters:[{column:"season_id",operator:"eq",value:e}]});if(!s||0===s.length)return{success:!1,error:"No conferences found for this season"};const t=s[0],a=(await xe(async()=>{const{SleeperApiService:e}=await Promise.resolve().then(()=>nn);return{SleeperApiService:e}},void 0)).SleeperApiService,r=await a.fetchLeague(t.league_id);if(!r.scoring_settings)return{success:!1,error:"No scoring settings found in league data"};const{error:n}=await this.updateSeason(e,{scoring_settings:r.scoring_settings});return n?{success:!1,error:n}:{success:!0}}catch(s){return{success:!1,error:s}}}static async updateSeasonRosterPositions(e){try{const{data:s}=await this.getConferences({filters:[{column:"season_id",operator:"eq",value:e}]});if(!s||0===s.length)return{success:!1,error:"No conferences found for this season"};const t=s[0],a=(await xe(async()=>{const{SleeperApiService:e}=await Promise.resolve().then(()=>nn);return{SleeperApiService:e}},void 0)).SleeperApiService,r=await a.fetchLeague(t.league_id);if(!r.roster_positions)return{success:!1,error:"No roster positions found in league data"};const{error:n}=await this.updateSeason(e,{roster_positions:r.roster_positions});return n?{success:!1,error:n}:{success:!0}}catch(s){return{success:!1,error:s}}}static async getConferences(e){return this.queryTable(cr,e)}static async createConference(e){return this.createRecord(cr,e)}static async updateConference(e,s){return this.updateRecord(cr,e,s)}static async getTeams(e){return this.queryTable(or,e)}static async createTeam(e){return this.createRecord(or,e)}static async updateTeam(e,s){return this.updateRecord(or,e,s)}static async getTeamConferenceJunctions(e){return this.queryTable(dr,e)}static async createTeamConferenceJunction(e){return this.createRecord(dr,e)}static async getMatchups(e){return this.queryTable(mr,e)}static async createMatchup(e){return this.createRecord(mr,e)}static async updateMatchup(e,s){return this.updateRecord(mr,e,s)}static async getTeamRecords(e){return this.queryTable(ur,e)}static async createTeamRecord(e){return this.createRecord(ur,e)}static async updateTeamRecord(e,s){return this.updateRecord(ur,e,s)}static async deleteTeamRecord(e){return this.deleteRecord(ur,e)}static async getPlayers(e){try{let s=ir.from(hr).select("*",{count:"exact"});(null==e?void 0:e.filters)&&e.filters.forEach(e=>{s=this.applyFilter(s,e)}),(null==e?void 0:e.orderBy)&&(s=s.order(e.orderBy.column,{ascending:e.orderBy.ascending})),s=s.range(0,14999);const{data:t,error:a,count:r}=await s;return a?{data:[],error:a}:{data:t||[],count:r||0}}catch(s){return{data:[],error:s}}}static async createPlayer(e){return this.createRecord(hr,e)}static async updatePlayer(e,s){return this.updateRecord(hr,e,s)}static async getAllPlayersForMapping(e){try{const s=[],t=1e3;let a=0,r=!0;for(;r;){let n=ir.from(hr).select("*");e&&e.forEach(e=>{n=this.applyFilter(n,e)}),n=n.order("sleeper_id",{ascending:!0}),n=n.range(a,a+t-1);const{data:i,error:l}=await n;if(l)throw l;i&&i.length>0?(s.push(...i),i.length<t?r=!1:a+=t):r=!1}return s}catch(s){throw s}}static async getPlayersAsSleeperFormat(){try{const e=await this.getPlayers();if(!e.data)throw new Error("Failed to fetch players from database");const s={};return e.data.forEach(e=>{var t;if(e.sleeper_id){const a=e.player_name.split(" "),r=a[0]||"",n=a.slice(1).join(" ")||"";s[e.sleeper_id]={player_id:e.sleeper_id,first_name:r,last_name:n,position:e.position||"",team:e.nfl_team||"",jersey_number:e.number||0,status:e.playing_status||"",injury_status:e.injury_status||"",age:e.age||0,height:(null==(t=e.height)?void 0:t.toString())||"",weight:e.weight||0,years_exp:0,college:e.college||""}}}),s}catch(e){throw e}}static async getDraftResults(e){return this.queryTable(xr,e)}static async createDraftResult(e){return this.createRecord(xr,e)}static async getMatchupAdminOverrides(e){return this.queryTable(pr,e)}static async createMatchupAdminOverride(e){return this.createRecord(pr,e)}static async updateMatchupAdminOverride(e,s){return this.updateRecord(pr,e,s)}static async deleteMatchupAdminOverride(e){return this.deleteRecord(pr,e)}static async getTransactions(e){return this.queryTable(jr,e)}static async createTransaction(e){return this.createRecord(jr,e)}static async getPlayoffBrackets(e){return this.queryTable(fr,e)}static async createPlayoffBracket(e){return this.createRecord(fr,e)}static async updatePlayoffBracket(e,s){return this.updateRecord(fr,e,s)}static async getPlayoffFormats(e){return this.queryTable(gr,e)}static async createPlayoffFormat(e){return this.createRecord(gr,e)}static async updatePlayoffFormat(e,s){return this.updateRecord(gr,e,s)}}const yr=Object.freeze(Object.defineProperty({__proto__:null,DatabaseService:vr},Symbol.toStringTag,{value:"Module"})),wr=te.createContext(void 0),Nr=({children:e})=>{const[s,t]=te.useState(2025),[a,r]=te.useState(null),[n,l]=te.useState("light"),[c,o]=te.useState([]),[d,m]=te.useState(!0),[u,h]=te.useState(null),x=async()=>{try{m(!0),h(null);const e=await vr.getSeasons({orderBy:{column:"season_year",ascending:!1}});if(e.error)throw new Error(e.error);const a=e.data||[],r=await vr.getConferences();if(r.error)throw new Error(r.error);const n=r.data||[],i=a.map(e=>{const s=n.filter(s=>s.season_id===e.id).map(e=>({id:e.conference_name.toLowerCase().replace(/[^a-z0-9]/g,""),name:e.conference_name,leagueId:e.league_id,status:e.status,seasonId:e.season_id,dbConferenceId:e.id}));return{year:parseInt(e.season_year),conferences:s,seasonId:e.id,isCurrent:e.is_current}});o(i);const l=i.find(e=>e.isCurrent);l&&s!==l.year&&t(l.year)}catch(e){h(e instanceof Error?e.message:"Failed to load season data"),o([{year:2024,conferences:[{id:"mars",name:"The Legions of Mars",leagueId:"1072580179844857856"},{id:"jupiter",name:"The Guardians of Jupiter",leagueId:"1072593839715667968"},{id:"vulcan",name:"Vulcan's Oathsworn",leagueId:"1072593416955015168"}]},{year:2025,conferences:[{id:"mars",name:"The Legions of Mars",leagueId:"1204854057169072128"},{id:"jupiter",name:"The Guardians of Jupiter",leagueId:"1204857692007440384"},{id:"vulcan",name:"Vulcan's Oathsworn",leagueId:"1204857608989577216"}]}])}finally{m(!1)}};te.useEffect(()=>{x()},[]);const p=c.find(e=>e.year===s)||c.find(e=>e.isCurrent)||c[0]||{year:s,conferences:[]},f={selectedSeason:s,selectedConference:a,theme:n,setSelectedSeason:t,setSelectedConference:r,toggleTheme:()=>{l(e=>"light"===e?"dark":"light")},seasonConfigs:c,currentSeasonConfig:p,loading:d,error:u,refreshSeasonData:x};return i.jsx(wr.Provider,{value:f,children:i.jsx("div",{className:n,children:e})})},br=()=>{const e=te.useContext(wr);if(!e)throw new Error("useApp must be used within an AppProvider");return e},_r=ps("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Sr=te.forwardRef(({className:e,variant:s,size:t,asChild:a=!1,...r},n)=>{const l=a?S:"button";return i.jsx(l,{className:ba(_r({variant:s,size:t,className:e})),ref:n,...r})});Sr.displayName="Button";const kr=D,Cr=F,Tr=C,Er=te.forwardRef(({className:e,...s},t)=>i.jsx(k,{className:ba("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:t}));Er.displayName=k.displayName;const Pr=ps("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Rr=te.forwardRef(({side:e="right",className:s,children:t,...a},r)=>i.jsxs(Tr,{children:[i.jsx(Er,{}),i.jsxs(T,{ref:r,className:ba(Pr({side:e}),s),...a,children:[i.jsxs(E,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[i.jsx(Et,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]}),t]})]}));Rr.displayName=T.displayName;te.forwardRef(({className:e,...s},t)=>i.jsx(P,{ref:t,className:ba("text-lg font-semibold text-foreground",e),...s})).displayName=P.displayName;te.forwardRef(({className:e,...s},t)=>i.jsx(R,{ref:t,className:ba("text-sm text-muted-foreground",e),...s})).displayName=R.displayName;const Dr=V,Fr=Y,Mr=te.forwardRef(({className:e,children:s,...t},a)=>i.jsxs(M,{ref:a,className:ba("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,i.jsx(I,{asChild:!0,children:i.jsx(Rs,{className:"h-4 w-4 opacity-50"})})]}));Mr.displayName=M.displayName;const Ir=te.forwardRef(({className:e,...s},t)=>i.jsx(A,{ref:t,className:ba("flex cursor-default items-center justify-center py-1",e),...s,children:i.jsx(Ds,{className:"h-4 w-4"})}));Ir.displayName=A.displayName;const Ar=te.forwardRef(({className:e,...s},t)=>i.jsx($,{ref:t,className:ba("flex cursor-default items-center justify-center py-1",e),...s,children:i.jsx(Rs,{className:"h-4 w-4"})}));Ar.displayName=$.displayName;const $r=te.forwardRef(({className:e,children:s,position:t="popper",...a},r)=>i.jsx(L,{children:i.jsxs(z,{ref:r,className:ba("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...a,children:[i.jsx(Ir,{}),i.jsx(O,{className:ba("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),i.jsx(Ar,{})]})}));$r.displayName=z.displayName;te.forwardRef(({className:e,...s},t)=>i.jsx(B,{ref:t,className:ba("px-2 py-1.5 text-sm font-semibold",e),...s})).displayName=B.displayName;const Lr=te.forwardRef(({className:e,children:s,...t},a)=>i.jsxs(q,{ref:a,className:ba("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[i.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(W,{children:i.jsx(Ps,{className:"h-4 w-4"})})}),i.jsx(U,{children:s})]}));Lr.displayName=q.displayName;te.forwardRef(({className:e,...s},t)=>i.jsx(H,{ref:t,className:ba("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=H.displayName;const zr=ps("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Or({className:e,variant:s,...t}){return i.jsx("div",{className:ba(zr({variant:s}),e),...t})}const Br=()=>{var e;const[s,t]=te.useState(!1),a=ae(),{selectedSeason:r,selectedConference:n,theme:l,setSelectedSeason:c,setSelectedConference:o,toggleTheme:d,seasonConfigs:m,currentSeasonConfig:u}=br(),h=[{path:"/",label:"Home",icon:Ks},{path:"/standings",label:"Standings",icon:St},{path:"/matchups",label:"Matchups",icon:jt},{path:"/teams",label:"Teams",icon:Tt},{path:"/players",label:"Players",icon:kt},{path:"/draft",label:"Draft Results",icon:xt},{path:"/rules",label:"League Rules",icon:Us},{path:"/admin",label:"Admin",icon:$s}],x=({isMobile:e=!1})=>i.jsx(i.Fragment,{children:h.map(s=>{const r=s.icon,n="/"===(l=s.path)?"/"===a.pathname:a.pathname.startsWith(l);var l;return i.jsxs(re,{to:s.path,onClick:()=>e&&t(!1),className:`flex items-center space-x-2 px-3 py-2 rounded-md ${"/admin"===s.path?"text-xs opacity-75":"text-sm"} font-medium transition-colors ${n?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,children:[i.jsx(r,{className:"/admin"===s.path?"h-3 w-3":"h-4 w-4"}),i.jsx("span",{className:"/admin"===s.path?"text-xs":"",children:s.label})]},s.path)})});return i.jsxs("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[i.jsxs("div",{className:"container flex h-16 items-center justify-between",children:[i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs(re,{to:"/",className:"flex items-center space-x-2",children:[i.jsx("img",{src:"/gladiator-logo.png",alt:"Gladiator League Logo",className:"h-8 w-8"}),i.jsx("div",{className:"hidden sm:block",children:i.jsx("h1",{className:"text-xl font-bold",children:"Gladiator League"})})]})}),i.jsx("nav",{className:"hidden lg:flex items-center space-x-1",children:i.jsx(x,{})}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(Dr,{value:r.toString(),onValueChange:e=>c(parseInt(e)),children:[i.jsx(Mr,{className:"w-20",children:i.jsx(Fr,{})}),i.jsx($r,{children:m.map(e=>i.jsx(Lr,{value:e.year.toString(),children:e.year},e.year))})]}),i.jsxs(Dr,{value:n||"all",onValueChange:e=>o("all"===e?null:e),children:[i.jsx(Mr,{className:"w-40",children:i.jsx(Fr,{})}),i.jsxs($r,{children:[i.jsx(Lr,{value:"all",children:"All Conferences"}),u.conferences.map(e=>i.jsx(Lr,{value:e.id,children:e.name},e.id))]})]}),i.jsx(Sr,{variant:"ghost",size:"icon",onClick:d,children:"light"===l?i.jsx(rt,{className:"h-4 w-4"}):i.jsx(gt,{className:"h-4 w-4"})}),i.jsxs(kr,{open:s,onOpenChange:t,children:[i.jsx(Cr,{asChild:!0,className:"lg:hidden",children:i.jsx(Sr,{variant:"ghost",size:"icon",children:i.jsx(et,{className:"h-4 w-4"})})}),i.jsx(Rr,{side:"right",className:"w-64",children:i.jsxs("div",{className:"flex flex-col space-y-4 mt-8",children:[i.jsxs("div",{className:"flex items-center space-x-2 pb-4 border-b",children:[i.jsx(xt,{className:"h-6 w-6 text-primary"}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-semibold",children:"Gladiator League"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Fantasy Football"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Navigation"}),i.jsx(x,{isMobile:!0})]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"Season"}),i.jsxs(Dr,{value:r.toString(),onValueChange:e=>c(parseInt(e)),children:[i.jsx(Mr,{children:i.jsx(Fr,{})}),i.jsx($r,{children:m.map(e=>i.jsx(Lr,{value:e.year.toString(),children:e.year},e.year))})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"Conference"}),i.jsxs(Dr,{value:n||"all",onValueChange:e=>o("all"===e?null:e),children:[i.jsx(Mr,{children:i.jsx(Fr,{})}),i.jsxs($r,{children:[i.jsx(Lr,{value:"all",children:"All Conferences"}),u.conferences.map(e=>i.jsx(Lr,{value:e.id,children:e.name},e.id))]})]})]})]})]})})]})]})]}),(n||2025!==r)&&i.jsx("div",{className:"border-t bg-accent/50",children:i.jsx("div",{className:"container py-2",children:i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Active filters:"}),2025!==r&&i.jsxs(Or,{variant:"secondary",children:[r," Season"]}),n&&i.jsx(Or,{variant:"secondary",children:null==(e=u.conferences.find(e=>e.id===n))?void 0:e.name})]})})})]})},qr=te.forwardRef(({className:e,...s},t)=>i.jsx("div",{ref:t,className:ba("rounded-xl border bg-card text-card-foreground shadow",e),...s}));qr.displayName="Card";const Wr=te.forwardRef(({className:e,...s},t)=>i.jsx("div",{ref:t,className:ba("flex flex-col space-y-1.5 p-6",e),...s}));Wr.displayName="CardHeader";const Ur=te.forwardRef(({className:e,...s},t)=>i.jsx("div",{ref:t,className:ba("font-semibold leading-none tracking-tight",e),...s}));Ur.displayName="CardTitle";const Hr=te.forwardRef(({className:e,...s},t)=>i.jsx("div",{ref:t,className:ba("text-sm text-muted-foreground",e),...s}));Hr.displayName="CardDescription";const Vr=te.forwardRef(({className:e,...s},t)=>i.jsx("div",{ref:t,className:ba("p-6 pt-0",e),...s}));Vr.displayName="CardContent";te.forwardRef(({className:e,...s},t)=>i.jsx("div",{ref:t,className:ba("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter";const Yr=ps("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Kr=te.forwardRef(({className:e,variant:s,...t},a)=>i.jsx("div",{ref:a,role:"alert",className:ba(Yr({variant:s}),e),...t}));Kr.displayName="Alert";const Jr=te.forwardRef(({className:e,...s},t)=>i.jsx("h5",{ref:t,className:ba("mb-1 font-medium leading-none tracking-tight",e),...s}));Jr.displayName="AlertTitle";const Gr=te.forwardRef(({className:e,...s},t)=>i.jsx("div",{ref:t,className:ba("text-sm [&_p]:leading-relaxed",e),...s}));Gr.displayName="AlertDescription";var Xr="horizontal",Qr=["horizontal","vertical"],Zr=te.forwardRef((e,s)=>{const{decorative:t,orientation:a=Xr,...r}=e,n=function(e){return Qr.includes(e)}(a)?a:Xr,l=t?{role:"none"}:{"aria-orientation":"vertical"===n?n:void 0,role:"separator"};return i.jsx(c.div,{"data-orientation":n,...l,...r,ref:s})});Zr.displayName="Separator";var en=Zr;const sn=te.forwardRef(({className:e,orientation:s="horizontal",decorative:t=!0,...a},r)=>i.jsx(en,{ref:r,decorative:t,orientation:s,className:ba("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...a}));sn.displayName=en.displayName;class tn{static async getStandingsData(e,s){try{const t=[{column:"season_id",operator:"eq",value:e}];s&&t.push({column:"conference_id",operator:"eq",value:s});const a=await vr.getTeamRecords({filters:t});if(a.error)throw new Error(`Failed to fetch team records: ${a.error}`);const r=a.data||[];if(0===r.length)return[];const n=[...new Set(r.map(e=>e.team_id))],i=[...new Set(r.map(e=>e.conference_id))],[l,c]=await Promise.all([vr.getTeams({filters:[{column:"id",operator:"in",value:n}]}),vr.getConferences({filters:[{column:"id",operator:"in",value:i}]})]);if(l.error)throw new Error(`Failed to fetch teams: ${l.error}`);if(c.error)throw new Error(`Failed to fetch conferences: ${c.error}`);const o=l.data||[],d=c.data||[],m=new Map;o.forEach(e=>m.set(e.id,e));const u=new Map;d.forEach(e=>u.set(e.id,e));const h=r.map(e=>{const s=m.get(e.team_id),t=u.get(e.conference_id),a=e.wins||0,r=e.losses||0,n=a+r+0,i=n>0?a/n:0;return{team_id:e.team_id,team_name:(null==s?void 0:s.team_name)||`Team ${e.team_id}`,owner_name:(null==s?void 0:s.owner_name)||"Unknown Owner",conference_name:(null==t?void 0:t.conference_name)||"Unknown Conference",team_logourl:(null==s?void 0:s.team_logourl)||"",wins:a,losses:r,ties:0,points_for:e.points_for||0,points_against:e.points_against||0,point_diff:e.point_diff||(e.points_for||0)-(e.points_against||0),win_percentage:i,conference_rank:0,overall_rank:0,playoff_eligible:!1,is_conference_champion:!1}});h.sort((e,s)=>s.win_percentage!==e.win_percentage?s.win_percentage-e.win_percentage:s.points_for-e.points_for),h.forEach((e,s)=>{e.overall_rank=s+1});const x=new Map;return h.forEach(e=>{x.has(e.conference_name)||x.set(e.conference_name,[]),x.get(e.conference_name).push(e)}),x.forEach((e,s)=>{e.sort((e,s)=>s.win_percentage!==e.win_percentage?s.win_percentage-e.win_percentage:s.points_for-e.points_for),e.forEach((e,s)=>{e.conference_rank=s+1,e.playoff_eligible=s<2,e.is_conference_champion=0===s})}),h}catch(t){throw t}}static async getConferenceStandings(e,s){return this.getStandingsData(e,s)}static async getLeagueStandings(e){return this.getStandingsData(e)}static formatRecord(e,s,t=0){return t>0?`${e}-${s}-${t}`:`${e}-${s}`}static formatPoints(e){return e.toFixed(1)}}const an=["QB","RB","RB","WR","WR","WR","TE","FLEX","SUPER_FLEX","K","DEF"];class rn{static async fetchLeagueRosters(e){try{"undefined"!=typeof window&&(window.__apiCallCount=(window.__apiCallCount||0)+1);const s=await fetch(`${this.baseUrl}/league/${e}/rosters`);if(!s.ok)throw new Error(`Failed to fetch rosters: ${s.status} ${s.statusText}`);return await s.json()}catch(s){throw s}}static async fetchAllPlayers(){try{const e=await fetch(`${this.baseUrl}/players/nfl`);if(!e.ok)throw new Error(`Failed to fetch players: ${e.status} ${e.statusText}`);return await e.json()}catch(e){throw e}}static organizeRoster(e,s){return{starters:(e.starters||[]).map((e,t)=>{const a=s[e],r=an[t]||"BENCH";return{playerId:e,position:(null==a?void 0:a.position)||"UNK",slotPosition:r}}),bench:(e.players||[]).filter(s=>!(e.starters||[]).includes(s)&&!(e.reserve||[]).includes(s)),ir:e.reserve||[]}}static async getTeamRosterData(e,s){try{const[t,a]=await Promise.all([this.fetchLeagueRosters(e),(async()=>{const{DatabaseService:e}=await xe(async()=>{const{DatabaseService:e}=await Promise.resolve().then(()=>yr);return{DatabaseService:e}},void 0),s=await e.getAllPlayersForMapping([{column:"playing_status",operator:"eq",value:"Active"},{column:"position",operator:"in",value:["QB","RB","WR","TE","K","DEF"]}]),t={};return s.forEach(e=>{var s;if(e.sleeper_id){const a=e.player_name.split(" "),r=a[0]||"",n=a.slice(1).join(" ")||"";t[e.sleeper_id]={player_id:e.sleeper_id,first_name:r,last_name:n,position:e.position||"",team:e.nfl_team||"",jersey_number:e.number||0,status:e.playing_status||"",injury_status:e.injury_status||"",age:e.age||0,height:(null==(s=e.height)?void 0:s.toString())||"",weight:e.weight||0,years_exp:0,college:e.college||""}}}),t})()]),r=t.find(e=>e.roster_id===s);if(!r)throw new Error(`Roster with ID ${s} not found in league ${e}`);return{roster:r,organizedRoster:this.organizeRoster(r,a),allPlayers:a}}catch(t){throw t}}static getPlayerName(e){return e&&`${e.first_name||""} ${e.last_name||""}`.trim()||"Unknown Player"}static calculatePointsPerGame(e,s){return 0===s?0:e/s}static formatPoints(e,s=0){return e+s/100}static async fetchMatchups(e,s){try{"undefined"!=typeof window&&(window.__apiCallCount=(window.__apiCallCount||0)+1);const t=await fetch(`${this.baseUrl}/league/${e}/matchups/${s}`);if(!t.ok)throw new Error(`Failed to fetch matchups: ${t.status} ${t.statusText}`);const a=await t.json();if(a.length>0){const e={totalMatchups:a.length,matchupsWithPoints:a.filter(e=>e.points>0).length,matchupsWithZeroPoints:a.filter(e=>0===e.points).length,matchupsWithNullPoints:a.filter(e=>null===e.points||void 0===e.points).length,pointsRange:{min:Math.min(...a.map(e=>e.points||0)),max:Math.max(...a.map(e=>e.points||0)),average:a.reduce((e,s)=>e+(s.points||0),0)/a.length},playersPointsAvailability:{withPlayersPoints:a.filter(e=>e.players_points&&Object.keys(e.players_points).length>0).length,withStartersPoints:a.filter(e=>e.starters_points&&e.starters_points.length>0).length},sampleMatchup:{rosterId:a[0].roster_id,points:a[0].points,playersPointsKeys:Object.keys(a[0].players_points||{}).length,startersPointsLength:(a[0].starters_points||[]).length,matchupId:a[0].matchup_id}};e.matchupsWithPoints,e.playersPointsAvailability.withPlayersPoints}return a}catch(t){throw t}}static async fetchLeague(e){try{const s=await fetch(`${this.baseUrl}/league/${e}`);if(!s.ok)throw new Error(`Failed to fetch league: ${s.status} ${s.statusText}`);return await s.json()}catch(s){throw s}}static async fetchLeagueUsers(e){try{"undefined"!=typeof window&&(window.__apiCallCount=(window.__apiCallCount||0)+1);const s=await fetch(`${this.baseUrl}/league/${e}/users`);if(!s.ok)throw new Error(`Failed to fetch users: ${s.status} ${s.statusText}`);return await s.json()}catch(s){throw s}}static organizeMatchups(e,s,t){const a=new Map;return e.forEach(e=>{a.has(e.matchup_id)||a.set(e.matchup_id,[]),a.get(e.matchup_id).push(e)}),Array.from(a.entries()).filter(([e,s])=>2===s.length).map(([e,a])=>({matchup_id:e,teams:a.map(e=>{const a=s.find(s=>s.roster_id===e.roster_id),r=a?t.find(e=>e.user_id===a.owner_id):null;return{roster_id:e.roster_id,points:e.points,owner:r,roster:a}})}))}static async getCurrentNFLWeek(){try{const e=await fetch(`${this.baseUrl}/state/nfl`);if(!e.ok)throw new Error(`Failed to fetch NFL state: ${e.status} ${e.statusText}`);return(await e.json()).week||1}catch(e){return 1}}static async getNFLState(){try{const e=await fetch(`${this.baseUrl}/state/nfl`);if(!e.ok)throw new Error(`Failed to fetch NFL state: ${e.status} ${e.statusText}`);return await e.json()}catch(e){throw e}}static async fetchPlayerSeasonStats(e,s){try{if(!e||!s)return[];"undefined"!=typeof window&&(window.__apiCallCount=(window.__apiCallCount||0)+1);const t=await fetch(`https://api.sleeper.com/stats/nfl/player/${e}?season_type=regular&season=${s}&grouping=week`);if(!t.ok)return[];const a=await t.json();if(!a)return[];if(a&&"object"==typeof a&&!Array.isArray(a)){if(0===Object.keys(a).length)return[];const e=Object.keys(a).map(e=>{const t=a[e],r=parseInt(e);if(!t||"object"!=typeof t)return null;const n=t.stats||{};return n&&"object"==typeof n?{week:r,season:t.season||s,team:t.team||null,opponent:t.opponent||null,date:t.date||null,...n}:null}).filter(e=>null!==e);return e.length,e}return Array.isArray(a)?a:[]}catch(t){return[]}}}t(rn,"baseUrl","https://api.sleeper.app/v1");const nn=Object.freeze(Object.defineProperty({__proto__:null,SleeperApiService:rn,default:rn},Symbol.toStringTag,{value:"Module"})),ln=e=>{const s=(e=>{switch(e){case"The Legion of Mars":case"The Legions of Mars":return{primary:"#800020",secondary:"#CD7F32",accent:"#FF7F7F",bgClass:"bg-[#800020]",textClass:"text-white",borderClass:"border-[#CD7F32]"};case"Vulcan's Oathsworn":return{primary:"#708090",secondary:"#CD7F32",accent:"#CF1020",bgClass:"bg-[#708090]",textClass:"text-white",borderClass:"border-[#CD7F32]"};case"The Guardians of Jupiter":return{primary:"#483D8B",secondary:"#9370DB",accent:"#DAA520",bgClass:"bg-[#483D8B]",textClass:"text-white",borderClass:"border-[#DAA520]"};default:return{primary:"#6B7280",secondary:"#9CA3AF",accent:"#3B82F6",bgClass:"bg-gray-500",textClass:"text-white",borderClass:"border-gray-300"}}})(e);return`${s.bgClass} ${s.textClass} ${s.borderClass} border-2 font-semibold`},cn=({conferenceName:e,variant:s="secondary",size:t="md",className:a=""})=>{const r=ln(e);return i.jsx(Or,{variant:s,className:`${{sm:"text-xs px-1.5 py-0.5",md:"text-xs px-2 py-1",lg:"text-sm px-2.5 py-1.5"}[t]} ${r} ${a}`,children:e})},on=()=>{var e,s;const[t,a]=te.useState(1),[r,n]=te.useState([]),[l,c]=te.useState([]),[o,d]=te.useState(!0),[m,u]=te.useState(!0),[h,x]=te.useState(null),[p,f]=te.useState(null),{selectedSeason:g,selectedConference:j,currentSeasonConfig:v,seasonConfigs:y,loading:w,error:N,refreshSeasonData:b}=br();null==v||v.year;const{standings:_,loading:S,error:k,refetch:C}=(e=>{const{seasonYear:s,conferenceId:t,limit:a,autoRefresh:r=!1,refreshInterval:n=3e4}=e,[i,l]=te.useState([]),[c,o]=te.useState(!0),[d,m]=te.useState(null),u=async()=>{if(s)try{o(!0),m(null);let e=await tn.getStandingsData(s,t);a&&a>0&&(e=e.slice(0,a)),l(e)}catch(e){const s=e instanceof Error?e.message:"An error occurred while fetching standings";m(s)}finally{o(!1)}else o(!1)};return te.useEffect(()=>{s?u():o(!1)},[s,t,a]),te.useEffect(()=>{if(r&&n>0&&s){const e=setInterval(u,n);return()=>clearInterval(e)}},[r,n,s,t,a]),{standings:i,loading:c,error:d,refetch:u}})({seasonYear:(null==v?void 0:v.seasonId)?"string"==typeof v.seasonId?parseInt(v.seasonId):v.seasonId:void 0,conferenceId:"all"===j||null===j||null==(e=null==v?void 0:v.conferences.find(e=>e.id===j))?void 0:e.dbConferenceId,limit:12,autoRefresh:!0,refreshInterval:6e4});te.useEffect(()=>{(async()=>{try{const e=await rn.getCurrentNFLWeek();a(0===e?1:e)}catch(e){a(1)}})()},[]);const T=async()=>{if(v&&0!==t){d(!0),x(null);try{const e="all"===j||null===j?v.conferences:v.conferences.filter(e=>e.id===j),s=await(async(e,s)=>{const t=[];for(const a of e){if(!a.dbConferenceId)continue;const e=await vr.getMatchups({filters:[{column:"conference_id",operator:"eq",value:a.dbConferenceId},{column:"week",operator:"eq",value:s}]});if(e.error||!e.data)continue;const r=await vr.getTeams({});if(r.error||!r.data)continue;const n=new Map;r.data.forEach(e=>{n.set(e.id,e.team_name)});for(const s of e.data){const e=n.get(s.team1_id)||"Unknown Team",r=n.get(s.team2_id)||"Unknown Team";t.push({matchup_id:s.id,conference:{conference_name:a.name,league_id:a.leagueId},teams:[{team:{team_name:e},points:s.team1_score||0},{team:{team_name:r},points:s.team2_score||0}],status:s.team1_score&&s.team2_score?"completed":"upcoming"})}}return t})(e,t);n(s)}catch(e){x(e instanceof Error?e.message:"Failed to load matchups")}finally{d(!1)}}};te.useEffect(()=>{T()},[t,j,v]);const E=async()=>{if(v){u(!0),f(null);try{const e="all"===j||null===j?v.conferences:v.conferences.filter(e=>e.id===j),s=e.filter(e=>e.dbConferenceId).map(e=>e.dbConferenceId);if(0===s.length)return void c([]);const t=await vr.getTransactions({filters:[{column:"conference_id",operator:"in",value:s}],orderBy:{column:"created_at",ascending:!1},limit:10});if(t.error||!t.data)throw new Error(t.error||"Failed to fetch transactions");const a=await vr.getTeams({}),r=await vr.getTeamConferenceJunctions({filters:[{column:"conference_id",operator:"in",value:s}]}),n=await vr.getAllPlayersForMapping([{column:"playing_status",operator:"eq",value:"Active"},{column:"position",operator:"in",value:["QB","RB","WR","TE"]}]),i=new Map;n.forEach(e=>{e.sleeper_id&&i.set(String(e.sleeper_id),e.player_name)});const l=await Promise.all(t.data.map(async s=>{let t={};try{t="string"==typeof s.data?JSON.parse(s.data):s.data||{}}catch(p){}e.find(e=>e.dbConferenceId===s.conference_id);const n=e=>{var t;const n=null==(t=r.data)?void 0:t.find(t=>t.roster_id.toString()===e.toString()&&t.conference_id===s.conference_id);if(n&&a.data){const e=a.data.find(e=>e.id===n.team_id);return(null==e?void 0:e.team_name)||"Unknown Team"}return"Unknown Team"};let l="Unknown Team";t.roster_ids&&t.roster_ids.length>0&&(l=n(t.roster_ids[0]));const c=[],o=[],d=e=>{const s=String(e);return i.get(s)||`Player ${s}`};if(t.adds)for(const[e,a]of Object.entries(t.adds)){const s=d(e),r=n(a),i=t.settings&&t.settings.waiver_bid&&t.settings.waiver_bid[e];c.push({name:s,team:r,bidAmount:i||null})}if(t.drops)for(const[e,a]of Object.entries(t.drops)){const s=d(e),t=n(a);o.push({name:s,team:t})}let m="";const u=t.type||s.type,h=new Set;switch(t.roster_ids&&t.roster_ids.forEach(e=>{const s=n(e);"Unknown Team"!==s&&h.add(s)}),u){case"trade":if(c.length>0||o.length>0){const e=[];c.forEach(s=>e.push(`${s.name} to ${s.team}`)),o.forEach(s=>e.push(`${s.name} from ${s.team}`)),m=h.size>1?`Trade between ${Array.from(h).join(" and ")}: ${e.join(", ")}`:`${l} trade: ${e.join(", ")}`}else if(t.draft_picks&&t.draft_picks.length>0){m=`Trade involving ${t.draft_picks.map(e=>`${e.season} Round ${e.round} pick`).join(", ")}`}else m=`Trade between ${Array.from(h).join(" and ")}`;break;case"waiver":m=c.length>0&&o.length>0?`${l} claimed ${c.map(e=>e.name).join(", ")} from waivers, dropped ${o.map(e=>e.name).join(", ")}`:c.length>0?`${l} claimed ${c.map(e=>e.name).join(", ")} from waivers`:o.length>0?`${l} dropped ${o.map(e=>e.name).join(", ")} to waivers`:`${l} made a waiver claim`;break;case"free_agent":m=c.length>0&&o.length>0?`${l} added ${c.map(e=>e.name).join(", ")}, dropped ${o.map(e=>e.name).join(", ")}`:c.length>0?`${l} added ${c.map(e=>e.name).join(", ")} from free agency`:o.length>0?`${l} dropped ${o.map(e=>e.name).join(", ")}`:`${l} made a free agent transaction`;break;default:m=`${l} completed a ${u||"transaction"}`}const x="trade"===t.type?"trade":"waiver"===t.type?"waiver":"free_agent"===t.type?"free_agent":"commissioner";return{id:s.id.toString(),type:x,date:new Date(s.created_at||new Date),details:m,teams:[l],players:{added:c.map(e=>({id:"",name:e.name,team:e.team,bidAmount:e.bidAmount})),dropped:o.map(e=>({id:"",name:e.name,team:e.team}))},week:t.leg||0,status:"completed",rosterIds:t.roster_ids||[],draftPicks:t.draft_picks||[],waiverBudget:t.waiver_budget||[]}}));c(l)}catch(e){f(e instanceof Error?e.message:"Failed to load transactions")}finally{u(!1)}}};if(te.useEffect(()=>{E()},[j,v]),w)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Xs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading Gladiator League"}),i.jsx("p",{className:"text-muted-foreground",children:"Connecting to Supabase database..."})]})});if(N)return i.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:i.jsxs(qr,{className:"w-full max-w-md",children:[i.jsx(Wr,{children:i.jsxs(Ur,{className:"flex items-center gap-2 text-destructive",children:[i.jsx(Fs,{className:"h-5 w-5"}),"Connection Error"]})}),i.jsxs(Vr,{className:"space-y-4",children:[i.jsx(Kr,{children:i.jsx(Gr,{children:N})}),i.jsxs(Sr,{onClick:b,className:"w-full",children:[i.jsx(ct,{className:"h-4 w-4 mr-2"}),"Retry Connection"]})]})]})});if(!y||0===y.length)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Xs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading Season Configuration"}),i.jsx("p",{className:"text-muted-foreground",children:"Setting up league data..."})]})});if(!v||!v.conferences||0===v.conferences.length)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Xs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading Conferences"}),i.jsx("p",{className:"text-muted-foreground",children:"Setting up conference data..."})]})});const P=e=>{switch(e){case"live":return i.jsx(Or,{className:"bg-green-500 hover:bg-green-600 text-xs",children:"Live"});case"completed":return i.jsx(Or,{variant:"secondary",className:"text-xs",children:"Final"});case"upcoming":return i.jsx(Or,{variant:"outline",className:"text-xs",children:"Upcoming"});default:return i.jsx(Or,{variant:"secondary",className:"text-xs",children:e})}},R=e=>{switch(e){case"trade":return"🔄";case"waiver":return"⚡";case"free_agent":return"🆓";case"commissioner":return"⚖️";default:return"📝"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"relative overflow-hidden rounded-lg bg-gradient-to-br from-primary/10 via-primary/5 to-background border",children:[i.jsx("div",{className:"absolute inset-0 bg-grid-white/10 [mask-image:linear-gradient(0deg,white,rgba(255,255,255,0.6))]"}),i.jsx("div",{className:"relative px-6 py-12 sm:px-12",children:i.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:"/gladiator-logo.png",alt:"Gladiator League Logo",className:"h-12 w-12"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Gladiator League"}),i.jsx("p",{className:"text-lg text-muted-foreground",children:"Fantasy Football Championship"})]})]}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl",children:"Welcome to the ultimate fantasy football experience. Track your teams across three competitive conferences in real-time."}),i.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[i.jsxs(Or,{variant:"outline",children:[g," Season"]}),i.jsxs(Or,{variant:"outline",children:["Week ",t]}),"all"!==j&&v&&i.jsx(Or,{variant:"secondary",children:null==(s=v.conferences.find(e=>e.id===j))?void 0:s.name})]})]})})]}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[i.jsxs("div",{className:"lg:w-2/3 flex flex-col gap-6",children:[i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(jt,{className:"h-5 w-5 text-primary"}),i.jsxs(Ur,{children:["Week ",t]})]}),i.jsx(re,{to:"/matchups",children:i.jsx(Sr,{variant:"ghost",size:"sm",children:i.jsx(Ss,{className:"h-4 w-4"})})})]}),i.jsx(Hr,{children:"Current matchups"})]}),i.jsx(Vr,{children:o?i.jsxs("div",{className:"flex items-center justify-center p-8",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin text-primary"}),i.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading matchups..."})]}):h?i.jsxs("div",{className:"text-center p-8",children:[i.jsxs("p",{className:"text-sm text-red-600 mb-4",children:["Error loading matchups: ",h]}),i.jsx(Sr,{variant:"outline",size:"sm",onClick:T,children:"Try Again"})]}):r&&0!==r.length?i.jsx("div",{className:"space-y-2",children:r.map(e=>{var s,t;const a=e.teams[0],r=e.teams[1],n="completed"===e.status?(null==a?void 0:a.points)>((null==r?void 0:r.points)||0)?a:r:null;return i.jsxs("div",{className:"p-2 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx(cn,{conferenceName:e.conference.conference_name,variant:"outline",size:"sm"}),P(e.status)]}),i.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center text-sm",children:[i.jsx("div",{className:"text-right",children:i.jsx("p",{className:"font-medium truncate text-xs",children:(null==(s=null==a?void 0:a.team)?void 0:s.team_name)||"Team 1"})}),i.jsx("div",{className:"text-right",children:i.jsx("p",{className:"text-sm font-bold "+(n===a?"text-green-600":""),children:"upcoming"===e.status?"--":null==a?void 0:a.points.toFixed(1)})}),i.jsx("div",{className:"text-center text-muted-foreground font-semibold text-xs",children:"VS"}),i.jsx("div",{className:"text-left",children:i.jsx("p",{className:"text-sm font-bold "+(n===r?"text-green-600":""),children:"upcoming"===e.status?"--":null==r?void 0:r.points.toFixed(1)})}),i.jsx("div",{className:"text-left",children:i.jsx("p",{className:"font-medium truncate text-xs",children:(null==(t=null==r?void 0:r.team)?void 0:t.team_name)||"Team 2"})})]})]},e.matchup_id)})}):i.jsx("div",{className:"text-center p-8",children:i.jsxs("p",{className:"text-sm text-muted-foreground",children:["No matchups found for week ",t]})})})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ns,{className:"h-5 w-5 text-primary"}),i.jsx(Ur,{children:"Recent Transactions"})]}),i.jsx(re,{to:"/transactions",children:i.jsxs(Sr,{variant:"ghost",size:"sm",children:["View All ",i.jsx(Ss,{className:"ml-1 h-4 w-4"})]})})]}),i.jsx(Hr,{children:"Latest roster moves across all conferences"})]}),i.jsx(Vr,{children:m?i.jsxs("div",{className:"flex items-center justify-center p-8",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin text-primary"}),i.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading transactions..."})]}):p?i.jsxs("div",{className:"text-center p-8",children:[i.jsxs("p",{className:"text-sm text-red-600 mb-4",children:["Error loading transactions: ",p]}),i.jsx(Sr,{variant:"outline",size:"sm",onClick:E,children:"Try Again"})]}):l&&0!==l.length?i.jsx("div",{className:"space-y-3",children:l.map(e=>i.jsxs("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"text-base",children:R(e.type)}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Or,{variant:"outline",className:"text-xs",children:e.type.replace("_"," ").toUpperCase()}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:["Week ",e.week]})]})]}),i.jsx("span",{className:"text-xs text-muted-foreground",children:e.date.toLocaleDateString()})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx("span",{className:"text-sm font-medium",children:e.teams[0]})}),(e.players.added.length>0||e.players.dropped.length>0)&&i.jsxs("div",{className:"space-y-2",children:[e.players.added.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[i.jsxs(Or,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:["+",e.players.added.length]}),i.jsx("span",{className:"text-xs font-medium text-green-700",children:"Added"})]}),i.jsx("div",{className:"ml-1 space-y-1",children:e.players.added.map((e,s)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"font-medium",children:e.name}),i.jsxs("div",{className:"flex items-center space-x-1",children:[e.bidAmount&&i.jsxs(Or,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:["$",e.bidAmount]}),i.jsx(Or,{variant:"outline",className:"text-xs",children:e.team})]})]},s))})]}),e.players.dropped.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[i.jsxs(Or,{variant:"secondary",className:"text-xs bg-red-100 text-red-800",children:["-",e.players.dropped.length]}),i.jsx("span",{className:"text-xs font-medium text-red-700",children:"Dropped"})]}),i.jsx("div",{className:"ml-1 space-y-1",children:e.players.dropped.map((e,s)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"font-medium",children:e.name}),i.jsx(Or,{variant:"outline",className:"text-xs",children:e.team})]},s))})]})]})]})]},e.id))}):i.jsx("div",{className:"text-center p-8",children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent transactions found"})})})]})]}),i.jsxs("div",{className:"lg:w-1/3 flex flex-col gap-6",children:[i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(St,{className:"h-5 w-5 text-primary"}),i.jsx(Ur,{children:"League Standings"})]}),i.jsx(re,{to:"/standings",children:i.jsxs(Sr,{variant:"ghost",size:"sm",children:["View All ",i.jsx(Ss,{className:"ml-1 h-4 w-4"})]})})]}),i.jsx(Hr,{children:"Top 12 teams across all conferences"})]}),i.jsx(Vr,{children:S?i.jsxs("div",{className:"flex items-center justify-center p-8",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin text-primary"}),i.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading standings..."})]}):k?i.jsxs("div",{className:"text-center p-8",children:[i.jsxs("p",{className:"text-sm text-red-600 mb-4",children:["Error loading standings: ",k]}),i.jsx(Sr,{variant:"outline",size:"sm",onClick:C,children:"Try Again"})]}):_&&0!==_.length?i.jsx("div",{className:"space-y-3",children:_.map(e=>i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-accent/50",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-1 w-8",children:[1===e.overall_rank&&i.jsx(ft,{className:"h-4 w-4 text-yellow-500"}),i.jsxs("span",{className:"font-semibold",children:["#",e.overall_rank]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:e.team_name}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.owner_name," • ",e.conference_name]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold",children:tn.formatRecord(e.wins,e.losses,e.ties)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[tn.formatPoints(e.points_for)," pts"]})]})]},e.team_id))}):i.jsx("div",{className:"text-center p-8",children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"No standings data available"})})})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(Tt,{className:"h-5 w-5 text-primary"}),i.jsx("span",{children:"Quick Actions"})]}),i.jsx(Hr,{children:"Navigate to key sections of the league"})]}),i.jsxs(Vr,{children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(re,{to:"/standings",children:i.jsxs(Sr,{variant:"outline",className:"w-full h-16 flex flex-col space-y-1",children:[i.jsx(St,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs",children:"Standings"})]})}),i.jsx(re,{to:"/matchups",children:i.jsxs(Sr,{variant:"outline",className:"w-full h-16 flex flex-col space-y-1",children:[i.jsx(jt,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs",children:"Matchups"})]})}),i.jsx(re,{to:"/teams",children:i.jsxs(Sr,{variant:"outline",className:"w-full h-16 flex flex-col space-y-1",children:[i.jsx(Tt,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs",children:"Teams"})]})}),i.jsx(re,{to:"/players",children:i.jsxs(Sr,{variant:"outline",className:"w-full h-16 flex flex-col space-y-1",children:[i.jsx(Ns,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs",children:"Players"})]})}),i.jsx(re,{to:"/draft",children:i.jsxs(Sr,{variant:"outline",className:"w-full h-16 flex flex-col space-y-1",children:[i.jsx(xt,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs",children:"Draft Results"})]})}),i.jsx(re,{to:"/rules",children:i.jsxs(Sr,{variant:"outline",className:"w-full h-16 flex flex-col space-y-1",children:[i.jsx(Ts,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs",children:"League Rules"})]})})]}),(null==v?void 0:v.conferences)&&v.conferences.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx(sn,{className:"my-3"}),i.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[i.jsx(Gs,{className:"h-5 w-5 text-primary"}),i.jsx("h3",{className:"text-sm font-semibold",children:"League Pages"})]}),i.jsx("div",{className:"flex flex-col space-y-2",children:v.conferences.map(e=>i.jsx("a",{href:`https://sleeper.com/leagues/${e.leagueId}/league`,target:"_blank",rel:"noopener noreferrer",children:i.jsx(Sr,{variant:"outline",className:"w-full justify-start",children:e.name})},e.leagueId))})]})]})]})]})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsx(Ur,{children:"League Information"}),i.jsx(Hr,{children:"Current season details and conference structure"})]}),i.jsx(Vr,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:null==v?void 0:v.conferences.map(e=>i.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[i.jsx("h4",{className:"font-semibold mb-2",children:e.name}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"12 teams • 14-week season"}),i.jsx(Or,{variant:"outline",className:"text-xs",children:e.status})]},e.id))})})]})]})},dn=te.forwardRef(({className:e,...s},t)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:t,className:ba("w-full caption-bottom text-sm",e),...s})}));dn.displayName="Table";const mn=te.forwardRef(({className:e,...s},t)=>i.jsx("thead",{ref:t,className:ba("[&_tr]:border-b",e),...s}));mn.displayName="TableHeader";const un=te.forwardRef(({className:e,...s},t)=>i.jsx("tbody",{ref:t,className:ba("[&_tr:last-child]:border-0",e),...s}));un.displayName="TableBody";te.forwardRef(({className:e,...s},t)=>i.jsx("tfoot",{ref:t,className:ba("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";const hn=te.forwardRef(({className:e,...s},t)=>i.jsx("tr",{ref:t,className:ba("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));hn.displayName="TableRow";const xn=te.forwardRef(({className:e,...s},t)=>i.jsx("th",{ref:t,className:ba("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s}));xn.displayName="TableHead";const pn=te.forwardRef(({className:e,...s},t)=>i.jsx("td",{ref:t,className:ba("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s}));pn.displayName="TableCell";te.forwardRef(({className:e,...s},t)=>i.jsx("caption",{ref:t,className:ba("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption";const fn=()=>{var e,s;const{selectedSeason:t,selectedConference:a,currentSeasonConfig:r,loading:n}=br(),[l,c]=te.useState(null),[o,d]=te.useState([]),[m,u]=te.useState(!0),[h,x]=te.useState(null),[p,f]=te.useState(!1),{toast:g}=_e(),j=async()=>{try{u(!0),x(null);const e=r;if(!e)throw new Error(`No season configuration found for year ${t}`);const s=e.seasonId,n="string"==typeof s?parseInt(s):s;let i;if(a){const s=e.conferences.find(e=>e.id===a);if(s){const e=await vr.getConferences({filters:[{column:"season_id",operator:"eq",value:n},{column:"conference_name",operator:"eq",value:s.name}]});if(e.error)throw new Error(`Conferences fetch error: ${e.error}`);const t=e.data||[];t.length>0&&(i="string"==typeof t[0].id?parseInt(t[0].id):t[0].id)}}const l=await tn.getStandingsData(n,i);d(l)}catch(e){x(e instanceof Error?e.message:"Failed to fetch standings data"),g({title:"Error",description:"Failed to fetch standings data. Please try again.",variant:"destructive"})}finally{u(!1)}};te.useEffect(()=>{!n&&r&&j()},[t,a,n,r]);const v=e=>{let s="desc";l&&l.key===e&&"desc"===l.direction&&(s="asc"),c({key:e,direction:s})},y=ne.useMemo(()=>{let e=[...o];return null!==l?e.sort((e,s)=>{const t=e[l.key],a=s[l.key];return t<a?"asc"===l.direction?-1:1:t>a?"asc"===l.direction?1:-1:0}):e.sort((e,s)=>e.wins!==s.wins?s.wins-e.wins:s.points_for-e.points_for),e},[o,l]),w=(e,s)=>{const t=e+s;if(0===t)return"outline";const a=e/t;return a>=.7?"default":a>=.5?"secondary":"destructive"};return n||m?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin"}),i.jsxs("span",{children:["Loading ",n?"season data":"standings","..."]})]})}):h?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(St,{className:"h-6 w-6 text-primary"}),i.jsx("h1",{className:"text-3xl font-bold",children:"League Standings"})]}),i.jsxs("p",{className:"text-muted-foreground",children:[t," Season • ",a?null==(e=r.conferences.find(e=>e.id===a))?void 0:e.name:"All Conferences"]})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsx(Ur,{children:"Error Loading Standings"}),i.jsx(Hr,{children:"Unable to fetch standings data"})]}),i.jsx(Vr,{children:i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("p",{className:"text-muted-foreground",children:h}),i.jsx(Sr,{onClick:j,children:"Try Again"})]})})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(St,{className:"h-6 w-6 text-primary"}),i.jsx("h1",{className:"text-3xl font-bold",children:"League Standings"})]}),i.jsxs(Sr,{variant:"outline",onClick:async()=>{try{f(!0);const e=r;if(!e)throw new Error(`No season configuration found for year ${t}`);const s=e.seasonId,n="string"==typeof s?parseInt(s):s;let i;if(a){const s=e.conferences.find(e=>e.id===a);if(s){const e=await vr.getConferences({filters:[{column:"season_id",operator:"eq",value:n},{column:"conference_name",operator:"eq",value:s.name}]});if(e.error)throw new Error(`Conferences fetch error: ${e.error}`);const t=e.data||[];t.length>0&&(i="string"==typeof t[0].id?parseInt(t[0].id):t[0].id)}}await j(),g({title:"Success",description:"Standings refreshed successfully"})}catch(e){g({title:"Error",description:"Failed to refresh standings data",variant:"destructive"})}finally{f(!1)}},disabled:p,className:"flex items-center gap-2",children:[i.jsx(ct,{className:"h-4 w-4 "+(p?"animate-spin":"")}),p?"Refreshing...":"Refresh"]})]}),i.jsxs("p",{className:"text-muted-foreground",children:[t," Season • ",a?null==(s=r.conferences.find(e=>e.id===a))?void 0:s.name:"All Conferences"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(qr,{children:i.jsxs(Wr,{className:"pb-2",children:[i.jsx(Hr,{children:"Total Teams"}),i.jsx(Ur,{className:"text-2xl",children:o.length})]})}),i.jsx(qr,{children:i.jsxs(Wr,{className:"pb-2",children:[i.jsx(Hr,{children:"Highest Scoring Team"}),i.jsx(Ur,{className:"text-xl",children:o.length>0&&o.reduce((e,s)=>e.points_for>s.points_for?e:s).team_name})]})}),i.jsx(qr,{children:i.jsxs(Wr,{className:"pb-2",children:[i.jsx(Hr,{children:"Playoff Teams"}),i.jsx(Ur,{className:"text-2xl",children:o.filter(e=>e.playoff_eligible).length})]})})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsx(Ur,{children:"Team Standings"}),i.jsxs(Hr,{children:["Click column headers to sort. Current standings for the ",t," season."]})]}),i.jsx(Vr,{children:i.jsx("div",{className:"rounded-md border",children:i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{className:"w-12 text-center",children:i.jsxs(Sr,{variant:"ghost",size:"sm",onClick:()=>v("overall_rank"),children:["Rank ",i.jsx(ks,{className:"ml-1 h-3 w-3"})]})}),i.jsx(xn,{children:i.jsxs(Sr,{variant:"ghost",size:"sm",onClick:()=>v("team_name"),children:["Team ",i.jsx(ks,{className:"ml-1 h-3 w-3"})]})}),i.jsx(xn,{className:"hidden lg:table-cell text-center",children:"Conference"}),i.jsx(xn,{className:"text-center",children:i.jsxs(Sr,{variant:"ghost",size:"sm",onClick:()=>v("wins"),children:["Record ",i.jsx(ks,{className:"ml-1 h-3 w-3"})]})}),i.jsx(xn,{className:"text-center hidden md:table-cell",children:i.jsxs(Sr,{variant:"ghost",size:"sm",onClick:()=>v("win_percentage"),children:["Win% ",i.jsx(ks,{className:"ml-1 h-3 w-3"})]})}),i.jsx(xn,{className:"text-center",children:i.jsxs(Sr,{variant:"ghost",size:"sm",onClick:()=>v("points_for"),children:["PF ",i.jsx(ks,{className:"ml-1 h-3 w-3"})]})}),i.jsx(xn,{className:"text-center hidden sm:table-cell",children:i.jsxs(Sr,{variant:"ghost",size:"sm",onClick:()=>v("points_against"),children:["PA ",i.jsx(ks,{className:"ml-1 h-3 w-3"})]})}),i.jsx(xn,{className:"text-center hidden sm:table-cell",children:i.jsxs(Sr,{variant:"ghost",size:"sm",onClick:()=>v("point_diff"),children:["Diff ",i.jsx(ks,{className:"ml-1 h-3 w-3"})]})}),i.jsx(xn,{className:"hidden lg:table-cell",children:"Status"})]})}),i.jsx(un,{children:y.map((e,s)=>{return i.jsxs(hn,{className:"hover:bg-muted/50",children:[i.jsx(pn,{className:"font-medium text-center",children:i.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[1===e.overall_rank&&i.jsx(St,{className:"h-4 w-4 text-yellow-500"}),i.jsx("span",{children:e.overall_rank})]})}),i.jsx(pn,{children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("img",{src:e.team_logourl?`https://sleepercdn.com/avatars/thumbs/${e.team_logourl}`:"/placeholder-team-logo.png",alt:`${e.team_name} logo`,className:"w-10 h-10 rounded-full object-cover",onError:e=>{e.target.src="/placeholder-team-logo.png"}})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"font-medium text-sm",children:e.team_name}),i.jsx("div",{className:"text-xs text-muted-foreground",children:e.owner_name})]})]})}),i.jsx(pn,{className:"hidden lg:table-cell text-center",children:i.jsx(cn,{conferenceName:e.conference_name,variant:"outline",size:"sm"})}),i.jsx(pn,{className:"text-center",children:i.jsxs(Or,{variant:w(e.wins,e.losses),children:[e.wins,"-",e.losses,e.ties>0&&`-${e.ties}`]})}),i.jsxs(pn,{className:"text-center font-mono hidden md:table-cell",children:[(100*e.win_percentage).toFixed(1),"%"]}),i.jsx(pn,{className:"text-center font-mono",children:e.points_for.toFixed(1)}),i.jsx(pn,{className:"text-center font-mono hidden sm:table-cell",children:e.points_against.toFixed(1)}),i.jsx(pn,{className:"text-center font-mono hidden sm:table-cell",children:i.jsxs("span",{className:e.point_diff>=0?"text-green-600":"text-red-600",children:[e.point_diff>=0?"+":"",e.point_diff.toFixed(1)]})}),i.jsx(pn,{className:"hidden lg:table-cell",children:i.jsx("div",{className:"flex items-center space-x-1",children:(t=e.playoff_eligible,a=e.is_conference_champion,a?i.jsxs(Or,{variant:"default",className:"bg-yellow-500 text-white",children:[i.jsx(St,{className:"w-3 h-3 mr-1"}),"Champion"]}):t?i.jsx(Or,{variant:"default",className:"bg-green-500",children:"Playoff"}):null)})})]},e.team_id);var t,a})})]})})})]})]})};var gn="Collapsible",[jn,vn]=a(gn),[yn,wn]=jn(gn),Nn=te.forwardRef((e,s)=>{const{__scopeCollapsible:t,open:a,defaultOpen:r,disabled:n,onOpenChange:l,...d}=e,[m,u]=o({prop:a,defaultProp:r??!1,onChange:l,caller:gn});return i.jsx(yn,{scope:t,disabled:n,contentId:K(),open:m,onOpenToggle:te.useCallback(()=>u(e=>!e),[u]),children:i.jsx(c.div,{"data-state":Tn(m),"data-disabled":n?"":void 0,...d,ref:s})})});Nn.displayName=gn;var bn="CollapsibleTrigger",_n=te.forwardRef((e,s)=>{const{__scopeCollapsible:t,...a}=e,r=wn(bn,t);return i.jsx(c.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":Tn(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...a,ref:s,onClick:m(e.onClick,r.onOpenToggle)})});_n.displayName=bn;var Sn="CollapsibleContent",kn=te.forwardRef((e,s)=>{const{forceMount:t,...a}=e,r=wn(Sn,e.__scopeCollapsible);return i.jsx(d,{present:t||r.open,children:({present:e})=>i.jsx(Cn,{...a,ref:s,present:e})})});kn.displayName=Sn;var Cn=te.forwardRef((e,s)=>{const{__scopeCollapsible:t,present:a,children:r,...l}=e,o=wn(Sn,t),[d,m]=te.useState(a),u=te.useRef(null),h=n(s,u),x=te.useRef(0),p=x.current,g=te.useRef(0),j=g.current,v=o.open||d,y=te.useRef(v),w=te.useRef(void 0);return te.useEffect(()=>{const e=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(e)},[]),f(()=>{const e=u.current;if(e){w.current=w.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";const s=e.getBoundingClientRect();x.current=s.height,g.current=s.width,y.current||(e.style.transitionDuration=w.current.transitionDuration,e.style.animationName=w.current.animationName),m(a)}},[o.open,a]),i.jsx(c.div,{"data-state":Tn(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...l,ref:h,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":j?`${j}px`:void 0,...e.style},children:v&&r})});function Tn(e){return e?"open":"closed"}const En=Nn,Pn=_n,Rn=kn;class Dn{static async getPlayers(){const e=Date.now();if(this.playerCache&&e-this.playerCache.timestamp<this.playerCache.ttl){if("undefined"!=typeof window){const e=window.__cacheStats||{hits:0,total:0};e.total+=1,e.hits+=1,window.__cacheStats=e,window.__cacheHitRate=e.hits/e.total}return this.playerCache.data}performance.now();if("undefined"!=typeof window){const e=window.__cacheStats||{hits:0,total:0};e.total+=1,window.__cacheStats=e,window.__cacheHitRate=e.total>0?e.hits/e.total:0}try{const s=await vr.getAllPlayersForMapping([{column:"playing_status",operator:"eq",value:"Active"},{column:"position",operator:"in",value:["QB","RB","WR","TE","K","DEF"]}]),t={};return s.forEach(e=>{var s;if(e.sleeper_id){const a=e.player_name.split(" "),r=a[0]||"",n=a.slice(1).join(" ")||"";t[e.sleeper_id]={player_id:e.sleeper_id,first_name:r,last_name:n,position:e.position||"",team:e.nfl_team||"",jersey_number:e.number||0,status:e.playing_status||"",injury_status:e.injury_status||"",age:e.age||0,height:(null==(s=e.height)?void 0:s.toString())||"",weight:e.weight||0,years_exp:0,college:e.college||""}}}),this.playerCache={data:t,timestamp:e,ttl:this.PLAYER_CACHE_TTL},t}catch(s){return{}}}static getCachedConferenceData(e,s){const t=`${e}_${s}`,a=this.conferenceCache.get(t);if(a&&Date.now()-a.timestamp<a.ttl){if("undefined"!=typeof window){const e=window.__cacheStats||{hits:0,total:0};e.total+=1,e.hits+=1,window.__cacheStats=e,window.__cacheHitRate=e.hits/e.total}return a.data}return null}static setCachedConferenceData(e,s,t){const a=`${e}_${s}`;this.conferenceCache.set(a,{data:t,timestamp:Date.now(),ttl:this.CONFERENCE_CACHE_TTL})}static getCachedMatchupDetails(e,s){const t=`details_${e}_${s}`,a=this.matchupDetailsCache.get(t);return a&&Date.now()-a.timestamp<a.ttl?a.data:null}static setCachedMatchupDetails(e,s,t){const a=`details_${e}_${s}`;this.matchupDetailsCache.set(a,{data:t,timestamp:Date.now(),ttl:this.DETAILS_CACHE_TTL})}static clearAll(){this.playerCache=null,this.conferenceCache.clear(),this.matchupDetailsCache.clear()}static cleanupExpired(){const e=Date.now();this.playerCache&&e-this.playerCache.timestamp>=this.playerCache.ttl&&(this.playerCache=null);for(const[s,t]of this.conferenceCache.entries())e-t.timestamp>=t.ttl&&this.conferenceCache.delete(s);for(const[s,t]of this.matchupDetailsCache.entries())e-t.timestamp>=t.ttl&&this.matchupDetailsCache.delete(s)}static getStats(){const e=Date.now();return{players:{cached:!!this.playerCache,count:this.playerCache?Object.keys(this.playerCache.data).length:0,age:this.playerCache?e-this.playerCache.timestamp:0,ttl:this.PLAYER_CACHE_TTL},conferences:{count:this.conferenceCache.size,entries:Array.from(this.conferenceCache.keys())},details:{count:this.matchupDetailsCache.size,entries:Array.from(this.matchupDetailsCache.keys())}}}}t(Dn,"playerCache",null),t(Dn,"conferenceCache",new Map),t(Dn,"matchupDetailsCache",new Map),t(Dn,"PLAYER_CACHE_TTL",6e5),t(Dn,"CONFERENCE_CACHE_TTL",3e5),t(Dn,"DETAILS_CACHE_TTL",12e4),setInterval(()=>{Dn.cleanupExpired()},3e5);class Fn{static async getHybridMatchups(e,s,t){try{performance.now();const[r,n,i,l]=await Promise.all([s>=13?this.getPlayoffBrackets(e,s,t):this.getDatabaseMatchups(e,s,t),this.getConferences(e),this.getTeams(),this.getTeamConferenceJunctions()]);let c=[];if(c=s>=13?this.convertPlayoffBracketsToMatchups(r,n):r,0===c.length)return[];const o=n,d=i,m=l,u=[];for(const e of c)try{const t=o.find(s=>s.id===e.conference_id);if(!t)continue;const a=d.find(s=>s.id===e.team1_id),r=e.team2_id?d.find(s=>s.id===e.team2_id):null;if(!a)continue;if(!e.is_bye&&!r)continue;if(e.is_bye||!r){let r=m.find(e=>e.team_id===a.id&&e.conference_id===t.id);if(r||(r=m.find(e=>e.team_id===a.id)),!r)continue;const n=o.find(e=>e.id===r.conference_id);if(!n)continue;const i=await rn.fetchMatchups(n.league_id,parseInt(e.week)),l=await rn.fetchLeagueRosters(n.league_id),c=await rn.fetchLeagueUsers(n.league_id),d=i.find(e=>e.roster_id===r.roster_id);if(!d)continue;const h=await this.buildByeMatchupTeam(a,d,l,c,r.roster_id),x={matchup_id:d.matchup_id||0,conference:t,teams:h,status:"completed",rawData:{dbMatchup:e,team1SleeperMatchup:d,team2SleeperMatchup:null,isOverride:e.manual_override||!1,isBye:!0,playoffBracket:s>=13?playoffBrackets.find(s=>s.id===e.id):void 0}};u.push(x);continue}let n=m.find(e=>e.team_id===a.id&&e.conference_id===t.id),i=m.find(e=>e.team_id===r.id&&e.conference_id===t.id);if(n||(n=m.find(e=>e.team_id===a.id)),i||(i=m.find(e=>e.team_id===r.id)),!n||!i)continue;const l=e.is_playoff||parseInt(e.week)>=13,c=l||n.conference_id!==i.conference_id;let h,x,p,f,g,j;if(c){const s=o.find(e=>e.id===n.conference_id),t=o.find(e=>e.id===i.conference_id);if(!s||!t)continue;const[a,r]=await Promise.all([rn.fetchMatchups(s.league_id,parseInt(e.week)),rn.fetchMatchups(t.league_id,parseInt(e.week))]),[l,c]=await Promise.all([rn.fetchLeagueRosters(s.league_id),rn.fetchLeagueRosters(t.league_id)]),[d,m]=await Promise.all([rn.fetchLeagueUsers(s.league_id),rn.fetchLeagueUsers(t.league_id)]);h=a.find(e=>e.roster_id===n.roster_id),x=r.find(e=>e.roster_id===i.roster_id),p=l,f=c,g=d,j=m}else{const s=await rn.fetchMatchups(t.league_id,parseInt(e.week)),a=await rn.fetchLeagueRosters(t.league_id),r=await rn.fetchLeagueUsers(t.league_id);h=s.find(e=>e.roster_id===n.roster_id),x=s.find(e=>e.roster_id===i.roster_id),p=a,f=a,g=r,j=r}if(!h||!x)continue;if(!c&&!l&&h.matchup_id!==x.matchup_id)continue;const v=await this.buildMatchupTeamsFromDatabaseInterconference(a,r,h,x,p,f,g,j,n.roster_id,i.roster_id),y=this.determineMatchupStatusFromSleeper(h,x),w={matchup_id:h.matchup_id||0,conference:t,teams:v,status:y,rawData:{dbMatchup:e,team1SleeperMatchup:h,team2SleeperMatchup:x,isOverride:e.manual_override||!1,playoffBracket:s>=13?playoffBrackets.find(s=>s.id===e.id):void 0}};u.push(w)}catch(a){}return u}catch(a){return[]}}static async getMinimalMatchups(e,s,t){try{performance.now();const[a,r,n,i]=await Promise.all([s>=13?this.getPlayoffBrackets(e,s,t):this.getDatabaseMatchups(e,s,t),this.getConferences(e),this.getTeams(),this.getTeamConferenceJunctions()]);let l=[];l=s>=13?this.convertPlayoffBracketsToMatchups(a,r):a;const c=[];for(const e of l){const t=r.find(s=>s.id===e.conference_id);if(!t)continue;const a=n.find(s=>s.id===e.team1_id),l=e.team2_id?n.find(s=>s.id===e.team2_id):null;if(!a)continue;const o=i.find(e=>e.team_id===a.id),d=l?i.find(e=>e.team_id===l.id):null,m=o?r.find(e=>e.id===o.conference_id):null,u=d?r.find(e=>e.id===d.conference_id):null,h={id:e.id,matchup_id:0,conference:{id:t.id,name:t.conference_name},teams:[{id:a.id,name:a.team_name,owner:a.owner_name,points:e.team1_score||0,roster_id:(null==o?void 0:o.roster_id)||0,conference:m?{id:m.id,name:m.conference_name}:void 0}],status:this.determineMatchupStatusFromDb(e),week:parseInt(e.week),is_playoff:e.is_playoff||!1,is_bye:e.is_bye||!1,manual_override:e.manual_override||!1};l&&d&&!e.is_bye&&h.teams.push({id:l.id,name:l.team_name,owner:l.owner_name,points:e.team2_score||0,roster_id:d.roster_id,conference:u?{id:u.id,name:u.conference_name}:void 0}),s>=13&&"playoff_round_name"in e&&(h.playoff_round_name=e.playoff_round_name),c.push(h)}return c}catch(a){return[]}}static async getMatchupDetails(e,s,t){var a,r,n,i,l,c;try{performance.now();const o=Dn.getCachedMatchupDetails(e,t);if(o)return o;const d=null==(a=(t>=13?await vr.getPlayoffBrackets({filters:[{column:"id",operator:"eq",value:e}]}):await vr.getMatchups({filters:[{column:"id",operator:"eq",value:e}]})).data)?void 0:a[0];if(!d)return null;const[m,u,h]=await Promise.all([vr.getConferences({filters:[{column:"season_id",operator:"eq",value:s}]}),vr.getTeams({limit:500}),vr.getTeamConferenceJunctions({limit:1e3})]),x=null==(r=m.data)?void 0:r.find(e=>e.id===d.conference_id);if(!x)return null;let p,f,g;const j=Dn.getCachedConferenceData(x.league_id,t);j?({matchups:p,rosters:f,users:g}=j):([p,f,g]=await Promise.all([rn.fetchMatchups(x.league_id,t),rn.fetchLeagueRosters(x.league_id),rn.fetchLeagueUsers(x.league_id)]),Dn.setCachedConferenceData(x.league_id,t,{matchups:p,rosters:f,users:g}));const v={players_points:{},starters:{},bench_players:{},rosters:{},users:{}},y=null==(n=u.data)?void 0:n.find(e=>e.id===d.team1_id),w=d.team2_id?null==(i=u.data)?void 0:i.find(e=>e.id===d.team2_id):null;if(y){const e=null==(l=h.data)?void 0:l.find(e=>e.team_id===y.id);if(e){const s=p.find(s=>s.roster_id===e.roster_id),t=f.find(s=>s.roster_id===e.roster_id),a=g.find(e=>e.user_id===(null==t?void 0:t.owner_id));s&&t&&(v.players_points[y.id.toString()]=s.players_points||{},v.starters[y.id.toString()]=s.starters||[],v.bench_players[y.id.toString()]=(t.players||[]).filter(e=>{var t;return!(null==(t=s.starters)?void 0:t.includes(e))}),v.rosters[y.id.toString()]=t,a&&(v.users[y.id.toString()]=a))}}if(w){const e=null==(c=h.data)?void 0:c.find(e=>e.team_id===w.id);if(e){const s=p.find(s=>s.roster_id===e.roster_id),t=f.find(s=>s.roster_id===e.roster_id),a=g.find(e=>e.user_id===(null==t?void 0:t.owner_id));s&&t&&(v.players_points[w.id.toString()]=s.players_points||{},v.starters[w.id.toString()]=s.starters||[],v.bench_players[w.id.toString()]=(t.players||[]).filter(e=>{var t;return!(null==(t=s.starters)?void 0:t.includes(e))}),v.rosters[w.id.toString()]=t,a&&(v.users[w.id.toString()]=a))}}return Dn.setCachedMatchupDetails(e,t,v),v}catch(o){return null}}static determineMatchupStatusFromDb(e){return"completed"===e.matchup_status||e.winning_team_id?"completed":e.team1_score>0||e.team2_score>0?"live":"upcoming"}static async getConferences(e){try{return(await vr.getConferences({filters:[{column:"season_id",operator:"eq",value:e}],limit:50})).data||[]}catch(s){return[]}}static async getTeams(){try{return(await vr.getTeams({limit:500})).data||[]}catch(e){return[]}}static async getTeamConferenceJunctions(){try{return(await vr.getTeamConferenceJunctions({limit:1e3})).data||[]}catch(e){return[]}}static async getPlayoffBrackets(e,s,t){try{const a=[{column:"season_id",operator:"eq",value:e},{column:"week",operator:"eq",value:s}];let r=(await vr.getPlayoffBrackets({filters:a,limit:100})).data||[];if(t&&r.length>0){const e=(await this.getTeamConferenceJunctions()).filter(e=>e.conference_id===t).map(e=>e.team_id);r=r.filter(s=>e.includes(s.team1_id)||e.includes(s.team2_id))}return r}catch(a){return[]}}static convertPlayoffBracketsToMatchups(e,s){return e.map(e=>{const t=s[0];return{id:e.id,conference_id:(null==t?void 0:t.id)||1,week:e.week.toString(),team1_id:e.team1_id,team2_id:e.team2_id,is_playoff:!0,manual_override:!1,matchup_status:e.winning_team_id?"completed":"upcoming",notes:e.playoff_round_name||null,matchup_type:"playoff",team1_score:e.team1_score||null,team2_score:e.team2_score||null,winning_team_id:e.winning_team_id||null,is_bye:e.is_bye||!1}})}static async getDatabaseMatchups(e,s,t){try{if(t){const e=[{column:"week",operator:"eq",value:s.toString()},{column:"conference_id",operator:"eq",value:t}];return(await vr.getMatchups({filters:e,limit:100})).data||[]}const a=(await this.getConferences(e)).map(e=>e.id);if(0===a.length)return[];const r=[{column:"week",operator:"eq",value:s.toString()},{column:"conference_id",operator:"in",value:a}];return(await vr.getMatchups({filters:r,limit:100})).data||[]}catch(a){return[]}}static async getMatchupOverrides(e,s,t){try{const a=[{column:"season_id",operator:"eq",value:e},{column:"week",operator:"eq",value:s},{column:"is_active",operator:"eq",value:!0}];t&&a.push({column:"conference_id",operator:"eq",value:t});return(await vr.getMatchupAdminOverrides({filters:a,limit:100})).data||[]}catch(a){return[]}}static async getOrganizedMatchups(e,s,t){try{let a=[];if(s>=13){const r=await this.getPlayoffBrackets(e,s,t),n=await this.getConferences(e);a=this.convertPlayoffBracketsToMatchups(r,n)}else a=await this.getDatabaseMatchups(e,s,t);await this.getConferences(e),await this.getTeams(),await this.getMatchupOverrides(e,s,t);return this.getHybridMatchups(e,s,t)}catch(a){return[]}}static async buildMatchupTeamsSimple(e,s,t,a,r){try{const r=[],n=s.find(s=>s.roster_id===e.roster_id);if(!n)return[];const i=t.find(e=>e.user_id===n.owner_id),l=a.find(e=>e.owner_id===n.owner_id),c={roster_id:e.roster_id,points:e.points||0,projected_points:e.projected_points||0,owner:i||null,roster:n||null,team:l||null,players_points:e.players_points||{},starters_points:e.starters_points||[],matchup_starters:e.starters||[]};return r.push(c),r}catch(n){return[]}}static determineMatchupStatusSimple(e){return e.points&&e.points>0?"completed":"upcoming"}static async buildMatchupTeamsFromDatabase(e,s,t,a,r,n,i,l){try{const c=[],o=r.find(e=>e.roster_id===i),d=n.find(e=>e.user_id===(null==o?void 0:o.owner_id)),m={roster_id:i,points:t.points||0,projected_points:t.projected_points||0,owner:d||null,roster:o||null,team:e,players_points:t.players_points||{},starters_points:t.starters_points||[],matchup_starters:t.starters||[]},u=r.find(e=>e.roster_id===l),h=n.find(e=>e.user_id===(null==u?void 0:u.owner_id)),x={roster_id:l,points:a.points||0,projected_points:a.projected_points||0,owner:h||null,roster:u||null,team:s,players_points:a.players_points||{},starters_points:a.starters_points||[],matchup_starters:a.starters||[]};return c.push(m,x),c}catch(c){return[]}}static async buildMatchupTeamsFromDatabaseInterconference(e,s,t,a,r,n,i,l,c,o){try{const d=[],m=r.find(e=>e.roster_id===c),u=i.find(e=>e.user_id===(null==m?void 0:m.owner_id)),h={roster_id:c,points:t.points||0,projected_points:t.projected_points||0,owner:u||null,roster:m||null,team:e,players_points:t.players_points||{},starters_points:t.starters_points||[],matchup_starters:t.starters||[]},x=n.find(e=>e.roster_id===o),p=l.find(e=>e.user_id===(null==x?void 0:x.owner_id)),f={roster_id:o,points:a.points||0,projected_points:a.projected_points||0,owner:p||null,roster:x||null,team:s,players_points:a.players_points||{},starters_points:a.starters_points||[],matchup_starters:a.starters||[]};return d.push(h,f),d}catch(d){return[]}}static async buildByeMatchupTeam(e,s,t,a,r){try{const n=t.find(e=>e.roster_id===r),i=a.find(e=>e.user_id===(null==n?void 0:n.owner_id));return[{roster_id:r,points:s.points||0,projected_points:s.projected_points||0,owner:i||null,roster:n||null,team:e,players_points:s.players_points||{},starters_points:s.starters_points||[],matchup_starters:s.starters||[]}]}catch(n){return[]}}static determineMatchupStatusFromSleeper(e,s){const t=e.points&&e.points>0,a=s&&s.points&&s.points>0;return t&&a?"completed":t||a?"live":"upcoming"}static async getDetailedMatchup(e,s){var t;try{const a=null==(t=(await vr.getMatchups({filters:[{column:"id",operator:"eq",value:e}]})).data)?void 0:t[0];if(!a)return null;const[r,n,i]=await Promise.all([this.getConferences(s),this.getTeams(),this.getTeamConferenceJunctions()]),l=r.find(e=>e.id===a.conference_id);if(!l)return null;const c=n.find(e=>e.id===a.team1_id),o=a.team2_id?n.find(e=>e.id===a.team2_id):null;if(!c)return null;const d=i.find(e=>e.team_id===c.id),m=o?i.find(e=>e.team_id===o.id):null;if(!d||o&&!m)return null;const[u,h,x]=await Promise.all([rn.fetchMatchups(l.league_id,parseInt(a.week)),rn.fetchLeagueRosters(l.league_id),rn.fetchLeagueUsers(l.league_id)]),p={id:a.id,week:parseInt(a.week),status:this.determineMatchupStatusFromDb(a),isPlayoff:a.is_playoff||!1,playoffRound:a.notes,conference:{id:l.id,name:l.conference_name},teams:[],isBye:a.is_bye||!1,scoreDifferential:Math.abs((a.team1_score||0)-(a.team2_score||0)),gameTimeRemaining:void 0},f=u.find(e=>e.roster_id===d.roster_id),g=h.find(e=>e.roster_id===d.roster_id);x.find(e=>e.user_id===(null==g?void 0:g.owner_id));if(f&&g&&p.teams.push({id:c.id,name:c.team_name,owner:c.owner_name,avatar:c.team_logourl,record:{wins:0,losses:0},points:a.team1_score||0,projectedPoints:f.projected_points||0,rosterId:d.roster_id,starters:f.starters||[],bench:(g.players||[]).filter(e=>{var s;return!(null==(s=f.starters)?void 0:s.includes(e))}),playersPoints:f.players_points||{},playersProjected:{}}),o&&m&&!a.is_bye){const e=u.find(e=>e.roster_id===m.roster_id),s=h.find(e=>e.roster_id===m.roster_id);x.find(e=>e.user_id===(null==s?void 0:s.owner_id));e&&s&&p.teams.push({id:o.id,name:o.team_name,owner:o.owner_name,avatar:o.team_logourl,record:{wins:0,losses:0},points:a.team2_score||0,projectedPoints:e.projected_points||0,rosterId:m.roster_id,starters:e.starters||[],bench:(s.players||[]).filter(s=>{var t;return!(null==(t=e.starters)?void 0:t.includes(s))}),playersPoints:e.players_points||{},playersProjected:{}})}return p}catch(a){return null}}static async getHeadToHeadHistory(e,s,t){try{const a=await vr.getMatchups({filters:[{column:"season_id",operator:"eq",value:t}],limit:100}),r=(a.data||[]).filter(t=>t.team1_id===e&&t.team2_id===s||t.team1_id===s&&t.team2_id===e),n=await this.getTeams(),i=n.find(s=>s.id===e),l=n.find(e=>e.id===s);return r.map(s=>{const t=s.team1_id===e,a=t?s.team1_score||0:s.team2_score||0,r=t?s.team2_score||0:s.team1_score||0;let n="Tie";return a>r?n=(null==i?void 0:i.team_name)||"Team 1":r>a&&(n=(null==l?void 0:l.team_name)||"Team 2"),{week:parseInt(s.week),season:"2024",team1Score:a,team2Score:r,winner:n,date:new Date(s.created_at||Date.now())}}).sort((e,s)=>s.week-e.week)}catch(a){return[]}}}const Mn=ne.memo(({matchup:e,isExpanded:s,onToggleExpand:t,detailedData:a,allPlayers:r,loading:n,onViewDetails:l})=>{const[c,o]=e.teams,d="completed"===e.status?c.points>((null==o?void 0:o.points)||0)?c:o:null,m=e=>({QB:"QB",RB:"RB",WR:"WR",TE:"TE",FLEX:"W/R/T",SUPER_FLEX:"Q/W/R/T",K:"K",DEF:"DEF"}[e]||e),u=e=>{const s=r[e];return s?{name:`${s.first_name||""} ${s.last_name||""}`.trim()||"Unknown",position:s.position||"N/A",team:s.team||"N/A"}:{name:"Unknown Player",position:"N/A",team:"N/A"}},h=(e,s)=>{if(!a)return i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading roster..."});const t=a.starters[e]||[],r=a.players_points[e]||{},n=a.bench_players[e]||[];return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:"Starters"}),i.jsx("div",{className:"space-y-1",children:t.map((e,s)=>{const t=u(e),a=r[e]||0,n=["QB","RB","RB","WR","WR","WR","TE","FLEX","SUPER_FLEX"][s]||"FLEX";return i.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 rounded text-xs",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Or,{variant:"outline",className:"text-xs px-1 py-0",children:m(n)}),i.jsx("span",{className:"font-medium",children:t.name}),i.jsxs("span",{className:"text-muted-foreground",children:["(",t.position," - ",t.team,")"]})]}),i.jsx("span",{className:"font-bold",children:a.toFixed(1)})]},`${e}-${s}`)})})]}),n.length>0&&i.jsxs("div",{children:[i.jsx("h5",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:"Bench"}),i.jsx("div",{className:"space-y-1",children:n.map(e=>{const s=u(e),t=r[e]||0;return i.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-25 rounded text-xs",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"font-medium",children:s.name}),i.jsxs("span",{className:"text-muted-foreground",children:["(",s.position," - ",s.team,")"]})]}),i.jsx("span",{className:"text-muted-foreground",children:t.toFixed(1)})]},e)})})]})]})},x=e.manual_override&&e.week>=1&&e.week<=12;return i.jsxs(qr,{className:"hover:shadow-md transition-shadow",children:[i.jsx(Wr,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[e.playoff_round_name&&i.jsx(Ur,{className:"text-base",children:e.playoff_round_name}),x?i.jsx(Or,{variant:"outline",className:"text-xs bg-orange-100 text-orange-800 border-orange-300",children:"Interconference"}):i.jsx(cn,{conferenceName:e.conference.name,size:"sm"})]}),(e=>{switch(e){case"live":return i.jsx(Or,{className:"bg-green-500 hover:bg-green-600",children:"Live"});case"completed":return i.jsx(Or,{variant:"secondary",children:"Final"});case"upcoming":return i.jsx(Or,{variant:"outline",children:"Upcoming"});default:return i.jsx(Or,{variant:"secondary",children:e})}})(e.status)]})}),i.jsxs(Vr,{className:"pt-0 space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[i.jsx("div",{className:"text-right",children:i.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[x&&c.conference&&i.jsx(cn,{conferenceName:c.conference.name,size:"sm"}),i.jsx("div",{className:"font-medium text-sm",children:c.name})]})}),i.jsx("div",{className:"text-right",children:i.jsx("div",{className:"text-lg font-bold "+((null==d?void 0:d.id)===c.id?"text-green-600":""),children:"upcoming"===e.status?"--":c.points.toFixed(1)})}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"VS"}),"completed"===e.status&&d&&i.jsx(St,{className:"h-4 w-4 mx-auto mt-1 text-yellow-500"})]}),i.jsx("div",{className:"text-left",children:i.jsx("div",{className:"text-lg font-bold "+((null==d?void 0:d.id)===(null==o?void 0:o.id)?"text-green-600":""),children:e.is_bye||!o?"BYE":"upcoming"===e.status?"--":o.points.toFixed(1)})}),i.jsx("div",{className:"text-left",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"font-medium text-sm",children:e.is_bye||!o?"BYE":o.name}),x&&o&&o.conference&&i.jsx(cn,{conferenceName:o.conference.name,size:"sm"})]})})]}),!e.is_bye&&i.jsxs(En,{open:s,children:[i.jsx(Rn,{className:"space-y-4",children:i.jsx("div",{className:"border-t pt-4",children:n?i.jsxs("div",{className:"text-center py-4",children:[i.jsx(ct,{className:"h-6 w-6 animate-spin mx-auto mb-2 text-primary"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading roster details..."})]}):i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center",children:[i.jsx(Tt,{className:"h-4 w-4 mr-2"}),c.name," Lineup"]}),h(c.id.toString(),c.name)]}),o&&i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center",children:[i.jsx(Tt,{className:"h-4 w-4 mr-2"}),o.name," Lineup"]}),h(o.id.toString(),o.name)]})]})})}),i.jsxs("div",{className:"flex gap-2 mt-3",children:[i.jsx(Pn,{asChild:!0,children:i.jsx(Sr,{variant:"outline",className:"flex-1",onClick:()=>t(e.id),children:s?i.jsxs(i.Fragment,{children:["Hide Details",i.jsx(Ds,{className:"h-4 w-4 ml-2"})]}):i.jsxs(i.Fragment,{children:["Quick View",i.jsx(Rs,{className:"h-4 w-4 ml-2"})]})})}),i.jsx(Sr,{variant:"default",className:"flex-1",onClick:()=>l(e.id),children:"Full Details"})]})]})]})]})});Mn.displayName="MatchupCard";const In=()=>{var e;const s=ie(),t=te.useRef(0);t.current+=1,t.current;const{selectedSeason:a,selectedConference:r,currentSeasonConfig:n,seasonConfigs:l}=br(),{toast:c}=_e(),[o,d]=te.useState(1),[m,u]=te.useState(1),[h,x]=te.useState(new Set),[p,f]=te.useState([]),[g,j]=te.useState(new Map),[v,y]=te.useState(new Set),[w,N]=te.useState({}),[b,_]=te.useState(!0),[S,k]=te.useState(!1),[C,T]=te.useState([]),E=te.useRef(!1),P=te.useRef(new Map),R=te.useMemo(()=>l.find(e=>e.year===a),[l,a]),D=te.useCallback(async()=>{try{performance.now();const e=await Dn.getPlayers();N(e)}catch(e){N({})}},[]),F=te.useCallback(async()=>{if(a&&R&&!S&&!E.current){E.current=!0,k(!0),T([]);try{performance.now();const e="string"==typeof R.seasonId?parseInt(R.seasonId):R.seasonId||a;let s;if(r){const e=R.conferences.find(e=>e.id===r);s=null==e?void 0:e.dbConferenceId}const t=await Fn.getMinimalMatchups(e,o,s);f(t),j(new Map),P.current=new Map,x(new Set)}catch(e){const s=e instanceof Error?e.message:"Unknown error";T([s]),c({title:"Error Loading Matchups",description:`Failed to load matchup data: ${s}`,variant:"destructive"}),f([])}finally{E.current=!1,k(!1),_(!1)}}else _(!1)},[o,r,a,R,c]),M=te.useCallback(async e=>{if(a&&R){y(s=>new Set(s).add(e));try{performance.now();const s="string"==typeof R.seasonId?parseInt(R.seasonId):R.seasonId||a,t=await Fn.getMatchupDetails(e,s,o);t&&j(s=>{const a=new Map(s).set(e,t);return P.current=a,a})}catch(s){}finally{y(s=>{const t=new Set(s);return t.delete(e),t})}}},[a,R,o]),I=te.useCallback(async()=>{try{const e=await rn.getCurrentNFLWeek();u(e),d(e)}catch(e){u(1),d(1)}},[]),A=te.useCallback(e=>{h.has(e)?x(s=>{const t=new Set(s);return t.delete(e),t}):(x(s=>{const t=new Set(s);return t.add(e),t}),P.current.has(e)||M(e))},[h,M]);te.useEffect(()=>{I(),D()},[]),te.useEffect(()=>{a&&R?(_(!0),F()):_(!1)},[o,r,a,R,F]);const $=te.useMemo(()=>[...p].sort((e,s)=>e.conference.name.localeCompare(s.conference.name)),[p]);return b?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(jt,{className:"h-6 w-6 text-primary"}),i.jsx("h1",{className:"text-3xl font-bold",children:"Matchups"})]}),i.jsx(qr,{children:i.jsxs(Vr,{className:"py-8 text-center",children:[i.jsx(ct,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),i.jsx("p",{children:"Loading matchup data..."})]})})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(jt,{className:"h-6 w-6 text-primary"}),i.jsx("h1",{className:"text-3xl font-bold",children:"Matchups"})]}),i.jsxs("p",{className:"text-muted-foreground",children:[a," Season • Week ",o," • ",r?(null==(e=null==R?void 0:R.conferences.find(e=>e.id===r))?void 0:e.name)||"Selected Conference":"All Conferences"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs(Dr,{value:o.toString(),onValueChange:e=>d(parseInt(e)),children:[i.jsx(Mr,{className:"w-32",children:i.jsx(Fr,{})}),i.jsx($r,{children:Array.from({length:18},(e,s)=>s+1).map(e=>i.jsx(Lr,{value:e.toString(),children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{children:["Week ",e]}),e===m&&i.jsx(Or,{variant:"outline",className:"text-xs",children:"Current"})]})},e))})]}),o===m&&i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[i.jsx(As,{className:"h-4 w-4"}),i.jsx("span",{children:"Current week"})]})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs(Sr,{variant:"outline",size:"sm",onClick:()=>{Dn.clearAll(),F()},disabled:S,children:[i.jsx(ct,{className:"h-4 w-4 "+(S?"animate-spin":"")}),"Refresh"]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[i.jsx(Tt,{className:"h-4 w-4"}),i.jsxs("span",{children:[p.length," matchups"]})]})]})]}),C.length>0&&i.jsxs(qr,{className:"border-l-4 border-l-red-500",children:[i.jsx(Wr,{className:"pb-2",children:i.jsxs(Ur,{className:"text-sm flex items-center space-x-2",children:[i.jsx(Fs,{className:"h-4 w-4 text-red-500"}),i.jsxs("span",{children:["API Errors (",C.length,")"]})]})}),i.jsx(Vr,{children:i.jsx("div",{className:"space-y-1",children:C.map((e,s)=>i.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:e},s))})})]}),i.jsxs("div",{className:"grid gap-3",children:[$.map(e=>i.jsx(Mn,{matchup:e,isExpanded:h.has(e.id),onToggleExpand:A,detailedData:g.get(e.id),allPlayers:w,loading:v.has(e.id),onViewDetails:e=>s(`/matchups/${e}`)},e.id)),0===p.length&&i.jsx(qr,{children:i.jsxs(Vr,{className:"py-8 text-center",children:[i.jsx(Fs,{className:"h-8 w-8 mx-auto mb-4 text-muted-foreground"}),i.jsx("p",{className:"text-muted-foreground",children:"No matchups found for the selected filters."})]})})]})]})};var An="Tabs",[$n,Ln]=a(An,[J]),zn=J(),[On,Bn]=$n(An),qn=te.forwardRef((e,s)=>{const{__scopeTabs:t,value:a,onValueChange:r,defaultValue:n,orientation:l="horizontal",dir:d,activationMode:m="automatic",...u}=e,h=Q(d),[x,p]=o({prop:a,onChange:r,defaultProp:n??"",caller:An});return i.jsx(On,{scope:t,baseId:K(),value:x,onValueChange:p,orientation:l,dir:h,activationMode:m,children:i.jsx(c.div,{dir:h,"data-orientation":l,...u,ref:s})})});qn.displayName=An;var Wn="TabsList",Un=te.forwardRef((e,s)=>{const{__scopeTabs:t,loop:a=!0,...r}=e,n=Bn(Wn,t),l=zn(t);return i.jsx(G,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:a,children:i.jsx(c.div,{role:"tablist","aria-orientation":n.orientation,...r,ref:s})})});Un.displayName=Wn;var Hn="TabsTrigger",Vn=te.forwardRef((e,s)=>{const{__scopeTabs:t,value:a,disabled:r=!1,...n}=e,l=Bn(Hn,t),o=zn(t),d=Jn(l.baseId,a),u=Gn(l.baseId,a),h=a===l.value;return i.jsx(X,{asChild:!0,...o,focusable:!r,active:h,children:i.jsx(c.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:d,...n,ref:s,onMouseDown:m(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(a)}),onKeyDown:m(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(a)}),onFocus:m(e.onFocus,()=>{const e="manual"!==l.activationMode;h||r||!e||l.onValueChange(a)})})})});Vn.displayName=Hn;var Yn="TabsContent",Kn=te.forwardRef((e,s)=>{const{__scopeTabs:t,value:a,forceMount:r,children:n,...l}=e,o=Bn(Yn,t),m=Jn(o.baseId,a),u=Gn(o.baseId,a),h=a===o.value,x=te.useRef(h);return te.useEffect(()=>{const e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),i.jsx(d,{present:r||h,children:({present:t})=>i.jsx(c.div,{"data-state":h?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":m,hidden:!t,id:u,tabIndex:0,...l,ref:s,style:{...e.style,animationDuration:x.current?"0s":void 0},children:t&&n})})});function Jn(e,s){return`${e}-trigger-${s}`}function Gn(e,s){return`${e}-content-${s}`}Kn.displayName=Yn;var Xn=Un,Qn=Vn,Zn=Kn;const ei=qn,si=te.forwardRef(({className:e,...s},t)=>i.jsx(Xn,{ref:t,className:ba("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...s}));si.displayName=Xn.displayName;const ti=te.forwardRef(({className:e,...s},t)=>i.jsx(Qn,{ref:t,className:ba("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...s}));ti.displayName=Qn.displayName;const ai=te.forwardRef(({className:e,...s},t)=>i.jsx(Zn,{ref:t,className:ba("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));ai.displayName=Zn.displayName;var ri={exports:{}},ni={},ii=te;var li="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},ci=ii.useState,oi=ii.useEffect,di=ii.useLayoutEffect,mi=ii.useDebugValue;function ui(e){var s=e.getSnapshot;e=e.value;try{var t=s();return!li(e,t)}catch(a){return!0}}var hi="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,s){return s()}:function(e,s){var t=s(),a=ci({inst:{value:t,getSnapshot:s}}),r=a[0].inst,n=a[1];return di(function(){r.value=t,r.getSnapshot=s,ui(r)&&n({inst:r})},[e,t,s]),oi(function(){return ui(r)&&n({inst:r}),e(function(){ui(r)&&n({inst:r})})},[e]),mi(t),t};ni.useSyncExternalStore=void 0!==ii.useSyncExternalStore?ii.useSyncExternalStore:hi,ri.exports=ni;var xi=ri.exports;function pi(){return()=>{}}var fi="Avatar",[gi,ji]=a(fi),[vi,yi]=gi(fi),wi=te.forwardRef((e,s)=>{const{__scopeAvatar:t,...a}=e,[r,n]=te.useState("idle");return i.jsx(vi,{scope:t,imageLoadingStatus:r,onImageLoadingStatusChange:n,children:i.jsx(c.span,{...a,ref:s})})});wi.displayName=fi;var Ni="AvatarImage",bi=te.forwardRef((e,s)=>{const{__scopeAvatar:t,src:a,onLoadingStatusChange:r=()=>{},...n}=e,l=yi(Ni,t),o=function(e,{referrerPolicy:s,crossOrigin:t}){const a=xi.useSyncExternalStore(pi,()=>!0,()=>!1),r=te.useRef(null),n=a?(r.current||(r.current=new window.Image),r.current):null,[i,l]=te.useState(()=>ki(n,e));return f(()=>{l(ki(n,e))},[n,e]),f(()=>{const e=e=>()=>{l(e)};if(!n)return;const a=e("loaded"),r=e("error");return n.addEventListener("load",a),n.addEventListener("error",r),s&&(n.referrerPolicy=s),"string"==typeof t&&(n.crossOrigin=t),()=>{n.removeEventListener("load",a),n.removeEventListener("error",r)}},[n,t,s]),i}(a,n),d=u(e=>{r(e),l.onImageLoadingStatusChange(e)});return f(()=>{"idle"!==o&&d(o)},[o,d]),"loaded"===o?i.jsx(c.img,{...n,ref:s,src:a}):null});bi.displayName=Ni;var _i="AvatarFallback",Si=te.forwardRef((e,s)=>{const{__scopeAvatar:t,delayMs:a,...r}=e,n=yi(_i,t),[l,o]=te.useState(void 0===a);return te.useEffect(()=>{if(void 0!==a){const e=window.setTimeout(()=>o(!0),a);return()=>window.clearTimeout(e)}},[a]),l&&"loaded"!==n.imageLoadingStatus?i.jsx(c.span,{...r,ref:s}):null});function ki(e,s){return e?s?(e.src!==s&&(e.src=s),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}Si.displayName=_i;var Ci=wi,Ti=bi,Ei=Si;const Pi=te.forwardRef(({className:e,...s},t)=>i.jsx(Ci,{ref:t,className:ba("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...s}));Pi.displayName=Ci.displayName;const Ri=te.forwardRef(({className:e,...s},t)=>i.jsx(Ti,{ref:t,className:ba("aspect-square h-full w-full",e),...s}));Ri.displayName=Ti.displayName;const Di=te.forwardRef(({className:e,...s},t)=>i.jsx(Ei,{ref:t,className:ba("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...s}));Di.displayName=Ei.displayName;const Fi=({team1:e,team2:s,status:t,week:a,winningTeam:r,gameTimeRemaining:n,startTime:l,isBye:c})=>i.jsxs(qr,{className:"mb-4",children:[i.jsxs(Wr,{className:"pb-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[(()=>{switch(t){case"live":return i.jsx(Or,{className:"bg-green-500 hover:bg-green-600",children:"Live"});case"completed":return i.jsx(Or,{variant:"secondary",children:"Final"});case"upcoming":return i.jsx(Or,{variant:"outline",children:"Upcoming"});default:return i.jsx(Or,{variant:"secondary",children:t})}})(),n&&i.jsxs(Or,{variant:"outline",className:"text-xs",children:[i.jsx(As,{className:"h-3 w-3 mr-1"}),n]})]}),l&&i.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[l.toLocaleDateString()," at ",l.toLocaleTimeString()]})]}),i.jsxs(Vr,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs(Pi,{className:"h-10 w-10",children:[i.jsx(Ri,{src:e.avatar}),i.jsx(Di,{children:e.name.charAt(0)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold "+((null==r?void 0:r.id)===e.id?"text-green-600":""),children:e.name}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.owner," • ",e.record.wins,"-",e.record.losses]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xl font-bold "+((null==r?void 0:r.id)===e.id?"text-green-600":""),children:e.points.toFixed(1)}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Proj: ",e.projectedPoints.toFixed(1)]})]})]}),i.jsxs("div",{className:"text-center py-2",children:[i.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"VS"}),"completed"===t&&r&&i.jsx(St,{className:"h-5 w-5 mx-auto mt-1 text-yellow-500"})]}),c||!s?i.jsx("div",{className:"flex items-center justify-center p-3 bg-gray-100 rounded-lg",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl font-bold text-muted-foreground",children:"BYE"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Bye Week"})]})}):i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs(Pi,{className:"h-10 w-10",children:[i.jsx(Ri,{src:s.avatar}),i.jsx(Di,{children:s.name.charAt(0)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold "+((null==r?void 0:r.id)===s.id?"text-green-600":""),children:s.name}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.owner," • ",s.record.wins,"-",s.record.losses]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xl font-bold "+((null==r?void 0:r.id)===s.id?"text-green-600":""),children:s.points.toFixed(1)}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Proj: ",s.projectedPoints.toFixed(1)]})]})]})]})]}),Mi=({playerId:e,name:s,position:t,team:a,points:r,projected:n,status:l,positionSlot:c,isStarter:o,gameTimeRemaining:d,expandable:m=!1,onClick:u})=>{const h=r-n,x=h>0,p=h<-2,f=`\n    ${m?"cursor-pointer hover:shadow-md transition-shadow":""}\n    ${o?"border-l-4 border-l-blue-500":"border-l-4 border-l-gray-300"}\n    ${x?"bg-green-50":p?"bg-red-50":"bg-white"}\n  `;return i.jsx(qr,{className:f,onClick:m?u:void 0,children:i.jsxs(Vr,{className:"p-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[i.jsx(Or,{variant:"outline",className:"text-xs shrink-0",children:c}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("div",{className:"font-medium text-sm truncate",children:s}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[t," - ",a,d&&i.jsxs("span",{className:"ml-2",children:["• ",d]})]})]}),i.jsx("div",{className:"shrink-0",children:x?i.jsx(bt,{className:"h-4 w-4 text-green-500"}):p?i.jsx(Nt,{className:"h-4 w-4 text-red-500"}):"injured"===l?i.jsx(_t,{className:"h-4 w-4 text-red-500"}):null})]}),i.jsxs("div",{className:"text-right shrink-0 ml-3",children:[i.jsx("div",{className:"font-bold text-sm "+(x?"text-green-600":p?"text-red-600":""),children:r.toFixed(1)}),i.jsx("div",{className:"text-xs text-muted-foreground",children:n.toFixed(1)}),0!==h&&i.jsxs("div",{className:"text-xs "+(h>0?"text-green-600":"text-red-600"),children:[h>0?"+":"",h.toFixed(1)]})]})]}),i.jsx("div",{className:"mt-2",children:i.jsx(Or,{variant:"outline",className:`text-xs ${(()=>{switch(l){case"playing":return"bg-green-100 text-green-800 border-green-300";case"played":default:return"bg-gray-100 text-gray-800 border-gray-300";case"bye":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"injured":return"bg-red-100 text-red-800 border-red-300";case"not_started":return"bg-blue-100 text-blue-800 border-blue-300"}})()}`,children:l.replace("_"," ").toUpperCase()})})]})})},Ii=({title:e,data:s,team1Name:t,team2Name:a,height:r=200})=>{if(0===s.length)return i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{className:"text-lg",children:e})}),i.jsx(Vr,{children:i.jsx("div",{className:"flex items-center justify-center h-48 text-muted-foreground",children:"No data available"})})]});const n=Math.max(...s.flatMap(e=>[e.team1,e.team2])),l=Math.min(...s.flatMap(e=>[e.team1,e.team2])),c=n-l,o=e=>(n-e)/c*(r-40)+20,d=e=>e/(s.length-1)*300+50;return i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{className:"text-lg",children:e})}),i.jsx(Vr,{children:i.jsxs("div",{className:"relative",style:{height:r+60},children:[i.jsxs("svg",{width:"400",height:r+40,className:"overflow-visible",children:[[0,.25,.5,.75,1].map((e,s)=>{const t=20+e*(r-40),a=n-e*c;return i.jsxs("g",{children:[i.jsx("line",{x1:"50",y1:t,x2:"350",y2:t,stroke:"#e5e7eb",strokeWidth:"1"}),i.jsx("text",{x:"45",y:t+4,textAnchor:"end",className:"text-xs fill-gray-500",children:a.toFixed(0)})]},s)}),i.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"2",points:s.map((e,s)=>`${d(s)},${o(e.team1)}`).join(" ")}),i.jsx("polyline",{fill:"none",stroke:"#ef4444",strokeWidth:"2",points:s.map((e,s)=>`${d(s)},${o(e.team2)}`).join(" ")}),s.map((e,s)=>i.jsxs("g",{children:[i.jsx("circle",{cx:d(s),cy:o(e.team1),r:"4",fill:"#3b82f6"}),i.jsx("circle",{cx:d(s),cy:o(e.team2),r:"4",fill:"#ef4444"}),i.jsxs("text",{x:d(s),y:r+35,textAnchor:"middle",className:"text-xs fill-gray-500",children:["W",e.week]})]},s))]}),i.jsxs("div",{className:"flex justify-center space-x-6 mt-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-4 h-0.5 bg-blue-500"}),i.jsx("span",{className:"text-sm text-gray-600",children:t})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-4 h-0.5 bg-red-500"}),i.jsx("span",{className:"text-sm text-gray-600",children:a})]})]})]})})]})},Ai=({title:e,data:s,maxValue:t,height:a=200})=>{const r=t||Math.max(...s.map(e=>e.value));return i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{className:"text-lg",children:e})}),i.jsx(Vr,{children:i.jsx("div",{className:"space-y-3",style:{height:a},children:s.map((e,s)=>i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-16 text-sm text-right shrink-0",children:e.label}),i.jsx("div",{className:"flex-1 relative",children:i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-6",children:i.jsx("div",{className:`h-6 rounded-full flex items-center justify-end pr-2 text-white text-xs font-medium ${e.color||"bg-blue-500"}`,style:{width:e.value/r*100+"%"},children:e.value.toFixed(1)})})})]},s))})})]})},$i=()=>{const{matchupId:e}=le(),s=ie(),{selectedSeason:t,seasonConfigs:a}=br(),{toast:r}=_e(),[n,l]=te.useState(null),[c,o]=te.useState({}),[d,m]=te.useState([]),[u,h]=te.useState(!0),[x,p]=te.useState(!1),[f,g]=te.useState("live-scoring"),[j,v]=te.useState(new Date),y=te.useMemo(()=>a.find(e=>e.year===t),[a,t]),w=async()=>{if(e&&t&&y)try{h(!0);const s=await Dn.getPlayers();o(s);const a="string"==typeof y.seasonId?parseInt(y.seasonId):y.seasonId||t,r=await Fn.getDetailedMatchup(parseInt(e),a);if(r&&(l(r),r.teams[1])){const e=await Fn.getHeadToHeadHistory(r.teams[0].id,r.teams[1].id,a);m(e)}v(new Date)}catch(s){r({title:"Error Loading Matchup",description:"Failed to load matchup details",variant:"destructive"})}finally{h(!1)}},N=async()=>{p(!0),await w(),p(!1)};if(te.useEffect(()=>{w()},[e,t,y]),te.useEffect(()=>{if("live"===(null==n?void 0:n.status)){const e=setInterval(N,3e4);return()=>clearInterval(e)}},[null==n?void 0:n.status]),u)return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs(Sr,{variant:"ghost",onClick:()=>s("/matchups"),children:[i.jsx(_s,{className:"h-4 w-4 mr-2"}),"Back to Matchups"]})}),i.jsx(qr,{children:i.jsxs(Vr,{className:"py-8 text-center",children:[i.jsx(ct,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),i.jsx("p",{children:"Loading matchup details..."})]})})]});if(!n)return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs(Sr,{variant:"ghost",onClick:()=>s("/matchups"),children:[i.jsx(_s,{className:"h-4 w-4 mr-2"}),"Back to Matchups"]})}),i.jsx(qr,{children:i.jsxs(Vr,{className:"py-8 text-center",children:[i.jsx(_t,{className:"h-8 w-8 mx-auto mb-4 text-muted-foreground"}),i.jsx("p",{children:"Matchup not found"})]})})]});const[b,_]=n.teams,S="completed"===n.status&&_?b.points>_.points?b:_:null;return i.jsxs("div",{className:"space-y-4 md:space-y-6",children:[i.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs(Sr,{variant:"ghost",onClick:()=>s("/matchups"),className:"shrink-0",children:[i.jsx(_s,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Back to Matchups"}),i.jsx("span",{className:"sm:hidden",children:"Back"})]}),i.jsxs("div",{className:"min-w-0",children:[i.jsxs("h1",{className:"text-xl md:text-2xl font-bold truncate",children:["Week ",n.week," Matchup",n.playoffRound&&` - ${n.playoffRound}`]}),i.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[n.conference.name," • ",t," Season"]})]})]}),i.jsxs("div",{className:"flex items-center justify-between md:justify-end space-x-2",children:[i.jsxs("div",{className:"text-xs text-muted-foreground md:order-2",children:["Updated: ",j.toLocaleTimeString()]}),i.jsxs(Sr,{variant:"outline",size:"sm",onClick:N,disabled:x,className:"md:order-1",children:[i.jsx(ct,{className:"h-4 w-4 "+(x?"animate-spin":"")}),i.jsx("span",{className:"hidden sm:inline ml-2",children:"Refresh"})]})]})]}),i.jsx("div",{className:"md:hidden",children:i.jsx(Fi,{team1:b,team2:_,status:n.status,week:n.week,winningTeam:S,gameTimeRemaining:n.gameTimeRemaining,startTime:n.startTime,isBye:n.isBye})}),i.jsx("div",{className:"hidden md:block",children:i.jsx(Li,{matchup:n,winningTeam:S})}),i.jsxs(En,{defaultOpen:!1,className:"md:block",children:[i.jsx(Pn,{asChild:!0,className:"md:hidden",children:i.jsxs(Sr,{variant:"outline",className:"w-full",children:[i.jsx(Es,{className:"h-4 w-4 mr-2"}),"Quick Stats"]})}),i.jsx(Rn,{className:"md:block",children:i.jsx("div",{className:"mt-2 md:mt-0",children:i.jsx(Oi,{matchup:n})})})]}),i.jsxs(ei,{value:f,onValueChange:g,className:"space-y-4",children:[i.jsxs(si,{className:"grid w-full grid-cols-3 h-auto",children:[i.jsxs(ti,{value:"live-scoring",className:"text-xs sm:text-sm",children:[i.jsx(Ns,{className:"h-4 w-4 mr-1 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Live Scoring"}),i.jsx("span",{className:"sm:hidden",children:"Live"})]}),i.jsxs(ti,{value:"team-analysis",className:"text-xs sm:text-sm",children:[i.jsx(Es,{className:"h-4 w-4 mr-1 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Team Analysis"}),i.jsx("span",{className:"sm:hidden",children:"Analysis"})]}),i.jsxs(ti,{value:"head-to-head",className:"text-xs sm:text-sm",children:[i.jsx(St,{className:"h-4 w-4 mr-1 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Head-to-Head"}),i.jsx("span",{className:"sm:hidden",children:"H2H"})]})]}),i.jsx(ai,{value:"live-scoring",className:"space-y-4",children:i.jsx(Bi,{matchup:n,allPlayers:c})}),i.jsx(ai,{value:"team-analysis",className:"space-y-4",children:i.jsx(qi,{matchup:n})}),i.jsx(ai,{value:"head-to-head",className:"space-y-4",children:i.jsx(Wi,{matchup:n,historicalMatchups:d})})]}),i.jsx("div",{className:"lg:hidden",children:i.jsxs(En,{children:[i.jsx(Pn,{asChild:!0,children:i.jsxs(Sr,{variant:"outline",className:"w-full",children:[i.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Matchup Insights"]})}),i.jsx(Rn,{children:i.jsx("div",{className:"mt-2",children:i.jsx(Ui,{matchup:n})})})]})}),i.jsx("div",{className:"hidden lg:block",children:i.jsx(Ui,{matchup:n})})]})},Li=({matchup:e,winningTeam:s})=>{const[t,a]=e.teams;return i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[(()=>{switch(e.status){case"live":return i.jsx(Or,{className:"bg-green-500 hover:bg-green-600",children:"Live"});case"completed":return i.jsx(Or,{variant:"secondary",children:"Final"});case"upcoming":return i.jsx(Or,{variant:"outline",children:"Upcoming"});default:return i.jsx(Or,{variant:"secondary",children:e.status})}})(),e.gameTimeRemaining&&i.jsxs(Or,{variant:"outline",className:"text-xs",children:[i.jsx(As,{className:"h-3 w-3 mr-1"}),e.gameTimeRemaining]})]}),e.startTime&&i.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.startTime.toLocaleDateString()," at ",e.startTime.toLocaleTimeString()]})]})}),i.jsx(Vr,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-center",children:[i.jsx("div",{className:"md:col-span-2 text-center md:text-right",children:i.jsx(zi,{team:t,isWinner:(null==s?void 0:s.id)===t.id})}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2",children:"VS"}),"completed"===e.status&&s&&i.jsx(St,{className:"h-6 w-6 mx-auto text-yellow-500"}),e.scoreDifferential>0&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[e.scoreDifferential.toFixed(1)," pt difference"]})]}),i.jsx("div",{className:"md:col-span-2 text-center md:text-left",children:e.isBye||!a?i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:"BYE"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Bye Week"})]}):i.jsx(zi,{team:a,isWinner:(null==s?void 0:s.id)===a.id})})]})})]})},zi=({team:e,isWinner:s})=>i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-center md:justify-start space-x-3",children:[i.jsxs(Pi,{className:"h-12 w-12",children:[i.jsx(Ri,{src:e.avatar}),i.jsx(Di,{children:e.name.charAt(0)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-bold "+(s?"text-green-600":""),children:e.name}),i.jsx("div",{className:"text-sm text-muted-foreground",children:e.owner}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.record.wins,"-",e.record.losses]})]})]}),i.jsxs("div",{className:"text-center md:text-left",children:[i.jsx("div",{className:"text-3xl font-bold "+(s?"text-green-600":""),children:e.points.toFixed(1)}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Proj: ",e.projectedPoints.toFixed(1)]})]})]}),Oi=({matchup:e})=>{const[s,t]=e.teams,a=e=>e.starters.filter(e=>!0).length,r=e=>e.bench.reduce((s,t)=>s+(e.playersPoints[t]||0),0),n=[{label:"Projected vs Actual",value:t?`${s.points.toFixed(1)}/${s.projectedPoints.toFixed(1)} vs ${t.points.toFixed(1)}/${t.projectedPoints.toFixed(1)}`:`${s.points.toFixed(1)} / ${s.projectedPoints.toFixed(1)}`,mobileValue:t?`${s.points.toFixed(1)}/${s.projectedPoints.toFixed(1)}\nvs\n${t.points.toFixed(1)}/${t.projectedPoints.toFixed(1)}`:`${s.points.toFixed(1)} / ${s.projectedPoints.toFixed(1)}`},{label:"Players Playing",value:t?`${a(s)} vs ${a(t)}`:`${a(s)}`,mobileValue:t?`${a(s)} vs ${a(t)}`:`${a(s)}`},{label:"Bench Points",value:t?`${r(s).toFixed(1)} vs ${r(t).toFixed(1)}`:`${r(s).toFixed(1)}`,mobileValue:t?`${r(s).toFixed(1)} vs ${r(t).toFixed(1)}`:`${r(s).toFixed(1)}`},{label:"Season Record",value:t?`${s.record.wins}-${s.record.losses} vs ${t.record.wins}-${t.record.losses}`:`${s.record.wins}-${s.record.losses}`,mobileValue:t?`${s.record.wins}-${s.record.losses} vs ${t.record.wins}-${t.record.losses}`:`${s.record.wins}-${s.record.losses}`}];return i.jsx(qr,{children:i.jsxs(Vr,{className:"py-4",children:[i.jsx("div",{className:"grid grid-cols-2 gap-3 md:hidden",children:n.map((e,s)=>i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:e.label}),i.jsx("div",{className:"text-sm font-semibold whitespace-pre-line",children:e.mobileValue})]},s))}),i.jsx("div",{className:"hidden md:grid md:grid-cols-4 gap-4 text-center",children:n.map((e,s)=>i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:e.label}),i.jsx("div",{className:"text-lg font-semibold",children:e.value})]},s))})]})})},Bi=({matchup:e,allPlayers:s})=>{const[t,a]=e.teams,r=(e,r,n=!0)=>{const l=(e=>{const r=s[e],n=t.playersPoints[e]||0,i=(null==a?void 0:a.playersPoints[e])||0,l=n||i,c=t.playersProjected[e]||0,o=(null==a?void 0:a.playersProjected[e])||0,d=c||o;return{playerId:e,name:r?`${r.first_name||""} ${r.last_name||""}`.trim():"Unknown",position:(null==r?void 0:r.position)||"N/A",team:(null==r?void 0:r.team)||"N/A",points:l,projected:d,status:"played",isOutperforming:l>d,variance:l-d}})(e);return i.jsx(Mi,{playerId:e,name:l.name,position:l.position,team:l.team,points:l.points,projected:l.projected,status:l.status,positionSlot:r,isStarter:n,gameTimeRemaining:l.gameTimeRemaining,expandable:!1},e)},n=(e,s)=>{const t=["QB","RB","RB","WR","WR","WR","TE","FLEX","K","DEF"];return i.jsxs(qr,{children:[i.jsx(Wr,{className:"pb-3",children:i.jsxs(Ur,{className:"text-lg flex items-center",children:[i.jsx(Tt,{className:"h-5 w-5 mr-2"}),s]})}),i.jsxs(Vr,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Starting Lineup"}),i.jsx("div",{className:"space-y-2",children:e.starters.map((e,s)=>r(e,t[s]||"FLEX",!0))})]}),i.jsxs(En,{defaultOpen:!1,children:[i.jsx(Pn,{asChild:!0,children:i.jsxs(Sr,{variant:"outline",size:"sm",className:"w-full md:hidden",children:[i.jsx(Tt,{className:"h-4 w-4 mr-2"}),"Show Bench (",e.bench.length,")"]})}),i.jsx(Rn,{className:"md:block",children:i.jsxs("div",{className:"space-y-2 mt-2 md:mt-0",children:[i.jsx("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide hidden md:block",children:"Bench"}),i.jsx("div",{className:"space-y-2",children:e.bench.map(e=>r(e,"BENCH",!1))})]})})]})]})]})};return i.jsxs("div",{className:"space-y-4 lg:grid lg:grid-cols-2 lg:gap-6 lg:space-y-0",children:[n(t,t.name),a&&n(a,a.name)]})},qi=({matchup:e})=>{const[s,t]=e.teams,a=[{position:"QB",team1:85,team2:78},{position:"RB",team1:72,team2:88},{position:"WR",team1:91,team2:82},{position:"TE",team1:65,team2:71},{position:"K",team1:88,team2:85},{position:"DEF",team1:76,team2:69}];return i.jsxs("div",{className:"space-y-4 md:space-y-6",children:[i.jsx(Ii,{title:"Weekly Performance Comparison",data:[{week:1,team1:125.4,team2:118.2},{week:2,team1:142.1,team2:135.8},{week:3,team1:98.7,team2:156.3},{week:4,team1:167.2,team2:142.9},{week:5,team1:134.5,team2:128.1}],team1Name:s.name,team2Name:(null==t?void 0:t.name)||"BYE",height:200}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsx(Ai,{title:`${s.name} Position Performance`,data:a.map(e=>({label:e.position,value:e.team1,color:"bg-blue-500"})),maxValue:100,height:180}),t&&i.jsx(Ai,{title:`${t.name} Position Performance`,data:a.map(e=>({label:e.position,value:e.team2,color:"bg-red-500"})),maxValue:100,height:180})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs(Ur,{className:"text-lg",children:[s.name," Metrics"]})}),i.jsxs(Vr,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Average Score"}),i.jsx("span",{className:"font-medium",children:"132.4"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Floor"}),i.jsx("span",{className:"font-medium",children:"98.7"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Ceiling"}),i.jsx("span",{className:"font-medium",children:"167.2"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Consistency"}),i.jsx("span",{className:"font-medium",children:"High"})]})]})]}),t&&i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs(Ur,{className:"text-lg",children:[t.name," Metrics"]})}),i.jsxs(Vr,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Average Score"}),i.jsx("span",{className:"font-medium",children:"128.3"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Floor"}),i.jsx("span",{className:"font-medium",children:"118.2"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Ceiling"}),i.jsx("span",{className:"font-medium",children:"156.3"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Consistency"}),i.jsx("span",{className:"font-medium",children:"Medium"})]})]})]})]})]})},Wi=({matchup:e,historicalMatchups:s})=>{const[t,a]=e.teams,r=te.useMemo(()=>a?s.reduce((e,s)=>(s.team1Score>s.team2Score?e.team1Wins++:s.team2Score>s.team1Score?e.team2Wins++:e.ties++,e),{team1Wins:0,team2Wins:0,ties:0}):{team1Wins:0,team2Wins:0,ties:0},[s,a]),n=te.useMemo(()=>{if(0===s.length)return{team1Avg:0,team2Avg:0};const e=s.reduce((e,s)=>({team1Total:e.team1Total+s.team1Score,team2Total:e.team2Total+s.team2Score}),{team1Total:0,team2Total:0});return{team1Avg:e.team1Total/s.length,team2Avg:e.team2Total/s.length}},[s]);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs(Ur,{className:"flex items-center",children:[i.jsx(St,{className:"h-5 w-5 mr-2"}),"All-Time Head-to-Head Record"]})}),i.jsx(Vr,{children:a?i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.team1Wins}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.name," Wins"]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r.ties}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Ties"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.team2Wins}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.name," Wins"]})]})]}):i.jsx("div",{className:"text-center text-muted-foreground",children:"No head-to-head history available for bye week"})})]}),s.length>0&&i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs(Ur,{className:"flex items-center",children:[i.jsx(Ts,{className:"h-5 w-5 mr-2"}),"Previous Matchups"]})}),i.jsx(Vr,{children:i.jsx("div",{className:"space-y-2",children:s.slice(0,10).map((e,s)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs(Or,{variant:"outline",children:["Week ",e.week]}),i.jsx("span",{className:"text-sm text-muted-foreground",children:e.season})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-medium",children:[e.team1Score.toFixed(1)," - ",e.team2Score.toFixed(1)]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Winner: ",e.winner]})]}),e.team1Score>e.team2Score?i.jsx(ft,{className:"h-4 w-4 text-blue-500"}):i.jsx(ft,{className:"h-4 w-4 text-red-500"})]})]},s))})})]}),i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs(Ur,{className:"flex items-center",children:[i.jsx(bt,{className:"h-5 w-5 mr-2"}),"Matchup Trends"]})}),i.jsx(Vr,{children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"Average Scoring in Matchups"}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.name,": ",n.team1Avg.toFixed(1)," pts/game"]}),a&&i.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.name,": ",n.team2Avg.toFixed(1)," pts/game"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"Notable Performances"}),s.length>0?i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Highest scoring: ",Math.max(...s.map(e=>Math.max(e.team1Score,e.team2Score))).toFixed(1)," pts"]}):i.jsx("div",{className:"text-sm text-muted-foreground",children:"No historical data available"})]})]})})]})]})},Ui=({matchup:e})=>{const[s,t]=e.teams;return i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs(Ur,{className:"flex items-center",children:[i.jsx(Pt,{className:"h-5 w-5 mr-2"}),"Matchup Insights"]})}),i.jsxs(Vr,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium mb-2",children:"Key Advantages"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"p-2 bg-blue-50 rounded",children:[i.jsx("strong",{children:s.name})," has stronger QB play this week"]}),t&&i.jsxs("div",{className:"p-2 bg-red-50 rounded",children:[i.jsx("strong",{children:t.name})," has better RB depth"]})]})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[i.jsx(_t,{className:"h-4 w-4 mr-1"}),"Weather Alerts"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"No weather concerns for this week"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium mb-2",children:"Injury Updates"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"All players healthy and active"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium mb-2",children:"Waiver Wire"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Consider picking up handcuff RBs"})]}),i.jsx(sn,{}),i.jsxs("div",{children:[i.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[i.jsx(st,{className:"h-4 w-4 mr-1"}),"Trash Talk"]}),i.jsx(Sr,{variant:"outline",size:"sm",className:"w-full",children:"Add Comment"})]})]})]})},Hi=te.forwardRef(({className:e,type:s,...t},a)=>i.jsx("input",{type:s,className:ba("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...t}));Hi.displayName="Input";const Vi=()=>{var e;const{selectedSeason:s,selectedConference:t,currentSeasonConfig:a}=br(),{toast:r}=_e(),[n,l]=te.useState(""),[c,o]=te.useState([]),[d,m]=te.useState(!0),[u,h]=te.useState(null),x=async()=>{m(!0),h(null);try{const e=await vr.getSeasons({filters:[{column:"season_year",operator:"eq",value:s.toString()}]});if(e.error||!e.data||0===e.data.length)throw new Error("Season not found");const r=e.data[0].id;let n=a.conferences.filter(e=>e.dbConferenceId);if(t&&(n=n.filter(e=>e.id===t)),0===n.length)return void o([]);const i=n.map(e=>e.dbConferenceId),l=await vr.getTeams({});if(l.error||!l.data)throw new Error("Failed to fetch teams");const c=await vr.getTeamConferenceJunctions({filters:[{column:"conference_id",operator:"in",value:i}]});if(c.error||!c.data)throw new Error("Failed to fetch team conference mappings");const d=c.data.map(e=>e.team_id),m=l.data.filter(e=>d.includes(e.id)),u=await vr.getTeamRecords({filters:[{column:"season_id",operator:"eq",value:r},{column:"conference_id",operator:"in",value:i}]});if(u.error||!u.data)throw new Error("Failed to fetch team records");const h=await vr.getConferences({filters:[{column:"id",operator:"in",value:i}]}),x=new Map;h.data&&h.data.forEach(e=>{x.set(e.id,e.conference_name)});const f=[];for(const s of m){const e=u.data.find(e=>e.team_id===s.id);if(e){const t=c.data.find(e=>e.team_id===s.id),a=t?x.get(t.conference_id):"Unknown",r=p(e.wins,e.losses),n=s.team_logourl?`https://sleepercdn.com/avatars/thumbs/${s.team_logourl}`:null;f.push({id:s.id.toString(),teamName:s.team_name,ownerName:s.owner_name,coOwnerName:s.co_owner_name||void 0,ownerAvatar:n,conference:a,record:{wins:e.wins,losses:e.losses,ties:0},pointsFor:e.points_for,pointsAgainst:e.points_against,rank:0,streak:r})}}f.sort((e,s)=>e.record.wins!==s.record.wins?s.record.wins-e.record.wins:s.pointsFor-e.pointsFor),f.forEach((e,s)=>{e.rank=s+1}),o(f)}catch(e){h(e instanceof Error?e.message:"Failed to load teams data"),r({title:"Error Loading Teams",description:"Failed to load team data. Please try again.",variant:"destructive"})}finally{m(!1)}},p=(e,s)=>e>s?`W${Math.min(e-s,5)}`:s>e?`L${Math.min(s-e,5)}`:"T1";te.useEffect(()=>{x()},[s,t]);const f=c.filter(e=>""===n||e.teamName.toLowerCase().includes(n.toLowerCase())||e.ownerName.toLowerCase().includes(n.toLowerCase())||e.coOwnerName&&e.coOwnerName.toLowerCase().includes(n.toLowerCase())),g=(e,s)=>{const t=e/(e+s);return t>=.7?"default":t>=.5?"secondary":"destructive"},j=e=>e.startsWith("W")?"text-green-600":e.startsWith("L")?"text-red-600":"text-muted-foreground";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Tt,{className:"h-6 w-6 text-primary"}),i.jsx("h1",{className:"text-3xl font-bold",children:"Teams"})]}),i.jsxs("p",{className:"text-muted-foreground",children:[s," Season • ",t?null==(e=a.conferences.find(e=>e.id===t))?void 0:e.name:"All Conferences"," • ",f.length," teams"]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(Hi,{placeholder:"Search teams or owners...",value:n,onChange:e=>l(e.target.value),className:"pl-10"})]}),i.jsx(Sr,{variant:"outline",onClick:()=>l(""),children:"Clear"}),i.jsxs(Sr,{variant:"outline",onClick:x,disabled:d,children:[i.jsx(ct,{className:"h-4 w-4 mr-2 "+(d?"animate-spin":"")}),"Refresh"]})]}),d&&i.jsx(qr,{children:i.jsxs(Vr,{className:"py-12 text-center",children:[i.jsx(ct,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4 animate-spin"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Loading Teams"}),i.jsx("p",{className:"text-muted-foreground",children:"Fetching team data from database..."})]})}),u&&!d&&i.jsx(qr,{children:i.jsxs(Vr,{className:"py-12 text-center",children:[i.jsx(Fs,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Teams"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:u}),i.jsxs(Sr,{onClick:x,children:[i.jsx(ct,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}),!d&&!u&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(e=>i.jsxs(qr,{className:"hover:shadow-lg transition-shadow",children:[i.jsx(Wr,{className:"pb-2",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs(Pi,{className:"h-10 w-10",children:[i.jsx(Ri,{src:e.ownerAvatar||void 0}),i.jsx(Di,{className:"bg-primary/10",children:e.ownerName.split(" ").map(e=>e[0]).join("").toUpperCase()})]}),i.jsxs("div",{children:[i.jsx(Ur,{className:"text-base leading-tight",children:e.teamName}),i.jsxs(Hr,{className:"text-sm",children:[e.ownerName,e.coOwnerName&&` & ${e.coOwnerName}`]})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[e.rank<=3&&i.jsx(St,{className:"h-4 w-4 text-yellow-500"}),i.jsxs("span",{className:"text-sm font-semibold",children:["#",e.rank]})]})]})}),i.jsxs(Vr,{className:"space-y-3",children:[i.jsx(cn,{conferenceName:e.conference,size:"sm"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Record"}),i.jsxs(Or,{variant:g(e.record.wins,e.record.losses),children:[e.record.wins,"-",e.record.losses,e.record.ties>0&&`-${e.record.ties}`]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Streak"}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(bt,{className:`h-3 w-3 ${j(e.streak)}`}),i.jsx("span",{className:`text-sm font-semibold ${j(e.streak)}`,children:e.streak})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Points For"}),i.jsx("p",{className:"font-semibold",children:e.pointsFor.toFixed(1)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Points Against"}),i.jsx("p",{className:"font-semibold",children:e.pointsAgainst.toFixed(1)})]})]}),i.jsx(re,{to:`/teams/${e.id}`,className:"w-full",children:i.jsxs(Sr,{variant:"outline",className:"w-full text-sm py-1.5",children:[i.jsx(Bs,{className:"mr-2 h-3 w-3"}),"View Team Details"]})})]})]},e.id))}),!d&&!u&&0===f.length&&i.jsx(qr,{children:i.jsxs(Vr,{className:"py-12 text-center",children:[i.jsx(Tt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No teams found"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"No teams match your current search criteria."}),i.jsx(Sr,{variant:"outline",onClick:()=>l(""),children:"Clear Search"})]})}),!d&&!u&&f.length>0&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(qr,{children:i.jsxs(Wr,{className:"pb-2",children:[i.jsx(Hr,{children:"Average Points For"}),i.jsx(Ur,{className:"text-2xl",children:(f.reduce((e,s)=>e+s.pointsFor,0)/f.length).toFixed(1)})]})}),i.jsx(qr,{children:i.jsxs(Wr,{className:"pb-2",children:[i.jsx(Hr,{children:"Highest Scoring Team"}),i.jsx(Ur,{className:"text-lg",children:f.reduce((e,s)=>e.pointsFor>s.pointsFor?e:s).teamName})]})})]})]})},Yi=({transaction:e})=>{const s=()=>{switch(e.type){case"trade":return"bg-blue-100 text-blue-800";case"free_agent":return"bg-green-100 text-green-800";case"waiver":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return i.jsxs(qr,{className:"mb-4 hover:shadow-md transition-shadow",children:[i.jsx(Wr,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:`p-2 rounded-full ${s()}`,children:(()=>{switch(e.type){case"trade":return i.jsx(bs,{className:"h-4 w-4"});case"free_agent":return i.jsx(lt,{className:"h-4 w-4"});case"waiver":return i.jsx(bt,{className:"h-4 w-4"});default:return i.jsx(Us,{className:"h-4 w-4"})}})()}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Or,{className:s(),children:(e=>{switch(e){case"free_agent":return"Free Agent";case"waiver":return"Waiver";case"trade":return"Trade";default:return e.charAt(0).toUpperCase()+e.slice(1)}})(e.type)}),i.jsxs(Or,{variant:"outline",children:["Week ",e.week]}),i.jsx(Or,{className:(()=>{switch(e.status){case"complete":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(),children:e.status})]}),i.jsxs("div",{className:"flex items-center space-x-1 mt-1 text-sm text-muted-foreground",children:[i.jsx(Ts,{className:"h-3 w-3"}),i.jsx("span",{children:(t=e.date,new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).format(t))})]})]})]}),e.waiverBid&&i.jsxs("div",{className:"flex items-center space-x-1 text-sm text-muted-foreground",children:[i.jsx(zs,{className:"h-3 w-3"}),i.jsxs("span",{children:["$",e.waiverBid]})]})]})}),i.jsx(Vr,{className:"pt-0",children:i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsx("p",{className:"text-sm font-medium text-foreground",children:e.details})}),e.teams.length>0&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Teams:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:e.teams.map((e,s)=>i.jsx(Or,{variant:"secondary",className:"text-xs",children:e},s))})]}),(e.players.added.length>0||e.players.dropped.length>0)&&i.jsxs("div",{className:"space-y-2",children:[e.players.added.length>0&&i.jsxs("div",{children:[i.jsxs("p",{className:"text-xs text-muted-foreground mb-1 flex items-center",children:[i.jsx(lt,{className:"h-3 w-3 mr-1 text-green-600"}),"Added:"]}),i.jsx("div",{className:"space-y-1",children:e.players.added.map((e,s)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"font-medium",children:e.name}),i.jsxs(Or,{variant:"outline",className:"text-xs",children:["to ",e.team]})]},s))})]}),e.players.dropped.length>0&&i.jsxs("div",{children:[i.jsxs("p",{className:"text-xs text-muted-foreground mb-1 flex items-center",children:[i.jsx(at,{className:"h-3 w-3 mr-1 text-red-600"}),"Dropped:"]}),i.jsx("div",{className:"space-y-1",children:e.players.dropped.map((e,s)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"font-medium",children:e.name}),i.jsxs(Or,{variant:"outline",className:"text-xs",children:["from ",e.team]})]},s))})]})]}),e.draftPicks.length>0&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Draft Picks:"}),i.jsx("div",{className:"space-y-1",children:e.draftPicks.map((e,s)=>i.jsxs("div",{className:"text-sm",children:[i.jsxs("span",{className:"font-medium",children:[e.season," Round ",e.round]}),i.jsxs("span",{className:"text-muted-foreground ml-2",children:["(Roster ",e.previous_owner_id," → Roster ",e.owner_id,")"]})]},s))})]}),e.waiverBudget.length>0&&i.jsxs("div",{children:[i.jsxs("p",{className:"text-xs text-muted-foreground mb-1 flex items-center",children:[i.jsx(zs,{className:"h-3 w-3 mr-1"}),"FAAB Transfers:"]}),i.jsx("div",{className:"space-y-1",children:e.waiverBudget.map((e,s)=>i.jsxs("div",{className:"text-sm",children:[i.jsxs("span",{className:"font-medium",children:["$",e.amount]}),i.jsxs("span",{className:"text-muted-foreground ml-2",children:["(Roster ",e.sender," → Roster ",e.receiver,")"]})]},s))})]}),e.notes&&i.jsxs(i.Fragment,{children:[i.jsx(sn,{}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Notes:"}),i.jsx("p",{className:"text-sm italic text-muted-foreground",children:e.notes})]})]})]})})]});var t},Ki=()=>{const{teamId:e}=le(),{selectedSeason:s,currentSeasonConfig:t}=br(),[a,r]=te.useState("roster"),[n,l]=te.useState(null),[c,o]=te.useState([]),[d,m]=te.useState(!1),[u,h]=te.useState([]),[x,p]=te.useState(!1),[f,g]=te.useState(null),[j,v]=te.useState(null),[y,w]=te.useState(0),[N,b]=te.useState(null),[_,S]=te.useState(!0),[k,C]=te.useState(null),{toast:T}=_e();te.useEffect(()=>{e&&t&&E(parseInt(e))},[e,t]),te.useEffect(()=>{"transactions"===a&&n&&0===c.length&&P()},[a,n]),te.useEffect(()=>{"schedule"===a&&n&&0===u.length&&R()},[a,n,s]),te.useEffect(()=>{"schedule"!==a&&"performance"!==a||!n||f||D()},[a,n,s]),te.useEffect(()=>{"performance"===a&&n&&!j&&F()},[a,n,s]),te.useEffect(()=>{"performance"===a&&n&&0===y&&M()},[a,n,s]),te.useEffect(()=>{n&&!N&&I()},[n,s]),te.useEffect(()=>{u.length>0&&h([]),f&&g(null)},[s]),te.useEffect(()=>{v(null),w(0),b(null)},[s]);const E=async e=>{try{S(!0),C(null);const s=await vr.getTeams({filters:[{column:"id",operator:"eq",value:e}]});if(s.error||!s.data||0===s.data.length)throw new Error("Team not found");const t=s.data[0],a=await vr.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:e}]});if(a.error||!a.data||0===a.data.length)throw new Error("Team conference mapping not found");const r=a.data[0],n=r.roster_id,i=await vr.getConferences({filters:[{column:"id",operator:"eq",value:r.conference_id}]});if(i.error||!i.data||0===i.data.length)throw new Error("Conference not found");const c=i.data[0],o=await rn.getTeamRosterData(c.league_id,n);l({...o,teamData:t,conferenceData:c})}catch(s){const e=s instanceof Error?s.message:"Failed to load team data";C(e),T({title:"Error",description:e,variant:"destructive"})}finally{S(!1)}},P=async()=>{if(n)try{m(!0);const e=await vr.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:n.teamData.id}]});if(e.error||!e.data||0===e.data.length)throw new Error("Team conference mappings not found");const s=e.data.map(e=>e.conference_id),t=await vr.getTransactions({filters:[{column:"conference_id",operator:"in",value:s}],orderBy:{column:"created_at",ascending:!1}});if(t.error||!t.data)throw new Error(t.error||"Failed to fetch transactions");const a=await vr.getTeams({}),r=await vr.getTeamConferenceJunctions({filters:[{column:"conference_id",operator:"in",value:s}]}),i=await vr.getAllPlayersForMapping(),l=new Map;i.forEach(e=>{e.sleeper_id&&l.set(String(e.sleeper_id),e.player_name)});const c=(await Promise.all(t.data.map(async s=>{var t,i,c;let o={};try{o="string"==typeof s.data?JSON.parse(s.data):s.data||{}}catch(_){}const d=n.teamData.id,m=s.conference_id,u=o.roster_ids||[],h=null==(t=e.data)?void 0:t.find(e=>e.team_id===d&&e.conference_id===m);if(!h)return null;if(!u.includes(h.roster_id))return null;const x=e=>{var t;const n=null==(t=r.data)?void 0:t.find(t=>t.roster_id.toString()===e.toString()&&t.conference_id===s.conference_id);if(n&&a.data){const e=a.data.find(e=>e.id===n.team_id);return(null==e?void 0:e.team_name)||"Unknown Team"}return"Unknown Team"},p=[],f=[],g=e=>{const s=String(e);return l.get(s)||`Player ${s}`};if(o.adds)for(const[e,a]of Object.entries(o.adds)){const s=g(e),t=x(a);p.push({name:s,team:t})}if(o.drops)for(const[e,a]of Object.entries(o.drops)){const s=g(e),t=x(a);f.push({name:s,team:t})}let j="";const v=o.type||s.type,y=new Set;o.roster_ids&&o.roster_ids.forEach(e=>{const s=x(e);"Unknown Team"!==s&&y.add(s)});const w=n.teamData.team_name,N=(null==(c=null==(i=(await vr.getConferences({filters:[{column:"id",operator:"eq",value:s.conference_id}]})).data)?void 0:i[0])?void 0:c.conference_name)||"Unknown Conference";switch(v){case"trade":if(p.length>0||f.length>0){const e=[];p.forEach(s=>e.push(`${s.name} to ${s.team}`)),f.forEach(s=>e.push(`${s.name} from ${s.team}`)),j=y.size>1?`[${N}] Trade between ${Array.from(y).join(" and ")}: ${e.join(", ")}`:`[${N}] ${w} trade: ${e.join(", ")}`}else if(o.draft_picks&&o.draft_picks.length>0){j=`[${N}] Trade involving ${o.draft_picks.map(e=>`${e.season} Round ${e.round} pick`).join(", ")}`}else j=`[${N}] Trade between ${Array.from(y).join(" and ")}`;break;case"waiver":j=p.length>0&&f.length>0?`[${N}] ${w} claimed ${p.map(e=>e.name).join(", ")} from waivers, dropped ${f.map(e=>e.name).join(", ")}`:p.length>0?`[${N}] ${w} claimed ${p.map(e=>e.name).join(", ")} from waivers`:f.length>0?`[${N}] ${w} dropped ${f.map(e=>e.name).join(", ")} to waivers`:`[${N}] ${w} made a waiver claim`;break;case"free_agent":j=p.length>0&&f.length>0?`[${N}] ${w} added ${p.map(e=>e.name).join(", ")}, dropped ${f.map(e=>e.name).join(", ")}`:p.length>0?`[${N}] ${w} added ${p.map(e=>e.name).join(", ")} from free agency`:f.length>0?`[${N}] ${w} dropped ${f.map(e=>e.name).join(", ")}`:`[${N}] ${w} made a free agent transaction`;break;default:j=`[${N}] ${w} completed a ${v||"transaction"}`}const b="trade"===o.type?"trade":"waiver"===o.type?"waiver":"free_agent"===o.type?"free_agent":"commissioner";return{id:s.id.toString(),type:b,date:new Date(s.created_at||new Date),details:j,teams:[w],players:{added:p.map(e=>({id:"",name:e.name,team:e.team})),dropped:f.map(e=>({id:"",name:e.name,team:e.team}))},week:o.leg||0,status:"completed",rosterIds:o.roster_ids||[],draftPicks:o.draft_picks||[],waiverBudget:o.waiver_budget||[]}}))).filter(e=>null!==e);o(c),T({title:"Transactions Loaded",description:`Found ${c.length} transactions for this team across all seasons`})}catch(e){const s=e instanceof Error?e.message:"Failed to load transactions";T({title:"Error Loading Transactions",description:s,variant:"destructive"})}finally{m(!1)}},R=async()=>{var e,a,r;if(n&&t)try{p(!0);const i=t.conferences.filter(e=>e.dbConferenceId);if(0===i.length)return void h([]);const l=await vr.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:n.teamData.id}]});if(l.error||!l.data)throw new Error("Failed to get team conference mappings");const c=i.map(e=>e.dbConferenceId),o=l.data.find(e=>c.includes(e.conference_id));if(!o)return void h([]);const d=await vr.getTeams({}),m=new Map;d.data&&d.data.forEach(e=>{m.set(e.id,e.team_name)});const u=await vr.getSeasons({filters:[{column:"season_year",operator:"eq",value:s}]});if(u.error||!u.data||0===u.data.length)throw new Error("Season not found");const x=u.data[0].id,f=(null==(e=(await vr.getConferences({filters:[{column:"season_id",operator:"eq",value:x}]})).data)?void 0:e.map(e=>e.id))||[],g=await vr.getMatchups({filters:[{column:"conference_id",operator:"eq",value:o.conference_id},{column:"week",operator:"lte",value:12}],orderBy:{column:"week",ascending:!0}}),j=new Set;null==(a=g.data)||a.forEach(e=>{e.manual_override&&j.add(e.week)});let v=[];if(j.size>0){v=(await vr.getMatchups({filters:[{column:"conference_id",operator:"in",value:f},{column:"week",operator:"in",value:Array.from(j)}],orderBy:{column:"week",ascending:!0}})).data||[]}const y=await vr.getMatchupAdminOverrides({filters:[{column:"conference_id",operator:"eq",value:o.conference_id},{column:"is_active",operator:"eq",value:!0}]}),w=[];(g.data||[]).filter(e=>!e.manual_override).forEach(e=>{var s;const t=null==(s=y.data)?void 0:s.find(s=>s.conference_id===e.conference_id&&s.week===parseInt(e.week)&&s.is_active);let a,r,i=!1,l=null;if(t?(a=t.override_team1_id,r=t.override_team2_id,i=!0,l=t.override_reason):(a=e.team1_id,r=e.team2_id),a===n.teamData.id||r===n.teamData.id){const s=a===n.teamData.id,t=s?r:a,c=m.get(t)||"Unknown Team";let o="TBD",d=null,u=null;null!==e.team1_score&&null!==e.team2_score&&(s?(d=e.team1_score,u=e.team2_score):(d=e.team2_score,u=e.team1_score),o=d>u?"W":d<u?"L":"T"),w.push({week:e.week,opponent:c,isHome:s,result:o,teamScore:d,opponentScore:u,isPlayoff:!1,isOverridden:i,overrideReason:l,matchupStatus:e.matchup_status||"scheduled",playoffRoundName:null})}}),v.forEach(e=>{const s=e.team1_id,t=e.team2_id;if(s===n.teamData.id||t===n.teamData.id){const a=s===n.teamData.id,r=a?t:s,i=m.get(r)||"Unknown Team";let l="TBD",c=null,o=null;null!==e.team1_score&&null!==e.team2_score&&(a?(c=e.team1_score,o=e.team2_score):(c=e.team2_score,o=e.team1_score),l=c>o?"W":c<o?"L":"T"),w.push({week:e.week,opponent:i,isHome:a,result:l,teamScore:c,opponentScore:o,isPlayoff:!1,isOverridden:!0,overrideReason:"Interconference",matchupStatus:e.matchup_status||"scheduled",playoffRoundName:null})}});const N=(null==(r=(await vr.getPlayoffBrackets({filters:[{column:"season_id",operator:"eq",value:x}],orderBy:{column:"week",ascending:!0}})).data)?void 0:r.filter(e=>e.team1_id===n.teamData.id||e.team2_id===n.teamData.id))||[],b=e=>{switch(e){case 13:return"Conference Championship";case 14:return"Wildcard";case 15:return"Quarterfinals";case 16:return"Semifinals";case 17:return"Colosseum Championship";default:return`Playoff Week ${e}`}},_=N.map(e=>{let s="Unknown Team",t=!0;if(e.is_bye&&14===e.week)s="BYE",t=e.team1_id===n.teamData.id;else{t=e.team1_id===n.teamData.id;const a=t?e.team2_id:e.team1_id;s=m.get(a)||"Unknown Team"}let a="TBD",r=null,i=null;return e.is_bye&&14===e.week?(a="W",r=null,i=null):null!==e.team1_score&&null!==e.team2_score&&(t?(r=e.team1_score,i=e.team2_score):(r=e.team2_score,i=e.team1_score),a=r>i?"W":r<i?"L":"T"),{week:e.week.toString(),opponent:s,isHome:t,result:a,teamScore:r,opponentScore:i,isPlayoff:!0,isOverridden:!1,overrideReason:null,matchupStatus:e.winning_team_id?"completed":"scheduled",playoffRoundName:b(e.week)}});w.sort((e,s)=>parseInt(e.week)-parseInt(s.week));const S=[...w,..._];h(S),T({title:"Schedule Loaded",description:`Found ${S.length} matchups for ${s} season`})}catch(i){const e=i instanceof Error?i.message:"Failed to load schedule";T({title:"Error Loading Schedule",description:e,variant:"destructive"})}finally{p(!1)}},D=async()=>{if(n&&t)try{const e=await vr.getSeasons({filters:[{column:"season_year",operator:"eq",value:s}]});if(e.error||!e.data||0===e.data.length)throw new Error("Season not found");const a=e.data[0].id,r=t.conferences.filter(e=>e.dbConferenceId);if(0===r.length)return;const i=await vr.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:n.teamData.id}]});if(i.error||!i.data)throw new Error("Failed to get team conference mappings");const l=r.map(e=>e.dbConferenceId),c=i.data.find(e=>l.includes(e.conference_id));if(!c)return;const o=await vr.getTeamRecords({filters:[{column:"team_id",operator:"eq",value:n.teamData.id},{column:"conference_id",operator:"eq",value:c.conference_id},{column:"season_id",operator:"eq",value:a}]});if(o.error||!o.data||0===o.data.length)return;const d=o.data[0],m=await vr.getTeamRecords({filters:[{column:"conference_id",operator:"eq",value:c.conference_id},{column:"season_id",operator:"eq",value:a}]});if(m.data){const e=m.data.sort((e,s)=>s.wins!==e.wins?s.wins-e.wins:s.points_for-e.points_for).findIndex(e=>e.team_id===n.teamData.id)+1;d.rank=e}const u=await vr.getTeamRecords({filters:[{column:"season_id",operator:"eq",value:a}]});if(u.data){const e=u.data.slice().sort((e,s)=>s.points_for-e.points_for).findIndex(e=>e.team_id===n.teamData.id)+1;d.leagueRankPointsFor=e;const s=u.data.slice().sort((e,s)=>e.points_against-s.points_against).findIndex(e=>e.team_id===n.teamData.id)+1;d.leagueRankPointsAgainst=s;const t=u.data.slice().sort((e,s)=>s.point_diff-e.point_diff).findIndex(e=>e.team_id===n.teamData.id)+1;d.leagueRankPointDiff=t}g(d)}catch(e){}},F=async()=>{if(n&&t)try{const e=t.conferences.filter(e=>e.dbConferenceId);if(0===e.length)return;const s=await vr.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:n.teamData.id}]});if(s.error||!s.data)throw new Error("Failed to get team conference mappings");const a=e.map(e=>e.dbConferenceId),r=s.data.find(e=>a.includes(e.conference_id));if(!r)return;const i=await vr.getConferences({filters:[{column:"id",operator:"eq",value:r.conference_id}]});if(i.error||!i.data||0===i.data.length)throw new Error("Conference not found");const l=i.data[0].league_id,c=r.roster_id,o=await rn.getTeamRosterData(l,c),d=100-o.roster.settings.waiver_budget_used;v({position:o.roster.settings.waiver_position,budget:d})}catch(e){}},M=async()=>{if(n&&t)try{const a=await vr.getSeasons({filters:[{column:"season_year",operator:"eq",value:s}]});if(a.error||!a.data||0===a.data.length)throw new Error("Season not found");const r=a.data[0].id,i=t.conferences.filter(e=>e.dbConferenceId);if(0===i.length)return;const l=await vr.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:n.teamData.id}]});if(l.error||!l.data)throw new Error("Failed to get team conference mappings");const c=i.map(e=>e.dbConferenceId),o=l.data.find(e=>c.includes(e.conference_id));if(!o)return void w(0);const d=await vr.getTransactions({filters:[{column:"season_id",operator:"eq",value:r},{column:"conference_id",operator:"eq",value:o.conference_id}]});if(d.error||!d.data)throw new Error("Failed to fetch transactions");let m=0;for(const s of d.data){let t={};try{t="string"==typeof s.data?JSON.parse(s.data):s.data||{}}catch(e){continue}(t.roster_ids||[]).includes(o.roster_id)&&m++}w(m)}catch(a){w(0)}},I=async()=>{var e;if(n&&t)try{const a=await vr.getSeasons({filters:[{column:"season_year",operator:"eq",value:s.toString()}]});if(a.error||!a.data||0===a.data.length)throw new Error("Season not found");const r=a.data[0].id,i=t.conferences.filter(e=>e.dbConferenceId);if(0===i.length)return;const l=await vr.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:n.teamData.id}]});if(l.error||!l.data)throw new Error("Failed to get team conference mappings");const c=i.map(e=>e.dbConferenceId),o=l.data.find(e=>c.includes(e.conference_id));if(!o)return void b({wins:0,losses:0,pointsFor:0,gamesPlayed:0});const d=await vr.getTeamRecords({filters:[{column:"team_id",operator:"eq",value:n.teamData.id},{column:"conference_id",operator:"eq",value:o.conference_id},{column:"season_id",operator:"eq",value:r}]});let m=0,u=0,h=0;if(d.data&&d.data.length>0){const e=d.data[0];m=e.wins,u=e.losses,h=e.points_for}const x=await vr.getMatchups({filters:[{column:"conference_id",operator:"eq",value:o.conference_id},{column:"week",operator:"lte",value:12}]});let p=0;if(x.data){p=x.data.filter(e=>{const s=e.team1_id===n.teamData.id||e.team2_id===n.teamData.id,t=null!==e.team1_score&&null!==e.team2_score;return s&&t}).length;const s=new Set;if(x.data.forEach(e=>{e.manual_override&&s.add(e.week)}),s.size>0){const t=(null==(e=(await vr.getConferences({filters:[{column:"season_id",operator:"eq",value:r}]})).data)?void 0:e.map(e=>e.id))||[],a=await vr.getMatchups({filters:[{column:"conference_id",operator:"in",value:t},{column:"week",operator:"in",value:Array.from(s)},{column:"week",operator:"lte",value:12}]});if(a.data){p+=a.data.filter(e=>{const s=e.team1_id===n.teamData.id||e.team2_id===n.teamData.id,t=null!==e.team1_score&&null!==e.team2_score,a=e.conference_id!==o.conference_id;return s&&t&&a}).length}}}const f=(new Date).getFullYear();s===f||0!==p||(p=12),b({wins:m,losses:u,pointsFor:h,gamesPlayed:p})}catch(a){b({wins:0,losses:0,pointsFor:0,gamesPlayed:0})}},A=e=>{switch(e){case"QB":return"bg-red-100 text-red-800";case"RB":return"bg-green-100 text-green-800";case"WR":return"bg-blue-100 text-blue-800";case"TE":return"bg-yellow-100 text-yellow-800";case"K":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},$=e=>{switch(e){case"FLEX":return"bg-orange-100 text-orange-800";case"SUPER_FLEX":return"bg-pink-100 text-pink-800";default:return"bg-slate-100 text-slate-800"}},L=e=>{if(!e||"Active"===e)return null;return i.jsx(Or,{variant:{IR:"destructive",Out:"destructive",Doubtful:"destructive",Questionable:"secondary",Probable:"outline"}[e]||"outline",className:"text-xs",children:e})};if(_)return i.jsx("div",{className:"flex items-center justify-center min-h-64",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin"}),i.jsx("span",{children:"Loading team data..."})]})});if(k||!n)return i.jsxs("div",{className:"space-y-6",children:[i.jsx(re,{to:"/teams",children:i.jsxs(Sr,{variant:"ghost",className:"mb-4",children:[i.jsx(_s,{className:"mr-2 h-4 w-4"}),"Back to Teams"]})}),i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center min-h-64",children:i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx(Fs,{className:"h-12 w-12 text-destructive mx-auto"}),i.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Team"}),i.jsx("p",{className:"text-muted-foreground",children:k||"Team data not available"}),i.jsx(Sr,{onClick:()=>e&&E(parseInt(e)),children:"Try Again"})]})})})]});const{roster:z,organizedRoster:O,allPlayers:B,teamData:q,conferenceData:W}=n,U=(null==f?void 0:f.points_for)??rn.formatPoints(z.settings.fpts,z.settings.fpts_decimal),H=(null==f?void 0:f.points_against)??rn.formatPoints(z.settings.fpts_against,z.settings.fpts_against_decimal),V=f?f.wins+f.losses+(f.ties||0):z.settings.wins+z.settings.losses+z.settings.ties,Y=rn.calculatePointsPerGame(U,V),K=V>0?((null==f?void 0:f.wins)??z.settings.wins)/V*100:0,J=(null==N?void 0:N.wins)??z.settings.wins,G=(null==N?void 0:N.losses)??z.settings.losses,X=(null==N?void 0:N.pointsFor)??rn.formatPoints(z.settings.fpts,z.settings.fpts_decimal),Q=(null==N?void 0:N.gamesPlayed)??z.settings.wins+z.settings.losses+z.settings.ties,Z=Q>0?X/Q:0,ee=Q>0?J/Q*100:0;return i.jsxs("div",{className:"space-y-6",children:[i.jsx(re,{to:"/teams",children:i.jsxs(Sr,{variant:"ghost",className:"mb-4",children:[i.jsx(_s,{className:"mr-2 h-4 w-4"}),"Back to Teams"]})}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between space-y-4 md:space-y-0",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs(Pi,{className:"h-16 w-16",children:[i.jsx(Ri,{src:q.team_logo_url||void 0}),i.jsx(Di,{className:"bg-primary/10 text-lg",style:{backgroundColor:q.team_primary_color+"20"},children:q.team_name.split(" ").map(e=>e[0]).join("").toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:q.team_name}),i.jsxs("p",{className:"text-muted-foreground",children:["Owned by ",q.owner_name]}),q.co_owner_name&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Co-owner: ",q.co_owner_name]}),i.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[i.jsx(cn,{conferenceName:W.conference_name,variant:"secondary"}),i.jsxs(Or,{variant:"secondary",children:["Roster #",z.roster_id]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold",children:N?`${J}-${G}`:`${z.settings.wins}-${z.settings.losses}`}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Record"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold",children:N?X.toFixed(1):U.toFixed(1)}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Points For"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold",children:N?Z.toFixed(1):Y.toFixed(1)}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg/Game"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[N?ee.toFixed(1):K.toFixed(1),"%"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Win %"})]})]})]}),i.jsxs(ei,{value:a,onValueChange:r,className:"w-full",children:[i.jsxs(si,{className:"grid w-full grid-cols-4",children:[i.jsx(ti,{value:"roster",children:"Roster"}),i.jsx(ti,{value:"performance",children:"Performance"}),i.jsx(ti,{value:"transactions",children:"Transactions"}),i.jsx(ti,{value:"schedule",children:"Schedule"})]}),i.jsxs(ai,{value:"roster",className:"space-y-4",children:[i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(ft,{className:"h-5 w-5"}),i.jsx("span",{children:"Starting Lineup"})]}),i.jsx(Hr,{children:"Current starting players for this roster"})]}),i.jsx(Vr,{children:i.jsx("div",{className:"rounded-md border",children:i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{children:"Position"}),i.jsx(xn,{children:"Player"}),i.jsx(xn,{children:"NFL Team"}),i.jsx(xn,{children:"Status"})]})}),i.jsx(un,{children:O.starters.map((e,s)=>{const t=B[e.playerId];return i.jsxs(hn,{children:[i.jsx(pn,{children:i.jsx(Or,{className:$(e.slotPosition),children:e.slotPosition})}),i.jsx(pn,{children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"font-medium",children:t?rn.getPlayerName(t):"Unknown Player"}),t&&i.jsx(Or,{className:A(t.position),children:t.position})]})}),i.jsx(pn,{children:(null==t?void 0:t.team)||"N/A"}),i.jsx(pn,{children:L(null==t?void 0:t.injury_status)})]},`starter-${s}`)})})]})})})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(Tt,{className:"h-5 w-5"}),i.jsxs("span",{children:["Bench (",O.bench.length,")"]})]}),i.jsx(Hr,{children:"Players available as substitutes"})]}),i.jsx(Vr,{children:i.jsx("div",{className:"rounded-md border",children:i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{children:"Player"}),i.jsx(xn,{children:"Position"}),i.jsx(xn,{children:"NFL Team"}),i.jsx(xn,{children:"Status"})]})}),i.jsxs(un,{children:[O.bench.map(e=>{const s=B[e];return i.jsxs(hn,{children:[i.jsx(pn,{className:"font-medium",children:s?rn.getPlayerName(s):"Unknown Player"}),i.jsx(pn,{children:s&&i.jsx(Or,{className:A(s.position),children:s.position})}),i.jsx(pn,{children:(null==s?void 0:s.team)||"N/A"}),i.jsx(pn,{children:L(null==s?void 0:s.injury_status)})]},`bench-${e}`)}),0===O.bench.length&&i.jsx(hn,{children:i.jsx(pn,{colSpan:4,className:"text-center text-muted-foreground py-4",children:"No bench players"})})]})]})})})]}),O.ir.length>0&&i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(Fs,{className:"h-5 w-5"}),i.jsxs("span",{children:["Injured Reserve (",O.ir.length,")"]})]}),i.jsx(Hr,{children:"Players on injured reserve"})]}),i.jsx(Vr,{children:i.jsx("div",{className:"rounded-md border",children:i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{children:"Player"}),i.jsx(xn,{children:"Position"}),i.jsx(xn,{children:"NFL Team"}),i.jsx(xn,{children:"Status"})]})}),i.jsx(un,{children:O.ir.map(e=>{const s=B[e];return i.jsxs(hn,{children:[i.jsx(pn,{className:"font-medium",children:s?rn.getPlayerName(s):"Unknown Player"}),i.jsx(pn,{children:s&&i.jsx(Or,{className:A(s.position),children:s.position})}),i.jsx(pn,{children:(null==s?void 0:s.team)||"N/A"}),i.jsx(pn,{children:i.jsx(Or,{variant:"destructive",className:"text-xs",children:"IR"})})]},`ir-${e}`)})})]})})})]})]}),i.jsx(ai,{value:"performance",className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(St,{className:"h-5 w-5"}),i.jsxs("span",{children:[s," Season Stats"]})]}),i.jsx(Hr,{children:f?"Official season statistics from team records":"Statistics from current roster data"})]}),i.jsx(Vr,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Points For"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("p",{className:"text-2xl font-bold",children:U.toFixed(1)}),(null==f?void 0:f.leagueRankPointsFor)&&i.jsxs(Or,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:["#",f.leagueRankPointsFor]})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Points Against"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("p",{className:"text-2xl font-bold",children:H.toFixed(1)}),(null==f?void 0:f.leagueRankPointsAgainst)&&i.jsxs(Or,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:["#",f.leagueRankPointsAgainst]})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Point Differential"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("p",{className:"text-2xl font-bold "+(U-H>0?"text-green-600":"text-red-600"),children:[U-H>0?"+":"",(U-H).toFixed(1)]}),(null==f?void 0:f.leagueRankPointDiff)&&i.jsxs(Or,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700",children:["#",f.leagueRankPointDiff]})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Win Percentage"}),i.jsxs("p",{className:"text-2xl font-bold",children:[K.toFixed(1),"%"]})]}),f&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Conference Rank"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.rank?`#${f.rank}`:"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Streak"}),i.jsx("p",{className:"text-2xl font-bold",children:f.streak||"-"})]})]})]})})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(bt,{className:"h-5 w-5"}),i.jsx("span",{children:"Team Management"})]}),i.jsxs(Hr,{children:["Waiver and transaction data for ",s," season"]})]}),i.jsx(Vr,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Waiver Position"}),i.jsx("p",{className:"text-2xl font-bold",children:j?j.position:z.settings.waiver_position})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Waiver Budget"}),i.jsxs("p",{className:"text-2xl font-bold",children:["$",j?j.budget:100-z.settings.waiver_budget_used]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Moves"}),i.jsx("p",{className:"text-2xl font-bold",children:y})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Games Played"}),i.jsx("p",{className:"text-2xl font-bold",children:V})]})]})})]})]})}),i.jsxs(ai,{value:"transactions",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Transaction History"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"All trades, waivers, and roster moves for this team across all seasons"})]}),i.jsx(Sr,{onClick:P,disabled:d,variant:"outline",size:"sm",children:d?i.jsxs(i.Fragment,{children:[i.jsx(Xs,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ct,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),d&&0===c.length?i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center min-h-32",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin"}),i.jsx("span",{children:"Loading transactions..."})]})})}):0===c.length?i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center min-h-32",children:i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx(Ts,{className:"h-12 w-12 text-muted-foreground mx-auto"}),i.jsx("h3",{className:"text-lg font-semibold",children:"No Transactions Found"}),i.jsx("p",{className:"text-muted-foreground",children:"This team hasn't made any trades, waiver claims, or free agent pickups this season."}),i.jsx("div",{className:"mt-4",children:i.jsxs(Or,{variant:"secondary",children:["Total moves: ",z.settings.total_moves," (all seasons)"]})})]})})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",c.length," transaction",1!==c.length?"s":""]}),i.jsxs(Or,{variant:"secondary",children:["Total moves: ",z.settings.total_moves," (all seasons)"]})]}),i.jsx("div",{className:"space-y-3",children:c.map(e=>i.jsx(Yi,{transaction:e},e.id))})]})]}),i.jsxs(ai,{value:"schedule",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Season Schedule"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Complete schedule and results for ",s," season"]})]}),i.jsx(Sr,{onClick:R,disabled:x,variant:"outline",size:"sm",children:x?i.jsxs(i.Fragment,{children:[i.jsx(Xs,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ct,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),x&&0===u.length?i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center min-h-32",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin"}),i.jsx("span",{children:"Loading schedule..."})]})})}):0===u.length?i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center min-h-32",children:i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx(Ts,{className:"h-12 w-12 text-muted-foreground mx-auto"}),i.jsx("h3",{className:"text-lg font-semibold",children:"No Schedule Found"}),i.jsxs("p",{className:"text-muted-foreground",children:["No matchups found for this team in the ",s," season."]})]})})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(Ts,{className:"h-5 w-5"}),i.jsxs("span",{children:[s," Season Schedule"]})]})}),i.jsx(Vr,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold",children:(null==f?void 0:f.wins)??u.filter(e=>"W"===e.result).length}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Wins"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold",children:(null==f?void 0:f.losses)??u.filter(e=>"L"===e.result).length}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Losses"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold",children:(null==f?void 0:f.ties)??u.filter(e=>"T"===e.result).length}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Ties"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold",children:u.filter(e=>"TBD"===e.result).length}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Remaining"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(null==f?void 0:f.rank)?`#${f.rank}`:"-"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Rank"})]})]})})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsx(Ur,{children:"Matchup Results"}),i.jsx(Hr,{children:"Week-by-week schedule and results"})]}),i.jsx(Vr,{children:i.jsx("div",{className:"rounded-md border",children:i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{className:"w-16",children:"Week"}),i.jsx(xn,{children:"Opponent"}),i.jsx(xn,{className:"w-16",children:"@/vs"}),i.jsx(xn,{className:"w-20",children:"Result"}),i.jsx(xn,{className:"w-24",children:"Score"}),i.jsx(xn,{className:"w-16",children:"Status"})]})}),i.jsx(un,{children:u.map((e,s)=>i.jsxs(hn,{children:[i.jsx(pn,{className:"font-medium",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{children:e.week}),e.isPlayoff&&e.playoffRoundName&&i.jsx(Or,{variant:"secondary",className:"text-xs mt-1 w-fit bg-purple-100 text-purple-800",children:e.playoffRoundName})]})}),i.jsx(pn,{children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{children:e.opponent}),e.isOverridden&&i.jsx(Or,{variant:"outline",className:"text-xs "+("Interconference"===e.overrideReason?"bg-orange-100 text-orange-800 border-orange-300":"bg-blue-100 text-blue-800 border-blue-300"),title:e.overrideReason||"Matchup Override",children:"Interconference"===e.overrideReason?"Interconference":"Override"})]})}),i.jsx(pn,{className:"text-center",children:e.isHome?"vs":"@"}),i.jsx(pn,{children:i.jsx(Or,{variant:"W"===e.result?"default":"L"===e.result?"destructive":"T"===e.result?"secondary":"outline",className:"w-8 justify-center",children:e.result})}),i.jsx(pn,{children:null!==e.teamScore&&null!==e.opponentScore?i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"W"===e.result?"font-bold":"",children:e.teamScore}),i.jsx("span",{className:"text-muted-foreground mx-1",children:"-"}),i.jsx("span",{className:"L"===e.result?"font-bold":"",children:e.opponentScore})]}):i.jsx("span",{className:"text-muted-foreground",children:"-"})}),i.jsx(pn,{children:i.jsx(Or,{variant:"outline",className:"text-xs",children:e.matchupStatus})})]},`matchup-${s}`))})]})})})]})]})]})]})]})};const Ji=()=>{const{selectedSeason:e,selectedConference:s,currentSeasonConfig:t}=br(),{toast:a}=_e(),[r,n]=te.useState([]),[l,c]=te.useState(0),[o,d]=te.useState(1),[m,u]=te.useState(!0),[h,x]=te.useState(null),[p,f]=te.useState(""),[g,j]=te.useState("all"),[v,y]=te.useState("all"),[w,N]=te.useState(new Map),[b,_]=te.useState("all-players");te.useEffect(()=>{(async()=>{try{const{data:e,error:s}=await ir.from("teams").select("id, team_name");if(s)return;const t=new Map;(e||[]).forEach(e=>{t.set(e.id,e.team_name)}),N(t)}catch(e){}})()},[]),te.useEffect(()=>{(async()=>{u(!0),x(null);try{const s={search:p,position:g,is_rostered:"rostered"===v||"free_agent"!==v&&""},{data:t,count:r}=await async function(e={},s=1,t=25){try{const{data:{session:a},error:r}=await ir.auth.getSession();if(r)throw new Error(`Authentication error: ${r.message}`);let n=ir.from("players_with_roster_status").select("\n        id,\n        player_name,\n        position,\n        nfl_team,\n        sleeper_id,\n        injury_status,\n        total_points,\n        avg_points,\n        is_rostered,\n        rostered_by_teams,\n        playing_status\n      ",{count:"exact"});e.search&&(n=n.or(`player_name.ilike.%${e.search}%,nfl_team.ilike.%${e.search}%`)),e.position&&"all"!==e.position&&(n=n.eq("position",e.position)),""!==e.is_rostered&&(n=n.eq("is_rostered",e.is_rostered));const i=(s-1)*t,l=i+t-1;n=n.range(i,l).order("total_points",{ascending:!1});const{data:c,error:o,count:d}=await n;if(o)throw new Error(`Database error: ${o.message}`);return{data:c||[],count:d||0}}catch(h){throw h}}(s,o,50);n(t||[]),c(r||0),a({title:"Players Loaded",description:`Found ${r||0} players for ${e} season`})}catch(s){const e=s instanceof Error?s.message:"Failed to fetch players";x(e),a({title:"Error",description:e,variant:"destructive"})}finally{u(!1)}})()},[p,g,v,o,e,s]);const S=e=>{switch(e){case"QB":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"RB":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"WR":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"TE":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},k=(e,s)=>{if(s){const e={IR:"destructive",O:"destructive",D:"destructive",Q:"secondary",P:"outline"};return i.jsx(Or,{variant:e[s]||"outline",className:"text-xs",children:s})}return e?i.jsx(Or,{variant:"default",className:"text-xs",children:"Rostered"}):i.jsx(Or,{variant:"outline",className:"text-xs",children:"FA"})};return m&&0===r.length?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Xs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading Players"}),i.jsx("p",{className:"text-muted-foreground",children:"Fetching player data..."})]})}):h&&0===r.length?i.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:i.jsxs(qr,{className:"w-full max-w-md",children:[i.jsx(Wr,{children:i.jsx(Ur,{className:"flex items-center gap-2 text-destructive",children:"Error Loading Players"})}),i.jsxs(Vr,{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:h}),i.jsx(Sr,{onClick:()=>window.location.reload(),className:"w-full",children:"Retry"})]})]})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kt,{className:"h-6 w-6 text-primary"}),i.jsx("h1",{className:"text-3xl font-bold",children:"Players"})]}),i.jsxs("p",{className:"text-muted-foreground",children:[e," Season • ",l," players"]})]}),i.jsxs(ei,{value:b,onValueChange:_,className:"w-full",children:[i.jsxs(si,{className:"grid w-full grid-cols-2",children:[i.jsxs(ti,{value:"all-players",className:"flex items-center gap-2",children:[i.jsx(kt,{className:"h-4 w-4"}),"All Players"]}),i.jsxs(ti,{value:"trending",className:"flex items-center gap-2",children:[i.jsx(bt,{className:"h-4 w-4"}),"Trending Players"]})]}),i.jsxs(ai,{value:"all-players",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(Hi,{placeholder:"Search players...",value:p,onChange:e=>{f(e.target.value),d(1)},className:"pl-10"})]}),i.jsxs(Dr,{value:g,onValueChange:e=>{j(e),d(1)},children:[i.jsx(Mr,{children:i.jsx(Fr,{placeholder:"All Positions"})}),i.jsxs($r,{children:[i.jsx(Lr,{value:"all",children:"All Positions"}),["QB","RB","WR","TE"].map(e=>i.jsx(Lr,{value:e,children:e},e))]})]}),i.jsxs(Dr,{value:v,onValueChange:e=>{y(e),d(1)},children:[i.jsx(Mr,{children:i.jsx(Fr,{placeholder:"All Status"})}),i.jsxs($r,{children:[i.jsx(Lr,{value:"all",children:"All Status"}),i.jsx(Lr,{value:"rostered",children:"Rostered"}),i.jsx(Lr,{value:"free_agent",children:"Free Agent"})]})]})]}),i.jsx(qr,{children:i.jsxs(Vr,{className:"pt-6",children:[i.jsx("div",{className:"rounded-md border",children:i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{children:"Player"}),i.jsx(xn,{children:"Pos"}),i.jsx(xn,{className:"hidden sm:table-cell",children:"NFL Team"}),i.jsx(xn,{className:"text-right",children:"Points"}),i.jsx(xn,{className:"text-right hidden md:table-cell",children:"Avg"}),i.jsx(xn,{children:"Status"}),i.jsx(xn,{className:"hidden lg:table-cell",children:"Rostered By"}),i.jsx(xn,{className:"w-10"})]})}),i.jsx(un,{children:m?i.jsx(hn,{children:i.jsx(pn,{colSpan:8,className:"text-center py-8",children:i.jsx(Xs,{className:"h-6 w-6 animate-spin mx-auto"})})}):0===r.length?i.jsx(hn,{children:i.jsx(pn,{colSpan:8,className:"text-center py-8",children:"No players found."})}):r.map(e=>{return i.jsxs(hn,{children:[i.jsx(pn,{children:i.jsx("div",{className:"font-medium",children:e.player_name})}),i.jsx(pn,{children:i.jsx(Or,{className:S(e.position),children:e.position})}),i.jsx(pn,{className:"hidden sm:table-cell",children:e.nfl_team||"FA"}),i.jsx(pn,{className:"text-right font-mono",children:e.total_points.toFixed(1)}),i.jsx(pn,{className:"text-right font-mono hidden md:table-cell",children:e.avg_points.toFixed(1)}),i.jsx(pn,{children:k(e.is_rostered,e.injury_status)}),i.jsx(pn,{className:"hidden lg:table-cell",children:(s=e.rostered_by_teams,s&&0!==s.length?i.jsx("div",{className:"flex flex-col gap-1",children:s.map(e=>{const s=w.get(e)||`Team ${e}`;return i.jsx(re,{to:`/teams/${e}`,children:i.jsx(Or,{variant:"outline",className:"text-xs hover:bg-primary hover:text-primary-foreground cursor-pointer transition-colors",children:s})},e)})}):null)}),i.jsx(pn,{children:i.jsx(re,{to:`/players/${e.sleeper_id}`,children:i.jsx(Sr,{variant:"ghost",size:"sm",children:i.jsx(Bs,{className:"h-4 w-4"})})})})]},e.id);var s})})]})}),i.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",Math.min(50*(o-1)+1,l)," to ",Math.min(50*o,l)," of ",l," players"]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Sr,{variant:"outline",size:"sm",onClick:()=>d(e=>Math.max(1,e-1)),disabled:1===o,children:"Previous"}),i.jsxs("span",{className:"text-sm",children:["Page ",o," of ",Math.ceil(l/50)]}),i.jsx(Sr,{variant:"outline",size:"sm",onClick:()=>d(e=>e+1),disabled:50*o>=l,children:"Next"})]})]})]})})]}),i.jsx(ai,{value:"trending",className:"space-y-6",children:i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center gap-2",children:[i.jsx(bt,{className:"h-5 w-5"}),"Trending Players (Last 24 Hours)"]}),i.jsx(Hr,{children:"Most added players across all Sleeper leagues in the past 24 hours"})]}),i.jsx(Vr,{className:"flex justify-center",children:i.jsx("iframe",{src:"https://sleeper.app/embed/players/nfl/trending/add?lookback_hours=24&limit=25",width:"350",height:"500",allowTransparency:!0,frameBorder:"0",className:"rounded-lg border",title:"Trending Players"})})]})})]})]})};var Gi="Progress",[Xi,Qi]=a(Gi),[Zi,el]=Xi(Gi),sl=te.forwardRef((e,s)=>{const{__scopeProgress:t,value:a=null,max:r,getValueLabel:n=rl,...l}=e;(r||0===r)&&ll(r);const o=ll(r)?r:100;null!==a&&cl(a,o);const d=cl(a,o)?a:null,m=il(d)?n(d,o):void 0;return i.jsx(Zi,{scope:t,value:d,max:o,children:i.jsx(c.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":il(d)?d:void 0,"aria-valuetext":m,role:"progressbar","data-state":nl(d,o),"data-value":d??void 0,"data-max":o,...l,ref:s})})});sl.displayName=Gi;var tl="ProgressIndicator",al=te.forwardRef((e,s)=>{const{__scopeProgress:t,...a}=e,r=el(tl,t);return i.jsx(c.div,{"data-state":nl(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...a,ref:s})});function rl(e,s){return`${Math.round(e/s*100)}%`}function nl(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function il(e){return"number"==typeof e}function ll(e){return il(e)&&!isNaN(e)&&e>0}function cl(e,s){return il(e)&&!isNaN(e)&&e<=s&&e>=0}al.displayName=tl;var ol=sl,dl=al;const ml=te.forwardRef(({className:e,value:s,...t},a)=>i.jsx(ol,{ref:a,className:ba("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...t,children:i.jsx(dl,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));ml.displayName=ol.displayName;const ul=()=>{const{playerId:e}=le(),{selectedSeason:s,selectedConference:t,currentSeasonConfig:a}=br(),{toast:r}=_e(),[n,l]=te.useState("overview"),[c,o]=te.useState(null),[d,m]=te.useState(!0),[u,h]=te.useState(null),[x,p]=te.useState([]),[f,g]=te.useState([]),[j,v]=te.useState(""),[y,w]=te.useState(!1),[N,b]=te.useState("weekly"),_=async()=>{if(e&&a)try{m(!0),h(null);const n=await vr.getPlayers({filters:[{column:"sleeper_id",operator:"eq",value:e},{column:"playing_status",operator:"eq",value:"Active"},{column:"position",operator:"in",value:["QB","RB","WR","TE"]}]});if(n.error||!n.data||0===n.data.length)throw new Error("Player not found or not active");const i=n.data[0],l=(new Date).getFullYear(),c=i.years_exp||0,d=[];for(let e=0;e<c;e++)d.push((l-1-e).toString());d.unshift(l.toString()),g(d);const u=d.length>1?d[1]:d[0];if(v(u),u){const s=(await rn.fetchPlayerSeasonStats(e,u)).map(e=>({...e,season:u}));p(s)}let x=a.conferences;t&&"all"!==t&&(x=a.conferences.filter(e=>e.id===t));const f=x.filter(e=>e.dbConferenceId).map(e=>e.dbConferenceId);if(0===f.length)throw new Error("No valid conference IDs found");const j=await vr.getTeamConferenceJunctions({filters:[{column:"conference_id",operator:"in",value:f}]});if(j.error||!j.data)throw new Error("Failed to fetch team mappings");const y=[...new Set(j.data.map(e=>e.team_id))],w=await vr.getTeams({filters:[{column:"id",operator:"in",value:y}]});if(w.error||!w.data)throw new Error("Failed to fetch teams");const N=await Promise.all(x.map(async e=>{try{if(!e.leagueId)return{conference:e,rosters:[]};return{conference:e,rosters:await rn.fetchLeagueRosters(e.leagueId)}}catch(s){return{conference:e,rosters:[]}}})),b=[];N.forEach(({conference:s,rosters:t})=>{t.forEach(t=>{var a,r;if(t.players&&t.players.includes(e)){const e=null==(a=j.data)?void 0:a.find(e=>e.conference_id===s.dbConferenceId&&e.roster_id===t.roster_id);if(e){const a=null==(r=w.data)?void 0:r.find(s=>s.id===e.team_id);a&&b.push({conference_id:s.dbConferenceId,conference_name:s.name,team_id:a.id,team_name:a.team_name,owner_name:a.owner_name,roster_id:t.roster_id,league_id:s.leagueId})}}})});const _=[],S=k(),C=[...new Set(b.map(e=>e.league_id))];for(const t of C){const a=b.find(e=>e.league_id===t);if(a)for(let r=1;r<=Math.min(S,17);r++)try{const s=(await rn.fetchMatchups(t,r)).find(s=>s.players&&s.players.includes(e));if(s&&s.players_points){const n=s.players_points[e]||0;_.push({week:r,points:n,league_id:t,conference_name:a.conference_name})}}catch(s){}}const T={totalPoints:_.reduce((e,s)=>e+s.points,0),gamesPlayed:_.length,bestGame:_.length>0?Math.max(..._.map(e=>e.points)):0,worstGame:_.length>0?Math.min(..._.map(e=>e.points)):0,avgPoints:0,consistency:0,weeklyPerformance:_};if(T.avgPoints=T.gamesPlayed>0?T.totalPoints/T.gamesPlayed:0,T.gamesPlayed>1){const e=T.avgPoints,s=_.reduce((s,t)=>s+Math.pow(t.points-e,2),0)/T.gamesPlayed,t=Math.sqrt(s),a=e>0?t/e:0;T.consistency=Math.max(0,100-100*a)}let E;E=0===b.length?"free_agent":1===b.length?"rostered":"multi_rostered";const P={id:i.id,sleeper_id:i.sleeper_id,player_name:i.player_name,position:i.position,nfl_team:i.nfl_team||"FA",number:i.number||0,age:i.age||0,height:i.height||0,weight:i.weight||0,college:i.college||"Unknown",playing_status:i.playing_status||"Active",injury_status:i.injury_status,depth_chart:i.depth_chart||1,rostered_by:b,availability_status:E,season_stats:T};o(P),r({title:"Player Loaded",description:`Found ${P.player_name} with ${T.gamesPlayed} games of data`})}catch(s){const e=s instanceof Error?s.message:"Failed to fetch player data";h(e),r({title:"Error Loading Player",description:e,variant:"destructive"})}finally{m(!1)}},S=async s=>{if(e&&s)try{w(!0);const t=await rn.fetchPlayerSeasonStats(e,s),a=t.map(e=>({...e,season:s}));p(e=>[...e.filter(e=>e.season!==s),...a]),t.length>0?r({title:"Data Loaded",description:`Loaded ${t.length} weeks of data for ${s}`,variant:"default"}):r({title:"No Data Available",description:`No performance data found for ${s} season. This could be because the player wasn't active or the season hasn't started yet.`,variant:"default"})}catch(t){r({title:"Error Loading Performance Data",description:`Failed to load stats for ${s} season`,variant:"destructive"})}finally{w(!1)}};window.debugPlayerStats=()=>{};window.testPlayerAPI=async(s,t)=>{const a=s||e,r=t||j;try{const e=`https://api.sleeper.com/stats/nfl/player/${a}?season_type=regular&season=${r}&grouping=week`,s=await fetch(e);return await s.json()}catch(n){return null}},te.useEffect(()=>{e&&a&&_()},[e,s,t,a]),te.useEffect(()=>{j&&e&&S(j)},[j,e]);te.useEffect(()=>{"season"===N&&f.length>0&&(async()=>{if(e&&0!==f.length){w(!0);try{const s=[...new Set(x.map(e=>e.season))],t=f.filter(e=>!s.includes(e));if(t.length>0){const s=(await Promise.all(t.map(async s=>(await rn.fetchPlayerSeasonStats(e,s)).map(e=>({...e,season:s}))))).flat();p(e=>[...e,...s])}}catch(s){}finally{w(!1)}}})()},[N,f]);const k=()=>{const e=new Date,s=new Date(e.getFullYear(),8,1),t=Math.floor((e.getTime()-s.getTime())/6048e5);return Math.min(Math.max(t+1,1),17)};return d?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Xs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Loading player data..."})]})}):u?i.jsxs("div",{className:"space-y-6",children:[i.jsx(re,{to:"/players",children:i.jsxs(Sr,{variant:"ghost",className:"mb-4",children:[i.jsx(_s,{className:"mr-2 h-4 w-4"}),"Back to Players"]})}),i.jsxs(Kr,{variant:"destructive",children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsx(Gr,{children:u})]}),i.jsx("div",{className:"text-center",children:i.jsxs(Sr,{onClick:_,variant:"outline",children:[i.jsx(ct,{className:"mr-2 h-4 w-4"}),"Try Again"]})})]}):c?i.jsxs("div",{className:"space-y-6",children:[i.jsx(re,{to:"/players",children:i.jsxs(Sr,{variant:"ghost",className:"mb-4",children:[i.jsx(_s,{className:"mr-2 h-4 w-4"}),"Back to Players"]})}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between space-y-4 md:space-y-0",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"h-16 w-16 bg-primary/10 rounded-full flex items-center justify-center",children:i.jsx(Ct,{className:"h-8 w-8 text-primary"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:c.player_name}),i.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[i.jsx(Or,{className:(e=>{switch(e){case"QB":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"RB":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"WR":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"TE":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}})(c.position),children:c.position}),i.jsxs(Or,{variant:"outline",children:[c.nfl_team," #",c.number]}),(e=>{if(!e||"Healthy"===e)return null;return i.jsx(Or,{variant:{IR:"destructive",Out:"destructive",Doubtful:"destructive",Questionable:"secondary",Probable:"secondary",Q:"secondary",D:"destructive",O:"destructive"}[e]||"outline",children:e})})(c.injury_status)]}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:[c.age," years old • ",c.height,'"", ',c.weight," lbs • ",c.college]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold",children:c.season_stats.totalPoints.toFixed(1)}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Points"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold",children:c.season_stats.avgPoints.toFixed(1)}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg/Game"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold",children:c.season_stats.bestGame.toFixed(1)}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Best Game"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[c.season_stats.consistency.toFixed(0),"%"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Consistency"})]})]})]}),c.rostered_by.length>0&&i.jsx(qr,{children:i.jsx(Vr,{className:"pt-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Currently rostered by:"}),c.rostered_by.map((e,s)=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("p",{className:"font-semibold",children:e.team_name}),i.jsx("span",{className:"text-muted-foreground",children:"•"}),i.jsx("p",{className:"text-muted-foreground",children:e.owner_name})]}),c.rostered_by.length>1&&i.jsx("p",{className:"text-sm text-blue-600",children:e.conference_name})]}),i.jsx(re,{to:`/teams/${e.team_id}`,children:i.jsx(Sr,{variant:"outline",size:"sm",children:"View Team"})})]},s))]})})}),i.jsxs(ei,{value:n,onValueChange:l,className:"w-full",children:[i.jsxs(si,{className:"grid w-full grid-cols-3",children:[i.jsx(ti,{value:"overview",children:"Overview"}),i.jsx(ti,{value:"performance",children:"Performance"}),i.jsx(ti,{value:"details",children:"Details"})]}),i.jsx(ai,{value:"overview",className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(St,{className:"h-5 w-5"}),i.jsx("span",{children:"Season Summary"})]})}),i.jsxs(Vr,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Fantasy Points"}),i.jsx("p",{className:"text-2xl font-bold",children:c.season_stats.totalPoints.toFixed(1)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Games Played"}),i.jsx("p",{className:"text-2xl font-bold",children:c.season_stats.gamesPlayed})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Best Game"}),i.jsx("p",{className:"text-2xl font-bold",children:c.season_stats.bestGame.toFixed(1)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Consistency"}),i.jsxs("p",{className:"text-2xl font-bold",children:[c.season_stats.consistency.toFixed(0),"%"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Availability Status"}),i.jsx("span",{className:"capitalize",children:c.availability_status.replace("_"," ")})]}),i.jsx(ml,{value:"multi_rostered"===c.availability_status?100:"rostered"===c.availability_status?75:25,className:"h-2"})]})]})]}),i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{children:"Player Info"})}),i.jsx(Vr,{className:"space-y-3",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"Position"}),i.jsx("p",{className:"font-medium",children:c.position})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"NFL Team"}),i.jsx("p",{className:"font-medium",children:c.nfl_team})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"Number"}),i.jsxs("p",{className:"font-medium",children:["#",c.number]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"Depth Chart"}),i.jsx("p",{className:"font-medium",children:c.depth_chart})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"Height"}),i.jsxs("p",{className:"font-medium",children:[c.height,'""']})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"Weight"}),i.jsxs("p",{className:"font-medium",children:[c.weight," lbs"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"College"}),i.jsx("p",{className:"font-medium",children:c.college})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"Age"}),i.jsx("p",{className:"font-medium",children:c.age})]})]})})]})]})}),i.jsx(ai,{value:"performance",className:"space-y-4",children:i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(bt,{className:"h-5 w-5"}),i.jsx("span",{children:"Player Performance"})]}),i.jsx(Hr,{children:"Detailed statistics and game logs"})]}),i.jsx(Vr,{className:"space-y-4",children:i.jsxs(ei,{value:N,onValueChange:b,className:"w-full",children:[i.jsxs(si,{className:"grid w-full grid-cols-2",children:[i.jsx(ti,{value:"weekly",children:"Weekly Stats"}),i.jsx(ti,{value:"season",children:"Season Totals"})]}),i.jsxs(ai,{value:"weekly",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("label",{htmlFor:"season-select",className:"text-sm font-medium",children:"Season:"}),i.jsxs(Dr,{value:j,onValueChange:e=>{v(e),S(e)},children:[i.jsx(Mr,{className:"w-32",children:i.jsx(Fr,{placeholder:"Select season"})}),i.jsx($r,{children:f.map(e=>i.jsx(Lr,{value:e,children:e},e))})]})]}),y&&i.jsxs("div",{className:"flex items-center justify-center py-4",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin mr-2"}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading performance data..."})]}),i.jsx("div",{className:"rounded-md border",children:i.jsxs(dn,{children:[i.jsxs(mn,{children:[i.jsxs(hn,{children:[i.jsx(xn,{className:"text-center border-r",colSpan:3,children:"Fantasy"}),i.jsx(xn,{className:"text-center border-r",colSpan:3,children:"Rushing"}),i.jsx(xn,{className:"text-center border-r",colSpan:3,children:"Receiving"}),i.jsx(xn,{className:"text-center border-r",colSpan:4,children:"Passing"}),i.jsx(xn,{className:"text-center",colSpan:2,children:"Misc"})]}),i.jsxs(hn,{children:[i.jsx(xn,{children:"Week"}),i.jsx(xn,{children:"Pts"}),i.jsx(xn,{className:"border-r",children:"Pos Rank"}),i.jsx(xn,{children:"Att"}),i.jsx(xn,{children:"Yds"}),i.jsx(xn,{className:"border-r",children:"TD"}),i.jsx(xn,{children:"Rec"}),i.jsx(xn,{children:"Tar"}),i.jsx(xn,{className:"border-r",children:"Yds"}),i.jsx(xn,{children:"Cmp"}),i.jsx(xn,{children:"Att"}),i.jsx(xn,{children:"Yds"}),i.jsx(xn,{children:"Int"}),i.jsx(xn,{className:"border-r",children:"TD"}),i.jsx(xn,{children:"Fum"}),i.jsx(xn,{children:"2pt"})]})]}),i.jsx(un,{children:(()=>{const e=x.filter(e=>e.season===j),s=e.reduce((e,s)=>({pts_ppr:e.pts_ppr+(s.pts_ppr||0),rush_att:e.rush_att+(s.rush_att||0),rush_yd:e.rush_yd+(s.rush_yd||0),rush_td:e.rush_td+(s.rush_td||0),rec:e.rec+(s.rec||0),rec_tgt:e.rec_tgt+(s.rec_tgt||0),rec_yd:e.rec_yd+(s.rec_yd||0),rec_td:e.rec_td+(s.rec_td||0),pass_comp:e.pass_comp+(s.pass_comp||0),pass_inc:e.pass_inc+(s.pass_inc||0),pass_yd:e.pass_yd+(s.pass_yd||0),pass_int:e.pass_int+(s.pass_int||0),pass_td:e.pass_td+(s.pass_td||0),fum:e.fum+(s.fum||0),rush_2pt:e.rush_2pt+(s.rush_2pt||0),rec_2pt:e.rec_2pt+(s.rec_2pt||0),pass_2pt:e.pass_2pt+(s.pass_2pt||0)}),{pts_ppr:0,rush_att:0,rush_yd:0,rush_td:0,rec:0,rec_tgt:0,rec_yd:0,rec_td:0,pass_comp:0,pass_inc:0,pass_yd:0,pass_int:0,pass_td:0,fum:0,rush_2pt:0,rec_2pt:0,pass_2pt:0});return i.jsxs(i.Fragment,{children:[i.jsxs(hn,{className:"font-semibold bg-muted/50",children:[i.jsx(pn,{children:"Total"}),i.jsx(pn,{className:"font-bold",children:s.pts_ppr.toFixed(1)}),i.jsx(pn,{className:"border-r",children:"-"}),i.jsx(pn,{children:s.rush_att}),i.jsx(pn,{children:s.rush_yd}),i.jsx(pn,{className:"border-r",children:s.rush_td}),i.jsx(pn,{children:s.rec}),i.jsx(pn,{children:s.rec_tgt}),i.jsx(pn,{className:"border-r",children:s.rec_yd}),i.jsx(pn,{children:s.pass_comp}),i.jsx(pn,{children:s.pass_comp+s.pass_inc}),i.jsx(pn,{children:s.pass_yd}),i.jsx(pn,{children:s.pass_int}),i.jsx(pn,{className:"border-r",children:s.pass_td}),i.jsx(pn,{children:s.fum}),i.jsx(pn,{children:s.rush_2pt+s.rec_2pt+s.pass_2pt})]}),e.length>0?e.sort((e,s)=>(s.week||0)-(e.week||0)).map((e,s)=>i.jsxs(hn,{children:[i.jsx(pn,{children:e.week||"-"}),i.jsx(pn,{className:"font-bold",children:(e.pts_ppr||0).toFixed(1)}),i.jsx(pn,{className:"border-r",children:e.pos_rank_ppr||"-"}),i.jsx(pn,{children:e.rush_att||0}),i.jsx(pn,{children:e.rush_yd||0}),i.jsx(pn,{className:"border-r",children:e.rush_td||0}),i.jsx(pn,{children:e.rec||0}),i.jsx(pn,{children:e.rec_tgt||0}),i.jsx(pn,{className:"border-r",children:e.rec_yd||0}),i.jsx(pn,{children:e.pass_comp||0}),i.jsx(pn,{children:(e.pass_comp||0)+(e.pass_inc||0)}),i.jsx(pn,{children:e.pass_yd||0}),i.jsx(pn,{children:e.pass_int||0}),i.jsx(pn,{className:"border-r",children:e.pass_td||0}),i.jsx(pn,{children:e.fum||0}),i.jsx(pn,{children:(e.rush_2pt||0)+(e.rec_2pt||0)+(e.pass_2pt||0)})]},s)):i.jsx(hn,{children:i.jsxs(pn,{colSpan:16,className:"text-center py-8 text-muted-foreground",children:["No data available for ",j," season"]})})]})})()})]})})]}),i.jsxs(ai,{value:"season",className:"space-y-4",children:[i.jsx("div",{className:"mb-4",children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"Career totals by season. Most recent season highlighted."})}),y&&i.jsxs("div",{className:"flex items-center justify-center py-4",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin mr-2"}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading career statistics..."})]}),i.jsx("div",{className:"rounded-md border",children:i.jsxs(dn,{children:[i.jsxs(mn,{children:[i.jsxs(hn,{children:[i.jsx(xn,{className:"text-center border-r",colSpan:3,children:"Fantasy"}),i.jsx(xn,{className:"text-center border-r",colSpan:3,children:"Rushing"}),i.jsx(xn,{className:"text-center border-r",colSpan:3,children:"Receiving"}),i.jsx(xn,{className:"text-center border-r",colSpan:4,children:"Passing"}),i.jsx(xn,{className:"text-center",colSpan:2,children:"Misc"})]}),i.jsxs(hn,{children:[i.jsx(xn,{children:"Season"}),i.jsx(xn,{children:"Pts"}),i.jsx(xn,{className:"border-r",children:"Games"}),i.jsx(xn,{children:"Att"}),i.jsx(xn,{children:"Yds"}),i.jsx(xn,{className:"border-r",children:"TD"}),i.jsx(xn,{children:"Rec"}),i.jsx(xn,{children:"Tar"}),i.jsx(xn,{className:"border-r",children:"Yds"}),i.jsx(xn,{children:"Cmp"}),i.jsx(xn,{children:"Att"}),i.jsx(xn,{children:"Yds"}),i.jsx(xn,{children:"Int"}),i.jsx(xn,{className:"border-r",children:"TD"}),i.jsx(xn,{children:"Fum"}),i.jsx(xn,{children:"2pt"})]})]}),i.jsx(un,{children:(()=>{const e=(()=>{const e={};return x.forEach(s=>{const t=s.season;e[t]||(e[t]={season:t,pts_ppr:0,rush_att:0,rush_yd:0,rush_td:0,rec:0,rec_tgt:0,rec_yd:0,rec_td:0,pass_comp:0,pass_inc:0,pass_yd:0,pass_int:0,pass_td:0,fum:0,rush_2pt:0,rec_2pt:0,pass_2pt:0,games:0});const a=e[t];a.pts_ppr+=s.pts_ppr||0,a.rush_att+=s.rush_att||0,a.rush_yd+=s.rush_yd||0,a.rush_td+=s.rush_td||0,a.rec+=s.rec||0,a.rec_tgt+=s.rec_tgt||0,a.rec_yd+=s.rec_yd||0,a.rec_td+=s.rec_td||0,a.pass_comp+=s.pass_comp||0,a.pass_inc+=s.pass_inc||0,a.pass_yd+=s.pass_yd||0,a.pass_int+=s.pass_int||0,a.pass_td+=s.pass_td||0,a.fum+=s.fum||0,a.rush_2pt+=s.rush_2pt||0,a.rec_2pt+=s.rec_2pt||0,a.pass_2pt+=s.pass_2pt||0,a.games+=1}),Object.values(e).sort((e,s)=>parseInt(s.season)-parseInt(e.season))})();return e.length>0?e.map((e,s)=>i.jsxs(hn,{className:0===s?"bg-muted/30":"",children:[i.jsx(pn,{className:"font-semibold",children:e.season}),i.jsx(pn,{className:"font-bold",children:e.pts_ppr.toFixed(1)}),i.jsx(pn,{className:"border-r",children:e.games}),i.jsx(pn,{children:e.rush_att}),i.jsx(pn,{children:e.rush_yd}),i.jsx(pn,{className:"border-r",children:e.rush_td}),i.jsx(pn,{children:e.rec}),i.jsx(pn,{children:e.rec_tgt}),i.jsx(pn,{className:"border-r",children:e.rec_yd}),i.jsx(pn,{children:e.pass_comp}),i.jsx(pn,{children:e.pass_comp+e.pass_inc}),i.jsx(pn,{children:e.pass_yd}),i.jsx(pn,{children:e.pass_int}),i.jsx(pn,{className:"border-r",children:e.pass_td}),i.jsx(pn,{children:e.fum}),i.jsx(pn,{children:e.rush_2pt+e.rec_2pt+e.pass_2pt})]},s)):i.jsx(hn,{children:i.jsx(pn,{colSpan:16,className:"text-center py-8 text-muted-foreground",children:"No season data available. Load some weekly stats first."})})})()})]})})]})]})})]})}),i.jsxs(ai,{value:"details",className:"space-y-4",children:[i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsx(Ur,{children:"Roster Information"}),i.jsx(Hr,{children:"Current roster status across all conferences"})]}),i.jsx(Vr,{children:c.rostered_by.length>0?i.jsx("div",{className:"space-y-4",children:c.rostered_by.map((e,s)=>i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-semibold",children:e.team_name}),i.jsx(Or,{variant:"secondary",className:ln(e.conference_name),children:e.conference_name})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"Owner"}),i.jsx("p",{className:"font-medium",children:e.owner_name})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"Roster ID"}),i.jsx("p",{className:"font-medium",children:e.roster_id})]})]})]},s))}):i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-muted-foreground",children:"Player is currently a free agent"})})})]}),c.injury_status&&i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(Fs,{className:"h-5 w-5 text-yellow-600"}),i.jsx("span",{children:"Injury Status"})]})}),i.jsx(Vr,{children:i.jsxs("div",{className:"flex items-start space-x-3 p-4 border rounded-lg bg-yellow-50 dark:bg-yellow-900/20",children:[i.jsx(Fs,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:["Status: ",c.injury_status]}),i.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Player is currently listed with an injury designation. Monitor status updates."})]})]})})]})]})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsx(re,{to:"/players",children:i.jsxs(Sr,{variant:"ghost",className:"mb-4",children:[i.jsx(_s,{className:"mr-2 h-4 w-4"}),"Back to Players"]})}),i.jsxs(Kr,{children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsx(Gr,{children:"Player not found or not available in the current season configuration."})]})]})},hl=()=>{var e,s,t;const{toast:a}=_e(),{selectedConference:r,currentSeasonConfig:n,loading:l,error:c}=br(),[o,d]=te.useState([]),[m,u]=te.useState([]),[h,x]=te.useState(!0),[p,f]=te.useState(null),[g,j]=te.useState({team:"all",player:"",type:"all",conference:"all"}),v=async()=>{if(n)try{x(!0),f(null);const e="all"===r||null===r?n.conferences:n.conferences.filter(e=>e.id===r),s=e.filter(e=>e.dbConferenceId).map(e=>e.dbConferenceId);if(0===s.length)return d([]),void u([]);const t=await vr.getTransactions({filters:[{column:"conference_id",operator:"in",value:s}],orderBy:{column:"created_at",ascending:!1}});if(t.error||!t.data)throw new Error(t.error||"Failed to fetch transactions");const a=await vr.getTeams({}),i=await vr.getTeamConferenceJunctions({filters:[{column:"conference_id",operator:"in",value:s}]}),l=await vr.getAllPlayersForMapping([{column:"playing_status",operator:"eq",value:"Active"},{column:"position",operator:"in",value:["QB","RB","WR","TE"]}]),c=new Map;l.forEach(e=>{e.sleeper_id&&c.set(String(e.sleeper_id),e.player_name)});const o=await Promise.all(t.data.map(async s=>{let t={};try{t="string"==typeof s.data?JSON.parse(s.data):s.data||{}}catch(f){}const r=e.find(e=>e.dbConferenceId===s.conference_id),n=e=>{var t;const r=null==(t=i.data)?void 0:t.find(t=>t.roster_id.toString()===e.toString()&&t.conference_id===s.conference_id);if(r&&a.data){const e=a.data.find(e=>e.id===r.team_id);return(null==e?void 0:e.team_name)||"Unknown Team"}return"Unknown Team"};let l="Unknown Team";t.roster_ids&&t.roster_ids.length>0&&(l=n(t.roster_ids[0]));const o=[],d=[],m=e=>{const s=String(e);return c.get(s)||`Player ${s}`};if(t.adds)for(const[e,a]of Object.entries(t.adds)){const s=m(e),t=n(a);o.push({name:s,team:t})}if(t.drops)for(const[e,a]of Object.entries(t.drops)){const s=m(e),t=n(a);d.push({name:s,team:t})}let u="";const h=t.type||s.type,x=new Set;switch(t.roster_ids&&t.roster_ids.forEach(e=>{const s=n(e);"Unknown Team"!==s&&x.add(s)}),h){case"trade":if(o.length>0||d.length>0){const e=[];o.forEach(s=>e.push(`${s.name} to ${s.team}`)),d.forEach(s=>e.push(`${s.name} from ${s.team}`)),u=x.size>1?`Trade between ${Array.from(x).join(" and ")}: ${e.join(", ")}`:`${l} trade: ${e.join(", ")}`}else if(t.draft_picks&&t.draft_picks.length>0){u=`Trade involving ${t.draft_picks.map(e=>`${e.season} Round ${e.round} pick`).join(", ")}`}else u=`Trade between ${Array.from(x).join(" and ")}`;break;case"waiver":u=o.length>0&&d.length>0?`${l} claimed ${o.map(e=>e.name).join(", ")} from waivers, dropped ${d.map(e=>e.name).join(", ")}`:o.length>0?`${l} claimed ${o.map(e=>e.name).join(", ")} from waivers`:d.length>0?`${l} dropped ${d.map(e=>e.name).join(", ")} to waivers`:`${l} made a waiver claim`;break;case"free_agent":u=o.length>0&&d.length>0?`${l} added ${o.map(e=>e.name).join(", ")}, dropped ${d.map(e=>e.name).join(", ")}`:o.length>0?`${l} added ${o.map(e=>e.name).join(", ")} from free agency`:d.length>0?`${l} dropped ${d.map(e=>e.name).join(", ")}`:`${l} made a free agent transaction`;break;default:u=`${l} completed a ${h||"transaction"}`}const p="trade"===t.type?"trade":"waiver"===t.type?"waiver":"free_agent"===t.type?"free_agent":"commissioner";return{id:s.id.toString(),type:p,date:new Date(s.created_at||new Date),details:u,teams:[l],players:{added:o.map(e=>({id:"",name:e.name,team:e.team})),dropped:d.map(e=>({id:"",name:e.name,team:e.team}))},week:t.leg||0,status:"completed",rosterIds:t.roster_ids||[],draftPicks:t.draft_picks||[],waiverBudget:t.waiver_budget||[],conference:(null==r?void 0:r.name)||"Unknown Conference",conferenceId:s.conference_id.toString()}}));d(o),u(o)}catch(e){f("Failed to load transactions. Please try again."),a({title:"Error",description:"Failed to load transactions. Please try again.",variant:"destructive"})}finally{x(!1)}else x(!1)},y=()=>{j({team:"all",player:"",type:"all",conference:"all"})},w=(e,s)=>{j(t=>({...t,[e]:s}))};te.useEffect(()=>{v()},[n,r]),te.useEffect(()=>{(()=>{let e=[...o];g.team&&"all"!==g.team&&(e=e.filter(e=>e.teams.some(e=>e.toLowerCase().includes(g.team.toLowerCase())))),g.player&&(e=e.filter(e=>[...e.players.added||[],...e.players.dropped||[]].some(e=>e.name.toLowerCase().includes(g.player.toLowerCase())))),g.type&&"all"!==g.type&&(e=e.filter(e=>e.type===g.type)),g.conference&&"all"!==g.conference&&(e=e.filter(e=>e.conferenceId===g.conference)),u(e)})()},[g,o]);return l?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transactions"}),i.jsx("p",{className:"text-muted-foreground",children:"All roster moves and trades across conferences"})]})}),i.jsx("div",{className:"grid gap-4",children:[...Array(5)].map((e,s)=>i.jsx(qr,{className:"animate-pulse",children:i.jsxs(Vr,{className:"p-6",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},s))})]}):c?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transactions"}),i.jsx("p",{className:"text-muted-foreground",children:"All roster moves and trades across conferences"})]})}),i.jsx(Kr,{variant:"destructive",children:i.jsxs(Gr,{children:["App Error: ",c]})})]}):n?h?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transactions"}),i.jsx("p",{className:"text-muted-foreground",children:"All roster moves and trades across conferences"})]})}),i.jsx("div",{className:"grid gap-4",children:[...Array(5)].map((e,s)=>i.jsx(qr,{className:"animate-pulse",children:i.jsxs(Vr,{className:"p-6",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},s))})]}):p?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transactions"}),i.jsx("p",{className:"text-muted-foreground",children:"All roster moves and trades across conferences"})]})}),i.jsx(Kr,{variant:"destructive",children:i.jsx(Gr,{children:p})}),i.jsxs(Sr,{onClick:v,className:"w-full",children:[i.jsx(ct,{className:"mr-2 h-4 w-4"}),"Try Again"]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transactions"}),i.jsx("p",{className:"text-muted-foreground",children:"All roster moves and trades across conferences"})]}),i.jsxs(Sr,{onClick:v,variant:"outline",size:"sm",children:[i.jsx(ct,{className:"mr-2 h-4 w-4"}),"Refresh"]})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(Hs,{className:"h-5 w-5"}),i.jsx("span",{children:"Filters"})]}),i.jsx(Hr,{children:"Filter transactions by team, player, type, or conference"})]}),i.jsxs(Vr,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Team"}),i.jsxs(Dr,{value:g.team,onValueChange:e=>w("team",e),children:[i.jsx(Mr,{children:i.jsx(Fr,{placeholder:"All teams"})}),i.jsxs($r,{children:[i.jsx(Lr,{value:"all",children:"All teams"}),(()=>{const e=new Set;return o.forEach(s=>{s.teams.forEach(s=>{s&&""!==s.trim()&&e.add(s)})}),Array.from(e).sort()})().filter(e=>e&&""!==e.trim()).map(e=>i.jsx(Lr,{value:e,children:e},e))]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Player"}),i.jsxs("div",{className:"relative",children:[i.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(Hi,{placeholder:"Search players...",value:g.player,onChange:e=>w("player",e.target.value),className:"pl-10"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Type"}),i.jsxs(Dr,{value:g.type,onValueChange:e=>w("type",e),children:[i.jsx(Mr,{children:i.jsx(Fr,{placeholder:"All types"})}),i.jsxs($r,{children:[i.jsx(Lr,{value:"all",children:"All types"}),(()=>{const e=new Set(o.map(e=>e.type));return Array.from(e).filter(e=>e&&""!==e.trim())})().filter(e=>e&&""!==e.trim()).map(e=>i.jsx(Lr,{value:e,children:"trade"===e?"Trade":"free_agent"===e?"Free Agent":"waiver"===e?"Waiver":"commissioner"===e?"Commissioner":e},e))]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Conference"}),i.jsxs(Dr,{value:g.conference,onValueChange:e=>w("conference",e),children:[i.jsx(Mr,{children:i.jsx(Fr,{placeholder:"All conferences"})}),i.jsxs($r,{children:[i.jsx(Lr,{value:"all",children:"All conferences"}),null==(e=null==n?void 0:n.conferences)?void 0:e.filter(e=>{var s;const t=(null==(s=e.dbConferenceId)?void 0:s.toString())||e.id;return t&&""!==t.trim()}).map(e=>{var s;const t=(null==(s=e.dbConferenceId)?void 0:s.toString())||e.id;return i.jsx(Lr,{value:t,children:e.name},t)})]})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsx("div",{className:"flex items-center space-x-2",children:("all"!==g.team||""!==g.player||"all"!==g.type||"all"!==g.conference)&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),"all"!==g.team&&i.jsxs(Or,{variant:"secondary",children:["Team: ",g.team]}),""!==g.player&&i.jsxs(Or,{variant:"secondary",children:["Player: ",g.player]}),"all"!==g.type&&i.jsxs(Or,{variant:"secondary",children:["Type: ",g.type]}),"all"!==g.conference&&i.jsxs(Or,{variant:"secondary",children:["Conference: ",null==(t=null==(s=null==n?void 0:n.conferences)?void 0:s.filter(e=>{var s;const t=(null==(s=e.dbConferenceId)?void 0:s.toString())||e.id;return t&&""!==t.trim()}).find(e=>{var s;return(null==(s=e.dbConferenceId)?void 0:s.toString())===g.conference}))?void 0:t.name]})]})}),("all"!==g.team||""!==g.player||"all"!==g.type||"all"!==g.conference)&&i.jsx(Sr,{variant:"outline",size:"sm",onClick:y,children:"Reset Filters"})]})]})]}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ns,{className:"h-5 w-5 text-primary"}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:["Showing ",m.length," of ",o.length," transactions"]})]})}),i.jsx("div",{className:"space-y-4",children:m.length>0?m.map((e,s)=>i.jsx(Yi,{transaction:e},s)):i.jsx(qr,{children:i.jsxs(Vr,{className:"p-12 text-center",children:[i.jsx(Ns,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No transactions found"}),i.jsx("p",{className:"text-muted-foreground",children:"all"!==g.team||""!==g.player||"all"!==g.type||"all"!==g.conference?"No transactions match your current filters. Try adjusting your search criteria.":"No transactions available at this time."}),("all"!==g.team||""!==g.player||"all"!==g.type||"all"!==g.conference)&&i.jsx(Sr,{variant:"outline",onClick:y,className:"mt-4",children:"Clear Filters"})]})})})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transactions"}),i.jsx("p",{className:"text-muted-foreground",children:"All roster moves and trades across conferences"})]})}),i.jsx("div",{className:"grid gap-4",children:[...Array(5)].map((e,s)=>i.jsx(qr,{className:"animate-pulse",children:i.jsxs(Vr,{className:"p-6",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},s))})]})},xl=()=>{var e;const{selectedSeason:s,selectedConference:t}=br(),{toast:a}=_e(),[r,n]=te.useState(1),[l,c]=te.useState("board"),[o,d]=te.useState(!0),[m,u]=te.useState([]),[h,x]=te.useState([]),[p,f]=te.useState([]),[g,j]=te.useState({}),[v,y]=te.useState([]),[w,N]=te.useState(!1),[b,_]=te.useState(new Set);te.useEffect(()=>{S()},[]),te.useEffect(()=>{s&&p.length>0&&h.length>0&&v.length>0&&Object.keys(g).length>0&&k()},[s,t,p,h,v,g]);const S=async()=>{d(!0);try{const s=await vr.getSeasons({orderBy:{column:"season_year",ascending:!1},limit:50});if(s.error)throw s.error;f(s.data||[]);const t=await vr.getConferences({orderBy:{column:"conference_name",ascending:!0},limit:50});if(t.error)throw t.error;x(t.data||[]);const a=await vr.getTeams({orderBy:{column:"team_name",ascending:!0},limit:100});if(a.error)throw a.error;y(a.data||[]);try{const e=await vr.getAllPlayersForMapping(),s={};e.forEach(e=>{e.sleeper_id&&(s[e.sleeper_id]=e)}),j(s)}catch(e){j({})}}catch(e){a({title:"Error",description:`Failed to load initial data: ${e}`,variant:"destructive"})}finally{d(!1)}},k=async()=>{if(s&&0!==p.length&&0!==h.length&&0!==v.length&&0!==Object.keys(g).length){N(!0);try{if(!p.find(e=>e.season_year===s.toString()))return void u([]);const e=[{column:"draft_year",operator:"eq",value:s.toString()}],t=await vr.getDraftResults({filters:e,orderBy:{column:"pick_number",ascending:!0},limit:1e3});if(t.error)throw t.error;const a=t.data||[],r=a.map(e=>{const s=h.find(s=>s.league_id===e.league_id),t=g[e.sleeper_id],r=v.find(s=>s.owner_id===e.owner_id);return a.indexOf(e),{...e,conference_name:(null==s?void 0:s.conference_name)||"Unknown Conference",player_name:(null==t?void 0:t.player_name)||"Unknown Player",position:(null==t?void 0:t.position)||"UNK",nfl_team:(null==t?void 0:t.nfl_team)||"UNK",owner_name:(null==r?void 0:r.owner_name)||"Unknown Owner",team_name:(null==r?void 0:r.team_name)||"Unknown Team",conference_id:null==s?void 0:s.id,team_id:null==r?void 0:r.id,player_id:e.sleeper_id}});u(r)}catch(e){a({title:"Error",description:`Failed to load draft data: ${e}`,variant:"destructive"}),u([])}finally{N(!1)}}},C=()=>{if(!t){const e=p.find(e=>e.season_year===s.toString());if(!e)return[];return h.filter(s=>s.season_id===e.id)}const e={thelegionsofmars:"The Legions of Mars",theguardiansofjupiter:"The Guardians of Jupiter",vulcansoathsworn:"Vulcan's Oathsworn"}[t];if(!e)return[];const a=p.find(e=>e.season_year===s.toString());if(!a)return[];const r=h.find(s=>s.season_id===a.id&&s.conference_name===e);return r?[r]:[]},T=e=>{switch(e){case"QB":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"RB":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"WR":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"TE":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"K":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};if(o)return i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin h-8 w-8 border-b-2 border-blue-600 rounded-full"})});const E=C(),P=E.reduce((e,s)=>e+new Set(m.filter(e=>e.conference_id===s.id).map(e=>e.team_id)).size,0),R=Math.max(...m.map(e=>parseInt(e.round)),1);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(vt,{className:"h-6 w-6 text-primary"}),i.jsx("h1",{className:"text-3xl font-bold",children:"Draft Results"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("p",{className:"text-muted-foreground",children:[s," Season • ",t?(null==(e=E[0])?void 0:e.conference_name)||"Conference":"All Conferences"]}),i.jsxs(Sr,{variant:"outline",size:"sm",onClick:k,disabled:w,children:[w?i.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(ct,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(qr,{children:i.jsxs(Wr,{className:"pb-2",children:[i.jsx(Hr,{children:"Total Conferences"}),i.jsx(Ur,{className:"text-2xl",children:E.length})]})}),i.jsx(qr,{children:i.jsxs(Wr,{className:"pb-2",children:[i.jsx(Hr,{children:"Total Teams"}),i.jsx(Ur,{className:"text-2xl",children:P})]})}),i.jsx(qr,{children:i.jsxs(Wr,{className:"pb-2",children:[i.jsx(Hr,{children:"Total Picks"}),i.jsx(Ur,{className:"text-2xl",children:m.length})]})}),i.jsx(qr,{children:i.jsxs(Wr,{className:"pb-2",children:[i.jsx(Hr,{children:"Max Rounds"}),i.jsx(Ur,{className:"text-2xl",children:R})]})})]}),0===m.length?i.jsx(qr,{children:i.jsxs(Vr,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(Fs,{className:"h-12 w-12 text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Draft Results Found"}),i.jsxs("p",{className:"text-muted-foreground text-center mb-4",children:["No draft picks found for the ",s," season",t?` in ${t}`:"","."]}),i.jsxs("div",{className:"text-sm text-muted-foreground text-center space-y-2",children:[i.jsx("p",{children:"Try:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Selecting a different season from the dropdown above"}),i.jsx("li",{children:'Choosing "All Conferences" if you have a conference selected'}),i.jsx("li",{children:"Syncing draft data from Admin → Data Sync → Draft Sync"})]})]})]})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs(Dr,{value:r.toString(),onValueChange:e=>n(parseInt(e)),children:[i.jsx(Mr,{className:"w-32",children:i.jsx(Fr,{})}),i.jsx($r,{children:Array.from({length:R},(e,s)=>i.jsxs(Lr,{value:(s+1).toString(),children:["Round ",s+1]},s+1))})]})})}),i.jsxs(ei,{value:l,onValueChange:e=>c(e),className:"w-full",children:[i.jsxs(si,{children:[i.jsx(ti,{value:"board",children:"Draft Board"}),i.jsx(ti,{value:"team",children:"Team View"})]}),i.jsx(ai,{value:"board",className:"space-y-6",children:E.map(e=>(e=>{let s=m.filter(s=>s.conference_id===e.id).filter(e=>parseInt(e.round)===r);return s.sort((e,s)=>parseInt(e.draft_slot)-parseInt(s.draft_slot)),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(xt,{className:"h-5 w-5"}),i.jsx("span",{children:e.conference_name})]}),i.jsxs(Hr,{children:["Round ",r," • ",s.length," picks"]})]}),i.jsx(Vr,{children:i.jsx("div",{className:"rounded-md border",children:i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{className:"w-16",children:"Pick"}),i.jsx(xn,{className:"w-16",children:"Overall"}),i.jsx(xn,{children:"Player"}),i.jsx(xn,{children:"Position"}),i.jsx(xn,{className:"hidden sm:table-cell",children:"NFL Team"}),i.jsx(xn,{children:"Drafted By"})]})}),i.jsx(un,{children:s.length>0?s.map(s=>i.jsxs(hn,{children:[i.jsx(pn,{className:"font-medium",children:s.draft_slot}),i.jsx(pn,{className:"font-medium",children:s.pick_number}),i.jsx(pn,{className:"font-semibold",children:s.player_name}),i.jsx(pn,{children:i.jsx(Or,{className:T(s.position),children:s.position})}),i.jsx(pn,{className:"hidden sm:table-cell",children:s.nfl_team}),i.jsx(pn,{children:i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-medium",children:s.team_name}),i.jsx("div",{className:"text-muted-foreground",children:s.owner_name})]})})]},`${e.id}-${s.pick_number}`)):i.jsx(hn,{children:i.jsxs(pn,{colSpan:6,className:"text-center text-muted-foreground py-8",children:["No picks found for round ",r]})})})]})})})]},e.id)})(e))}),i.jsx(ai,{value:"team",className:"space-y-6",children:(()=>{const e=C();return i.jsx("div",{className:"space-y-6",children:e.map(e=>{const s=m.filter(s=>s.conference_id===e.id),t=new Map;s.forEach(e=>{const s=e.team_id;t.has(s)||t.set(s,{team_id:e.team_id,owner_name:e.owner_name,team_name:e.team_name,picks:[]}),t.get(s).picks.push(e)}),t.forEach(e=>{e.picks.sort((e,s)=>{const t=parseInt(e.round),a=parseInt(s.round);return t!==a?t-a:parseInt(e.draft_slot)-parseInt(s.draft_slot)})});const a=Array.from(t.values());return i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(Tt,{className:"h-5 w-5"}),i.jsxs("span",{children:[e.conference_name," - Team Draft Summary"]})]})}),i.jsxs(Vr,{children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(e=>{const s=b.has(e.team_id),t=s?e.picks:e.picks.slice(0,8);return i.jsxs(qr,{children:[i.jsxs(Wr,{className:"pb-2",children:[i.jsx(Ur,{className:"text-lg",children:e.team_name}),i.jsxs(Hr,{children:[e.owner_name," • ",e.picks.length," picks"]})]}),i.jsx(Vr,{children:i.jsxs("div",{className:"space-y-2",children:[t.map(e=>i.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-accent/50",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(Or,{variant:"outline",className:"text-xs",children:["R",e.round]}),i.jsx("span",{className:"font-medium text-sm",children:e.player_name}),i.jsx(Or,{className:`${T(e.position)} text-xs`,children:e.position})]}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:["#",e.pick_number]})]},e.pick_number)),e.picks.length>8&&i.jsx("div",{className:"flex justify-center pt-2",children:i.jsx(Sr,{variant:"ghost",size:"sm",onClick:()=>(e=>{const s=new Set(b);s.has(e)?s.delete(e):s.add(e),_(s)})(e.team_id),className:"text-xs",children:s?i.jsxs(i.Fragment,{children:[i.jsx(Ds,{className:"h-3 w-3 mr-1"}),"Show Less"]}):i.jsxs(i.Fragment,{children:[i.jsx(Rs,{className:"h-3 w-3 mr-1"}),"Show All ",e.picks.length," Picks"]})})})]})})]},e.team_id)})}),0===a.length&&i.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[i.jsx(Fs,{className:"h-8 w-8 mx-auto mb-2"}),i.jsx("p",{children:"No draft picks found for this conference"}),i.jsx("p",{className:"text-sm",children:"Try syncing draft data from the Admin panel"})]})]})]},e.id)})})})()})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(St,{className:"h-5 w-5"}),i.jsx("span",{children:"Draft Analysis"})]}),i.jsx(Hr,{children:"Draft insights and position trends"})]}),i.jsx(Vr,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.filter(e=>"RB"===e.position).length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Running Backs Drafted"})]}),i.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[i.jsx("p",{className:"text-2xl font-bold",children:m.filter(e=>"QB"===e.position).length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Quarterbacks Drafted"})]}),i.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[i.jsx("p",{className:"text-2xl font-bold",children:m.filter(e=>"WR"===e.position).length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Wide Receivers Drafted"})]})]})})]})]})]})},pl={pass_yd:{category:"passing",key:"passingYards",description:"passing yards",per:25},pass_td:{category:"passing",key:"passingTDs",description:"passing touchdown",per:1},pass_int:{category:"passing",key:"interceptions",description:"interception",per:1},pass_2pt:{category:"passing",key:"passing2pt",description:"2-point conversion",per:1},rush_yd:{category:"rushing",key:"rushingYards",description:"rushing yards",per:10},rush_td:{category:"rushing",key:"rushingTDs",description:"rushing touchdown",per:1},rush_2pt:{category:"rushing",key:"rushing2pt",description:"2-point conversion",per:1},rec_yd:{category:"receiving",key:"receivingYards",description:"receiving yards",per:10},rec:{category:"receiving",key:"receptions",description:"reception (PPR)",per:1},rec_td:{category:"receiving",key:"receivingTDs",description:"receiving touchdown",per:1},rec_2pt:{category:"receiving",key:"receiving2pt",description:"2-point conversion",per:1}},fl={positions:{QB:1,RB:2,WR:2,TE:1,FLEX:1,SUPER_FLEX:1,DEF:1,BENCH:6},totalRosterSize:15,startingLineupSize:9,benchSize:6},gl={id:0,season_id:0,playoff_teams:10,week_14_byes:6,reseed:!0,playoff_start_week:14,championship_week:17,is_active:!0};class jl{static async initializeBucket(){try{const{data:e}=await ir.storage.listBuckets();if(!(null==e?void 0:e.some(e=>e.name===this.BUCKET_NAME))){const{error:e}=await ir.storage.createBucket(this.BUCKET_NAME,{public:!0,allowedMimeTypes:this.ALLOWED_FILE_TYPES,fileSizeLimit:this.MAX_FILE_SIZE});if(e)throw e}}catch(e){throw e}}static async uploadCharter(e,s,t){try{const a=this.validateFile(s);if(!a.valid)return{success:!1,error:a.error};await this.initializeBucket();const r=s.name.split(".").pop(),n=`charters/${`charter-season-${e}-${Date.now()}.${r}`}`,{data:i,error:l}=await ir.storage.from(this.BUCKET_NAME).upload(n,s,{cacheControl:"3600",upsert:!0});if(l)return{success:!1,error:"Failed to upload file"};const{data:c}=ir.storage.from(this.BUCKET_NAME).getPublicUrl(n);if(!c.publicUrl)return{success:!1,error:"Failed to get file URL"};const{error:o}=await vr.updateSeason(e,{charter_file_url:c.publicUrl,charter_file_name:s.name,charter_uploaded_at:(new Date).toISOString(),charter_uploaded_by:t});return o?(await this.deleteCharterFile(n),{success:!1,error:"Failed to save charter information"}):{success:!0,fileUrl:c.publicUrl,fileName:s.name}}catch(a){return{success:!1,error:"Unexpected error during upload"}}}static async getCharterInfo(e){try{const{data:s}=await vr.getSeasons({filters:[{column:"id",operator:"eq",value:e}]});if(!s||0===s.length)return null;const t=s[0];return t.charter_file_url&&t.charter_file_name?{fileUrl:t.charter_file_url,fileName:t.charter_file_name,uploadedAt:t.charter_uploaded_at||"",uploadedBy:t.charter_uploaded_by||""}:null}catch(s){return null}}static async deleteCharter(e){try{const s=await this.getCharterInfo(e);if(!s)return{success:!1,error:"No charter found for this season"};const t=new URL(s.fileUrl).pathname.split("/").slice(-2).join("/"),{error:a}=await ir.storage.from(this.BUCKET_NAME).remove([t]),{error:r}=await vr.updateSeason(e,{charter_file_url:null,charter_file_name:null,charter_uploaded_at:null,charter_uploaded_by:null});return r?{success:!1,error:"Failed to update season record"}:{success:!0}}catch(s){return{success:!1,error:"Unexpected error during deletion"}}}static validateFile(e){return e.size>this.MAX_FILE_SIZE?{valid:!1,error:"File size must be less than 10MB"}:this.ALLOWED_FILE_TYPES.includes(e.type)?{valid:!0}:{valid:!1,error:"File must be PDF, Word document, or text file"}}static async deleteCharterFile(e){try{await ir.storage.from(this.BUCKET_NAME).remove([e])}catch(s){}}static getFileIcon(e){var s;switch(null==(s=e.split(".").pop())?void 0:s.toLowerCase()){case"pdf":default:return"📄";case"doc":case"docx":return"📝";case"txt":return"📃"}}}t(jl,"BUCKET_NAME","league-documents"),t(jl,"ALLOWED_FILE_TYPES",["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"]),t(jl,"MAX_FILE_SIZE",10485760);const vl=({fileUrl:e,fileName:s,className:t=""})=>{const[a,r]=te.useState(!1),[n,l]=te.useState(!0),[c,o]=te.useState(null),[d,m]=te.useState("iframe"),[u,h]=te.useState(!0),x=()=>{const e=navigator.mimeTypes&&navigator.mimeTypes["application/pdf"],s=/Chrome/.test(navigator.userAgent),t=/Firefox/.test(navigator.userAgent),a=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);return e||s||t||a},p=()=>{h(!1),o(null)},f=()=>{h(!1),o("Failed to load PDF in iframe. Trying alternative method..."),"iframe"===d?m("embed"):"embed"===d&&m("object")},g=()=>{o(null),h(!0),m("iframe")};return n?i.jsxs("div",{className:`space-y-4 ${t}`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Or,{variant:"secondary",children:"PDF Viewer"}),!x()&&i.jsx(Or,{variant:"destructive",children:"Limited Browser Support"})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(Sr,{variant:"outline",size:"sm",onClick:g,disabled:u,children:[i.jsx(ct,{className:"h-4 w-4 mr-1 "+(u?"animate-spin":"")}),"Reload"]}),i.jsxs(Sr,{variant:"outline",size:"sm",onClick:()=>l(!1),children:[i.jsx(qs,{className:"h-4 w-4 mr-1"}),"Hide"]}),i.jsxs(Sr,{variant:"outline",size:"sm",onClick:()=>r(!a),children:[a?i.jsx(tt,{className:"h-4 w-4 mr-1"}):i.jsx(Zs,{className:"h-4 w-4 mr-1"}),a?"Minimize":"Expand"]}),i.jsxs(Sr,{variant:"outline",size:"sm",onClick:()=>window.open(e,"_blank"),children:[i.jsx(Bs,{className:"h-4 w-4 mr-1"}),"New Tab"]}),i.jsxs(Sr,{variant:"outline",size:"sm",onClick:()=>{const t=document.createElement("a");t.href=e,t.download=s,document.body.appendChild(t),t.click(),document.body.removeChild(t)},children:[i.jsx(Os,{className:"h-4 w-4 mr-1"}),"Download"]})]})]}),i.jsxs("div",{className:"border rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 relative "+(a?"fixed inset-4 z-50 bg-white dark:bg-gray-900":"h-96 md:h-[600px]"),children:[u&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-900 z-10",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading PDF..."})]})}),c?i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-900 z-10",children:i.jsxs(Kr,{variant:"destructive",className:"max-w-md",children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsxs(Gr,{children:[c,i.jsxs("div",{className:"mt-2 space-x-2",children:[i.jsx(Sr,{size:"sm",variant:"outline",onClick:g,children:"Try Again"}),i.jsx(Sr,{size:"sm",variant:"outline",onClick:()=>window.open(e,"_blank"),children:"Open in New Tab"})]})]})]})}):(()=>{const t={width:"100%",height:"100%",title:s,onLoad:p,onError:f},a=`${e}#toolbar=1&navpanes=1&scrollbar=1&view=FitH`;switch(d){case"iframe":return i.jsx("iframe",{src:a,className:"border-0 w-full h-full",...t});case"embed":return i.jsx("embed",{src:a,type:"application/pdf",className:"w-full h-full",...t});case"object":return i.jsx("object",{data:a,type:"application/pdf",className:"w-full h-full",...t,children:i.jsxs("p",{children:["Your browser doesn't support PDF viewing.",i.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-primary underline ml-1",children:"Click here to download the PDF"})]})});default:return null}})()]}),!x()&&i.jsxs(Kr,{children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsx(Gr,{children:"Your browser may have limited PDF viewing support. For the best experience, try opening the PDF in a new tab or downloading it."})]}),i.jsxs(Kr,{children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsxs(Gr,{children:[i.jsx("strong",{children:"Tips:"}),' Use the expand button for full-screen viewing. If the PDF doesn\'t load properly, try the "New Tab" or "Download" options.']})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(qs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"PDF viewer hidden"}),i.jsxs(Sr,{variant:"outline",onClick:()=>l(!0),className:"mt-2",children:[i.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Show PDF"]})]})},yl=({fileUrl:e,fileName:s,uploadedAt:t})=>{const[a,r]=te.useState(!1),[n,l]=te.useState(!0),[c,o]=te.useState(null),d=e=>{var s;return(null==(s=e.split(".").pop())?void 0:s.toLowerCase())||""},m=()=>i.jsx(vl,{fileUrl:e,fileName:s}),u=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Or,{variant:"secondary",children:"Document Viewer"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(Sr,{variant:"outline",size:"sm",onClick:()=>l(!1),children:[i.jsx(qs,{className:"h-4 w-4 mr-1"}),"Hide"]}),i.jsxs(Sr,{variant:"outline",size:"sm",onClick:()=>r(!a),children:[a?i.jsx(tt,{className:"h-4 w-4 mr-1"}):i.jsx(Zs,{className:"h-4 w-4 mr-1"}),a?"Minimize":"Expand"]})]})]}),i.jsx("div",{className:"border rounded-lg overflow-hidden "+(a?"h-screen":"h-96"),children:i.jsx("iframe",{src:`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`,width:"100%",height:"100%",title:s,className:"border-0",onError:()=>o("Failed to load document. Please try downloading the file.")})}),i.jsxs(Kr,{children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsx(Gr,{children:"Word documents are displayed using Google Docs Viewer. For best experience, consider uploading as PDF."})]})]}),h=()=>{const[s,t]=te.useState(""),[n,c]=te.useState(!0);return ne.useEffect(()=>{fetch(e).then(e=>e.text()).then(e=>{t(e),c(!1)}).catch(e=>{o("Failed to load text file content."),c(!1)})},[e]),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Or,{variant:"secondary",children:"Text Viewer"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(Sr,{variant:"outline",size:"sm",onClick:()=>l(!1),children:[i.jsx(qs,{className:"h-4 w-4 mr-1"}),"Hide"]}),i.jsxs(Sr,{variant:"outline",size:"sm",onClick:()=>r(!a),children:[a?i.jsx(tt,{className:"h-4 w-4 mr-1"}):i.jsx(Zs,{className:"h-4 w-4 mr-1"}),a?"Minimize":"Expand"]})]})]}),i.jsx("div",{className:"border rounded-lg p-4 bg-gray-50 dark:bg-gray-900 overflow-auto "+(a?"h-screen":"h-96"),children:n?i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):i.jsx("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:s})})]})},x=()=>i.jsxs(Kr,{children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsx(Jr,{children:"Preview Not Available"}),i.jsx(Gr,{children:"This file type cannot be previewed in the browser. Please download the file to view its contents."})]});return i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Us,{className:"h-6 w-6 text-primary"}),i.jsxs("div",{children:[i.jsx(Ur,{className:"text-lg",children:s}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[(e=>{switch(d(e)){case"pdf":return"PDF Document";case"doc":case"docx":return"Word Document";case"txt":return"Text Document";default:return"Document"}})(s)," • Last updated: ",new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(Sr,{variant:"outline",size:"sm",onClick:()=>window.open(e,"_blank"),children:[i.jsx(Bs,{className:"h-4 w-4 mr-1"}),"Open in New Tab"]}),i.jsxs(Sr,{variant:"outline",size:"sm",onClick:()=>{const t=document.createElement("a");t.href=e,t.download=s,document.body.appendChild(t),t.click(),document.body.removeChild(t)},children:[i.jsx(Os,{className:"h-4 w-4 mr-1"}),"Download"]})]})]})}),i.jsx(Vr,{children:c?i.jsxs(Kr,{variant:"destructive",children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsx(Jr,{children:"Viewer Error"}),i.jsx(Gr,{children:c})]}):(()=>{const e=d(s);if(!n)return i.jsxs("div",{className:"text-center py-8",children:[i.jsx(qs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Document viewer hidden"}),i.jsxs(Sr,{variant:"outline",onClick:()=>l(!0),className:"mt-2",children:[i.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Show Document"]})]});switch(e){case"pdf":return m();case"doc":case"docx":return u();case"txt":return h();default:return x()}})()})]})},wl={scoring:{passing:{passingYards:{points:1,per:25,description:"1 point per 25 passing yards"},passingTDs:{points:4,per:1,description:"4 points per passing touchdown"},interceptions:{points:-2,per:1,description:"-2 points per interception"},passing2pt:{points:2,per:1,description:"2 points per 2-point conversion"}},rushing:{rushingYards:{points:1,per:10,description:"1 point per 10 rushing yards"},rushingTDs:{points:6,per:1,description:"6 points per rushing touchdown"},rushing2pt:{points:2,per:1,description:"2 points per 2-point conversion"}},receiving:{receivingYards:{points:1,per:10,description:"1 point per 10 receiving yards"},receptions:{points:.5,per:1,description:"0.5 points per reception (PPR)"},receivingTDs:{points:6,per:1,description:"6 points per receiving touchdown"},receiving2pt:{points:2,per:1,description:"2 points per 2-point conversion"}}},roster:{positions:{QB:1,RB:2,WR:2,TE:1,FLEX:1,K:1,DEF:1,BENCH:6},waiverSystem:"FAAB",waiverBudget:100,waiverClearTime:"Wednesday 3:00 AM ET"}},Nl=()=>{var e,s,t,a,r,n;const{selectedSeason:l,selectedConference:c,currentSeasonConfig:o}=br(),{scoringSettings:d,loading:m,error:u}=(()=>{const{selectedSeason:e}=br(),[s,t]=te.useState(null),[a,r]=te.useState(!0),[n,i]=te.useState(null),l=e=>{const s={passing:{},rushing:{},receiving:{}};return Object.entries(e).forEach(([e,t])=>{const a=pl[e];a&&(s[a.category][a.key]={points:t,per:a.per,description:`${t>0?"+":""}${t} point${1!==Math.abs(t)?"s":""} per ${a.description}`})}),s},c=async()=>{if(!e)return i("No season selected"),void r(!1);try{r(!0),i(null);const{data:s}=await vr.getSeasons({filters:[{column:"season_year",operator:"eq",value:e}]});if(!s||0===s.length)return i("Season not found"),void r(!1);const a=s[0];if(a.scoring_settings){const e=l(a.scoring_settings);t(e)}else{if(!(await vr.updateSeasonScoringSettings(a.id)).success)return i("Failed to fetch scoring settings from Sleeper API"),void r(!1);const{data:s}=await vr.getSeasons({filters:[{column:"season_year",operator:"eq",value:e}]});if(s&&s.length>0&&s[0].scoring_settings){const e=l(s[0].scoring_settings);t(e)}else i("Failed to update scoring settings")}}catch(s){i("Failed to load scoring settings")}finally{r(!1)}};return te.useEffect(()=>{c()},[e]),{scoringSettings:s,loading:a,error:n,refetch:c}})(),{rosterSettings:h,loading:x,error:p}=(()=>{const{selectedSeason:e}=br(),[s,t]=te.useState(null),[a,r]=te.useState(!0),[n,i]=te.useState(null),l=e=>{const s={};e.forEach(e=>{s[e]=(s[e]||0)+1});const t=e.length,a=15-t;return a>0&&(s.BENCH=a),{positions:s,totalRosterSize:15,startingLineupSize:t,benchSize:a}},c=async()=>{if(!e)return i("No season selected"),void r(!1);try{r(!0),i(null);const{data:s}=await vr.getSeasons({filters:[{column:"season_year",operator:"eq",value:e}]});if(!s||0===s.length)return i("Season not found"),void r(!1);const a=s[0];if(a.roster_positions){const e=l(a.roster_positions);t(e)}else{if(!(await vr.updateSeasonRosterPositions(a.id)).success)return t(fl),void r(!1);const{data:s}=await vr.getSeasons({filters:[{column:"season_year",operator:"eq",value:e}]});if(s&&s.length>0&&s[0].roster_positions){const e=l(s[0].roster_positions);t(e)}else t(fl)}}catch(s){i("Failed to load roster settings"),t(fl)}finally{r(!1)}};return te.useEffect(()=>{c()},[e]),{rosterSettings:s,loading:a,error:n,refetch:c}})(),{playoffFormat:f,loading:g,error:j}=(()=>{const{selectedSeason:e}=br(),[s,t]=te.useState(null),[a,r]=te.useState(!0),[n,i]=te.useState(null),l=async()=>{if(!e)return i("No season selected"),void r(!1);try{r(!0),i(null);const{data:s}=await vr.getSeasons({filters:[{column:"season_year",operator:"eq",value:e}]});if(!s||0===s.length)return i("Season not found"),t(gl),void r(!1);const a=s[0],{data:n}=await vr.getPlayoffFormats({filters:[{column:"season_id",operator:"eq",value:a.id},{column:"is_active",operator:"eq",value:!0}]});n&&n.length>0?t(n[0]):t(gl)}catch(s){i("Failed to load playoff format"),t(gl)}finally{r(!1)}};return te.useEffect(()=>{l()},[e]),{playoffFormat:s,loading:a,error:n,refetch:l}})(),{charterInfo:v,loading:y,error:w,hasCharter:N}=(()=>{const{selectedSeason:e}=br(),[s,t]=te.useState(null),[a,r]=te.useState(!0),[n,i]=te.useState(null),l=async()=>{if(!e)return i("No season selected"),void r(!1);try{r(!0),i(null);const{data:s}=await vr.getSeasons({filters:[{column:"season_year",operator:"eq",value:e}]});if(!s||0===s.length)return i("Season not found"),void r(!1);const a=s[0],n=await jl.getCharterInfo(a.id);t(n)}catch(s){i("Failed to load charter information"),t(null)}finally{r(!1)}};return te.useEffect(()=>{l()},[e]),{charterInfo:s,loading:a,error:n,refetch:l,hasCharter:!!s}})(),[b,_]=te.useState("scoring"),S=(e,s)=>s&&0!==Object.keys(s).length?i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{className:"capitalize",children:e})}),i.jsx(Vr,{children:i.jsx("div",{className:"rounded-md border",children:i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{children:"Statistic"}),i.jsx(xn,{className:"text-right",children:"Points"}),i.jsx(xn,{className:"hidden md:table-cell",children:"Description"})]})}),i.jsx(un,{children:Object.entries(s).map(([e,s])=>i.jsxs(hn,{children:[i.jsx(pn,{className:"font-medium",children:e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}),i.jsx(pn,{className:"text-right font-mono",children:i.jsxs(Or,{variant:s.points>0?"default":"destructive",children:[s.points>0?"+":"",s.points]})}),i.jsx(pn,{className:"hidden md:table-cell text-sm text-muted-foreground",children:s.description})]},e))})]})})})]}):i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{className:"capitalize",children:e})}),i.jsx(Vr,{children:i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:["No ",e," scoring rules configured"]})})]});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Us,{className:"h-6 w-6 text-primary"}),i.jsx("h1",{className:"text-3xl font-bold",children:"League Rules"})]}),i.jsxs("p",{className:"text-muted-foreground",children:[l," Season • Official rules and regulations for the Gladiator League"]})]}),i.jsxs(Kr,{children:[i.jsx(Js,{className:"h-4 w-4"}),i.jsx(Jr,{children:"League Information"}),i.jsx(Gr,{children:"These rules apply to all three conferences within the Gladiator League. Conference-specific variations are noted where applicable."})]}),i.jsxs(ei,{value:b,onValueChange:_,className:"w-full",children:[i.jsxs(si,{className:"grid w-full grid-cols-5",children:[i.jsx(ti,{value:"scoring",children:"Scoring"}),i.jsx(ti,{value:"roster",children:"Roster"}),i.jsx(ti,{value:"schedule",children:"Schedule"}),i.jsx(ti,{value:"payouts",children:"Payouts"}),i.jsx(ti,{value:"charter",children:"Charter"})]}),i.jsxs(ai,{value:"scoring",className:"space-y-6",children:[m?i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin"}),i.jsx("span",{children:"Loading scoring settings..."})]})})}):u?i.jsxs(Kr,{variant:"destructive",children:[i.jsx(Js,{className:"h-4 w-4"}),i.jsx(Jr,{children:"Error Loading Scoring Settings"}),i.jsxs(Gr,{children:[u,". Using default scoring rules as fallback."]})]}):null,i.jsx("div",{className:"grid gap-6",children:d?i.jsxs(i.Fragment,{children:[S("passing",d.passing),S("rushing",d.rushing),S("receiving",d.receiving)]}):i.jsxs(i.Fragment,{children:[S("passing",wl.scoring.passing),S("rushing",wl.scoring.rushing),S("receiving",wl.scoring.receiving)]})}),i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(ht,{className:"h-5 w-5"}),i.jsx("span",{children:"Scoring Summary"})]})}),i.jsx(Vr,{children:d?i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[i.jsx("p",{className:"text-2xl font-bold",children:d.receiving.receptions?`${d.receiving.receptions.points} PPR`:"Standard"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:d.receiving.receptions?`${d.receiving.receptions.points} Points per Reception`:"No PPR Scoring"})]}),i.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[i.jsxs("p",{className:"text-2xl font-bold",children:[(null==(e=d.passing.passingTDs)?void 0:e.points)||0,"/",(null==(s=d.rushing.rushingTDs)?void 0:s.points)||(null==(t=d.receiving.receivingTDs)?void 0:t.points)||0]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Pass TD / Rush-Rec TD"})]}),i.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[i.jsxs("p",{className:"text-2xl font-bold",children:[(null==(a=d.passing.passingYards)?void 0:a.per)||25,"/",(null==(r=d.rushing.rushingYards)?void 0:r.per)||(null==(n=d.receiving.receivingYards)?void 0:n.per)||10]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Pass Yards / Rush-Rec Yards"})]})]}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[i.jsx("p",{className:"text-2xl font-bold",children:"PPR"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"0.5 Points per Reception"})]}),i.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[i.jsx("p",{className:"text-2xl font-bold",children:"4/6"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Pass TD / Rush-Rec TD"})]}),i.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[i.jsx("p",{className:"text-2xl font-bold",children:"25/10"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Pass Yards / Rush-Rec Yards"})]})]})})]})]}),i.jsxs(ai,{value:"roster",className:"space-y-6",children:[x?i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin"}),i.jsx("span",{children:"Loading roster settings..."})]})})}):p?i.jsxs(Kr,{variant:"destructive",children:[i.jsx(Js,{className:"h-4 w-4"}),i.jsx(Jr,{children:"Error Loading Roster Settings"}),i.jsxs(Gr,{children:[p,". Using default roster configuration as fallback."]})]}):null,i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(Tt,{className:"h-5 w-5"}),i.jsx("span",{children:"Starting Lineup"})]}),i.jsx(Hr,{children:"Required positions for weekly lineup"})]}),i.jsx(Vr,{children:i.jsx("div",{className:"space-y-3",children:Object.entries((null==h?void 0:h.positions)||wl.roster.positions).filter(([e])=>"BENCH"!==e).map(([e,s])=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Or,{variant:"outline",children:e}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"FLEX"===e?"RB/WR/TE":"SUPER_FLEX"===e?"QB/RB/WR/TE":"DEF"===e?"Team Defense":e})]}),i.jsx("span",{className:"font-semibold",children:s})]},e))})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(qr,{children:[i.jsxs(Wr,{className:"pb-3",children:[i.jsx(Ur,{className:"text-lg",children:"Roster Management"}),i.jsx(Hr,{className:"text-sm",children:"Roster size and configuration"})]}),i.jsx(Vr,{children:i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Roster Size"}),i.jsx("p",{className:"text-xl font-bold",children:"21"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Starting Lineup"}),i.jsx("p",{className:"text-xl font-bold",children:"9"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Bench"}),i.jsx("p",{className:"text-xl font-bold",children:"12"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"IR"}),i.jsx("p",{className:"text-xl font-bold",children:"2"})]})]})})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{className:"pb-3",children:[i.jsx(Ur,{className:"text-lg",children:"Waiver & Trade Rules"}),i.jsx(Hr,{className:"text-sm",children:"League transaction settings"})]}),i.jsxs(Vr,{children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Waiver System"}),i.jsx("p",{className:"font-semibold",children:wl.roster.waiverSystem})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"FAAB Budget"}),i.jsxs("p",{className:"font-semibold",children:["$",wl.roster.waiverBudget]})]})]}),i.jsxs("div",{className:"pt-3 mt-3 border-t",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Waiver Clear Time"}),i.jsx("p",{className:"text-sm font-medium",children:wl.roster.waiverClearTime})]})]})]})]})]})]}),i.jsxs(ai,{value:"schedule",className:"space-y-6",children:[g?i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin"}),i.jsx("span",{children:"Loading schedule information..."})]})})}):j?i.jsxs(Kr,{variant:"destructive",children:[i.jsx(Js,{className:"h-4 w-4"}),i.jsx(Jr,{children:"Error Loading Schedule Information"}),i.jsxs(Gr,{children:[j,". Using default schedule information as fallback."]})]}):null,i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(Ts,{className:"h-5 w-5"}),i.jsx("span",{children:"Season Structure"})]}),i.jsx(Hr,{children:"Regular season and playoff format"})]}),i.jsx(Vr,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Regular Season"}),i.jsx("p",{className:"text-2xl font-bold",children:"12 weeks"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Playoffs"}),i.jsx("p",{className:"text-2xl font-bold",children:"5 weeks"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Playoff Teams"}),i.jsxs("p",{className:"text-2xl font-bold",children:[(null==f?void 0:f.playoff_teams)||10,"/36"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"First Round Byes"}),i.jsx("p",{className:"text-2xl font-bold",children:(null==f?void 0:f.week_14_byes)||6})]})]})})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsx(Ur,{children:"Important Dates"}),i.jsxs(Hr,{children:[l," season timeline"]})]}),i.jsxs(Vr,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsx("span",{className:"font-medium",children:"Regular Season"}),i.jsx("span",{className:"text-sm",children:"Weeks 1-12"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsx("span",{className:"font-medium",children:"Conference Championships"}),i.jsx("span",{className:"text-sm",children:"Week 13"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsx("span",{className:"font-medium",children:"Playoffs Begin"}),i.jsxs("span",{className:"text-sm",children:["Week ",(null==f?void 0:f.playoff_start_week)||14]})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsx("span",{className:"font-medium",children:"Coliseum Championship"}),i.jsxs("span",{className:"text-sm",children:["Week ",(null==f?void 0:f.championship_week)||17]})]})]})]})]}),i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{children:"Playoff Format"})}),i.jsx(Vr,{children:i.jsxs("div",{className:"prose prose-sm max-w-none",children:[i.jsxs("p",{className:"mb-4",children:["The playoffs consist of ",(null==f?void 0:f.playoff_teams)||10," teams total across all conferences, with the following structure:"]}),i.jsxs("ul",{className:"space-y-3",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Week 13: Conference Championships"})," - Top 2 teams from each conference compete to become Conference Champion"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Playoff Seeding:"}),i.jsxs("ul",{className:"ml-4 mt-2 space-y-1",children:[i.jsx("li",{children:"• Top 3 seeds go to Conference Champions"}),i.jsx("li",{children:"• Seeds 4-6 go to losing teams of Conference Championship"}),i.jsxs("li",{children:["• Seeds 7-",(null==f?void 0:f.playoff_teams)||10," go to next highest ranked teams, across all Conferences"]})]})]}),i.jsxs("li",{children:[i.jsxs("strong",{children:["Week ",(null==f?void 0:f.playoff_start_week)||14,": Wildcard Round"]})," - Top ",(null==f?void 0:f.week_14_byes)||6," teams get byes. Remaining teams are matched up based on seeding."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Week 15: Quarterfinals Round"})," - Teams are reseeded, includes winners of Wildcard round matchups and teams on bye"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Week 16: Semifinals Round"})," - Teams are reseeded, includes winners of Quarterfinals"]}),i.jsxs("li",{children:[i.jsxs("strong",{children:["Week ",(null==f?void 0:f.championship_week)||17,": Coliseum Championship"]})," - Winners of Semifinals compete to become the Coliseum Champion"]})]}),i.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:(null==f?void 0:f.reseed)?"Teams are reseeded after each round based on original seeding.":"Teams maintain their bracket position throughout the playoffs."})]})})]})]}),i.jsx(ai,{value:"payouts",className:"space-y-6",children:i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center space-x-2",children:[i.jsx(zs,{className:"h-5 w-5"}),i.jsx("span",{children:"Prize Structure"})]}),i.jsx(Hr,{children:"Annual dues: $100 per team • Total prize pool: $3,600"})]}),i.jsx(Vr,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold",children:"Coliseum Championship Payouts"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-yellow-50 dark:bg-yellow-900/20",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(St,{className:"h-5 w-5 text-yellow-600"}),i.jsx("span",{className:"font-medium",children:"Coliseum Champion"})]}),i.jsx("span",{className:"font-bold text-lg",children:"$1,200"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsx("span",{className:"font-medium",children:"Runner-up"}),i.jsx("span",{className:"font-bold",children:"$800"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold",children:"Regular Season Awards"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsx("span",{className:"font-medium",children:"Conference Champions"}),i.jsx("span",{className:"font-bold",children:"$500 each"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsx("span",{className:"font-medium",children:"Single Week High Score"}),i.jsx("span",{className:"font-bold",children:"$100"})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsx("p",{children:"Conference champions are determined by regular season record within each conference."}),i.jsx("p",{className:"mt-2",children:"Single week high score award goes to the team with the most points in a single week during the regular season."})]})]})]})]})})]})}),i.jsxs(ai,{value:"charter",className:"space-y-6",children:[y?i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin"}),i.jsx("span",{children:"Loading charter information..."})]})})}):w?i.jsxs(Kr,{variant:"destructive",children:[i.jsx(Js,{className:"h-4 w-4"}),i.jsx(Jr,{children:"Error Loading Charter"}),i.jsxs(Gr,{children:[w,". Please contact an administrator if this issue persists."]})]}):null,i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsx(Ur,{children:"League Charter"}),i.jsxs(Hr,{children:["Official constitution and bylaws of the Gladiator League - ",l," Season"]})]}),i.jsx(Vr,{children:N&&v?i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Kr,{children:[i.jsx(Js,{className:"h-4 w-4"}),i.jsx(Jr,{children:"Official League Document"}),i.jsx(Gr,{children:"This charter contains the complete rules, policies, and procedures for the Gladiator League. All league members are expected to be familiar with its contents."})]}),i.jsx(yl,{fileUrl:v.fileUrl,fileName:v.fileName,uploadedAt:v.uploadedAt})]}):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx(Us,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Charter Available"}),i.jsxs("p",{className:"text-muted-foreground mb-4",children:["The league charter document for the ",l," season has not been uploaded yet."]}),i.jsxs(Kr,{className:"max-w-md mx-auto",children:[i.jsx(Js,{className:"h-4 w-4"}),i.jsx(Gr,{children:"League administrators can upload the charter document through the admin panel."})]})]})})]}),i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{children:"League History"})}),i.jsx(Vr,{children:i.jsxs("div",{className:"prose prose-sm max-w-none",children:[i.jsx("p",{children:"The Gladiator League was founded in 2024 as a premier fantasy football competition consisting of three competitive conferences: Legions of Mars, Guardians of Jupiter, and Vulcan's Oathsworn."}),i.jsx("p",{className:"mt-4",children:"Each conference operates as an independent league while following unified rules and participating in inter-conference competition during special events."}),i.jsx("p",{className:"mt-4",children:"The league charter serves as the official constitution, outlining all rules, procedures, and policies that govern league operations and member conduct."})]})})]})]})]})]})},bl=()=>{const{toast:e}=_e(),[s,t]=te.useState(!1),[a,r]=te.useState([]),n={2024:["1072580179844857856","1072593839715667968","1072593416955015168"],2025:["1204854057169072128","1204857692007440384","1204857608989577216"]},l={2024:1,2025:2},c=async e=>{try{const s=await fetch(`https://api.sleeper.app/v1/league/${e}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const t=await s.json();return{name:t.name||"",league_id:t.league_id||e,season:t.season||"",draft_id:t.draft_id||"",status:t.status||"",avatar:t.avatar||""}}catch(s){return null}};return i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Conferences Data Loader"}),i.jsx("button",{onClick:async()=>{t(!0);const s=[];try{const t=[...n[2024],...n[2025]];for(const e of t){const t=await c(e);t&&s.push(t)}r(s);const i=s.map(e=>{const s=l[e.season]||0,t=e.avatar?`https://sleepercdn.com/avatars/thumbs/${e.avatar}`:"";return{conference_name:e.name,league_id:e.league_id,season_id:s,draft_id:e.draft_id,status:e.status,league_logo_url:t}});for(const s of i)try{const{error:e}=await window.ezsite.apis.tableCreate("12820",s);if(e)throw new Error(e)}catch(a){e({title:"Error",description:`Failed to insert conference: ${s.conference_name}`,variant:"destructive"})}e({title:"Success",description:`Successfully loaded ${i.length} conferences from Sleeper API`})}catch(i){e({title:"Error",description:"Failed to load conferences data from Sleeper API",variant:"destructive"})}finally{t(!1)}},disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-700 transition-colors",children:s?"Loading...":"Load Conferences Data"})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("p",{children:"This will fetch data from Sleeper API for the following league IDs:"}),i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"2024 Season:"})," ",n[2024].join(", ")]}),i.jsxs("div",{children:[i.jsx("strong",{children:"2025 Season:"})," ",n[2025].join(", ")]})]})]}),a.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Loaded Data Preview:"}),i.jsx("div",{className:"space-y-2",children:a.map((e,s)=>i.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50",children:[i.jsx("div",{className:"font-medium",children:e.name}),i.jsxs("div",{className:"text-sm text-gray-600",children:["League ID: ",e.league_id," | Season: ",e.season," | Status: ",e.status]})]},s))})]})]})},_l=()=>{const{toast:e}=_e(),[s,t]=te.useState([]),[a,r]=te.useState([]),[n,l]=te.useState(!0),[c,o]=te.useState(!1),d=async()=>{try{const{data:e,error:s}=await window.ezsite.apis.tablePage("12818",{PageNo:1,PageSize:10,OrderByField:"season_year",IsAsc:!0,Filters:[]});if(s)throw new Error(s);r(e.List||[])}catch(s){e({title:"Error",description:"Failed to load seasons data",variant:"destructive"})}},m=async()=>{try{const{data:e,error:s}=await window.ezsite.apis.tablePage("12820",{PageNo:1,PageSize:50,OrderByField:"conference_name",IsAsc:!0,Filters:[]});if(s)throw new Error(s);t(e.List||[])}catch(s){e({title:"Error",description:"Failed to load conferences data",variant:"destructive"})}};te.useEffect(()=>{(async()=>{l(!0),await Promise.all([d(),m()]),l(!1)})()},[]);const u=e=>{const s=a.find(s=>s.id===e);return s?s.season_name:`Season ${e}`},h=e=>{switch(e.toLowerCase()){case"in_season":return"bg-green-500";case"complete":return"bg-blue-500";case"drafting":return"bg-orange-500";case"pre_draft":return"bg-yellow-500";default:return"bg-gray-500"}};return n?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"text-lg",children:"Loading conferences..."})})}):i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(St,{className:"h-8 w-8 text-yellow-600"}),"Conferences"]}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Fantasy football conferences and leagues"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Sr,{variant:"outline",onClick:()=>o(!c),children:[c?"Hide":"Show"," Data Loader"]}),i.jsx(Sr,{onClick:()=>{m(),e({title:"Refreshed",description:"Conferences data has been refreshed"})},children:"Refresh Data"})]})]}),c&&i.jsx(qr,{children:i.jsx(Vr,{className:"p-0",children:i.jsx(bl,{})})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(qr,{children:i.jsx(Vr,{className:"p-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Tt,{className:"h-8 w-8 text-blue-600"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold",children:s.length}),i.jsx("div",{className:"text-sm text-gray-600",children:"Total Conferences"})]})]})})}),i.jsx(qr,{children:i.jsx(Vr,{className:"p-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ts,{className:"h-8 w-8 text-green-600"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold",children:s.filter(e=>"in_season"===e.status).length}),i.jsx("div",{className:"text-sm text-gray-600",children:"Active Seasons"})]})]})})}),i.jsx(qr,{children:i.jsx(Vr,{className:"p-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(St,{className:"h-8 w-8 text-yellow-600"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold",children:a.length}),i.jsx("div",{className:"text-sm text-gray-600",children:"Total Seasons"})]})]})})})]}),i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{children:"Conference Details"})}),i.jsx(Vr,{children:0===s.length?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("p",{className:"text-gray-500 mb-4",children:"No conferences found."}),i.jsx(Sr,{onClick:()=>o(!0),variant:"outline",children:"Load Conferences Data"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{children:"Logo"}),i.jsx(xn,{children:"Conference Name"}),i.jsx(xn,{children:"Season"}),i.jsx(xn,{children:"Status"}),i.jsx(xn,{children:"League ID"}),i.jsx(xn,{children:"Draft ID"}),i.jsx(xn,{children:"Actions"})]})}),i.jsx(un,{children:s.map(e=>{return i.jsxs(hn,{children:[i.jsx(pn,{children:e.league_logo_url?i.jsx("img",{src:e.league_logo_url,alt:`${e.conference_name} logo`,className:"w-10 h-10 rounded-full object-cover",onError:e=>{e.target.src="/placeholder.svg"}}):i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:i.jsx(St,{className:"h-5 w-5 text-gray-400"})})}),i.jsx(pn,{className:"font-medium",children:e.conference_name}),i.jsx(pn,{children:i.jsx(Or,{variant:"secondary",children:u(e.season_id)})}),i.jsx(pn,{children:i.jsx(Or,{className:`text-white ${h(e.status)}`,children:(s=e.status,s.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()))})}),i.jsx(pn,{className:"font-mono text-sm",children:e.league_id}),i.jsx(pn,{className:"font-mono text-sm",children:e.draft_id||"N/A"}),i.jsx(pn,{children:i.jsx(Sr,{variant:"ghost",size:"sm",onClick:()=>{window.open(`https://sleeper.app/leagues/${e.league_id}`,"_blank")},children:i.jsx(Bs,{className:"h-4 w-4"})})})]},e.id);var s})})]})})})]})]})};var Sl=te.forwardRef((e,s)=>i.jsx(c.label,{...e,ref:s,onMouseDown:s=>{var t;s.target.closest("button, input, select, textarea")||(null==(t=e.onMouseDown)||t.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));Sl.displayName="Label";var kl=Sl;const Cl=ps("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Tl=te.forwardRef(({className:e,...s},t)=>i.jsx(kl,{ref:t,className:ba(Cl(),e),...s}));Tl.displayName=kl.displayName;const El=D,Pl=F,Rl=C,Dl=te.forwardRef(({className:e,...s},t)=>i.jsx(k,{ref:t,className:ba("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));Dl.displayName=k.displayName;const Fl=te.forwardRef(({className:e,children:s,...t},a)=>i.jsxs(Rl,{children:[i.jsx(Dl,{}),i.jsxs(T,{ref:a,className:ba("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,i.jsxs(E,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Et,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Fl.displayName=T.displayName;const Ml=({className:e,...s})=>i.jsx("div",{className:ba("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});Ml.displayName="DialogHeader";const Il=te.forwardRef(({className:e,...s},t)=>i.jsx(P,{ref:t,className:ba("text-lg font-semibold leading-none tracking-tight",e),...s}));Il.displayName=P.displayName;const Al=te.forwardRef(({className:e,...s},t)=>i.jsx(R,{ref:t,className:ba("text-sm text-muted-foreground",e),...s}));Al.displayName=R.displayName;const $l=()=>{const[e,s]=te.useState([]),[t,a]=te.useState([]),[r,n]=te.useState(null),[l,c]=te.useState(null),[o,d]=te.useState(!1),[m,u]=te.useState(!1),[h,x]=te.useState(!0),[p,f]=te.useState(!1),[g,j]=te.useState(null),{toast:v}=_e(),[y,w]=te.useState(""),[N,b]=te.useState(""),[_,S]=te.useState(""),[k,C]=te.useState("");te.useEffect(()=>{T()},[]),te.useEffect(()=>{r&&E()},[r]);const T=async()=>{try{const e=await vr.getSeasons({orderBy:{column:"season_year",ascending:!1}});if(e.error)throw e.error;const t=e.data||[];s(t);const a=t.find(e=>e.is_current);a?n(a.id):t.length>0&&n(t[0].id)}catch(e){v({title:"Error",description:`Failed to load seasons: ${e}`,variant:"destructive"})}finally{x(!1)}},E=async()=>{if(r)try{const e=await vr.getConferences({filters:[{column:"season_id",operator:"eq",value:r}],orderBy:{column:"conference_name",ascending:!0}});if(e.error)throw e.error;a(e.data||[])}catch(e){v({title:"Error",description:`Failed to load conferences: ${e}`,variant:"destructive"})}},P=e.find(e=>e.id===r);return h?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin h-8 w-8 border-b-2 border-blue-600 rounded-full"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsx(Ur,{children:"Season Management"}),i.jsx(Hr,{children:"Select and manage fantasy football seasons"})]}),i.jsx(Vr,{children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(Tl,{htmlFor:"season-select",children:"Select Season"}),i.jsxs(Dr,{value:(null==r?void 0:r.toString())||"",onValueChange:e=>n(parseInt(e)),children:[i.jsx(Mr,{children:i.jsx(Fr,{placeholder:"Select a season"})}),i.jsx($r,{children:e.map(e=>i.jsx(Lr,{value:e.id.toString(),children:i.jsxs("div",{className:"flex items-center gap-2",children:[e.season_name,e.is_current&&i.jsx(Or,{variant:"secondary",className:"text-xs",children:"Current"})]})},e.id))})]})]}),i.jsxs(El,{open:o,onOpenChange:d,children:[i.jsx(Pl,{asChild:!0,children:i.jsx(Sr,{variant:"outline",size:"icon",children:i.jsx(lt,{className:"h-4 w-4"})})}),i.jsxs(Fl,{children:[i.jsxs(Ml,{children:[i.jsx(Il,{children:"Add New Season"}),i.jsx(Al,{children:"Create a new fantasy football season"})]}),i.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),y&&N)try{f(!0);const e=await vr.createSeason({season_year:y,season_name:N,is_current:!1});if(e.error)throw e.error;v({title:"Season Added",description:`${N} has been created successfully`}),w(""),b(""),d(!1),T()}catch(s){v({title:"Error",description:`Failed to add season: ${s}`,variant:"destructive"})}finally{f(!1)}},className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{htmlFor:"season-year",children:"Season Year"}),i.jsx(Hi,{id:"season-year",type:"number",value:y,onChange:e=>w(e.target.value),placeholder:"2025",min:"2020",max:"2030"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{htmlFor:"season-name",children:"Season Name"}),i.jsx(Hi,{id:"season-name",value:N,onChange:e=>b(e.target.value),placeholder:"2025 Season"})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Sr,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),i.jsx(Sr,{type:"submit",disabled:p,children:p?"Adding...":"Add Season"})]})]})]})]})]})})]}),P&&i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs(Ur,{children:["Conferences - ",P.season_name]}),i.jsxs(Hr,{children:["Manage league IDs and conference settings for ",P.season_name]})]}),i.jsxs(El,{open:m,onOpenChange:u,children:[i.jsx(Pl,{asChild:!0,children:i.jsxs(Sr,{children:[i.jsx(lt,{className:"h-4 w-4 mr-2"}),"Add New League"]})}),i.jsxs(Fl,{children:[i.jsxs(Ml,{children:[i.jsx(Il,{children:"Add New League"}),i.jsxs(Al,{children:["Add a new conference/league to ",P.season_name]})]}),i.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),_&&k&&r)try{f(!0);const e=await vr.createConference({conference_name:_,league_id:k,season_id:r,status:"draft"});if(e.error)throw e.error;v({title:"League Added",description:`${_} has been created successfully`}),S(""),C(""),u(!1),E()}catch(s){v({title:"Error",description:`Failed to add league: ${s}`,variant:"destructive"})}finally{f(!1)}},className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{htmlFor:"league-name",children:"League Name"}),i.jsx(Hi,{id:"league-name",value:_,onChange:e=>S(e.target.value),placeholder:"Conference Name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{htmlFor:"league-id",children:"Sleeper League ID"}),i.jsx(Hi,{id:"league-id",value:k,onChange:e=>C(e.target.value),placeholder:"123456789012345678"})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Sr,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancel"}),i.jsx(Sr,{type:"submit",disabled:p,children:p?"Adding...":"Add League"})]})]})]})]})]})}),i.jsx(Vr,{children:0===t.length?i.jsx(Kr,{children:i.jsxs(Gr,{children:["No conferences found for ",P.season_name,". Add a new league to get started."]})}):i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{children:"Conference Name"}),i.jsx(xn,{children:"League ID"}),i.jsx(xn,{children:"Draft ID"}),i.jsx(xn,{children:"Status"}),i.jsx(xn,{children:"Actions"})]})}),i.jsx(un,{children:t.map(e=>i.jsxs(hn,{children:[i.jsx(pn,{children:(null==l?void 0:l.id)===e.id?i.jsx(Hi,{value:l.conference_name,onChange:e=>c({...l,conference_name:e.target.value})}):i.jsx("span",{className:"font-medium",children:e.conference_name})}),i.jsx(pn,{children:(null==l?void 0:l.id)===e.id?i.jsx(Hi,{value:l.league_id,onChange:e=>c({...l,league_id:e.target.value})}):i.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:e.league_id})}),i.jsx(pn,{children:(null==l?void 0:l.id)===e.id?i.jsx(Hi,{value:l.draft_id||"",onChange:e=>c({...l,draft_id:e.target.value})}):i.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:e.draft_id||"Not set"})}),i.jsx(pn,{children:i.jsx(Or,{variant:"in_season"===e.status?"default":"complete"===e.status?"secondary":"outline",children:e.status})}),i.jsx(pn,{children:i.jsx("div",{className:"flex items-center gap-2",children:(null==l?void 0:l.id)===e.id?i.jsxs(i.Fragment,{children:[i.jsx(Sr,{size:"sm",onClick:()=>(async e=>{try{f(!0);const s=await vr.updateConference(e.id,{conference_name:e.conference_name,league_id:e.league_id,season_id:e.season_id,draft_id:e.draft_id||void 0,status:e.status,league_logo_url:e.league_logo_url||void 0});if(s.error)throw s.error;v({title:"Conference Updated",description:"Conference details have been saved successfully"}),c(null),E()}catch(s){v({title:"Error",description:`Failed to save conference: ${s}`,variant:"destructive"})}finally{f(!1)}})(l),disabled:p,children:i.jsx(dt,{className:"h-4 w-4"})}),i.jsx(Sr,{size:"sm",variant:"outline",onClick:()=>c(null),children:"Cancel"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Sr,{size:"sm",variant:"outline",onClick:()=>c(e),children:i.jsx(pt,{className:"h-4 w-4"})}),i.jsx(Sr,{size:"sm",variant:"outline",onClick:()=>(async e=>{if(e)try{j(e);const s=await fetch(`https://api.sleeper.app/v1/league/${e}`);if(!s.ok)throw new Error(`API returned ${s.status}`);{const e=await s.json();v({title:"Connection Successful",description:`League "${e.name}" found on Sleeper API`})}}catch(s){v({title:"Connection Failed",description:`Unable to connect to Sleeper API for league ID: ${e}`,variant:"destructive"})}finally{j(null)}})(e.league_id),disabled:g===e.league_id,children:g===e.league_id?i.jsx("div",{className:"animate-spin h-4 w-4 border-b-2 border-blue-600 rounded-full"}):i.jsx(yt,{className:"h-4 w-4"})})]})})})]},e.id))})]})})]})]})};var Ll="Checkbox",[zl,Ol]=a(Ll),[Bl,ql]=zl(Ll);function Wl(e){const{__scopeCheckbox:s,checked:t,children:a,defaultChecked:r,disabled:n,form:l,name:c,onCheckedChange:d,required:m,value:u="on",internal_do_not_use_render:h}=e,[x,p]=o({prop:t,defaultProp:r??!1,onChange:d,caller:Ll}),[f,g]=te.useState(null),[j,v]=te.useState(null),y=te.useRef(!1),w=!f||(!!l||!!f.closest("form")),N={checked:x,disabled:n,setChecked:p,control:f,setControl:g,name:c,form:l,value:u,hasConsumerStoppedPropagationRef:y,required:m,defaultChecked:!Ql(r)&&r,isFormControl:w,bubbleInput:j,setBubbleInput:v};return i.jsx(Bl,{scope:s,...N,children:Xl(h)?h(N):a})}var Ul="CheckboxTrigger",Hl=te.forwardRef(({__scopeCheckbox:e,onKeyDown:s,onClick:t,...a},r)=>{const{control:l,value:o,disabled:d,checked:u,required:h,setControl:x,setChecked:p,hasConsumerStoppedPropagationRef:f,isFormControl:g,bubbleInput:j}=ql(Ul,e),v=n(r,x),y=te.useRef(u);return te.useEffect(()=>{const e=null==l?void 0:l.form;if(e){const s=()=>p(y.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[l,p]),i.jsx(c.button,{type:"button",role:"checkbox","aria-checked":Ql(u)?"mixed":u,"aria-required":h,"data-state":Zl(u),"data-disabled":d?"":void 0,disabled:d,value:o,...a,ref:v,onKeyDown:m(s,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:m(t,e=>{p(e=>!!Ql(e)||!e),j&&g&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})})});Hl.displayName=Ul;var Vl=te.forwardRef((e,s)=>{const{__scopeCheckbox:t,name:a,checked:r,defaultChecked:n,required:l,disabled:c,value:o,onCheckedChange:d,form:m,...u}=e;return i.jsx(Wl,{__scopeCheckbox:t,checked:r,defaultChecked:n,disabled:c,required:l,onCheckedChange:d,name:a,form:m,value:o,internal_do_not_use_render:({isFormControl:e})=>i.jsxs(i.Fragment,{children:[i.jsx(Hl,{...u,ref:s,__scopeCheckbox:t}),e&&i.jsx(Gl,{__scopeCheckbox:t})]})})});Vl.displayName=Ll;var Yl="CheckboxIndicator",Kl=te.forwardRef((e,s)=>{const{__scopeCheckbox:t,forceMount:a,...r}=e,n=ql(Yl,t);return i.jsx(d,{present:a||Ql(n.checked)||!0===n.checked,children:i.jsx(c.span,{"data-state":Zl(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:s,style:{pointerEvents:"none",...e.style}})})});Kl.displayName=Yl;var Jl="CheckboxBubbleInput",Gl=te.forwardRef(({__scopeCheckbox:e,...s},t)=>{const{control:a,hasConsumerStoppedPropagationRef:r,checked:l,defaultChecked:o,required:d,disabled:m,name:u,value:h,form:x,bubbleInput:p,setBubbleInput:f}=ql(Jl,e),g=n(t,f),j=Z(l),v=ee(a);te.useEffect(()=>{const e=p;if(!e)return;const s=window.HTMLInputElement.prototype,t=Object.getOwnPropertyDescriptor(s,"checked").set,a=!r.current;if(j!==l&&t){const s=new Event("click",{bubbles:a});e.indeterminate=Ql(l),t.call(e,!Ql(l)&&l),e.dispatchEvent(s)}},[p,j,l,r]);const y=te.useRef(!Ql(l)&&l);return i.jsx(c.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:d,disabled:m,name:u,value:h,form:x,...s,tabIndex:-1,ref:g,style:{...s.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function Xl(e){return"function"==typeof e}function Ql(e){return"indeterminate"===e}function Zl(e){return Ql(e)?"indeterminate":e?"checked":"unchecked"}Gl.displayName=Jl;const ec=te.forwardRef(({className:e,...s},t)=>i.jsx(Vl,{ref:t,className:ba("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:i.jsx(Kl,{className:ba("flex items-center justify-center text-current"),children:i.jsx(Ps,{className:"h-4 w-4"})})}));ec.displayName=Vl.displayName;class sc{static async fetchLeagueDrafts(e){try{const s=await fetch(`${this.baseUrl}/league/${e}/drafts`);if(!s.ok)throw new Error(`Failed to fetch drafts: ${s.status} ${s.statusText}`);return await s.json()}catch(s){throw s}}static async fetchDraftPicks(e){try{const s=await fetch(`${this.baseUrl}/draft/${e}/picks`);if(!s.ok)throw new Error(`Failed to fetch draft picks: ${s.status} ${s.statusText}`);return await s.json()}catch(s){throw s}}static async getTeamIdFromOwnerMatcher(e,s){var t,a;try{const{data:r,error:n}=await window.ezsite.apis.tablePage(12853,{PageNo:1,PageSize:1,Filters:[{name:"roster_id",op:"Equal",value:e},{name:"conference_id",op:"Equal",value:s},{name:"is_active",op:"Equal",value:!0}]});if(!n&&(null==(t=null==r?void 0:r.List)?void 0:t.length)>0){return r.List[0].team_id}const{data:i,error:l}=await window.ezsite.apis.tablePage(12852,{PageNo:1,PageSize:1,Filters:[{name:"owner_id",op:"Equal",value:e}]});return l?null:(null==(a=null==i?void 0:i.List)?void 0:a.length)>0?i.List[0].id:null}catch(r){return null}}static async processDraftPicksForDatabase(e,s,t){var a,r;try{const n=[];for(const i of t){const t=await this.getTeamIdFromOwnerMatcher(i.picked_by,e);t&&n.push({season_id:s,conference_id:e,round:i.round,draft_slot:i.draft_slot,pick_number:i.pick_no,team_id:t,player_id:i.player_id,player_name:i.metadata?`${i.metadata.first_name||""} ${i.metadata.last_name||""}`.trim():"Unknown Player",position:(null==(a=i.metadata)?void 0:a.position)||"UNK",nfl_team:(null==(r=i.metadata)?void 0:r.team)||"UNK",draft_id:i.draft_id})}return n}catch(n){throw n}}static async fetchAndStoreDraftResults(){try{const{data:s,error:t}=await window.ezsite.apis.tablePage(12820,{PageNo:1,PageSize:50,OrderByField:"id",IsAsc:!0});if(t)throw new Error(`Failed to fetch conferences: ${t}`);const a=(null==s?void 0:s.List)||[],{data:r,error:n}=await window.ezsite.apis.tablePage(12818,{PageNo:1,PageSize:50,OrderByField:"season_year",IsAsc:!1});if(n)throw new Error(`Failed to fetch seasons: ${n}`);const i=(null==r?void 0:r.List)||[];let l=0;const c=[];for(const o of a)try{const e=i.find(e=>e.id===o.season_id);if(!e)continue;const s=await this.fetchLeagueDrafts(o.league_id);if(0===s.length)continue;for(const t of s){const s=await this.fetchDraftPicks(t.draft_id);if(0===s.length)continue;const a=await this.processDraftPicksForDatabase(o.id,e.id,s),{data:r,error:n}=await window.ezsite.apis.tablePage(27845,{PageNo:1,PageSize:1e3,Filters:[{name:"conference_id",op:"Equal",value:o.id},{name:"season_id",op:"Equal",value:e.id}]});if(!n&&(null==r?void 0:r.List))for(const e of r.List)await window.ezsite.apis.tableDelete(27845,{ID:e.id});for(const e of a){const{error:s}=await window.ezsite.apis.tableCreate(27845,{season_id:e.season_id,conference_id:e.conference_id,round:e.round,draft_slot:e.draft_slot,pick_number:e.pick_number,team_id:e.team_id,player_id:e.player_id});s||l++}c.push({conference:o.conference_name,season:e.season_year,draftId:t.draft_id,picksProcessed:a.length})}}catch(e){c.push({conference:o.conference_name,error:e.message})}return{success:!0,message:`Successfully processed ${l} draft picks across ${c.length} conference/season combinations`,data:c}}catch(e){return{success:!1,message:`Draft sync failed: ${e.message}`}}}}t(sc,"baseUrl","https://api.sleeper.app/v1");const tc=()=>{const[e,s]=te.useState([]),[t,a]=te.useState([]),[r,n]=te.useState([]),[l,c]=te.useState(null),[o,d]=te.useState(!1),[m,u]=te.useState(!1),[h,x]=te.useState(!1),[p,f]=te.useState(!1),[g,j]=te.useState(!1),[v,y]=te.useState(!1),[w,N]=te.useState(0),[b,_]=te.useState(0),[S,k]=te.useState(0),[C,T]=te.useState(0),[E,P]=te.useState(0),[R,D]=te.useState(0),[F,M]=te.useState([]),[I,A]=te.useState([]),[$,L]=te.useState(null),[z,O]=te.useState(null),[B,q]=te.useState(null),[W,U]=te.useState(null),[H,V]=te.useState(null),[Y,K]=te.useState(null),[J,G]=te.useState(null),[X,Q]=te.useState(null),[Z,ee]=te.useState(null),[se,ae]=te.useState(null),[re,ie]=te.useState(!0),[le,ce]=te.useState("all"),[oe,de]=te.useState("all"),[me,ue]=te.useState("all"),[he,xe]=te.useState("all"),[pe,fe]=te.useState(1),[ge,je]=te.useState(17),[ve,ye]=te.useState([]),{toast:we}=_e();te.useEffect(()=>{Ne(),Se(),ke(),Ce(),Te(),Ee(),Pe(),Re()},[]),te.useEffect(()=>{l&&be()},[l]);const Ne=async()=>{try{const e=await vr.getSeasons(),t=Array.isArray(e)?e:(null==e?void 0:e.data)||[];s(t);const a=t.find(e=>e.is_current_season);a?c(a.id):t.length>0&&c(t[0].id)}catch(e){we({title:"Error",description:`Failed to load seasons: ${e}`,variant:"destructive"})}finally{ie(!1)}},be=async()=>{if(l)try{const e=await vr.getConferences(),s=Array.isArray(e)?e:(null==e?void 0:e.data)||[];a(s)}catch(e){we({title:"Error",description:`Failed to load conferences: ${e}`,variant:"destructive"})}},Se=()=>{const e=localStorage.getItem("last_data_sync");e&&V(new Date(e).toLocaleString())},ke=()=>{const e=localStorage.getItem("last_teams_sync");e&&K(new Date(e).toLocaleString())},Ce=()=>{const e=localStorage.getItem("last_players_sync");e&&G(new Date(e).toLocaleString())},Te=()=>{const e=localStorage.getItem("last_matchups_sync");e&&Q(new Date(e).toLocaleString())},Ee=()=>{const e=localStorage.getItem("last_draft_sync");e&&ee(new Date(e).toLocaleString())},Pe=()=>{const e=localStorage.getItem("last_rosters_sync");e&&ae(new Date(e).toLocaleString())},Re=async()=>{try{const e=await vr.getTeams(),s=Array.isArray(e)?e:(null==e?void 0:e.data)||[];n(s)}catch(e){}},De=()=>{switch(he){case"range":const e=[];for(let s=pe;s<=ge;s++)e.push(s);return e;case"specific":return[...ve];default:return Array.from({length:17},(e,s)=>s+1)}};ne.useEffect(()=>{pe>ge&&je(pe)},[pe,ge]);const Fe=async(e,s)=>{var t;try{const{data:a,error:r}=await window.ezsite.apis.tablePage(12853,{PageNo:1,PageSize:1,Filters:[{name:"roster_id",op:"Equal",value:e},{name:"conference_id",op:"Equal",value:s},{name:"is_active",op:"Equal",value:!0}]});return r?null:(null==(t=null==a?void 0:a.List)?void 0:t.length)>0?a.List[0].team_id:null}catch(a){return null}},Me=e.find(e=>e.id===l);return re?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin h-8 w-8 border-b-2 border-blue-600 rounded-full"})}):i.jsx("div",{className:"space-y-6",children:i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center gap-2",children:[i.jsx(Ls,{className:"h-5 w-5"}),"Data Synchronization"]}),i.jsx(Hr,{children:"Sync conference, team, and player data from Sleeper API to update database records"})]}),i.jsxs(Vr,{children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsx("div",{className:"flex-1",children:i.jsxs(Dr,{value:(null==l?void 0:l.toString())||"",onValueChange:e=>c(parseInt(e)),children:[i.jsx(Mr,{className:"w-[200px]",children:i.jsx(Fr,{placeholder:"Select season"})}),i.jsx($r,{children:e.map(e=>i.jsx(Lr,{value:e.id.toString(),children:e.season_name},e.id))})]})})})}),Me&&i.jsxs(i.Fragment,{children:[0===t.length&&i.jsxs(Kr,{className:"mb-6",children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsxs(Gr,{children:["No conferences found for ",Me.season_name,". Conference and Team sync require leagues to be added first, but Player sync can be performed independently."]})]}),i.jsxs(ei,{defaultValue:t.length>0?"conferences":"players",className:"space-y-6",children:[i.jsxs(si,{className:"grid w-full grid-cols-6",children:[i.jsxs(ti,{value:"conferences",className:"flex items-center gap-2",children:[i.jsx(St,{className:"h-4 w-4"}),"Conference Sync"]}),i.jsxs(ti,{value:"teams",className:"flex items-center gap-2",children:[i.jsx(Tt,{className:"h-4 w-4"}),"Teams Sync"]}),i.jsxs(ti,{value:"matchups",className:"flex items-center gap-2",children:[i.jsx(ct,{className:"h-4 w-4"}),"Matchups Sync"]}),i.jsxs(ti,{value:"draft",className:"flex items-center gap-2",children:[i.jsx(vt,{className:"h-4 w-4"}),"Draft Sync"]}),i.jsxs(ti,{value:"rosters",className:"flex items-center gap-2",children:[i.jsx(ut,{className:"h-4 w-4"}),"Team Rosters"]}),i.jsxs(ti,{value:"players",className:"flex items-center gap-2",children:[i.jsx(kt,{className:"h-4 w-4"}),"Players Sync"]})]}),i.jsx(ai,{value:"rosters",children:0===t.length?i.jsxs(Kr,{children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsx(Gr,{children:"No conferences available for team rosters synchronization. Please add leagues in the League Manager tab first."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-4",children:se&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(As,{className:"h-4 w-4"}),"Last rosters sync: ",se]})}),i.jsx(Sr,{onClick:async()=>{var e,s;if(!l||0===t.length)return void we({title:"No Data to Sync",description:"Please select a season with conferences to sync rosters",variant:"destructive"});const a=De();if(0!==a.length){y(!0),D(0),U(null);try{D(5);let n=0,i=0,c=0,o=0,d=0;const m=t.length*a.length;let u=0;for(const x of t)try{for(const t of a){try{const a=await fetch(`https://api.sleeper.app/v1/league/${x.league_id}/matchups/${t}`);if(!a.ok){if(404===a.status)continue;throw new Error(`API returned ${a.status}: ${a.statusText}`)}const o=await a.json();if(!Array.isArray(o)||0===o.length)continue;for(const d of o){if(!d.roster_id||!d.players||!Array.isArray(d.players))continue;const a=await Fe(d.roster_id,x.id);if(a)for(const o of d.players)if(o)try{const{data:r,error:d}=await window.ezsite.apis.tablePage(12870,{PageNo:1,PageSize:1,Filters:[{name:"sleeper_player_id",op:"Equal",value:o}]});if(d)continue;if((null==(e=null==r?void 0:r.List)?void 0:e.length)>0){const e=r.List[0].id,{data:o,error:d}=await window.ezsite.apis.tablePage(27886,{PageNo:1,PageSize:1,Filters:[{name:"team_id",op:"Equal",value:a},{name:"player_id",op:"Equal",value:e},{name:"season_id",op:"Equal",value:l},{name:"week",op:"Equal",value:t}]});if(d)continue;const m={team_id:a,player_id:e,season_id:l,week:t};if((null==(s=null==o?void 0:o.List)?void 0:s.length)>0){const e=o.List[0],{error:s}=(e.id,await ac("tableUpdate"));s||(c++,n++)}else{const{error:e}=await rc("tableCreate");e||(i++,n++)}}}catch(r){}}d++,await new Promise(e=>setTimeout(e,100))}catch(r){}u++;D(5+u/m*90)}o++,await new Promise(e=>setTimeout(e,200))}catch(r){}U({success:!0,players_processed:n,rosters_created:i,rosters_updated:c,leagues_processed:o,weeks_processed:d});const h=(new Date).toISOString();localStorage.setItem("last_rosters_sync",h),ae(new Date(h).toLocaleString()),we({title:"Team Rosters Sync Complete",description:`${i} rosters created, ${c} updated across ${o} leagues`,variant:"default"})}catch(r){U({success:!1,error:r.toString(),players_processed:0,rosters_created:0,rosters_updated:0,leagues_processed:0,weeks_processed:0}),we({title:"Team Rosters Sync Failed",description:`Failed to sync rosters: ${r}`,variant:"destructive"})}finally{y(!1),D(100)}}else we({title:"No Weeks Selected",description:"Please select at least one week to sync",variant:"destructive"})},disabled:v||!l||0===t.length,children:v?i.jsxs(i.Fragment,{children:[i.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ut,{className:"h-4 w-4 mr-2"}),"Sync Team Rosters"]})})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center gap-2",children:[i.jsx(Hs,{className:"h-5 w-5"}),"Week Filtering Options"]}),i.jsx(Hr,{children:"Choose which weeks to sync for team rosters data"})]}),i.jsxs(Vr,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(Dr,{value:he,onValueChange:xe,children:[i.jsx(Mr,{className:"w-[200px]",children:i.jsx(Fr,{placeholder:"Select sync mode"})}),i.jsxs($r,{children:[i.jsx(Lr,{value:"all",children:"All Weeks (1-17)"}),i.jsx(Lr,{value:"range",children:"Week Range"}),i.jsx(Lr,{value:"specific",children:"Specific Weeks"})]})]}),"range"===he&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm",children:"From week:"}),i.jsxs(Dr,{value:pe.toString(),onValueChange:e=>fe(parseInt(e)),children:[i.jsx(Mr,{className:"w-20",children:i.jsx(Fr,{})}),i.jsx($r,{children:Array.from({length:17},(e,s)=>s+1).map(e=>i.jsx(Lr,{value:e.toString(),children:e},e))})]}),i.jsx("span",{className:"text-sm",children:"to week:"}),i.jsxs(Dr,{value:ge.toString(),onValueChange:e=>je(parseInt(e)),children:[i.jsx(Mr,{className:"w-20",children:i.jsx(Fr,{})}),i.jsx($r,{children:Array.from({length:17},(e,s)=>s+1).filter(e=>e>=pe).map(e=>i.jsx(Lr,{value:e.toString(),children:e},e))})]})]})]}),"specific"===he&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Sr,{variant:"outline",size:"sm",onClick:()=>{ye(Array.from({length:17},(e,s)=>s+1))},className:"text-xs",children:"Select All"}),i.jsx(Sr,{variant:"outline",size:"sm",onClick:()=>{ye([])},className:"text-xs",children:"Clear All"}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[ve.length," weeks selected"]})]}),i.jsx("div",{className:"grid grid-cols-9 gap-2",children:Array.from({length:17},(e,s)=>s+1).map(e=>i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(ec,{id:`week-${e}`,checked:ve.includes(e),onCheckedChange:()=>(e=>{ye(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e].sort((e,s)=>e-s))})(e)}),i.jsx("label",{htmlFor:`week-${e}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e})]},e))})]}),i.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Ts,{className:"h-4 w-4 text-blue-600"}),i.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Sync Summary"})]}),i.jsx("div",{className:"text-sm text-blue-700",children:(()=>{const e=De();return`Will sync ${e.length} week${1!==e.length?"s":""} (${e.join(", ")}) across ${t.length} conference${1!==t.length?"s":""} = ${e.length*t.length} total operations`})()})]})]})]}),v&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium",children:"Synchronizing team rosters..."}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(R),"%"]})]}),i.jsx(ml,{value:R,className:"w-full"})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"text-lg",children:["Team Rosters Synchronization - ",Me.season_name]}),i.jsxs(Hr,{children:["Sync weekly team roster data from Sleeper API using matchups endpoint for ",t.length," conference",1!==t.length?"s":""," across selected weeks"]})]}),i.jsxs(Vr,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(ut,{className:"h-5 w-5 text-blue-600"}),i.jsx("h4",{className:"font-semibold",children:"Roster Data"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Fetches weekly roster information including:"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• Player assignments to teams by week"}),i.jsx("li",{children:"• Active roster compositions"}),i.jsx("li",{children:"• Team-player relationships over time"}),i.jsx("li",{children:"• Historical roster tracking"})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ls,{className:"h-5 w-5 text-green-600"}),i.jsx("h4",{className:"font-semibold",children:"Data Mapping"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Uses existing data for accurate mapping:"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• Maps roster_id to team_id via junction table"}),i.jsx("li",{children:"• Maps sleeper_player_id to player_id"}),i.jsx("li",{children:"• Creates weekly roster assignments"}),i.jsxs("li",{children:["• Processes ",17*t.length," total operations"]})]})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("h4",{className:"font-semibold mb-2",children:"Sync Process Overview:"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:[i.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Step 1: API Calls"}),i.jsx("div",{className:"text-xs text-blue-600",children:"Fetch matchups for each league & week"})]}),i.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded",children:[i.jsx("div",{className:"text-sm font-medium text-yellow-800",children:"Step 2: Data Mapping"}),i.jsx("div",{className:"text-xs text-yellow-600",children:"Map roster_id & player_id to database"})]}),i.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded",children:[i.jsx("div",{className:"text-sm font-medium text-green-800",children:"Step 3: Store Rosters"}),i.jsx("div",{className:"text-xs text-green-600",children:"Save weekly roster assignments"})]})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("h4",{className:"font-semibold mb-2",children:"Conferences to Process:"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:t.map(e=>i.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[i.jsx(Or,{variant:"outline",className:"text-xs",children:e.league_id}),i.jsx("span",{className:"text-sm truncate",children:e.conference_name})]},e.id))}),i.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Total operations: ",t.length," leagues × ",De().length," weeks = ",t.length*De().length," API calls"]})]}),i.jsxs(Kr,{className:"mt-4",children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsxs(Gr,{children:[i.jsx("strong",{children:"Note:"})," This sync processes team rosters for the selected weeks across all conferences using the matchups endpoint. The \"players\" array from each matchup entry contains all players on that team's roster for that specific week. Weeks that don't exist yet (future weeks) will be skipped automatically."]})]})]})]}),W&&i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsx(Ur,{className:"text-lg",children:"Team Rosters Sync Results"}),i.jsx(Hr,{children:"Results from the last team rosters synchronization"})]}),i.jsx(Vr,{children:i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[W.success?i.jsx(Ms,{className:"h-5 w-5 text-green-600"}):i.jsx(Fs,{className:"h-5 w-5 text-red-600"}),i.jsx("span",{className:"font-medium",children:"Team Rosters Synchronization"})]}),i.jsx("div",{className:"text-sm",children:W.success?i.jsx("span",{className:"text-green-600",children:"Success"}):i.jsx("span",{className:"text-red-600",children:"Failed"})})]}),W.success&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Created:"}),i.jsx("div",{className:"text-lg font-semibold text-green-600",children:W.rosters_created})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Updated:"}),i.jsx("div",{className:"text-lg font-semibold text-blue-600",children:W.rosters_updated})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Players:"}),i.jsx("div",{className:"text-lg font-semibold text-purple-600",children:W.players_processed})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Leagues:"}),i.jsx("div",{className:"text-lg font-semibold text-orange-600",children:W.leagues_processed})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Weeks:"}),i.jsx("div",{className:"text-lg font-semibold text-teal-600",children:W.weeks_processed})]})]}),W.error&&i.jsx("div",{className:"text-sm text-red-600 mt-1",children:W.error})]})})]})]})}),i.jsx(ai,{value:"conferences",children:0===t.length?i.jsxs(Kr,{children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsx(Gr,{children:"No conferences available. Please add leagues in the League Manager tab first."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-4",children:H&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(As,{className:"h-4 w-4"}),"Last sync: ",H]})}),i.jsx(Sr,{onClick:async()=>{if(!l||0===t.length)return void we({title:"No Data to Sync",description:"Please select a season with conferences to sync",variant:"destructive"});d(!0),N(0),M([]);const e=[],s=t.length;for(let l=0;l<t.length;l++){const a=t[l];N((l+1)/s*100);try{const s=await fetch(`https://api.sleeper.app/v1/league/${a.league_id}`);if(!s.ok)throw new Error(`API returned ${s.status}: ${s.statusText}`);const t=await s.json(),{error:r}=(a.id,t.name||a.conference_name,t.league_id||a.league_id,a.season_id,t.draft_id||a.draft_id,t.status||a.status,t.avatar?t.avatar:a.league_logo_url,await ac("tableUpdate"));if(r)throw r;e.push({league_id:a.league_id,success:!0,data:t})}catch(i){e.push({league_id:a.league_id,success:!1,error:i.toString()})}await new Promise(e=>setTimeout(e,200))}M(e),d(!1),N(100);const a=(new Date).toISOString();localStorage.setItem("last_data_sync",a),V(new Date(a).toLocaleString()),be();const r=e.filter(e=>e.success).length,n=e.filter(e=>!e.success).length;we({title:"Data Sync Complete",description:`${r} successful, ${n} failed`,variant:n>0?"destructive":"default"})},disabled:o||!l||0===t.length,children:o?i.jsxs(i.Fragment,{children:[i.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):i.jsxs(i.Fragment,{children:[i.jsx(St,{className:"h-4 w-4 mr-2"}),"Sync Conference Data"]})})]}),o&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium",children:"Synchronizing conferences..."}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(w),"%"]})]}),i.jsx(ml,{value:w,className:"w-full"})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"text-lg",children:["Conference Synchronization - ",null==Me?void 0:Me.season_name]}),i.jsx(Hr,{children:"Sync conference data from Sleeper API to update league information"})]}),i.jsx(Vr,{children:i.jsxs("div",{className:"mb-4",children:[i.jsx("h4",{className:"font-semibold mb-2",children:"Conferences to Process:"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:t.map(e=>i.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[i.jsx(Or,{variant:"outline",className:"text-xs",children:e.league_id}),i.jsx("span",{className:"text-sm truncate",children:e.conference_name})]},e.id))})]})})]}),F.length>0&&i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{className:"text-lg",children:"Sync Results"})}),i.jsx(Vr,{children:i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{children:"League ID"}),i.jsx(xn,{children:"Status"}),i.jsx(xn,{children:"Details"})]})}),i.jsx(un,{children:F.map((e,s)=>i.jsxs(hn,{children:[i.jsx(pn,{className:"font-medium",children:e.league_id}),i.jsx(pn,{children:e.success?i.jsx(Or,{variant:"default",children:"Success"}):i.jsx(Or,{variant:"destructive",children:"Failed"})}),i.jsx(pn,{children:e.success?i.jsx("span",{className:"text-green-600",children:"Updated successfully"}):i.jsx("span",{className:"text-red-600",children:e.error})})]},s))})]})})]})]})}),i.jsx(ai,{value:"teams",children:0===t.length?i.jsxs(Kr,{children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsx(Gr,{children:"No conferences available for team synchronization. Please add leagues in the League Manager tab first."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-4",children:Y&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(As,{className:"h-4 w-4"}),"Last teams sync: ",Y]})}),i.jsx(Sr,{onClick:async()=>{var e,s,a,r;if(l&&0!==t.length){u(!0),_(0),A([]);try{_(5);const i=[],l=t.length;let c=0,o=0;for(let h=0;h<t.length;h++){const d=t[h];_(5+h/l*90);try{const[t,n,l]=await Promise.all([fetch(`https://api.sleeper.app/v1/league/${d.league_id}`),fetch(`https://api.sleeper.app/v1/league/${d.league_id}/rosters`),fetch(`https://api.sleeper.app/v1/league/${d.league_id}/users`)]);if(!t.ok||!n.ok||!l.ok)throw new Error(`API request failed for league ${d.league_id}`);const[m,u,h]=await Promise.all([t.json(),n.json(),l.json()]);for(const i of u){const t=h.find(e=>e.user_id===i.owner_id);if(!t)continue;const n={team_name:(null==(e=t.metadata)?void 0:e.team_name)||t.display_name||t.username,owner_name:t.display_name||t.username,owner_id:t.user_id,co_owner_name:"",co_owner_id:"",team_logo_url:t.avatar?`https://sleepercdn.com/avatars/thumbs/${t.avatar}`:"",team_primary_color:"#1f2937",team_secondary_color:"#6b7280"},{data:l,error:m}=await window.ezsite.apis.tablePage(12852,{PageNo:1,PageSize:1,Filters:[{name:"owner_id",op:"Equal",value:t.user_id}]});if(m)continue;let u;if((null==(s=null==l?void 0:l.List)?void 0:s.length)>0){const e=l.List[0],{error:s}=(e.id,await ac("tableUpdate"));if(s)continue;u=e.id}else{const{error:e}=await rc("tableCreate");if(e)continue;const{data:s,error:r}=await window.ezsite.apis.tablePage(12852,{PageNo:1,PageSize:1,Filters:[{name:"owner_id",op:"Equal",value:t.user_id}]});if(r||!(null==(a=null==s?void 0:s.List)?void 0:a.length))continue;u=s.List[0].id,c++}const x={team_id:u,conference_id:d.id,roster_id:i.roster_id.toString(),is_active:!0,joined_date:(new Date).toISOString()},{data:p,error:f}=await window.ezsite.apis.tablePage(12853,{PageNo:1,PageSize:1,Filters:[{name:"team_id",op:"Equal",value:u},{name:"conference_id",op:"Equal",value:d.id}]});if(!f)if((null==(r=null==p?void 0:p.List)?void 0:r.length)>0){const e=p.List[0],{error:s}=(e.id,await ac("tableUpdate"))}else{const{error:e}=await rc("tableCreate");e||o++}}i.push({league_id:d.league_id,success:!0,teams_created:c,junction_records_created:o})}catch(n){i.push({league_id:d.league_id,success:!1,error:n.toString(),teams_created:0,junction_records_created:0})}await new Promise(e=>setTimeout(e,200))}A(i),_(100);const d=(new Date).toISOString();localStorage.setItem("last_teams_sync",d),K(new Date(d).toLocaleString()),Re();const m=i.filter(e=>e.success).length,u=i.filter(e=>!e.success).length;we({title:"Teams Sync Complete",description:`${m} successful, ${u} failed`,variant:u>0?"destructive":"default"})}catch(n){we({title:"Teams Sync Failed",description:`Failed to sync teams: ${n}`,variant:"destructive"})}finally{u(!1)}}else we({title:"No Data to Sync",description:"Please select a season with conferences to sync teams",variant:"destructive"})},disabled:m||!l||0===t.length,children:m?i.jsxs(i.Fragment,{children:[i.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Tt,{className:"h-4 w-4 mr-2"}),"Sync Teams"]})})]}),m&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium",children:"Synchronizing teams..."}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(b),"%"]})]}),i.jsx(ml,{value:b,className:"w-full"})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"text-lg",children:["Teams Synchronization - ",null==Me?void 0:Me.season_name]}),i.jsx(Hr,{children:"Sync team data from Sleeper API including owners, team names, and roster mappings"})]}),i.jsx(Vr,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Tt,{className:"h-5 w-5 text-blue-600"}),i.jsx("h4",{className:"font-semibold",children:"Team Data"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Creates teams and junction records:"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• Team names and owner information"}),i.jsx("li",{children:"• Avatar/logo URLs"}),i.jsx("li",{children:"• Roster ID mappings"}),i.jsx("li",{children:"• Conference relationships"})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ls,{className:"h-5 w-5 text-green-600"}),i.jsx("h4",{className:"font-semibold",children:"Data Structure"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Updates database tables:"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• Teams table (team info)"}),i.jsx("li",{children:"• Junction table (team-conference mapping)"}),i.jsx("li",{children:"• Roster ID associations"}),i.jsx("li",{children:"• Active status tracking"})]})]})]})})]}),I.length>0&&i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{className:"text-lg",children:"Teams Sync Results"})}),i.jsx(Vr,{children:i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{children:"League ID"}),i.jsx(xn,{children:"Status"}),i.jsx(xn,{children:"Teams Created"}),i.jsx(xn,{children:"Junction Records"}),i.jsx(xn,{children:"Details"})]})}),i.jsx(un,{children:I.map((e,s)=>i.jsxs(hn,{children:[i.jsx(pn,{className:"font-medium",children:e.league_id}),i.jsx(pn,{children:e.success?i.jsx(Or,{variant:"default",children:"Success"}):i.jsx(Or,{variant:"destructive",children:"Failed"})}),i.jsx(pn,{children:e.success?e.teams_created:0}),i.jsx(pn,{children:e.success?e.junction_records_created:0}),i.jsx(pn,{children:e.success?i.jsx("span",{className:"text-green-600",children:"Updated successfully"}):i.jsx("span",{className:"text-red-600",children:e.error})})]},s))})]})})]})]})}),i.jsx(ai,{value:"matchups",children:0===t.length?i.jsxs(Kr,{children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsx(Gr,{children:"No conferences available for matchup synchronization. Please add leagues in the League Manager tab first."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-4",children:X&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(As,{className:"h-4 w-4"}),"Last matchups sync: ",X]})}),i.jsx(Sr,{onClick:async()=>{var e;if(l&&0!==t.length){f(!0),T(0),O(null);try{T(5);let a=0,r=0,n=0,i=0;const l=17*t.length;let c=0;for(const d of t)try{for(let t=1;t<=17;t++){try{const s=await fetch(`https://api.sleeper.app/v1/league/${d.league_id}/matchups/${t}`);if(!s.ok){if(404===s.status)continue;throw new Error(`API returned ${s.status}: ${s.statusText}`)}const n=await s.json();if(!Array.isArray(n)||0===n.length)continue;const l=new Map;n.forEach(e=>{l.has(e.matchup_id)||l.set(e.matchup_id,[]),l.get(e.matchup_id).push(e)});for(const[i,c]of l.entries()){if(2!==c.length)continue;const[s,n]=c,l=await Fe(s.roster_id.toString(),d.id),o=await Fe(n.roster_id.toString(),d.id);if(!l||!o)continue;let m=0;s.points>n.points?m=l:n.points>s.points&&(m=o);const u={conference_id:d.id,week:t,team_1_id:l,team_2_id:o,is_playoff:t>14,sleeper_matchup_id:i.toString(),team_1_score:s.points||0,team_2_score:n.points||0,winner_id:m,is_manual_override:!1,status:s.points>0||n.points>0?"complete":"pending",matchup_date:(new Date).toISOString(),notes:""},{data:h,error:x}=await window.ezsite.apis.tablePage(13329,{PageNo:1,PageSize:1,Filters:[{name:"conference_id",op:"Equal",value:d.id},{name:"week",op:"Equal",value:t},{name:"sleeper_matchup_id",op:"Equal",value:i.toString()}]});if(!x)if((null==(e=null==h?void 0:h.List)?void 0:e.length)>0){const e=h.List[0],{error:s}=(e.id,await ac("tableUpdate"));s||r++}else{const{error:e}=await rc("tableCreate");e||a++}}i++,await new Promise(e=>setTimeout(e,100))}catch(s){}c++;T(5+c/l*90)}n++,await new Promise(e=>setTimeout(e,200))}catch(s){}O({success:!0,matchups_created:a,matchups_updated:r,leagues_processed:n,weeks_processed:i});const o=(new Date).toISOString();localStorage.setItem("last_matchups_sync",o),Q(new Date(o).toLocaleString()),we({title:"Matchups Sync Complete",description:`${a} matchups created, ${r} updated across ${n} leagues`,variant:"default"})}catch(s){O({success:!1,error:s.toString(),matchups_created:0,matchups_updated:0,leagues_processed:0,weeks_processed:0}),we({title:"Matchups Sync Failed",description:`Failed to sync matchups: ${s}`,variant:"destructive"})}finally{f(!1),T(100)}}else we({title:"No Data to Sync",description:"Please select a season with conferences to sync matchups",variant:"destructive"})},disabled:p||!l||0===t.length,children:p?i.jsxs(i.Fragment,{children:[i.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ct,{className:"h-4 w-4 mr-2"}),"Sync Matchups"]})})]}),p&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium",children:"Synchronizing matchups..."}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(C),"%"]})]}),i.jsx(ml,{value:C,className:"w-full"})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"text-lg",children:["Matchups Synchronization - ",null==Me?void 0:Me.season_name]}),i.jsx(Hr,{children:"Sync matchup data from Sleeper API for all weeks across all conferences"})]}),i.jsx(Vr,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(ct,{className:"h-5 w-5 text-blue-600"}),i.jsx("h4",{className:"font-semibold",children:"Matchup Data"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Processes matchup information:"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• Team matchups for all weeks"}),i.jsx("li",{children:"• Scores and results"}),i.jsx("li",{children:"• Winner determination"}),i.jsx("li",{children:"• Playoff vs regular season"})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ts,{className:"h-5 w-5 text-green-600"}),i.jsx("h4",{className:"font-semibold",children:"Season Coverage"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Covers the entire season:"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• Weeks 1-17 for each conference"}),i.jsx("li",{children:"• Regular season and playoffs"}),i.jsxs("li",{children:["• ",17*t.length," total operations"]}),i.jsx("li",{children:"• Automatic status detection"})]})]})]})})]}),z&&i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{className:"text-lg",children:"Matchups Sync Results"})}),i.jsx(Vr,{children:i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[z.success?i.jsx(Ms,{className:"h-5 w-5 text-green-600"}):i.jsx(Fs,{className:"h-5 w-5 text-red-600"}),i.jsx("span",{className:"font-medium",children:"Matchups Synchronization"})]}),i.jsx("div",{className:"text-sm",children:z.success?i.jsx("span",{className:"text-green-600",children:"Success"}):i.jsx("span",{className:"text-red-600",children:"Failed"})})]}),z.success&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Created:"}),i.jsx("div",{className:"text-lg font-semibold text-green-600",children:z.matchups_created})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Updated:"}),i.jsx("div",{className:"text-lg font-semibold text-blue-600",children:z.matchups_updated})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Leagues:"}),i.jsx("div",{className:"text-lg font-semibold text-orange-600",children:z.leagues_processed})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Weeks:"}),i.jsx("div",{className:"text-lg font-semibold text-purple-600",children:z.weeks_processed})]})]}),z.error&&i.jsx("div",{className:"text-sm text-red-600 mt-1",children:z.error})]})})]})]})}),i.jsx(ai,{value:"draft",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-4",children:Z&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(As,{className:"h-4 w-4"}),"Last draft sync: ",Z]})}),i.jsx(Sr,{onClick:async()=>{j(!0),P(0),q(null);try{P(5);const e=await sc.fetchAndStoreDraftResults();if(P(100),e.success){q({success:!0,message:e.message,data:e.data});const s=(new Date).toISOString();localStorage.setItem("last_draft_sync",s),ee(new Date(s).toLocaleString()),we({title:"Draft Sync Complete",description:e.message,variant:"default"})}else q({success:!1,error:e.message,message:e.message}),we({title:"Draft Sync Failed",description:e.message,variant:"destructive"})}catch(e){q({success:!1,error:e.toString(),message:`Draft sync failed: ${e}`}),we({title:"Draft Sync Failed",description:`Failed to sync draft: ${e}`,variant:"destructive"})}finally{j(!1)}},disabled:g,children:g?i.jsxs(i.Fragment,{children:[i.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):i.jsxs(i.Fragment,{children:[i.jsx(vt,{className:"h-4 w-4 mr-2"}),"Sync Draft Results"]})})]}),g&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium",children:"Synchronizing draft results..."}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(E),"%"]})]}),i.jsx(ml,{value:E,className:"w-full"})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsx(Ur,{className:"text-lg",children:"Draft Results Synchronization"}),i.jsx(Hr,{children:"Sync draft results from Sleeper API for all conferences and seasons"})]}),i.jsxs(Vr,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(vt,{className:"h-5 w-5 text-blue-600"}),i.jsx("h4",{className:"font-semibold",children:"Draft Data"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Processes draft information:"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• Draft picks by round and position"}),i.jsx("li",{children:"• Player information and positions"}),i.jsx("li",{children:"• Team assignments"}),i.jsx("li",{children:"• Historical draft tracking"})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ls,{className:"h-5 w-5 text-green-600"}),i.jsx("h4",{className:"font-semibold",children:"Data Processing"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Updates draft results table:"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• Maps roster IDs to team IDs"}),i.jsx("li",{children:"• Processes all conferences"}),i.jsx("li",{children:"• Handles multiple seasons"}),i.jsx("li",{children:"• Clears and refreshes data"})]})]})]}),i.jsxs(Kr,{children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsxs(Gr,{children:[i.jsx("strong",{children:"Note:"})," This sync processes draft results for all conferences and seasons. It will clear existing draft data and repopulate it with the latest information from Sleeper API."]})]})]})]}),B&&i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{className:"text-lg",children:"Draft Sync Results"})}),i.jsx(Vr,{children:i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[B.success?i.jsx(Ms,{className:"h-5 w-5 text-green-600"}):i.jsx(Fs,{className:"h-5 w-5 text-red-600"}),i.jsx("span",{className:"font-medium",children:"Draft Synchronization"})]}),i.jsx("div",{className:"text-sm",children:B.success?i.jsx("span",{className:"text-green-600",children:"Success"}):i.jsx("span",{className:"text-red-600",children:"Failed"})})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:B.message}),B.error&&i.jsx("div",{className:"text-sm text-red-600 mt-1",children:B.error})]})})]})]})}),i.jsx(ai,{value:"players",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-4",children:J&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(As,{className:"h-4 w-4"}),"Last players sync: ",J]})}),i.jsx(Sr,{onClick:async()=>{var e;x(!0),k(0),L(null);try{k(5);const t=await fetch("https://api.sleeper.app/v1/players/nfl");if(!t.ok)throw new Error(`API returned ${t.status}: ${t.statusText}`);const a=await t.json(),r=Object.keys(a);k(20);let n=0,i=0;const l=r.length;for(let o=0;o<r.length;o++){const t=r[o],c=a[t];if(!c)continue;k(20+o/l*75);try{const{data:s,error:a}=await window.ezsite.apis.tablePage(12870,{PageNo:1,PageSize:1,Filters:[{name:"sleeper_player_id",op:"Equal",value:t}]});if(a)continue;const r={sleeper_player_id:t,player_name:`${c.first_name||""} ${c.last_name||""}`.trim()||"Unknown Player",position:c.position||"UNK",team_id:0,nfl_team:c.team||"FA",jersey_number:c.jersey_number||0,status:c.status||"Active",injury_status:c.injury_status||"Healthy",age:c.age||0,height:c.height||"",weight:c.weight||0,years_experience:c.years_exp||0,depth_chart_position:c.depth_chart_position||1,college:c.college||"",is_current_data:!0,last_updated:(new Date).toISOString(),data_version:1};if((null==(e=null==s?void 0:s.List)?void 0:e.length)>0){const e=s.List[0],{error:t}=(e.id,await ac("tableUpdate"));t||i++}else{const{error:e}=await rc("tableCreate");e||n++}}catch(s){}o%100==0&&await new Promise(e=>setTimeout(e,50))}L({success:!0,players_created:n,players_updated:i});const c=(new Date).toISOString();localStorage.setItem("last_players_sync",c),G(new Date(c).toLocaleString()),we({title:"Players Sync Complete",description:`${n} players created, ${i} updated`,variant:"default"})}catch(s){L({success:!1,error:s.toString(),players_created:0,players_updated:0}),we({title:"Players Sync Failed",description:`Failed to sync players: ${s}`,variant:"destructive"})}finally{x(!1),k(100)}},disabled:h,children:h?i.jsxs(i.Fragment,{children:[i.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):i.jsxs(i.Fragment,{children:[i.jsx(kt,{className:"h-4 w-4 mr-2"}),"Sync Players"]})})]}),h&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium",children:"Synchronizing players..."}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(S),"%"]})]}),i.jsx(ml,{value:S,className:"w-full"})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsx(Ur,{className:"text-lg",children:"Players Synchronization"}),i.jsx(Hr,{children:"Sync all NFL players data from Sleeper API - this operation is independent of conferences"})]}),i.jsxs(Vr,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(kt,{className:"h-5 w-5 text-blue-600"}),i.jsx("h4",{className:"font-semibold",children:"Player Data"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Syncs comprehensive player information:"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• Names and positions"}),i.jsx("li",{children:"• NFL team affiliations"}),i.jsx("li",{children:"• Physical attributes"}),i.jsx("li",{children:"• Injury status"}),i.jsx("li",{children:"• College and experience"})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ls,{className:"h-5 w-5 text-green-600"}),i.jsx("h4",{className:"font-semibold",children:"Data Management"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Updates player database:"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• Creates new player records"}),i.jsx("li",{children:"• Updates existing player info"}),i.jsx("li",{children:"• Maintains Sleeper ID mappings"}),i.jsx("li",{children:"• Processes thousands of players"})]})]})]}),i.jsxs(Kr,{children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsxs(Gr,{children:[i.jsx("strong",{children:"Note:"})," This sync processes all NFL players from Sleeper API. It can take several minutes to complete and will update or create thousands of player records."]})]})]})]}),$&&i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{className:"text-lg",children:"Players Sync Results"})}),i.jsx(Vr,{children:i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[$.success?i.jsx(Ms,{className:"h-5 w-5 text-green-600"}):i.jsx(Fs,{className:"h-5 w-5 text-red-600"}),i.jsx("span",{className:"font-medium",children:"Players Synchronization"})]}),i.jsx("div",{className:"text-sm",children:$.success?i.jsx("span",{className:"text-green-600",children:"Success"}):i.jsx("span",{className:"text-red-600",children:"Failed"})})]}),$.success&&i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Created:"}),i.jsx("div",{className:"text-lg font-semibold text-green-600",children:$.players_created})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Updated:"}),i.jsx("div",{className:"text-lg font-semibold text-blue-600",children:$.players_updated})]})]}),$.error&&i.jsx("div",{className:"text-sm text-red-600 mt-1",children:$.error})]})})]})]})})]})]})]})]})})},ac=async(e,s)=>({error:null}),rc=async(e,s)=>({error:null});const nc="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function ic(e){const s=Object.prototype.toString.call(e);return"[object Window]"===s||"[object global]"===s}function lc(e){return"nodeType"in e}function cc(e){var s,t;return e?ic(e)?e:lc(e)&&null!=(s=null==(t=e.ownerDocument)?void 0:t.defaultView)?s:window:window}function oc(e){const{Document:s}=cc(e);return e instanceof s}function dc(e){return!ic(e)&&e instanceof cc(e).HTMLElement}function mc(e){return e instanceof cc(e).SVGElement}function uc(e){return e?ic(e)?e.document:lc(e)?oc(e)?e:dc(e)||mc(e)?e.ownerDocument:document:document:document}const hc=nc?te.useLayoutEffect:te.useEffect;function xc(e){const s=te.useRef(e);return hc(()=>{s.current=e}),te.useCallback(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return null==s.current?void 0:s.current(...t)},[])}function pc(e,s){void 0===s&&(s=[e]);const t=te.useRef(e);return hc(()=>{t.current!==e&&(t.current=e)},s),t}function fc(e,s){const t=te.useRef();return te.useMemo(()=>{const s=e(t.current);return t.current=s,s},[...s])}function gc(e){const s=xc(e),t=te.useRef(null),a=te.useCallback(e=>{e!==t.current&&(null==s||s(e,t.current)),t.current=e},[]);return[t,a]}function jc(e){const s=te.useRef();return te.useEffect(()=>{s.current=e},[e]),s.current}let vc={};function yc(e,s){return te.useMemo(()=>{if(s)return s;const t=null==vc[e]?0:vc[e]+1;return vc[e]=t,e+"-"+t},[e,s])}function wc(e){return function(s){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return a.reduce((s,t)=>{const a=Object.entries(t);for(const[r,n]of a){const t=s[r];null!=t&&(s[r]=t+e*n)}return s},{...s})}}const Nc=wc(1),bc=wc(-1);function _c(e){if(!e)return!1;const{KeyboardEvent:s}=cc(e.target);return s&&e instanceof s}function Sc(e){if(function(e){if(!e)return!1;const{TouchEvent:s}=cc(e.target);return s&&e instanceof s}(e)){if(e.touches&&e.touches.length){const{clientX:s,clientY:t}=e.touches[0];return{x:s,y:t}}if(e.changedTouches&&e.changedTouches.length){const{clientX:s,clientY:t}=e.changedTouches[0];return{x:s,y:t}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const kc=Object.freeze({Translate:{toString(e){if(!e)return;const{x:s,y:t}=e;return"translate3d("+(s?Math.round(s):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:s,scaleY:t}=e;return"scaleX("+s+") scaleY("+t+")"}},Transform:{toString(e){if(e)return[kc.Translate.toString(e),kc.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:s,duration:t,easing:a}=e;return s+" "+t+"ms "+a}}}),Cc="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Tc(e){return e.matches(Cc)?e:e.querySelector(Cc)}const Ec={display:"none"};function Pc(e){let{id:s,value:t}=e;return ne.createElement("div",{id:s,style:Ec},t)}function Rc(e){let{id:s,announcement:t,ariaLiveType:a="assertive"}=e;return ne.createElement("div",{id:s,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":a,"aria-atomic":!0},t)}const Dc=te.createContext(null);const Fc={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},Mc={onDragStart(e){let{active:s}=e;return"Picked up draggable item "+s.id+"."},onDragOver(e){let{active:s,over:t}=e;return t?"Draggable item "+s.id+" was moved over droppable area "+t.id+".":"Draggable item "+s.id+" is no longer over a droppable area."},onDragEnd(e){let{active:s,over:t}=e;return t?"Draggable item "+s.id+" was dropped over droppable area "+t.id:"Draggable item "+s.id+" was dropped."},onDragCancel(e){let{active:s}=e;return"Dragging was cancelled. Draggable item "+s.id+" was dropped."}};function Ic(e){let{announcements:s=Mc,container:t,hiddenTextDescribedById:a,screenReaderInstructions:r=Fc}=e;const{announce:n,announcement:i}=function(){const[e,s]=te.useState("");return{announce:te.useCallback(e=>{null!=e&&s(e)},[]),announcement:e}}(),l=yc("DndLiveRegion"),[c,o]=te.useState(!1);if(te.useEffect(()=>{o(!0)},[]),function(e){const s=te.useContext(Dc);te.useEffect(()=>{if(!s)throw new Error("useDndMonitor must be used within a children of <DndContext>");return s(e)},[e,s])}(te.useMemo(()=>({onDragStart(e){let{active:t}=e;n(s.onDragStart({active:t}))},onDragMove(e){let{active:t,over:a}=e;s.onDragMove&&n(s.onDragMove({active:t,over:a}))},onDragOver(e){let{active:t,over:a}=e;n(s.onDragOver({active:t,over:a}))},onDragEnd(e){let{active:t,over:a}=e;n(s.onDragEnd({active:t,over:a}))},onDragCancel(e){let{active:t,over:a}=e;n(s.onDragCancel({active:t,over:a}))}}),[n,s])),!c)return null;const d=ne.createElement(ne.Fragment,null,ne.createElement(Pc,{id:a,value:r.draggable}),ne.createElement(Rc,{id:l,announcement:i}));return t?se.createPortal(d,t):d}var Ac,$c;function Lc(){}function zc(e,s){return te.useMemo(()=>({sensor:e,options:null!=s?s:{}}),[e,s])}function Oc(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return te.useMemo(()=>[...s].filter(e=>null!=e),[...s])}($c=Ac||(Ac={})).DragStart="dragStart",$c.DragMove="dragMove",$c.DragEnd="dragEnd",$c.DragCancel="dragCancel",$c.DragOver="dragOver",$c.RegisterDroppable="registerDroppable",$c.SetDroppableDisabled="setDroppableDisabled",$c.UnregisterDroppable="unregisterDroppable";const Bc=Object.freeze({x:0,y:0});function qc(e,s){return Math.sqrt(Math.pow(e.x-s.x,2)+Math.pow(e.y-s.y,2))}function Wc(e,s){const t=Sc(e);if(!t)return"0 0";return(t.x-s.left)/s.width*100+"% "+(t.y-s.top)/s.height*100+"%"}function Uc(e,s){let{data:{value:t}}=e,{data:{value:a}}=s;return t-a}function Hc(e,s){let{data:{value:t}}=e,{data:{value:a}}=s;return a-t}function Vc(e){let{left:s,top:t,height:a,width:r}=e;return[{x:s,y:t},{x:s+r,y:t},{x:s,y:t+a},{x:s+r,y:t+a}]}function Yc(e,s){if(!e||0===e.length)return null;const[t]=e;return t[s]}function Kc(e,s,t){return void 0===s&&(s=e.left),void 0===t&&(t=e.top),{x:s+.5*e.width,y:t+.5*e.height}}const Jc=e=>{let{collisionRect:s,droppableRects:t,droppableContainers:a}=e;const r=Kc(s,s.left,s.top),n=[];for(const i of a){const{id:e}=i,s=t.get(e);if(s){const t=qc(Kc(s),r);n.push({id:e,data:{droppableContainer:i,value:t}})}}return n.sort(Uc)};function Gc(e,s){const t=Math.max(s.top,e.top),a=Math.max(s.left,e.left),r=Math.min(s.left+s.width,e.left+e.width),n=Math.min(s.top+s.height,e.top+e.height),i=r-a,l=n-t;if(a<r&&t<n){const t=s.width*s.height,a=e.width*e.height,r=i*l;return Number((r/(t+a-r)).toFixed(4))}return 0}const Xc=e=>{let{collisionRect:s,droppableRects:t,droppableContainers:a}=e;const r=[];for(const n of a){const{id:e}=n,a=t.get(e);if(a){const t=Gc(a,s);t>0&&r.push({id:e,data:{droppableContainer:n,value:t}})}}return r.sort(Hc)};function Qc(e,s){return e&&s?{x:e.left-s.left,y:e.top-s.top}:Bc}function Zc(e){return function(s){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return a.reduce((s,t)=>({...s,top:s.top+e*t.y,bottom:s.bottom+e*t.y,left:s.left+e*t.x,right:s.right+e*t.x}),{...s})}}const eo=Zc(1);function so(e){if(e.startsWith("matrix3d(")){const s=e.slice(9,-1).split(/, /);return{x:+s[12],y:+s[13],scaleX:+s[0],scaleY:+s[5]}}if(e.startsWith("matrix(")){const s=e.slice(7,-1).split(/, /);return{x:+s[4],y:+s[5],scaleX:+s[0],scaleY:+s[3]}}return null}const to={ignoreTransform:!1};function ao(e,s){void 0===s&&(s=to);let t=e.getBoundingClientRect();if(s.ignoreTransform){const{transform:s,transformOrigin:a}=cc(e).getComputedStyle(e);s&&(t=function(e,s,t){const a=so(s);if(!a)return e;const{scaleX:r,scaleY:n,x:i,y:l}=a,c=e.left-i-(1-r)*parseFloat(t),o=e.top-l-(1-n)*parseFloat(t.slice(t.indexOf(" ")+1)),d=r?e.width/r:e.width,m=n?e.height/n:e.height;return{width:d,height:m,top:o,right:c+d,bottom:o+m,left:c}}(t,s,a))}const{top:a,left:r,width:n,height:i,bottom:l,right:c}=t;return{top:a,left:r,width:n,height:i,bottom:l,right:c}}function ro(e){return ao(e,{ignoreTransform:!0})}function no(e,s){const t=[];return e?function a(r){if(null!=s&&t.length>=s)return t;if(!r)return t;if(oc(r)&&null!=r.scrollingElement&&!t.includes(r.scrollingElement))return t.push(r.scrollingElement),t;if(!dc(r)||mc(r))return t;if(t.includes(r))return t;const n=cc(e).getComputedStyle(r);return r!==e&&function(e,s){void 0===s&&(s=cc(e).getComputedStyle(e));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{const a=s[e];return"string"==typeof a&&t.test(a)})}(r,n)&&t.push(r),function(e,s){return void 0===s&&(s=cc(e).getComputedStyle(e)),"fixed"===s.position}(r,n)?t:a(r.parentNode)}(e):t}function io(e){const[s]=no(e,1);return null!=s?s:null}function lo(e){return nc&&e?ic(e)?e:lc(e)?oc(e)||e===uc(e).scrollingElement?window:dc(e)?e:null:null:null}function co(e){return ic(e)?e.scrollX:e.scrollLeft}function oo(e){return ic(e)?e.scrollY:e.scrollTop}function mo(e){return{x:co(e),y:oo(e)}}var uo,ho;function xo(e){return!(!nc||!e)&&e===document.scrollingElement}function po(e){const s={x:0,y:0},t=xo(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-t.width,y:e.scrollHeight-t.height};return{isTop:e.scrollTop<=s.y,isLeft:e.scrollLeft<=s.x,isBottom:e.scrollTop>=a.y,isRight:e.scrollLeft>=a.x,maxScroll:a,minScroll:s}}(ho=uo||(uo={}))[ho.Forward=1]="Forward",ho[ho.Backward=-1]="Backward";const fo={x:.2,y:.2};function go(e,s,t,a,r){let{top:n,left:i,right:l,bottom:c}=t;void 0===a&&(a=10),void 0===r&&(r=fo);const{isTop:o,isBottom:d,isLeft:m,isRight:u}=po(e),h={x:0,y:0},x={x:0,y:0},p=s.height*r.y,f=s.width*r.x;return!o&&n<=s.top+p?(h.y=uo.Backward,x.y=a*Math.abs((s.top+p-n)/p)):!d&&c>=s.bottom-p&&(h.y=uo.Forward,x.y=a*Math.abs((s.bottom-p-c)/p)),!u&&l>=s.right-f?(h.x=uo.Forward,x.x=a*Math.abs((s.right-f-l)/f)):!m&&i<=s.left+f&&(h.x=uo.Backward,x.x=a*Math.abs((s.left+f-i)/f)),{direction:h,speed:x}}function jo(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:s}=window;return{top:0,left:0,right:e,bottom:s,width:e,height:s}}const{top:s,left:t,right:a,bottom:r}=e.getBoundingClientRect();return{top:s,left:t,right:a,bottom:r,width:e.clientWidth,height:e.clientHeight}}function vo(e){return e.reduce((e,s)=>Nc(e,mo(s)),Bc)}function yo(e,s){if(void 0===s&&(s=ao),!e)return;const{top:t,left:a,bottom:r,right:n}=s(e);io(e)&&(r<=0||n<=0||t>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const wo=[["x",["left","right"],function(e){return e.reduce((e,s)=>e+co(s),0)}],["y",["top","bottom"],function(e){return e.reduce((e,s)=>e+oo(s),0)}]];class No{constructor(e,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const t=no(s),a=vo(t);this.rect={...e},this.width=e.width,this.height=e.height;for(const[r,n,i]of wo)for(const e of n)Object.defineProperty(this,e,{get:()=>{const s=i(t),n=a[r]-s;return this.rect[e]+n},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class bo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var s;return null==(s=this.target)?void 0:s.removeEventListener(...e)})},this.target=e}add(e,s,t){var a;null==(a=this.target)||a.addEventListener(e,s,t),this.listeners.push([e,s,t])}}function _o(e,s){const t=Math.abs(e.x),a=Math.abs(e.y);return"number"==typeof s?Math.sqrt(t**2+a**2)>s:"x"in s&&"y"in s?t>s.x&&a>s.y:"x"in s?t>s.x:"y"in s&&a>s.y}var So,ko,Co,To;function Eo(e){e.preventDefault()}function Po(e){e.stopPropagation()}(ko=So||(So={})).Click="click",ko.DragStart="dragstart",ko.Keydown="keydown",ko.ContextMenu="contextmenu",ko.Resize="resize",ko.SelectionChange="selectionchange",ko.VisibilityChange="visibilitychange",(To=Co||(Co={})).Space="Space",To.Down="ArrowDown",To.Right="ArrowRight",To.Left="ArrowLeft",To.Up="ArrowUp",To.Esc="Escape",To.Enter="Enter",To.Tab="Tab";const Ro={start:[Co.Space,Co.Enter],cancel:[Co.Esc],end:[Co.Space,Co.Enter,Co.Tab]},Do=(e,s)=>{let{currentCoordinates:t}=s;switch(e.code){case Co.Right:return{...t,x:t.x+25};case Co.Left:return{...t,x:t.x-25};case Co.Down:return{...t,y:t.y+25};case Co.Up:return{...t,y:t.y-25}}};class Fo{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:s}}=e;this.props=e,this.listeners=new bo(uc(s)),this.windowListeners=new bo(cc(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(So.Resize,this.handleCancel),this.windowListeners.add(So.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(So.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:s}=this.props,t=e.node.current;t&&yo(t),s(Bc)}handleKeyDown(e){if(_c(e)){const{active:s,context:t,options:a}=this.props,{keyboardCodes:r=Ro,coordinateGetter:n=Do,scrollBehavior:i="smooth"}=a,{code:l}=e;if(r.end.includes(l))return void this.handleEnd(e);if(r.cancel.includes(l))return void this.handleCancel(e);const{collisionRect:c}=t.current,o=c?{x:c.left,y:c.top}:Bc;this.referenceCoordinates||(this.referenceCoordinates=o);const d=n(e,{active:s,context:t.current,currentCoordinates:o});if(d){const s=bc(d,o),a={x:0,y:0},{scrollableAncestors:r}=t.current;for(const t of r){const r=e.code,{isTop:n,isRight:l,isLeft:c,isBottom:o,maxScroll:m,minScroll:u}=po(t),h=jo(t),x={x:Math.min(r===Co.Right?h.right-h.width/2:h.right,Math.max(r===Co.Right?h.left:h.left+h.width/2,d.x)),y:Math.min(r===Co.Down?h.bottom-h.height/2:h.bottom,Math.max(r===Co.Down?h.top:h.top+h.height/2,d.y))},p=r===Co.Right&&!l||r===Co.Left&&!c,f=r===Co.Down&&!o||r===Co.Up&&!n;if(p&&x.x!==d.x){const e=t.scrollLeft+s.x,n=r===Co.Right&&e<=m.x||r===Co.Left&&e>=u.x;if(n&&!s.y)return void t.scrollTo({left:e,behavior:i});a.x=n?t.scrollLeft-e:r===Co.Right?t.scrollLeft-m.x:t.scrollLeft-u.x,a.x&&t.scrollBy({left:-a.x,behavior:i});break}if(f&&x.y!==d.y){const e=t.scrollTop+s.y,n=r===Co.Down&&e<=m.y||r===Co.Up&&e>=u.y;if(n&&!s.x)return void t.scrollTo({top:e,behavior:i});a.y=n?t.scrollTop-e:r===Co.Down?t.scrollTop-m.y:t.scrollTop-u.y,a.y&&t.scrollBy({top:-a.y,behavior:i});break}}this.handleMove(e,Nc(bc(d,this.referenceCoordinates),a))}}}handleMove(e,s){const{onMove:t}=this.props;e.preventDefault(),t(s)}handleEnd(e){const{onEnd:s}=this.props;e.preventDefault(),this.detach(),s()}handleCancel(e){const{onCancel:s}=this.props;e.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function Mo(e){return Boolean(e&&"distance"in e)}function Io(e){return Boolean(e&&"delay"in e)}Fo.activators=[{eventName:"onKeyDown",handler:(e,s,t)=>{let{keyboardCodes:a=Ro,onActivation:r}=s,{active:n}=t;const{code:i}=e.nativeEvent;if(a.start.includes(i)){const s=n.activatorNode.current;return(!s||e.target===s)&&(e.preventDefault(),null==r||r({event:e.nativeEvent}),!0)}return!1}}];class Ao{constructor(e,s,t){var a;void 0===t&&(t=function(e){const{EventTarget:s}=cc(e);return e instanceof s?e:uc(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=s;const{event:r}=e,{target:n}=r;this.props=e,this.events=s,this.document=uc(n),this.documentListeners=new bo(this.document),this.listeners=new bo(t),this.windowListeners=new bo(cc(n)),this.initialCoordinates=null!=(a=Sc(r))?a:Bc,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:s,bypassActivationConstraint:t}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(So.Resize,this.handleCancel),this.windowListeners.add(So.DragStart,Eo),this.windowListeners.add(So.VisibilityChange,this.handleCancel),this.windowListeners.add(So.ContextMenu,Eo),this.documentListeners.add(So.Keydown,this.handleKeydown),s){if(null!=t&&t({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Io(s))return this.timeoutId=setTimeout(this.handleStart,s.delay),void this.handlePending(s);if(Mo(s))return void this.handlePending(s)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,s){const{active:t,onPending:a}=this.props;a(t,e,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:e}=this,{onStart:s}=this.props;e&&(this.activated=!0,this.documentListeners.add(So.Click,Po,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(So.SelectionChange,this.removeTextSelection),s(e))}handleMove(e){var s;const{activated:t,initialCoordinates:a,props:r}=this,{onMove:n,options:{activationConstraint:i}}=r;if(!a)return;const l=null!=(s=Sc(e))?s:Bc,c=bc(a,l);if(!t&&i){if(Mo(i)){if(null!=i.tolerance&&_o(c,i.tolerance))return this.handleCancel();if(_o(c,i.distance))return this.handleStart()}return Io(i)&&_o(c,i.tolerance)?this.handleCancel():void this.handlePending(i,c)}e.cancelable&&e.preventDefault(),n(l)}handleEnd(){const{onAbort:e,onEnd:s}=this.props;this.detach(),this.activated||e(this.props.active),s()}handleCancel(){const{onAbort:e,onCancel:s}=this.props;this.detach(),this.activated||e(this.props.active),s()}handleKeydown(e){e.code===Co.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const $o={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Lo extends Ao{constructor(e){const{event:s}=e,t=uc(s.target);super(e,$o,t)}}Lo.activators=[{eventName:"onPointerDown",handler:(e,s)=>{let{nativeEvent:t}=e,{onActivation:a}=s;return!(!t.isPrimary||0!==t.button)&&(null==a||a({event:t}),!0)}}];const zo={move:{name:"mousemove"},end:{name:"mouseup"}};var Oo,Bo;(Bo=Oo||(Oo={}))[Bo.RightClick=2]="RightClick";(class extends Ao{constructor(e){super(e,zo,uc(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,s)=>{let{nativeEvent:t}=e,{onActivation:a}=s;return t.button!==Oo.RightClick&&(null==a||a({event:t}),!0)}}];const qo={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var Wo,Uo,Ho,Vo;function Yo(e){let{acceleration:s,activator:t=Wo.Pointer,canScroll:a,draggingRect:r,enabled:n,interval:i=5,order:l=Ho.TreeOrder,pointerCoordinates:c,scrollableAncestors:o,scrollableAncestorRects:d,delta:m,threshold:u}=e;const h=function(e){let{delta:s,disabled:t}=e;const a=jc(s);return fc(e=>{if(t||!a||!e)return Ko;const r={x:Math.sign(s.x-a.x),y:Math.sign(s.y-a.y)};return{x:{[uo.Backward]:e.x[uo.Backward]||-1===r.x,[uo.Forward]:e.x[uo.Forward]||1===r.x},y:{[uo.Backward]:e.y[uo.Backward]||-1===r.y,[uo.Forward]:e.y[uo.Forward]||1===r.y}}},[t,s,a])}({delta:m,disabled:!n}),[x,p]=function(){const e=te.useRef(null);return[te.useCallback((s,t)=>{e.current=setInterval(s,t)},[]),te.useCallback(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),f=te.useRef({x:0,y:0}),g=te.useRef({x:0,y:0}),j=te.useMemo(()=>{switch(t){case Wo.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Wo.DraggableRect:return r}},[t,r,c]),v=te.useRef(null),y=te.useCallback(()=>{const e=v.current;if(!e)return;const s=f.current.x*g.current.x,t=f.current.y*g.current.y;e.scrollBy(s,t)},[]),w=te.useMemo(()=>l===Ho.TreeOrder?[...o].reverse():o,[l,o]);te.useEffect(()=>{if(n&&o.length&&j){for(const e of w){if(!1===(null==a?void 0:a(e)))continue;const t=o.indexOf(e),r=d[t];if(!r)continue;const{direction:n,speed:l}=go(e,r,j,s,u);for(const e of["x","y"])h[e][n[e]]||(l[e]=0,n[e]=0);if(l.x>0||l.y>0)return p(),v.current=e,x(y,i),f.current=l,void(g.current=n)}f.current={x:0,y:0},g.current={x:0,y:0},p()}else p()},[s,y,a,p,n,i,JSON.stringify(j),JSON.stringify(h),x,o,w,d,JSON.stringify(u)])}(class extends Ao{constructor(e){super(e,qo)}static setup(){return window.addEventListener(qo.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(qo.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,s)=>{let{nativeEvent:t}=e,{onActivation:a}=s;const{touches:r}=t;return!(r.length>1)&&(null==a||a({event:t}),!0)}}],(Uo=Wo||(Wo={}))[Uo.Pointer=0]="Pointer",Uo[Uo.DraggableRect=1]="DraggableRect",(Vo=Ho||(Ho={}))[Vo.TreeOrder=0]="TreeOrder",Vo[Vo.ReversedTreeOrder=1]="ReversedTreeOrder";const Ko={x:{[uo.Backward]:!1,[uo.Forward]:!1},y:{[uo.Backward]:!1,[uo.Forward]:!1}};var Jo,Go,Xo;(Go=Jo||(Jo={}))[Go.Always=0]="Always",Go[Go.BeforeDragging=1]="BeforeDragging",Go[Go.WhileDragging=2]="WhileDragging",(Xo||(Xo={})).Optimized="optimized";const Qo=new Map;function Zo(e,s){return fc(t=>e?t||("function"==typeof s?s(e):e):null,[s,e])}function ed(e){let{callback:s,disabled:t}=e;const a=xc(s),r=te.useMemo(()=>{if(t||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(a)},[t]);return te.useEffect(()=>()=>null==r?void 0:r.disconnect(),[r]),r}function sd(e){return new No(ao(e),e)}function td(e,s,t){void 0===s&&(s=sd);const[a,r]=te.useState(null);function n(){r(a=>{if(!e)return null;var r;if(!1===e.isConnected)return null!=(r=null!=a?a:t)?r:null;const n=s(e);return JSON.stringify(a)===JSON.stringify(n)?a:n})}const i=function(e){let{callback:s,disabled:t}=e;const a=xc(s),r=te.useMemo(()=>{if(t||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(a)},[a,t]);return te.useEffect(()=>()=>null==r?void 0:r.disconnect(),[r]),r}({callback(s){if(e)for(const t of s){const{type:s,target:a}=t;if("childList"===s&&a instanceof HTMLElement&&a.contains(e)){n();break}}}}),l=ed({callback:n});return hc(()=>{n(),e?(null==l||l.observe(e),null==i||i.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==i||i.disconnect())},[e]),a}const ad=[];function rd(e,s){void 0===s&&(s=[]);const t=te.useRef(null);return te.useEffect(()=>{t.current=null},s),te.useEffect(()=>{const s=e!==Bc;s&&!t.current&&(t.current=e),!s&&t.current&&(t.current=null)},[e]),t.current?bc(e,t.current):Bc}function nd(e){return te.useMemo(()=>e?function(e){const s=e.innerWidth,t=e.innerHeight;return{top:0,left:0,right:s,bottom:t,width:s,height:t}}(e):null,[e])}const id=[];function ld(e){if(!e)return null;if(e.children.length>1)return e;const s=e.children[0];return dc(s)?s:e}const cd=[{sensor:Lo,options:{}},{sensor:Fo,options:{}}],od={current:{}},dd={draggable:{measure:ro},droppable:{measure:ro,strategy:Jo.WhileDragging,frequency:Xo.Optimized},dragOverlay:{measure:ao}};class md extends Map{get(e){var s;return null!=e&&null!=(s=super.get(e))?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:s}=e;return!s})}getNodeFor(e){var s,t;return null!=(s=null==(t=this.get(e))?void 0:t.node.current)?s:void 0}}const ud={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new md,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Lc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:dd,measureDroppableContainers:Lc,windowRect:null,measuringScheduled:!1},hd={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Lc,draggableNodes:new Map,over:null,measureDroppableContainers:Lc},xd=te.createContext(hd),pd=te.createContext(ud);function fd(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new md}}}function gd(e,s){switch(s.type){case Ac.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:s.initialCoordinates,active:s.active}};case Ac.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:s.coordinates.x-e.draggable.initialCoordinates.x,y:s.coordinates.y-e.draggable.initialCoordinates.y}}};case Ac.DragEnd:case Ac.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ac.RegisterDroppable:{const{element:t}=s,{id:a}=t,r=new md(e.droppable.containers);return r.set(a,t),{...e,droppable:{...e.droppable,containers:r}}}case Ac.SetDroppableDisabled:{const{id:t,key:a,disabled:r}=s,n=e.droppable.containers.get(t);if(!n||a!==n.key)return e;const i=new md(e.droppable.containers);return i.set(t,{...n,disabled:r}),{...e,droppable:{...e.droppable,containers:i}}}case Ac.UnregisterDroppable:{const{id:t,key:a}=s,r=e.droppable.containers.get(t);if(!r||a!==r.key)return e;const n=new md(e.droppable.containers);return n.delete(t),{...e,droppable:{...e.droppable,containers:n}}}default:return e}}function jd(e){let{disabled:s}=e;const{active:t,activatorEvent:a,draggableNodes:r}=te.useContext(xd),n=jc(a),i=jc(null==t?void 0:t.id);return te.useEffect(()=>{if(!s&&!a&&n&&null!=i){if(!_c(n))return;if(document.activeElement===n.target)return;const e=r.get(i);if(!e)return;const{activatorNode:s,node:t}=e;if(!s.current&&!t.current)return;requestAnimationFrame(()=>{for(const e of[s.current,t.current]){if(!e)continue;const s=Tc(e);if(s){s.focus();break}}})}},[a,s,r,i,n]),null}function vd(e,s){let{transform:t,...a}=s;return null!=e&&e.length?e.reduce((e,s)=>s({transform:e,...a}),t):t}const yd=te.createContext({...Bc,scaleX:1,scaleY:1});var wd,Nd;(Nd=wd||(wd={}))[Nd.Uninitialized=0]="Uninitialized",Nd[Nd.Initializing=1]="Initializing",Nd[Nd.Initialized=2]="Initialized";const bd=te.memo(function(e){var s,t,a,r;let{id:n,accessibility:i,autoScroll:l=!0,children:c,sensors:o=cd,collisionDetection:d=Xc,measuring:m,modifiers:u,...h}=e;const x=te.useReducer(gd,void 0,fd),[p,f]=x,[g,j]=function(){const[e]=te.useState(()=>new Set),s=te.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[te.useCallback(s=>{let{type:t,event:a}=s;e.forEach(e=>{var s;return null==(s=e[t])?void 0:s.call(e,a)})},[e]),s]}(),[v,y]=te.useState(wd.Uninitialized),w=v===wd.Initialized,{draggable:{active:N,nodes:b,translate:_},droppable:{containers:S}}=p,k=null!=N?b.get(N):null,C=te.useRef({initial:null,translated:null}),T=te.useMemo(()=>{var e;return null!=N?{id:N,data:null!=(e=null==k?void 0:k.data)?e:od,rect:C}:null},[N,k]),E=te.useRef(null),[P,R]=te.useState(null),[D,F]=te.useState(null),M=pc(h,Object.values(h)),I=yc("DndDescribedBy",n),A=te.useMemo(()=>S.getEnabled(),[S]),$=(L=m,te.useMemo(()=>({draggable:{...dd.draggable,...null==L?void 0:L.draggable},droppable:{...dd.droppable,...null==L?void 0:L.droppable},dragOverlay:{...dd.dragOverlay,...null==L?void 0:L.dragOverlay}}),[null==L?void 0:L.draggable,null==L?void 0:L.droppable,null==L?void 0:L.dragOverlay]));var L;const{droppableRects:z,measureDroppableContainers:O,measuringScheduled:B}=function(e,s){let{dragging:t,dependencies:a,config:r}=s;const[n,i]=te.useState(null),{frequency:l,measure:c,strategy:o}=r,d=te.useRef(e),m=function(){switch(o){case Jo.Always:return!1;case Jo.BeforeDragging:return t;default:return!t}}(),u=pc(m),h=te.useCallback(function(e){void 0===e&&(e=[]),u.current||i(s=>null===s?e:s.concat(e.filter(e=>!s.includes(e))))},[u]),x=te.useRef(null),p=fc(s=>{if(m&&!t)return Qo;if(!s||s===Qo||d.current!==e||null!=n){const s=new Map;for(let t of e){if(!t)continue;if(n&&n.length>0&&!n.includes(t.id)&&t.rect.current){s.set(t.id,t.rect.current);continue}const e=t.node.current,a=e?new No(c(e),e):null;t.rect.current=a,a&&s.set(t.id,a)}return s}return s},[e,n,t,m,c]);return te.useEffect(()=>{d.current=e},[e]),te.useEffect(()=>{m||h()},[t,m]),te.useEffect(()=>{n&&n.length>0&&i(null)},[JSON.stringify(n)]),te.useEffect(()=>{m||"number"!=typeof l||null!==x.current||(x.current=setTimeout(()=>{h(),x.current=null},l))},[l,m,h,...a]),{droppableRects:p,measureDroppableContainers:h,measuringScheduled:null!=n}}(A,{dragging:w,dependencies:[_.x,_.y],config:$.droppable}),q=function(e,s){const t=null!=s?e.get(s):void 0,a=t?t.node.current:null;return fc(e=>{var t;return null==s?null:null!=(t=null!=a?a:e)?t:null},[a,s])}(b,N),W=te.useMemo(()=>D?Sc(D):null,[D]),U=function(){const e=!1===(null==P?void 0:P.autoScrollEnabled),s="object"==typeof l?!1===l.enabled:!1===l,t=w&&!e&&!s;if("object"==typeof l)return{...l,enabled:t};return{enabled:t}}(),H=function(e,s){return Zo(e,s)}(q,$.draggable.measure);!function(e){let{activeNode:s,measure:t,initialRect:a,config:r=!0}=e;const n=te.useRef(!1),{x:i,y:l}="boolean"==typeof r?{x:r,y:r}:r;hc(()=>{if(!i&&!l||!s)return void(n.current=!1);if(n.current||!a)return;const e=null==s?void 0:s.node.current;if(!e||!1===e.isConnected)return;const r=Qc(t(e),a);if(i||(r.x=0),l||(r.y=0),n.current=!0,Math.abs(r.x)>0||Math.abs(r.y)>0){const s=io(e);s&&s.scrollBy({top:r.y,left:r.x})}},[s,i,l,a,t])}({activeNode:null!=N?b.get(N):null,config:U.layoutShiftCompensation,initialRect:H,measure:$.draggable.measure});const V=td(q,$.draggable.measure,H),Y=td(q?q.parentElement:null),K=te.useRef({activatorEvent:null,active:null,activeNode:q,collisionRect:null,collisions:null,droppableRects:z,draggableNodes:b,draggingNode:null,draggingNodeRect:null,droppableContainers:S,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),J=S.getNodeFor(null==(s=K.current.over)?void 0:s.id),G=function(e){let{measure:s}=e;const[t,a]=te.useState(null),r=ed({callback:te.useCallback(e=>{for(const{target:t}of e)if(dc(t)){a(e=>{const a=s(t);return e?{...e,width:a.width,height:a.height}:a});break}},[s])}),n=te.useCallback(e=>{const t=ld(e);null==r||r.disconnect(),t&&(null==r||r.observe(t)),a(t?s(t):null)},[s,r]),[i,l]=gc(n);return te.useMemo(()=>({nodeRef:i,rect:t,setRef:l}),[t,i,l])}({measure:$.dragOverlay.measure}),X=null!=(t=G.nodeRef.current)?t:q,Q=w?null!=(a=G.rect)?a:V:null,Z=Boolean(G.nodeRef.current&&G.rect),ee=Qc(ae=Z?null:V,Zo(ae));var ae;const re=nd(X?cc(X):null),ie=function(e){const s=te.useRef(e),t=fc(t=>e?t&&t!==ad&&e&&s.current&&e.parentNode===s.current.parentNode?t:no(e):ad,[e]);return te.useEffect(()=>{s.current=e},[e]),t}(w?null!=J?J:q:null),le=function(e,s){void 0===s&&(s=ao);const[t]=e,a=nd(t?cc(t):null),[r,n]=te.useState(id);function i(){n(()=>e.length?e.map(e=>xo(e)?a:new No(s(e),e)):id)}const l=ed({callback:i});return hc(()=>{null==l||l.disconnect(),i(),e.forEach(e=>null==l?void 0:l.observe(e))},[e]),r}(ie),ce=vd(u,{transform:{x:_.x-ee.x,y:_.y-ee.y,scaleX:1,scaleY:1},activatorEvent:D,active:T,activeNodeRect:V,containerNodeRect:Y,draggingNodeRect:Q,over:K.current.over,overlayNodeRect:G.rect,scrollableAncestors:ie,scrollableAncestorRects:le,windowRect:re}),oe=W?Nc(W,_):null,de=function(e){const[s,t]=te.useState(null),a=te.useRef(e),r=te.useCallback(e=>{const s=lo(e.target);s&&t(e=>e?(e.set(s,mo(s)),new Map(e)):null)},[]);return te.useEffect(()=>{const s=a.current;if(e!==s){n(s);const i=e.map(e=>{const s=lo(e);return s?(s.addEventListener("scroll",r,{passive:!0}),[s,mo(s)]):null}).filter(e=>null!=e);t(i.length?new Map(i):null),a.current=e}return()=>{n(e),n(s)};function n(e){e.forEach(e=>{const s=lo(e);null==s||s.removeEventListener("scroll",r)})}},[r,e]),te.useMemo(()=>e.length?s?Array.from(s.values()).reduce((e,s)=>Nc(e,s),Bc):vo(e):Bc,[e,s])}(ie),me=rd(de),ue=rd(de,[V]),he=Nc(ce,me),xe=Q?eo(Q,ce):null,pe=T&&xe?d({active:T,collisionRect:xe,droppableRects:z,droppableContainers:A,pointerCoordinates:oe}):null,fe=Yc(pe,"id"),[ge,je]=te.useState(null),ve=function(e,s,t){return{...e,scaleX:s&&t?s.width/t.width:1,scaleY:s&&t?s.height/t.height:1}}(Z?ce:Nc(ce,ue),null!=(r=null==ge?void 0:ge.rect)?r:null,V),ye=te.useRef(null),we=te.useCallback((e,s)=>{let{sensor:t,options:a}=s;if(null==E.current)return;const r=b.get(E.current);if(!r)return;const n=e.nativeEvent,i=new t({active:E.current,activeNode:r,event:n,options:a,context:K,onAbort(e){if(!b.get(e))return;const{onDragAbort:s}=M.current,t={id:e};null==s||s(t),g({type:"onDragAbort",event:t})},onPending(e,s,t,a){if(!b.get(e))return;const{onDragPending:r}=M.current,n={id:e,constraint:s,initialCoordinates:t,offset:a};null==r||r(n),g({type:"onDragPending",event:n})},onStart(e){const s=E.current;if(null==s)return;const t=b.get(s);if(!t)return;const{onDragStart:a}=M.current,r={activatorEvent:n,active:{id:s,data:t.data,rect:C}};se.unstable_batchedUpdates(()=>{null==a||a(r),y(wd.Initializing),f({type:Ac.DragStart,initialCoordinates:e,active:s}),g({type:"onDragStart",event:r}),R(ye.current),F(n)})},onMove(e){f({type:Ac.DragMove,coordinates:e})},onEnd:l(Ac.DragEnd),onCancel:l(Ac.DragCancel)});function l(e){return async function(){const{active:s,collisions:t,over:a,scrollAdjustedTranslate:r}=K.current;let i=null;if(s&&r){const{cancelDrop:l}=M.current;if(i={activatorEvent:n,active:s,collisions:t,delta:r,over:a},e===Ac.DragEnd&&"function"==typeof l){await Promise.resolve(l(i))&&(e=Ac.DragCancel)}}E.current=null,se.unstable_batchedUpdates(()=>{f({type:e}),y(wd.Uninitialized),je(null),R(null),F(null),ye.current=null;const s=e===Ac.DragEnd?"onDragEnd":"onDragCancel";if(i){const e=M.current[s];null==e||e(i),g({type:s,event:i})}})}}ye.current=i},[b]),Ne=function(e,s){return te.useMemo(()=>e.reduce((e,t)=>{const{sensor:a}=t;return[...e,...a.activators.map(e=>({eventName:e.eventName,handler:s(e.handler,t)}))]},[]),[e,s])}(o,te.useCallback((e,s)=>(t,a)=>{const r=t.nativeEvent,n=b.get(a);if(null!==E.current||!n||r.dndKit||r.defaultPrevented)return;const i={active:n};!0===e(t,s.options,i)&&(r.dndKit={capturedBy:s.sensor},E.current=a,we(t,s))},[b,we]));!function(e){te.useEffect(()=>{if(!nc)return;const s=e.map(e=>{let{sensor:s}=e;return null==s.setup?void 0:s.setup()});return()=>{for(const e of s)null==e||e()}},e.map(e=>{let{sensor:s}=e;return s}))}(o),hc(()=>{V&&v===wd.Initializing&&y(wd.Initialized)},[V,v]),te.useEffect(()=>{const{onDragMove:e}=M.current,{active:s,activatorEvent:t,collisions:a,over:r}=K.current;if(!s||!t)return;const n={active:s,activatorEvent:t,collisions:a,delta:{x:he.x,y:he.y},over:r};se.unstable_batchedUpdates(()=>{null==e||e(n),g({type:"onDragMove",event:n})})},[he.x,he.y]),te.useEffect(()=>{const{active:e,activatorEvent:s,collisions:t,droppableContainers:a,scrollAdjustedTranslate:r}=K.current;if(!e||null==E.current||!s||!r)return;const{onDragOver:n}=M.current,i=a.get(fe),l=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,c={active:e,activatorEvent:s,collisions:t,delta:{x:r.x,y:r.y},over:l};se.unstable_batchedUpdates(()=>{je(l),null==n||n(c),g({type:"onDragOver",event:c})})},[fe]),hc(()=>{K.current={activatorEvent:D,active:T,activeNode:q,collisionRect:xe,collisions:pe,droppableRects:z,draggableNodes:b,draggingNode:X,draggingNodeRect:Q,droppableContainers:S,over:ge,scrollableAncestors:ie,scrollAdjustedTranslate:he},C.current={initial:Q,translated:xe}},[T,q,pe,xe,b,X,Q,z,S,ge,ie,he]),Yo({...U,delta:_,draggingRect:xe,pointerCoordinates:oe,scrollableAncestors:ie,scrollableAncestorRects:le});const be=te.useMemo(()=>({active:T,activeNode:q,activeNodeRect:V,activatorEvent:D,collisions:pe,containerNodeRect:Y,dragOverlay:G,draggableNodes:b,droppableContainers:S,droppableRects:z,over:ge,measureDroppableContainers:O,scrollableAncestors:ie,scrollableAncestorRects:le,measuringConfiguration:$,measuringScheduled:B,windowRect:re}),[T,q,V,D,pe,Y,G,b,S,z,ge,O,ie,le,$,B,re]),_e=te.useMemo(()=>({activatorEvent:D,activators:Ne,active:T,activeNodeRect:V,ariaDescribedById:{draggable:I},dispatch:f,draggableNodes:b,over:ge,measureDroppableContainers:O}),[D,Ne,T,V,f,I,b,ge,O]);return ne.createElement(Dc.Provider,{value:j},ne.createElement(xd.Provider,{value:_e},ne.createElement(pd.Provider,{value:be},ne.createElement(yd.Provider,{value:ve},c)),ne.createElement(jd,{disabled:!1===(null==i?void 0:i.restoreFocus)})),ne.createElement(Ic,{...i,hiddenTextDescribedById:I}))}),_d=te.createContext(null),Sd="button";function kd(e){let{id:s,data:t,disabled:a=!1,attributes:r}=e;const n=yc("Draggable"),{activators:i,activatorEvent:l,active:c,activeNodeRect:o,ariaDescribedById:d,draggableNodes:m,over:u}=te.useContext(xd),{role:h=Sd,roleDescription:x="draggable",tabIndex:p=0}=null!=r?r:{},f=(null==c?void 0:c.id)===s,g=te.useContext(f?yd:_d),[j,v]=gc(),[y,w]=gc(),N=function(e,s){return te.useMemo(()=>e.reduce((e,t)=>{let{eventName:a,handler:r}=t;return e[a]=e=>{r(e,s)},e},{}),[e,s])}(i,s),b=pc(t);hc(()=>(m.set(s,{id:s,key:n,node:j,activatorNode:y,data:b}),()=>{const e=m.get(s);e&&e.key===n&&m.delete(s)}),[m,s]);return{active:c,activatorEvent:l,activeNodeRect:o,attributes:te.useMemo(()=>({role:h,tabIndex:p,"aria-disabled":a,"aria-pressed":!(!f||h!==Sd)||void 0,"aria-roledescription":x,"aria-describedby":d.draggable}),[a,h,p,f,x,d.draggable]),isDragging:f,listeners:a?void 0:N,node:j,over:u,setNodeRef:v,setActivatorNodeRef:w,transform:g}}function Cd(){return te.useContext(pd)}const Td={timeout:25};function Ed(e){let{animation:s,children:t}=e;const[a,r]=te.useState(null),[n,i]=te.useState(null),l=jc(t);return t||a||!l||r(l),hc(()=>{if(!n)return;const e=null==a?void 0:a.key,t=null==a?void 0:a.props.id;null!=e&&null!=t?Promise.resolve(s(t,n)).then(()=>{r(null)}):r(null)},[s,a,n]),ne.createElement(ne.Fragment,null,t,a?te.cloneElement(a,{ref:i}):null)}const Pd={x:0,y:0,scaleX:1,scaleY:1};function Rd(e){let{children:s}=e;return ne.createElement(xd.Provider,{value:hd},ne.createElement(yd.Provider,{value:Pd},s))}const Dd={position:"fixed",touchAction:"none"},Fd=e=>_c(e)?"transform 250ms ease":void 0,Md=te.forwardRef((e,s)=>{let{as:t,activatorEvent:a,adjustScale:r,children:n,className:i,rect:l,style:c,transform:o,transition:d=Fd}=e;if(!l)return null;const m=r?o:{...o,scaleX:1,scaleY:1},u={...Dd,width:l.width,height:l.height,top:l.top,left:l.left,transform:kc.Transform.toString(m),transformOrigin:r&&a?Wc(a,l):void 0,transition:"function"==typeof d?d(a):d,...c};return ne.createElement(t,{className:i,style:u,ref:s},n)}),Id={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:s,final:t}}=e;return[{transform:kc.Transform.toString(s)},{transform:kc.Transform.toString(t)}]},sideEffects:(e=>s=>{let{active:t,dragOverlay:a}=s;const r={},{styles:n,className:i}=e;if(null!=n&&n.active)for(const[e,l]of Object.entries(n.active))void 0!==l&&(r[e]=t.node.style.getPropertyValue(e),t.node.style.setProperty(e,l));if(null!=n&&n.dragOverlay)for(const[e,l]of Object.entries(n.dragOverlay))void 0!==l&&a.node.style.setProperty(e,l);return null!=i&&i.active&&t.node.classList.add(i.active),null!=i&&i.dragOverlay&&a.node.classList.add(i.dragOverlay),function(){for(const[e,s]of Object.entries(r))t.node.style.setProperty(e,s);null!=i&&i.active&&t.node.classList.remove(i.active)}})({styles:{active:{opacity:"0"}}})};function Ad(e){let{config:s,draggableNodes:t,droppableContainers:a,measuringConfiguration:r}=e;return xc((e,n)=>{if(null===s)return;const i=t.get(e);if(!i)return;const l=i.node.current;if(!l)return;const c=ld(n);if(!c)return;const{transform:o}=cc(n).getComputedStyle(n),d=so(o);if(!d)return;const m="function"==typeof s?s:function(e){const{duration:s,easing:t,sideEffects:a,keyframes:r}={...Id,...e};return e=>{let{active:n,dragOverlay:i,transform:l,...c}=e;if(!s)return;const o={x:i.rect.left-n.rect.left,y:i.rect.top-n.rect.top},d={scaleX:1!==l.scaleX?n.rect.width*l.scaleX/i.rect.width:1,scaleY:1!==l.scaleY?n.rect.height*l.scaleY/i.rect.height:1},m={x:l.x-o.x,y:l.y-o.y,...d},u=r({...c,active:n,dragOverlay:i,transform:{initial:l,final:m}}),[h]=u,x=u[u.length-1];if(JSON.stringify(h)===JSON.stringify(x))return;const p=null==a?void 0:a({active:n,dragOverlay:i,...c}),f=i.node.animate(u,{duration:s,easing:t,fill:"forwards"});return new Promise(e=>{f.onfinish=()=>{null==p||p(),e()}})}}(s);return yo(l,r.draggable.measure),m({active:{id:e,data:i.data,node:l,rect:r.draggable.measure(l)},draggableNodes:t,dragOverlay:{node:n,rect:r.dragOverlay.measure(c)},droppableContainers:a,measuringConfiguration:r,transform:d})})}let $d=0;const Ld=ne.memo(e=>{let{adjustScale:s=!1,children:t,dropAnimation:a,style:r,transition:n,modifiers:i,wrapperElement:l="div",className:c,zIndex:o=999}=e;const{activatorEvent:d,active:m,activeNodeRect:u,containerNodeRect:h,draggableNodes:x,droppableContainers:p,dragOverlay:f,over:g,measuringConfiguration:j,scrollableAncestors:v,scrollableAncestorRects:y,windowRect:w}=Cd(),N=te.useContext(yd),b=(_=null==m?void 0:m.id,te.useMemo(()=>{if(null!=_)return $d++,$d},[_]));var _;const S=vd(i,{activatorEvent:d,active:m,activeNodeRect:u,containerNodeRect:h,draggingNodeRect:f.rect,over:g,overlayNodeRect:f.rect,scrollableAncestors:v,scrollableAncestorRects:y,transform:N,windowRect:w}),k=Zo(u),C=Ad({config:a,draggableNodes:x,droppableContainers:p,measuringConfiguration:j}),T=k?f.setRef:void 0;return ne.createElement(Rd,null,ne.createElement(Ed,{animation:C},m&&b?ne.createElement(Md,{key:b,id:m.id,ref:T,as:l,activatorEvent:d,adjustScale:s,className:c,transition:n,rect:k,style:{zIndex:o,...r},transform:S},t):null))});function zd(e,s,t){const a=e.slice();return a.splice(t<0?a.length+t:t,0,a.splice(s,1)[0]),a}function Od(e,s){return e.reduce((e,t,a)=>{const r=s.get(t);return r&&(e[a]=r),e},Array(e.length))}function Bd(e){return null!==e&&e>=0}const qd=e=>{let{rects:s,activeIndex:t,overIndex:a,index:r}=e;const n=zd(s,a,t),i=s[r],l=n[r];return l&&i?{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}:null},Wd="Sortable",Ud=ne.createContext({activeIndex:-1,containerId:Wd,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:qd,disabled:{draggable:!1,droppable:!1}});function Hd(e){let{children:s,id:t,items:a,strategy:r=qd,disabled:n=!1}=e;const{active:i,dragOverlay:l,droppableRects:c,over:o,measureDroppableContainers:d}=Cd(),m=yc(Wd,t),u=Boolean(null!==l.rect),h=te.useMemo(()=>a.map(e=>"object"==typeof e&&"id"in e?e.id:e),[a]),x=null!=i,p=i?h.indexOf(i.id):-1,f=o?h.indexOf(o.id):-1,g=te.useRef(h),j=!function(e,s){if(e===s)return!0;if(e.length!==s.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==s[t])return!1;return!0}(h,g.current),v=-1!==f&&-1===p||j,y=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(n);hc(()=>{j&&x&&d(h)},[j,h,x,d]),te.useEffect(()=>{g.current=h},[h]);const w=te.useMemo(()=>({activeIndex:p,containerId:m,disabled:y,disableTransforms:v,items:h,overIndex:f,useDragOverlay:u,sortedRects:Od(h,c),strategy:r}),[p,m,y.draggable,y.droppable,v,h,f,c,u,r]);return ne.createElement(Ud.Provider,{value:w},s)}const Vd=e=>{let{id:s,items:t,activeIndex:a,overIndex:r}=e;return zd(t,a,r).indexOf(s)},Yd=e=>{let{containerId:s,isSorting:t,wasDragging:a,index:r,items:n,newIndex:i,previousItems:l,previousContainerId:c,transition:o}=e;return!(!o||!a)&&((l===n||r!==i)&&(!!t||i!==r&&s===c))},Kd={duration:200,easing:"ease"},Jd="transform",Gd=kc.Transition.toString({property:Jd,duration:0,easing:"linear"}),Xd={roleDescription:"sortable"};function Qd(e){let{animateLayoutChanges:s=Yd,attributes:t,disabled:a,data:r,getNewIndex:n=Vd,id:i,strategy:l,resizeObserverConfig:c,transition:o=Kd}=e;const{items:d,containerId:m,activeIndex:u,disabled:h,disableTransforms:x,sortedRects:p,overIndex:f,useDragOverlay:g,strategy:j}=te.useContext(Ud),v=function(e,s){var t,a;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(t=null==e?void 0:e.draggable)?t:s.draggable,droppable:null!=(a=null==e?void 0:e.droppable)?a:s.droppable}}(a,h),y=d.indexOf(i),w=te.useMemo(()=>({sortable:{containerId:m,index:y,items:d},...r}),[m,r,y,d]),N=te.useMemo(()=>d.slice(d.indexOf(i)),[d,i]),{rect:b,node:_,isOver:S,setNodeRef:k}=function(e){let{data:s,disabled:t=!1,id:a,resizeObserverConfig:r}=e;const n=yc("Droppable"),{active:i,dispatch:l,over:c,measureDroppableContainers:o}=te.useContext(xd),d=te.useRef({disabled:t}),m=te.useRef(!1),u=te.useRef(null),h=te.useRef(null),{disabled:x,updateMeasurementsFor:p,timeout:f}={...Td,...r},g=pc(null!=p?p:a),j=ed({callback:te.useCallback(()=>{m.current?(null!=h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{o(Array.isArray(g.current)?g.current:[g.current]),h.current=null},f)):m.current=!0},[f]),disabled:x||!i}),v=te.useCallback((e,s)=>{j&&(s&&(j.unobserve(s),m.current=!1),e&&j.observe(e))},[j]),[y,w]=gc(v),N=pc(s);return te.useEffect(()=>{j&&y.current&&(j.disconnect(),m.current=!1,j.observe(y.current))},[y,j]),te.useEffect(()=>(l({type:Ac.RegisterDroppable,element:{id:a,key:n,disabled:t,node:y,rect:u,data:N}}),()=>l({type:Ac.UnregisterDroppable,key:n,id:a})),[a]),te.useEffect(()=>{t!==d.current.disabled&&(l({type:Ac.SetDroppableDisabled,id:a,key:n,disabled:t}),d.current.disabled=t)},[a,n,t,l]),{active:i,rect:u,isOver:(null==c?void 0:c.id)===a,node:y,over:c,setNodeRef:w}}({id:i,data:w,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...c}}),{active:C,activatorEvent:T,activeNodeRect:E,attributes:P,setNodeRef:R,listeners:D,isDragging:F,over:M,setActivatorNodeRef:I,transform:A}=kd({id:i,data:w,attributes:{...Xd,...t},disabled:v.draggable}),$=function(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return te.useMemo(()=>e=>{s.forEach(s=>s(e))},s)}(k,R),L=Boolean(C),z=L&&!x&&Bd(u)&&Bd(f),O=!g&&F,B=O&&z?A:null,q=z?null!=B?B:(null!=l?l:j)({rects:p,activeNodeRect:E,activeIndex:u,overIndex:f,index:y}):null,W=Bd(u)&&Bd(f)?n({id:i,items:d,activeIndex:u,overIndex:f}):y,U=null==C?void 0:C.id,H=te.useRef({activeId:U,items:d,newIndex:W,containerId:m}),V=d!==H.current.items,Y=s({active:C,containerId:m,isDragging:F,isSorting:L,id:i,index:y,items:d,newIndex:H.current.newIndex,previousItems:H.current.items,previousContainerId:H.current.containerId,transition:o,wasDragging:null!=H.current.activeId}),K=function(e){let{disabled:s,index:t,node:a,rect:r}=e;const[n,i]=te.useState(null),l=te.useRef(t);return hc(()=>{if(!s&&t!==l.current&&a.current){const e=r.current;if(e){const s=ao(a.current,{ignoreTransform:!0}),t={x:e.left-s.left,y:e.top-s.top,scaleX:e.width/s.width,scaleY:e.height/s.height};(t.x||t.y)&&i(t)}}t!==l.current&&(l.current=t)},[s,t,a,r]),te.useEffect(()=>{n&&i(null)},[n]),n}({disabled:!Y,index:y,node:_,rect:b});return te.useEffect(()=>{L&&H.current.newIndex!==W&&(H.current.newIndex=W),m!==H.current.containerId&&(H.current.containerId=m),d!==H.current.items&&(H.current.items=d)},[L,W,m,d]),te.useEffect(()=>{if(U===H.current.activeId)return;if(null!=U&&null==H.current.activeId)return void(H.current.activeId=U);const e=setTimeout(()=>{H.current.activeId=U},50);return()=>clearTimeout(e)},[U]),{active:C,activeIndex:u,attributes:P,data:w,rect:b,index:y,newIndex:W,items:d,isOver:S,isSorting:L,isDragging:F,listeners:D,node:_,overIndex:f,over:M,setNodeRef:$,setActivatorNodeRef:I,setDroppableNodeRef:k,setDraggableNodeRef:R,transform:null!=K?K:q,transition:function(){if(K||V&&H.current.newIndex===y)return Gd;if(O&&!_c(T)||!o)return;if(L||Y)return kc.Transition.toString({...o,property:Jd});return}()}}function Zd(e){if(!e)return!1;const s=e.data.current;return!!(s&&"sortable"in s&&"object"==typeof s.sortable&&"containerId"in s.sortable&&"items"in s.sortable&&"index"in s.sortable)}const em=[Co.Down,Co.Right,Co.Up,Co.Left],sm=(e,s)=>{let{context:{active:t,collisionRect:a,droppableRects:r,droppableContainers:n,over:i,scrollableAncestors:l}}=s;if(em.includes(e.code)){if(e.preventDefault(),!t||!a)return;const s=[];n.getEnabled().forEach(t=>{if(!t||null!=t&&t.disabled)return;const n=r.get(t.id);if(n)switch(e.code){case Co.Down:a.top<n.top&&s.push(t);break;case Co.Up:a.top>n.top&&s.push(t);break;case Co.Left:a.left>n.left&&s.push(t);break;case Co.Right:a.left<n.left&&s.push(t)}});const c=(e=>{let{collisionRect:s,droppableRects:t,droppableContainers:a}=e;const r=Vc(s),n=[];for(const i of a){const{id:e}=i,s=t.get(e);if(s){const t=Vc(s),a=r.reduce((e,s,a)=>e+qc(t[a],s),0),l=Number((a/4).toFixed(4));n.push({id:e,data:{droppableContainer:i,value:l}})}}return n.sort(Uc)})({collisionRect:a,droppableRects:r,droppableContainers:s});let o=Yc(c,"id");if(o===(null==i?void 0:i.id)&&c.length>1&&(o=c[1].id),null!=o){const e=n.get(t.id),s=n.get(o),i=s?r.get(s.id):null,c=null==s?void 0:s.node.current;if(c&&i&&e&&s){const t=no(c).some((e,s)=>l[s]!==e),r=tm(e,s),n=function(e,s){if(!Zd(e)||!Zd(s))return!1;if(!tm(e,s))return!1;return e.data.current.sortable.index<s.data.current.sortable.index}(e,s),o=t||!r?{x:0,y:0}:{x:n?a.width-i.width:0,y:n?a.height-i.height:0},d={x:i.left,y:i.top};return o.x&&o.y?d:bc(d,o)}}}};function tm(e,s){return!(!Zd(e)||!Zd(s))&&e.data.current.sortable.containerId===s.data.current.sortable.containerId}const am=({team:e,matchupId:s,teamPosition:t,isWinner:a,allTeams:r,onTeamChange:n})=>{var l;const[c,o]=te.useState(!1),[d,m]=te.useState((null==(l=null==e?void 0:e.id)?void 0:l.toString())||"");te.useEffect(()=>{var s;m((null==(s=null==e?void 0:e.id)?void 0:s.toString())||"")},[null==e?void 0:e.id]);const u=()=>{const a=parseInt(d);a&&a!==(null==e?void 0:e.id)&&n(s,t,a),o(!1)},h=()=>{var s;m((null==(s=null==e?void 0:e.id)?void 0:s.toString())||""),o(!1)},x=`${s}-${t}`,{attributes:p,listeners:f,setNodeRef:g,transform:j,transition:v,isDragging:y}=Qd({id:x,data:{type:"team",team:e,matchupId:s,teamPosition:t}}),w={transform:kc.Transform.toString(j),transition:v,opacity:y?.5:1};return c?i.jsxs("div",{className:"flex items-center gap-2 p-2 rounded border border-blue-200 bg-blue-50",children:[i.jsx("div",{className:"flex-1",children:i.jsxs(Dr,{value:d,onValueChange:m,children:[i.jsx(Mr,{className:"h-8 text-xs",children:i.jsx(Fr,{placeholder:"Select team..."})}),i.jsx($r,{children:r.map(e=>i.jsx(Lr,{value:e.id.toString(),children:i.jsxs("div",{className:"flex items-center gap-2",children:[e.team_logo_url&&i.jsx("img",{src:e.team_logo_url,alt:e.team_name,className:"w-4 h-4 rounded-full"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-medium",children:e.team_name}),i.jsx("div",{className:"text-xs text-gray-500",children:e.owner_name})]})]})},e.id))})]})}),i.jsx(Sr,{size:"sm",onClick:u,className:"h-6 w-6 p-0",children:i.jsx(Ps,{className:"h-3 w-3"})}),i.jsx(Sr,{size:"sm",variant:"ghost",onClick:h,className:"h-6 w-6 p-0",children:i.jsx(Et,{className:"h-3 w-3"})})]}):i.jsxs("div",{ref:g,style:w,className:`flex items-center gap-2 p-2 rounded transition-colors group\n        ${y?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}\n        ${a?"bg-green-50 border border-green-200":""}\n      `,children:[i.jsx("div",{...p,...f,className:"cursor-grab hover:cursor-grabbing",children:i.jsx(Vs,{className:"h-3 w-3 text-gray-400"})}),(null==e?void 0:e.team_logo_url)&&i.jsx("img",{src:e.team_logo_url,alt:e.team_name,className:"w-5 h-5 rounded-full"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium truncate",children:(null==e?void 0:e.team_name)||"Team "+("team1"===t?"1":"2")}),i.jsx("div",{className:"text-xs text-gray-500 truncate",children:null==e?void 0:e.owner_name})]}),i.jsx(Sr,{size:"sm",variant:"ghost",onClick:()=>o(!0),className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(pt,{className:"h-3 w-3"})})]})},rm=({matchup:e,teams:s,allTeams:t,conferences:a,onToggleOverride:r,onUpdateScores:n,onTeamChange:l})=>{const c=s.find(s=>s.id===e.team1_id),o=s.find(s=>s.id===e.team2_id);a.find(s=>s.id===e.conference_id);const[d,m]=te.useState(!1),[u,h]=te.useState(e.team1_score),[x,p]=te.useState(e.team2_score);te.useEffect(()=>{h(e.team1_score),p(e.team2_score)},[e.team1_score,e.team2_score]);const f=e.winning_team_id===e.team1_id,g=e.winning_team_id===e.team2_id;return i.jsxs(hn,{className:"transition-colors "+(e.manual_override?"bg-orange-50 border-orange-200":""),children:[i.jsx(pn,{className:"w-24",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-sm font-medium",children:["#",e.id]}),i.jsx("div",{className:"flex flex-col gap-1",children:e.manual_override&&i.jsx(Or,{variant:"outline",className:"text-xs text-orange-600 border-orange-300 px-1 py-0",children:"Override"})})]})}),i.jsx(pn,{className:"w-48",children:i.jsx(am,{team:c,matchupId:e.id,teamPosition:"team1",isWinner:f,allTeams:t,onTeamChange:l})}),i.jsx(pn,{className:"w-32 text-center",children:d?i.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[i.jsx(Hi,{type:"number",value:u,onChange:e=>h(parseFloat(e.target.value)||0),className:"w-12 h-6 text-xs text-center px-1",step:"0.1"}),i.jsx("span",{className:"text-xs text-gray-400",children:"-"}),i.jsx(Hi,{type:"number",value:x,onChange:e=>p(parseFloat(e.target.value)||0),className:"w-12 h-6 text-xs text-center px-1",step:"0.1"}),i.jsx(Sr,{size:"sm",onClick:()=>{n(e.id,u,x),m(!1)},className:"h-6 w-6 p-0",children:i.jsx(Ps,{className:"h-3 w-3"})}),i.jsx(Sr,{size:"sm",variant:"ghost",onClick:()=>{h(e.team1_score),p(e.team2_score),m(!1)},className:"h-6 w-6 p-0",children:i.jsx(Et,{className:"h-3 w-3"})})]}):i.jsxs("div",{className:"flex items-center gap-1 justify-center cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",onClick:()=>m(!0),children:[i.jsx("span",{className:"text-sm font-bold "+(f?"text-green-600":""),children:e.team1_score}),i.jsx("span",{className:"text-xs text-gray-400",children:"-"}),i.jsx("span",{className:"text-sm font-bold "+(g?"text-green-600":""),children:e.team2_score}),i.jsx(pt,{className:"h-3 w-3 text-gray-400 ml-1"})]})}),i.jsx(pn,{className:"w-48",children:i.jsx(am,{team:o,matchupId:e.id,teamPosition:"team2",isWinner:g,allTeams:t,onTeamChange:l})}),i.jsx(pn,{className:"w-24",children:i.jsx("div",{className:"text-xs text-gray-500 text-center",children:e.matchup_status})}),i.jsx(pn,{className:"w-24 text-center",children:i.jsx(Sr,{variant:"ghost",size:"sm",onClick:()=>r(e.id),className:"h-6 px-2 text-xs",children:i.jsx(pt,{className:"h-3 w-3"})})})]})},nm=()=>{const[e,s]=te.useState([]),[t,a]=te.useState([]),[r,n]=te.useState([]),[l,c]=te.useState([]),[o,d]=te.useState(""),[m,u]=te.useState(""),[h,x]=te.useState(!1),[p,f]=te.useState(!1),[g,j]=te.useState(!1),[v,y]=te.useState(null),{toast:w}=_e(),N=Oc(zc(Lo),zc(Fo,{coordinateGetter:sm})),b=async(e,s,a,r)=>{var n,i;try{const[a,c]=await Promise.all([vr.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:e}]}),vr.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:s}]})]),o=null==(n=a.data)?void 0:n[0],d=null==(i=c.data)?void 0:i[0];if(!o||!d)return{team1Score:0,team2Score:0};const m=t.find(e=>e.id===o.conference_id),u=t.find(e=>e.id===d.conference_id);if(!m||!u)return{team1Score:0,team2Score:0};let h=0,x=0;try{const e=(await rn.fetchMatchups(m.league_id,r)).find(e=>e.roster_id===o.roster_id);h=(null==e?void 0:e.points)||0}catch(l){}try{const e=(await rn.fetchMatchups(u.league_id,r)).find(e=>e.roster_id===d.roster_id);x=(null==e?void 0:e.points)||0}catch(l){}return{team1Score:h,team2Score:x}}catch(l){return{team1Score:0,team2Score:0}}};te.useEffect(()=>{S(),C(),_()},[]),te.useEffect(()=>{o&&k()},[o]),te.useEffect(()=>{o&&m&&t.length>0&&T()},[o,m,t]);const _=async()=>{try{const e=await rn.getCurrentNFLWeek();u(e<=12?e.toString():"1")}catch(e){u("1")}},S=async()=>{try{const e=await vr.getSeasons({limit:100,orderBy:{column:"season_year",ascending:!1}});if(e.error)throw new Error(e.error);const t=(e.data||[]).map(e=>({id:e.id,season_year:parseInt(e.season_year),season_name:e.season_name,is_current_season:e.is_current}));s(t);const a=t.find(e=>e.is_current_season);a&&d(a.id.toString())}catch(e){w({title:"Error",description:"Failed to load seasons",variant:"destructive"})}},k=async()=>{try{const{data:e,error:s}=await vr.getConferences({filters:[{column:"season_id",operator:"eq",value:parseInt(o)}]});if(s)throw new Error(s);a(e||[])}catch(e){w({title:"Error",description:"Failed to load conferences",variant:"destructive"})}},C=async()=>{try{const e=await vr.getTeams({limit:100,orderBy:{column:"team_name",ascending:!0}});if(e.error)throw new Error(e.error);const s=e.data||[],t=await vr.getTeamConferenceJunctions({limit:1e3,orderBy:{column:"team_id",ascending:!0}});if(t.error)throw new Error(t.error);const a=t.data||[],r=s.map(e=>{const s=a.find(s=>s.team_id===e.id);return{id:e.id,team_name:e.team_name,owner_name:e.owner_name,team_logo_url:e.team_logourl||"",conference_id:(null==s?void 0:s.conference_id)||0}});n(r)}catch(e){w({title:"Error",description:"Failed to load teams",variant:"destructive"})}},T=async()=>{x(!0);try{const e=t.map(e=>e.id),s=[];for(const a of e){const{data:e,error:r}=await vr.getMatchups({filters:[{column:"conference_id",operator:"eq",value:a},{column:"week",operator:"eq",value:parseInt(m)},{column:"is_playoff",operator:"eq",value:!1}],orderBy:{column:"id",ascending:!0}});if(r)throw new Error(r);const n=e||[],i=t.find(e=>e.id===a),l=n.map(e=>({...e,conference_name:null==i?void 0:i.conference_name}));s.push(...l)}s.sort((e,s)=>e.conference_id!==s.conference_id?e.conference_id-s.conference_id:e.id-s.id),c(s)}catch(e){w({title:"Error",description:`Failed to load regular season matchups: ${e}`,variant:"destructive"})}finally{x(!1)}},E=e=>{var s;c(s=>s.map(s=>{if(s.id===e){const e=!s.manual_override;return{...s,manual_override:e,status:e?s.matchup_status:"pending"}}return s})),j(!0),w({title:"Override Toggled",description:`Manual override ${(null==(s=l.find(s=>s.id===e))?void 0:s.manual_override)?"removed":"enabled"} for matchup ${e}`,duration:2e3})},P=(e,s,t)=>{c(a=>a.map(a=>{if(a.id===e){let e=null;return s>t?e=a.team1_id:t>s&&(e=a.team2_id),{...a,team1_score:s,team2_score:t,winning_team_id:e,manual_override:!0,matchup_status:"complete"}}return a})),j(!0),w({title:"Scores Updated",description:`Matchup ${e} scores updated. Remember to save changes.`,duration:2e3})},R=async(e,s,t)=>{c(a=>a.map(a=>{if(a.id===e){const e={...a,manual_override:!0};return"team1"===s?e.team1_id=t:e.team2_id=t,e}return a}));const a=l.find(s=>s.id===e);if(a)try{const r="team1"===s?t:a.team1_id,n="team2"===s?t:a.team2_id,{team1Score:i,team2Score:l}=await b(r,n,a.conference_id,a.week);c(s=>s.map(s=>{if(s.id===e){let e=null;return i>l?e=r:l>i&&(e=n),{...s,team1_score:i,team2_score:l,winning_team_id:e}}return s}))}catch(i){c(s=>s.map(s=>s.id===e?{...s,team1_score:0,team2_score:0,winning_team_id:null}:s))}j(!0);const n=r.find(e=>e.id===t);w({title:"Team Changed",description:`Regular season matchup ${e} ${s} changed to ${null==n?void 0:n.team_name}. Scores updated automatically. Remember to save changes.`,duration:3e3})},D=Array.from({length:12},(e,s)=>s+1);return i.jsxs("div",{className:"space-y-6",children:[i.jsx(qr,{children:i.jsxs(Vr,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Season"}),i.jsxs(Dr,{value:o,onValueChange:d,children:[i.jsx(Mr,{children:i.jsx(Fr,{placeholder:"Select season..."})}),i.jsx($r,{children:e.map(e=>i.jsxs(Lr,{value:e.id.toString(),children:[e.season_name,e.is_current_season&&i.jsx(Or,{variant:"secondary",className:"ml-2",children:"Current"})]},e.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Week (Regular Season)"}),i.jsxs(Dr,{value:m,onValueChange:u,disabled:!o,children:[i.jsx(Mr,{children:i.jsx(Fr,{placeholder:"Select week..."})}),i.jsx($r,{children:D.map(e=>i.jsxs(Lr,{value:e.toString(),children:["Week ",e]},e))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Status"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),i.jsxs("span",{children:[l.length," Total"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),i.jsxs("span",{children:[l.filter(e=>e.manual_override).length," Override"]})]})]})]}),i.jsx("div",{className:"space-y-2 flex items-end",children:g&&i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Sr,{onClick:async()=>{var e;f(!0);let s=0,t=0;const a=[];try{for(const r of l){if(!r.id||r.conference_id<=0||r.week<=0){t++,a.push(r.id);continue}let n=null;r.team1_score>r.team2_score?n=r.team1_id:r.team2_score>r.team1_score&&(n=r.team2_id);const i={conference_id:r.conference_id,week:(null==(e=r.week)?void 0:e.toString())||"1",team1_id:r.team1_id||0,team2_id:r.team2_id||0,is_playoff:!1,team1_score:r.team1_score||0,team2_score:r.team2_score||0,winning_team_id:n,manual_override:r.manual_override||!1,matchup_status:r.manual_override?"complete":r.matchup_status||"pending",notes:r.notes||""};(await vr.updateMatchup(r.id,i)).error?(t++,a.push(r.id)):s++}t>0?w({title:"Partial Success",description:`${s} regular season matchups updated successfully, ${t} failed. Check console for details.`,variant:"destructive"}):(j(!1),w({title:"Success",description:`All ${s} regular season matchups updated successfully`})),await T()}catch(r){w({title:"Error",description:`Failed to save regular season matchup changes: ${r}`,variant:"destructive"})}finally{f(!1)}},disabled:p,className:"flex items-center gap-2",children:[p?i.jsx(Xs,{className:"h-4 w-4 animate-spin"}):i.jsx(dt,{className:"h-4 w-4"}),"Save"]}),i.jsxs(Sr,{variant:"outline",onClick:()=>{T(),j(!1)},className:"flex items-center gap-2",children:[i.jsx(ot,{className:"h-4 w-4"}),"Reset"]})]})})]}),g&&i.jsxs(Kr,{className:"mb-4",children:[i.jsx(_t,{className:"h-4 w-4"}),i.jsx(Gr,{children:"You have unsaved changes. Remember to save your modifications."})]})]})}),h?i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin"}),i.jsx("span",{children:"Loading regular season matchups..."})]})})}):0===l.length&&m?i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Tt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Regular Season Matchups Found"}),i.jsx("p",{className:"text-gray-600",children:"No regular season matchups found for the selected week. They may need to be created first."})]})})}):l.length>0?i.jsx(qr,{children:i.jsx(Vr,{className:"p-0",children:i.jsxs(bd,{sensors:N,collisionDetection:Jc,onDragStart:e=>{y(e.active.id)},onDragEnd:async e=>{const{active:s,over:t}=e;if(y(null),!t||s.id===t.id)return;const a=s.data.current,r=t.data.current;if("team"===(null==a?void 0:a.type)&&"team"===(null==r?void 0:r.type)){const e=a.matchupId,s=a.teamPosition,t=r.matchupId,i=r.teamPosition;if(e===t&&s===i)return;const o=[...l],d=o.find(s=>s.id===e),m=o.find(e=>e.id===t);if(!d||!m)return;const u="team1"===s?d.team1_id:d.team2_id,h="team1"===i?m.team1_id:m.team2_id;"team1"===s?d.team1_id=h:d.team2_id=h,"team1"===i?m.team1_id=u:m.team2_id=u;try{const e=await b(d.team1_id,d.team2_id,d.conference_id,d.week);d.team1_score=e.team1Score,d.team2_score=e.team2Score,e.team1Score>e.team2Score?d.winning_team_id=d.team1_id:e.team2Score>e.team1Score?d.winning_team_id=d.team2_id:d.winning_team_id=null;const s=await b(m.team1_id,m.team2_id,m.conference_id,m.week);m.team1_score=s.team1Score,m.team2_score=s.team2Score,s.team1Score>s.team2Score?m.winning_team_id=m.team1_id:s.team2Score>s.team1Score?m.winning_team_id=m.team2_id:m.winning_team_id=null}catch(n){d.team1_score=0,d.team2_score=0,d.winning_team_id=null,m.team1_score=0,m.team2_score=0,m.winning_team_id=null}d.winning_team_id=null,d.manual_override=!0,d.matchup_status="pending",m.winning_team_id=null,m.manual_override=!0,m.matchup_status="pending",c(o),j(!0),w({title:"Teams Swapped",description:"Team matchups have been updated with current scores. Remember to save your changes.",duration:3e3})}},children:[i.jsx(Hd,{items:l.flatMap(e=>[`${e.id}-team1`,`${e.id}-team2`]),strategy:qd,children:i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{className:"w-24",children:"Match"}),i.jsx(xn,{className:"w-48",children:"Team 1"}),i.jsx(xn,{className:"w-32 text-center",children:"Score"}),i.jsx(xn,{className:"w-48",children:"Team 2"}),i.jsx(xn,{className:"w-24 text-center",children:"Status"}),i.jsx(xn,{className:"w-24 text-center",children:"Actions"})]})}),i.jsx(un,{children:t.map(e=>{const s=l.filter(s=>s.conference_id===e.id);return 0===s.length?null:i.jsxs(ne.Fragment,{children:[i.jsx(hn,{children:i.jsx(pn,{colSpan:6,className:"bg-gray-50 font-medium text-sm py-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tt,{className:"h-4 w-4 text-blue-600"}),e.conference_name,i.jsxs(Or,{variant:"secondary",className:"text-xs",children:[s.length," matchups"]})]})})}),s.map(e=>i.jsx(rm,{matchup:e,teams:r,allTeams:r,conferences:t,onToggleOverride:E,onUpdateScores:P,onTeamChange:R},e.id))]},e.id)})})]})}),i.jsx(Ld,{children:v?i.jsx("div",{className:"bg-white p-2 rounded-lg border-2 border-blue-400 shadow-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx(Tt,{className:"h-2 w-2 text-blue-600"})}),i.jsx("span",{className:"text-xs font-medium",children:"Moving team..."})]})}):null})]})})}):i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Tt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select Filters"}),i.jsx("p",{className:"text-gray-600",children:"Please select a season and week to manage regular season matchups across all conferences."})]})})})]})},im=({team:e,bracketId:s,teamPosition:t,isWinner:a,allTeams:r,onTeamChange:n})=>{var l;const[c,o]=te.useState(!1),[d,m]=te.useState((null==(l=null==e?void 0:e.id)?void 0:l.toString())||"");te.useEffect(()=>{var s;m((null==(s=null==e?void 0:e.id)?void 0:s.toString())||"")},[null==e?void 0:e.id]);const u=()=>{const a=parseInt(d);a&&a!==(null==e?void 0:e.id)&&n(s,t,a),o(!1)},h=()=>{var s;m((null==(s=null==e?void 0:e.id)?void 0:s.toString())||""),o(!1)},x=`${s}-${t}`,{attributes:p,listeners:f,setNodeRef:g,transform:j,transition:v,isDragging:y}=Qd({id:x,data:{type:"team",team:e,bracketId:s,teamPosition:t}}),w={transform:kc.Transform.toString(j),transition:v,opacity:y?.5:1};return c?i.jsxs("div",{className:"flex items-center gap-2 p-2 rounded border border-blue-200 bg-blue-50",children:[i.jsx("div",{className:"flex-1",children:i.jsxs(Dr,{value:d,onValueChange:m,children:[i.jsx(Mr,{className:"h-8 text-xs",children:i.jsx(Fr,{placeholder:"Select team..."})}),i.jsx($r,{children:r.map(e=>i.jsx(Lr,{value:e.id.toString(),children:i.jsxs("div",{className:"flex items-center gap-2",children:[e.team_logo_url&&i.jsx("img",{src:e.team_logo_url,alt:e.team_name,className:"w-4 h-4 rounded-full"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-medium",children:e.team_name}),i.jsx("div",{className:"text-xs text-gray-500",children:e.owner_name})]})]})},e.id))})]})}),i.jsx(Sr,{size:"sm",onClick:u,className:"h-6 w-6 p-0",children:i.jsx(Ps,{className:"h-3 w-3"})}),i.jsx(Sr,{size:"sm",variant:"ghost",onClick:h,className:"h-6 w-6 p-0",children:i.jsx(Et,{className:"h-3 w-3"})})]}):i.jsxs("div",{ref:g,style:w,className:`flex items-center gap-2 p-2 rounded transition-colors group\n        ${y?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}\n        ${a?"bg-green-50 border border-green-200":""}\n      `,children:[i.jsx("div",{...p,...f,className:"cursor-grab hover:cursor-grabbing",children:i.jsx(Vs,{className:"h-3 w-3 text-gray-400"})}),(null==e?void 0:e.team_logo_url)&&i.jsx("img",{src:e.team_logo_url,alt:e.team_name,className:"w-5 h-5 rounded-full"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium truncate",children:(null==e?void 0:e.team_name)||"Team "+("team1"===t?"1":"2")}),i.jsx("div",{className:"text-xs text-gray-500 truncate",children:null==e?void 0:e.owner_name})]}),i.jsx(Sr,{size:"sm",variant:"ghost",onClick:()=>o(!0),className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(pt,{className:"h-3 w-3"})})]})},lm=({bracket:e,teams:s,allTeams:t,onToggleOverride:a,onUpdateScores:r,onUpdateTeams:n,onTeamChange:l})=>{const c=s.find(s=>s.id===e.team1_id),o=s.find(s=>s.id===e.team2_id),[d,m]=te.useState(!1),[u,h]=te.useState(e.team1_score||0),[x,p]=te.useState(e.team2_score||0);te.useEffect(()=>{h(e.team1_score||0),p(e.team2_score||0)},[e.team1_score,e.team2_score]);const f=e.winning_team_id===e.team1_id,g=e.winning_team_id===e.team2_id;return i.jsxs(hn,{className:"transition-colors "+(e.manual_override?"bg-orange-50 border-orange-200":""),children:[i.jsx(pn,{className:"w-32",children:i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsxs("span",{className:"text-sm font-medium",children:["#",e.id]}),i.jsx("div",{className:"text-xs text-gray-500",children:e.playoff_round_name||`Round ${e.round}`}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Week ",e.week]}),e.manual_override&&i.jsx(Or,{variant:"outline",className:"text-xs text-orange-600 border-orange-300 px-1 py-0",children:"Override"}),e.is_bye&&i.jsx(Or,{variant:"secondary",className:"text-xs px-1 py-0",children:"Bye"})]})}),i.jsx(pn,{className:"w-48",children:i.jsx(im,{team:c,bracketId:e.id,teamPosition:"team1",isWinner:f,allTeams:t,onTeamChange:l})}),i.jsx(pn,{className:"w-32 text-center",children:d?i.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[i.jsx(Hi,{type:"number",value:u,onChange:e=>h(parseFloat(e.target.value)||0),className:"w-12 h-6 text-xs text-center px-1",step:"0.1"}),i.jsx("span",{className:"text-xs text-gray-400",children:"-"}),i.jsx(Hi,{type:"number",value:x,onChange:e=>p(parseFloat(e.target.value)||0),className:"w-12 h-6 text-xs text-center px-1",step:"0.1"}),i.jsx(Sr,{size:"sm",onClick:()=>{r(e.id,u,x),m(!1)},className:"h-6 w-6 p-0",children:i.jsx(Ps,{className:"h-3 w-3"})}),i.jsx(Sr,{size:"sm",variant:"ghost",onClick:()=>{h(e.team1_score||0),p(e.team2_score||0),m(!1)},className:"h-6 w-6 p-0",children:i.jsx(Et,{className:"h-3 w-3"})})]}):i.jsxs("div",{className:"flex items-center gap-1 justify-center cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",onClick:()=>m(!0),children:[i.jsx("span",{className:"text-sm font-bold "+(f?"text-green-600":""),children:e.team1_score||0}),i.jsx("span",{className:"text-xs text-gray-400",children:"-"}),i.jsx("span",{className:"text-sm font-bold "+(g?"text-green-600":""),children:e.team2_score||0}),i.jsx(pt,{className:"h-3 w-3 text-gray-400 ml-1"})]})}),i.jsx(pn,{className:"w-48",children:i.jsx(im,{team:o,bracketId:e.id,teamPosition:"team2",isWinner:g,allTeams:t,onTeamChange:l})}),i.jsx(pn,{className:"w-24 text-center",children:i.jsxs("div",{className:"text-xs text-gray-500",children:[i.jsxs("div",{children:["#",e.team1_seed]}),i.jsx("div",{children:"vs"}),i.jsxs("div",{children:["#",e.team2_seed]})]})}),i.jsx(pn,{className:"w-24 text-center",children:i.jsx(Sr,{variant:"ghost",size:"sm",onClick:()=>a(e.id),className:"h-6 px-2 text-xs",children:i.jsx(pt,{className:"h-3 w-3"})})})]})},cm=()=>{const[e,s]=te.useState([]),[t,a]=te.useState([]),[r,n]=te.useState([]),[l,c]=te.useState(""),[o,d]=te.useState(""),[m,u]=te.useState(!1),[h,x]=te.useState(!1),[p,f]=te.useState(!1),[g,j]=te.useState(null),{toast:v}=_e(),y=Oc(zc(Lo),zc(Fo,{coordinateGetter:sm})),w=async(e,s,t)=>{var a,r,n,i;try{const[c,o]=await Promise.all([vr.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:e}]}),vr.getTeamConferenceJunctions({filters:[{column:"team_id",operator:"eq",value:s}]})]),d=null==(a=c.data)?void 0:a[0],m=null==(r=o.data)?void 0:r[0];if(!d||!m)return{team1Score:0,team2Score:0};const[u,h]=await Promise.all([vr.getConferences({filters:[{column:"id",operator:"eq",value:d.conference_id}]}),vr.getConferences({filters:[{column:"id",operator:"eq",value:m.conference_id}]})]),x=null==(n=u.data)?void 0:n[0],p=null==(i=h.data)?void 0:i[0];if(!x||!p)return{team1Score:0,team2Score:0};let f=0,g=0;const{SleeperApiService:j}=await xe(async()=>{const{SleeperApiService:e}=await Promise.resolve().then(()=>nn);return{SleeperApiService:e}},void 0);try{const e=(await j.fetchMatchups(x.league_id,t)).find(e=>e.roster_id===d.roster_id);f=(null==e?void 0:e.points)||0}catch(l){}try{const e=(await j.fetchMatchups(p.league_id,t)).find(e=>e.roster_id===m.roster_id);g=(null==e?void 0:e.points)||0}catch(l){}return{team1Score:f,team2Score:g}}catch(l){return{team1Score:0,team2Score:0}}};te.useEffect(()=>{b(),_(),N()},[]),te.useEffect(()=>{l&&o&&S()},[l,o]);const N=async()=>{try{d("14")}catch(e){d("14")}},b=async()=>{try{const e=await vr.getSeasons({limit:100,orderBy:{column:"season_year",ascending:!1}});if(e.error)throw new Error(e.error);const t=(e.data||[]).map(e=>({id:e.id,season_year:parseInt(e.season_year),season_name:e.season_name,is_current_season:e.is_current}));s(t);const a=t.find(e=>e.is_current_season);a&&c(a.id.toString())}catch(e){v({title:"Error",description:"Failed to load seasons",variant:"destructive"})}},_=async()=>{try{const e=await vr.getTeams({limit:100,orderBy:{column:"team_name",ascending:!0}});if(e.error)throw new Error(e.error);const s=(e.data||[]).map(e=>({id:e.id,team_name:e.team_name,owner_name:e.owner_name,team_logo_url:e.team_logourl||""}));a(s)}catch(e){v({title:"Error",description:"Failed to load teams",variant:"destructive"})}},S=async()=>{u(!0);try{const{data:e,error:s}=await vr.getPlayoffBrackets({filters:[{column:"season_id",operator:"eq",value:parseInt(l)},{column:"week",operator:"eq",value:parseInt(o)}],orderBy:{column:"matchup_number",ascending:!0}});if(s)throw new Error(s);const t=(e||[]).map(e=>({...e,manual_override:!1}));n(t)}catch(e){v({title:"Error",description:`Failed to load playoff brackets: ${e}`,variant:"destructive"})}finally{u(!1)}},k=e=>{var s;n(s=>s.map(s=>{if(s.id===e){const e=!s.manual_override;return{...s,manual_override:e}}return s})),f(!0),v({title:"Override Toggled",description:`Manual override ${(null==(s=r.find(s=>s.id===e))?void 0:s.manual_override)?"removed":"enabled"} for playoff bracket ${e}`,duration:2e3})},C=(e,s,t)=>{n(a=>a.map(a=>{if(a.id===e){let e=null;return s>t?e=a.team1_id:t>s&&(e=a.team2_id),{...a,team1_score:s,team2_score:t,winning_team_id:e,manual_override:!0}}return a})),f(!0),v({title:"Playoff Scores Updated",description:`Playoff bracket ${e} scores updated. Remember to save changes.`,duration:2e3})},T=(e,s,t)=>{n(a=>a.map(a=>a.id===e?{...a,team1_id:s,team2_id:t,manual_override:!0}:a)),f(!0)},E=async(e,s,a)=>{n(t=>t.map(t=>{if(t.id===e){const e={...t,manual_override:!0};return"team1"===s?e.team1_id=a:e.team2_id=a,e}return t}));const i=r.find(s=>s.id===e);if(i)try{const t="team1"===s?a:i.team1_id,r="team2"===s?a:i.team2_id,{team1Score:l,team2Score:c}=await w(t,r,i.week);n(s=>s.map(s=>{if(s.id===e){let e=null;return l>c?e=t:c>l&&(e=r),{...s,team1_score:l,team2_score:c,winning_team_id:e}}return s}))}catch(c){n(s=>s.map(s=>s.id===e?{...s,team1_score:0,team2_score:0,winning_team_id:null}:s))}f(!0);const l=t.find(e=>e.id===a);v({title:"Team Changed",description:`Playoff bracket ${e} ${s} changed to ${null==l?void 0:l.team_name}. Scores updated automatically. Remember to save changes.`,duration:3e3})},P=Array.from({length:6},(e,s)=>s+13);return i.jsxs("div",{className:"space-y-6",children:[i.jsx(qr,{children:i.jsxs(Vr,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Season"}),i.jsxs(Dr,{value:l,onValueChange:c,children:[i.jsx(Mr,{children:i.jsx(Fr,{placeholder:"Select season..."})}),i.jsx($r,{children:e.map(e=>i.jsxs(Lr,{value:e.id.toString(),children:[e.season_name,e.is_current_season&&i.jsx(Or,{variant:"secondary",className:"ml-2",children:"Current"})]},e.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Week (Playoffs)"}),i.jsxs(Dr,{value:o,onValueChange:d,disabled:!l,children:[i.jsx(Mr,{children:i.jsx(Fr,{placeholder:"Select week..."})}),i.jsx($r,{children:P.map(e=>i.jsxs(Lr,{value:e.toString(),children:["Week ",e]},e))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Status"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),i.jsxs("span",{children:[r.length," Total"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),i.jsxs("span",{children:[r.filter(e=>e.manual_override).length," Override"]})]})]})]}),i.jsx("div",{className:"space-y-2 flex items-end",children:p&&i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Sr,{onClick:async()=>{x(!0);let e=0,s=0;const t=[];try{for(const a of r){if(!a.id||a.season_id<=0){s++,t.push(a.id);continue}let r=null;a.team1_score&&a.team2_score&&(a.team1_score>a.team2_score?r=a.team1_id:a.team2_score>a.team1_score&&(r=a.team2_id));const n={season_id:a.season_id,round:a.round,team1_seed:a.team1_seed,team2_seed:a.team2_seed,team1_id:a.team1_id,team2_id:a.team2_id,winning_team_id:r,playoff_round_name:a.playoff_round_name||null,is_bye:a.is_bye||!1,matchup_number:a.matchup_number||null,week:a.week,team1_score:a.team1_score||0,team2_score:a.team2_score||0};(await vr.updatePlayoffBracket(a.id,n)).error?(s++,t.push(a.id)):e++}s>0?v({title:"Partial Success",description:`${e} playoff brackets updated successfully, ${s} failed. Check console for details.`,variant:"destructive"}):(f(!1),v({title:"Success",description:`All ${e} playoff brackets updated successfully`})),await S()}catch(a){v({title:"Error",description:`Failed to save playoff bracket changes: ${a}`,variant:"destructive"})}finally{x(!1)}},disabled:h,className:"flex items-center gap-2",children:[h?i.jsx(Xs,{className:"h-4 w-4 animate-spin"}):i.jsx(dt,{className:"h-4 w-4"}),"Save"]}),i.jsxs(Sr,{variant:"outline",onClick:()=>{S(),f(!1)},className:"flex items-center gap-2",children:[i.jsx(ot,{className:"h-4 w-4"}),"Reset"]})]})})]}),p&&i.jsxs(Kr,{className:"mb-4",children:[i.jsx(_t,{className:"h-4 w-4"}),i.jsx(Gr,{children:"You have unsaved changes. Remember to save your modifications."})]})]})}),m?i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xs,{className:"h-6 w-6 animate-spin"}),i.jsx("span",{children:"Loading playoff brackets..."})]})})}):0===r.length&&o?i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx(St,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Playoff Brackets Found"}),i.jsx("p",{className:"text-gray-600",children:"No playoff brackets found for the selected week. They may need to be created first."})]})})}):r.length>0?i.jsx(qr,{children:i.jsx(Vr,{className:"p-0",children:i.jsxs(bd,{sensors:y,collisionDetection:Jc,onDragStart:e=>{j(e.active.id)},onDragEnd:async e=>{const{active:s,over:t}=e;if(j(null),!t||s.id===t.id)return;const a=s.data.current,i=t.data.current;if("team"===(null==a?void 0:a.type)&&"team"===(null==i?void 0:i.type)){const e=a.bracketId,s=a.teamPosition,t=i.bracketId,c=i.teamPosition;if(e===t&&s===c)return;const o=[...r],d=o.find(s=>s.id===e),m=o.find(e=>e.id===t);if(!d||!m)return;const u="team1"===s?d.team1_id:d.team2_id,h="team1"===c?m.team1_id:m.team2_id;"team1"===s?d.team1_id=h:d.team2_id=h,"team1"===c?m.team1_id=u:m.team2_id=u,d.manual_override=!0,m.manual_override=!0;try{const e=await w(d.team1_id,d.team2_id,d.week);d.team1_score=e.team1Score,d.team2_score=e.team2Score,e.team1Score>e.team2Score?d.winning_team_id=d.team1_id:e.team2Score>e.team1Score?d.winning_team_id=d.team2_id:d.winning_team_id=null;const s=await w(m.team1_id,m.team2_id,m.week);m.team1_score=s.team1Score,m.team2_score=s.team2Score,s.team1Score>s.team2Score?m.winning_team_id=m.team1_id:s.team2Score>s.team1Score?m.winning_team_id=m.team2_id:m.winning_team_id=null}catch(l){d.team1_score=0,d.team2_score=0,d.winning_team_id=null,m.team1_score=0,m.team2_score=0,m.winning_team_id=null}n(o),f(!0),v({title:"Teams Swapped",description:"Playoff matchup teams have been updated with current scores. Remember to save your changes.",duration:3e3})}},children:[i.jsx(Hd,{items:r.flatMap(e=>[`${e.id}-team1`,`${e.id}-team2`]),strategy:qd,children:i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{className:"w-32",children:"Bracket"}),i.jsx(xn,{className:"w-48",children:"Team 1"}),i.jsx(xn,{className:"w-32 text-center",children:"Score"}),i.jsx(xn,{className:"w-48",children:"Team 2"}),i.jsx(xn,{className:"w-24 text-center",children:"Seeds"}),i.jsx(xn,{className:"w-24 text-center",children:"Actions"})]})}),i.jsx(un,{children:r.map(e=>i.jsx(lm,{bracket:e,teams:t,allTeams:t,onToggleOverride:k,onUpdateScores:C,onUpdateTeams:T,onTeamChange:E},e.id))})]})}),i.jsx(Ld,{children:g?i.jsx("div",{className:"bg-white p-2 rounded-lg border-2 border-purple-400 shadow-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 bg-purple-100 rounded-full flex items-center justify-center",children:i.jsx(St,{className:"h-2 w-2 text-purple-600"})}),i.jsx("span",{className:"text-xs font-medium",children:"Moving playoff team..."})]})}):null})]})})}):i.jsx(qr,{children:i.jsx(Vr,{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx(St,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select Filters"}),i.jsx("p",{className:"text-gray-600",children:"Please select a season and week to manage playoff brackets."})]})})})]})},om=()=>i.jsx("div",{className:"space-y-6",children:i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center gap-2",children:[i.jsx(Ts,{className:"h-5 w-5"}),"Matchups & Overrides Management"]}),i.jsx(Hr,{children:"Manage regular season and playoff matchups, scores, and overrides across all conferences"})]}),i.jsx(Vr,{children:i.jsxs(ei,{defaultValue:"regular-season",className:"space-y-6",children:[i.jsxs(si,{className:"grid w-full grid-cols-2",children:[i.jsxs(ti,{value:"regular-season",className:"flex items-center gap-2",children:[i.jsx(Ts,{className:"h-4 w-4"}),"Regular Season"]}),i.jsxs(ti,{value:"playoffs",className:"flex items-center gap-2",children:[i.jsx(St,{className:"h-4 w-4"}),"Playoffs"]})]}),i.jsx(ai,{value:"regular-season",children:i.jsx(nm,{})}),i.jsx(ai,{value:"playoffs",children:i.jsx(cm,{})})]})})]})}),dm=()=>{const[e,s]=te.useState([]),[t,a]=te.useState(null),[r,n]=te.useState(null),[l,c]=te.useState(!1),[o,d]=te.useState(!1),[m,u]=te.useState({playoff_teams:10,first_round_byes:6,playoff_start_week:14,reseed:!0}),{toast:h}=_e();te.useEffect(()=>{x()},[]),te.useEffect(()=>{t&&p()},[t]);const x=async()=>{try{const e=await vr.getSeasons({orderBy:{column:"season_year",ascending:!1}});if(e.error)throw new Error("Failed to load seasons");s(e.data);const t=e.data.find(e=>e.is_current);t&&a(t.id)}catch(e){h({title:"Error",description:"Failed to load seasons",variant:"destructive"})}},p=async()=>{if(t){c(!0);try{const e=await vr.getPlayoffFormats({filters:[{column:"season_id",operator:"eq",value:t},{column:"is_active",operator:"eq",value:!0}]});if(e.error)throw new Error("Failed to load playoff format");if(e.data.length>0){const s=e.data[0];n(s),u({playoff_teams:s.playoff_teams,first_round_byes:s.week_14_byes,playoff_start_week:s.playoff_start_week,reseed:s.reseed})}else n(null),u({playoff_teams:10,first_round_byes:6,playoff_start_week:14,reseed:!0})}catch(e){h({title:"Error",description:"Failed to load playoff format",variant:"destructive"})}finally{c(!1)}}},f=(e,s)=>{u(t=>({...t,[e]:s}))},g=e.find(e=>e.id===t);return i.jsx("div",{className:"space-y-6",children:i.jsxs(qr,{children:[i.jsxs(Wr,{children:[i.jsxs(Ur,{className:"flex items-center gap-2",children:[i.jsx(St,{className:"h-5 w-5"}),"Playoff Format Management"]}),i.jsx(Hr,{children:"Configure playoff settings for each season including teams, byes, and format rules"})]}),i.jsxs(Vr,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{htmlFor:"season-select",children:"Season"}),i.jsxs(Dr,{value:(null==t?void 0:t.toString())||"",onValueChange:e=>a(parseInt(e)),children:[i.jsx(Mr,{children:i.jsx(Fr,{placeholder:"Select a season"})}),i.jsx($r,{children:e.map(e=>i.jsxs(Lr,{value:e.id.toString(),children:[e.season_name," (",e.season_year,")",e.is_current&&" - Current"]},e.id))})]})]}),t&&i.jsxs(i.Fragment,{children:[l?i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx(ct,{className:"h-6 w-6 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading playoff format..."})]}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{htmlFor:"playoff-teams",children:"Playoff Teams"}),i.jsx(Hi,{id:"playoff-teams",type:"number",min:"4",max:"16",value:m.playoff_teams,onChange:e=>f("playoff_teams",parseInt(e.target.value)),placeholder:"Number of teams in playoffs"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total number of teams that make the playoffs"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{htmlFor:"first-round-byes",children:"First Round Byes"}),i.jsx(Hi,{id:"first-round-byes",type:"number",min:"0",max:"8",value:m.first_round_byes,onChange:e=>f("first_round_byes",parseInt(e.target.value)),placeholder:"Number of teams with first round byes"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Number of top-seeded teams that skip the first round"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{htmlFor:"playoff-start-week",children:"Playoff Start Week"}),i.jsx(Hi,{id:"playoff-start-week",type:"number",min:"1",max:"18",value:m.playoff_start_week,onChange:e=>f("playoff_start_week",parseInt(e.target.value)),placeholder:"Week when playoffs begin"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"NFL week when playoff games start"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{children:"Playoff Reseeding"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ec,{id:"reseed",checked:m.reseed,onCheckedChange:e=>f("reseed",e)}),i.jsx(Tl,{htmlFor:"reseed",className:"text-sm font-normal",children:"Reseed teams after each playoff round"})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"If checked, teams are reseeded after each round (highest seed plays lowest seed)"})]})]}),r&&!l&&i.jsx(Kr,{children:i.jsxs(Gr,{children:[i.jsxs("strong",{children:["Current Settings for ",null==g?void 0:g.season_name,":"]}),i.jsx("br",{}),"Playoff Teams: ",r.playoff_teams," | First Round Byes: ",r.week_14_byes," | Start Week: ",r.playoff_start_week," | Reseed: ",r.reseed?"Yes":"No"]})}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(Sr,{onClick:async()=>{if(t){d(!0);try{const e={season_id:t,playoff_teams:m.playoff_teams,week_14_byes:m.first_round_byes,playoff_start_week:m.playoff_start_week,reseed:m.reseed,championship_week:17,is_active:!0};let s;if(s=r?await vr.updatePlayoffFormat(r.id,e):await vr.createPlayoffFormat(e),s.error)throw new Error("Failed to save playoff format");n(s.data),h({title:"Success",description:"Playoff format saved successfully"}),await p()}catch(e){h({title:"Error",description:"Failed to save playoff format",variant:"destructive"})}finally{d(!1)}}else h({title:"Error",description:"Please select a season",variant:"destructive"})},disabled:o||l,className:"flex items-center gap-2",children:[o?i.jsx(ct,{className:"h-4 w-4 animate-spin"}):i.jsx(dt,{className:"h-4 w-4"}),o?"Saving...":"Save Playoff Format"]})})]})]})]})})};var mm="Switch",[um,hm]=a(mm),[xm,pm]=um(mm),fm=te.forwardRef((e,s)=>{const{__scopeSwitch:t,name:a,checked:r,defaultChecked:l,required:d,disabled:u,value:h="on",onCheckedChange:x,form:p,...f}=e,[g,j]=te.useState(null),v=n(s,e=>j(e)),y=te.useRef(!1),w=!g||(p||!!g.closest("form")),[N,b]=o({prop:r,defaultProp:l??!1,onChange:x,caller:mm});return i.jsxs(xm,{scope:t,checked:N,disabled:u,children:[i.jsx(c.button,{type:"button",role:"switch","aria-checked":N,"aria-required":d,"data-state":ym(N),"data-disabled":u?"":void 0,disabled:u,value:h,...f,ref:v,onClick:m(e.onClick,e=>{b(e=>!e),w&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),w&&i.jsx(vm,{control:g,bubbles:!y.current,name:a,value:h,checked:N,required:d,disabled:u,form:p,style:{transform:"translateX(-100%)"}})]})});fm.displayName=mm;var gm="SwitchThumb",jm=te.forwardRef((e,s)=>{const{__scopeSwitch:t,...a}=e,r=pm(gm,t);return i.jsx(c.span,{"data-state":ym(r.checked),"data-disabled":r.disabled?"":void 0,...a,ref:s})});jm.displayName=gm;var vm=te.forwardRef(({__scopeSwitch:e,control:s,checked:t,bubbles:a=!0,...r},l)=>{const c=te.useRef(null),o=n(c,l),d=Z(t),m=ee(s);return te.useEffect(()=>{const e=c.current;if(!e)return;const s=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(s,"checked").set;if(d!==t&&r){const s=new Event("click",{bubbles:a});r.call(e,t),e.dispatchEvent(s)}},[d,t,a]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:o,style:{...r.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function ym(e){return e?"checked":"unchecked"}vm.displayName="SwitchBubbleInput";var wm=fm,Nm=jm;const bm=te.forwardRef(({className:e,...s},t)=>i.jsx(wm,{className:ba("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:t,children:i.jsx(Nm,{className:ba("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));bm.displayName=wm.displayName;const _m=new class{constructor(){t(this,"schedule",{enabled:!1,dayOfWeek:2,hour:9,minute:0,timezone:"America/New_York"}),t(this,"syncStatus",{id:"",status:"idle",progress:0,currentStep:"Waiting for next sync",processedMatchups:0,totalMatchups:0,errors:[]}),t(this,"syncHistory",[]),t(this,"scheduleTimer",null),t(this,"statusListeners",[]),t(this,"historyListeners",[]),this.loadSettings(),this.scheduleNextSync()}getSchedule(){return{...this.schedule}}updateSchedule(e){this.schedule={...this.schedule,...e},this.saveSettings(),this.scheduleNextSync(),this.notifyStatusListeners()}getStatus(){return{...this.syncStatus}}getHistory(){return[...this.syncHistory]}async runManualSync(){if("running"===this.syncStatus.status)throw new Error("Sync is already running");await this.executeSync(!0)}onStatusChange(e){return this.statusListeners.push(e),()=>{this.statusListeners=this.statusListeners.filter(s=>s!==e)}}onHistoryChange(e){return this.historyListeners.push(e),()=>{this.historyListeners=this.historyListeners.filter(s=>s!==e)}}loadSettings(){try{const e=localStorage.getItem("weeklyAutoSyncSchedule");e&&(this.schedule={...this.schedule,...JSON.parse(e)});const s=localStorage.getItem("weeklyAutoSyncHistory");s&&(this.syncHistory=JSON.parse(s).map(e=>({...e,timestamp:new Date(e.timestamp)})))}catch(e){}}saveSettings(){try{localStorage.setItem("weeklyAutoSyncSchedule",JSON.stringify(this.schedule)),localStorage.setItem("weeklyAutoSyncHistory",JSON.stringify(this.syncHistory))}catch(e){}}scheduleNextSync(){if(this.scheduleTimer&&(clearTimeout(this.scheduleTimer),this.scheduleTimer=null),!this.schedule.enabled)return void this.updateSyncStatus({status:"idle",currentStep:"Automatic sync disabled",nextRunTime:void 0});const e=this.calculateNextRunTime(),s=new Date,t=e.getTime()-s.getTime();t>0&&(this.scheduleTimer=setTimeout(()=>{this.executeSync(!1)},t),this.updateSyncStatus({status:"scheduled",currentStep:"Scheduled for next run",nextRunTime:e}))}calculateNextRunTime(){const e=new Date,s=new Date(e);s.setHours(this.schedule.hour,this.schedule.minute,0,0);const t=e.getDay();let a=this.schedule.dayOfWeek-t;return(a<0||0===a&&e.getTime()>=s.getTime())&&(a+=7),s.setDate(s.getDate()+a),s}async executeSync(e){var s,t;const a=`sync_${Date.now()}`,r=new Date;this.updateSyncStatus({id:a,status:"running",startTime:r,progress:0,currentStep:"Initializing sync...",processedMatchups:0,totalMatchups:0,errors:[]});const n=[];let i=0,l=0;try{this.updateSyncStatus({currentStep:"Fetching active conferences...",progress:10});const{data:o}=await window.ezsite.apis.tablePage(12820,{PageNo:1,PageSize:100,Filters:[{name:"is_active",op:"Equal",value:!0}]});if(!(null==(s=null==o?void 0:o.List)?void 0:s.length))throw new Error("No active conferences found");const{data:d}=await window.ezsite.apis.tablePage(12818,{PageNo:1,PageSize:1,Filters:[{name:"is_current_season",op:"Equal",value:!0}]});if(!(null==(t=null==d?void 0:d.List)?void 0:t.length))throw new Error("No current season found");const m=d.List[0];this.updateSyncStatus({currentStep:"Fetching pending matchups...",progress:20});const{data:u}=await window.ezsite.apis.tablePage(13329,{PageNo:1,PageSize:1e3,Filters:[{name:"status",op:"Equal",value:"pending"},{name:"week",op:"Equal",value:m.current_week}]}),h=(null==u?void 0:u.List)||[];this.updateSyncStatus({totalMatchups:h.length,progress:30});for(const e of o.List){this.updateSyncStatus({currentStep:`Processing ${e.conference_name}...`,progress:30+i/h.length*40});try{const s=h.filter(s=>s.conference_id===e.id);for(const t of s)await this.processMatchup(t,e,m),i++,this.updateSyncStatus({processedMatchups:i,progress:30+i/h.length*40});await this.updateTeamRecords(e.id,m.id),l++}catch(c){const s=`Error processing ${e.conference_name}: ${c}`;n.push(s)}}this.updateSyncStatus({currentStep:"Finalizing sync...",progress:90});const x=new Date,p=x.getTime()-r.getTime(),f={id:a,timestamp:r,status:n.length>0?i>0?"partial":"failed":"success",duration:p,matchupsProcessed:i,recordsUpdated:l,errors:[...n],details:e?"Manual sync":"Scheduled sync"};this.syncHistory.unshift(f),this.syncHistory=this.syncHistory.slice(0,100),this.saveSettings(),this.notifyHistoryListeners(),this.updateSyncStatus({status:n.length>0?"failed":"completed",endTime:x,progress:100,currentStep:"Sync completed "+(n.length>0?"with errors":"successfully"),errors:[...n],lastRunTime:r}),e||setTimeout(()=>this.scheduleNextSync(),5e3),0===n.length?be({title:"Sync Completed",description:`Processed ${i} matchups successfully`}):be({title:"Sync Completed with Errors",description:`Processed ${i} matchups with ${n.length} errors`,variant:"destructive"})}catch(c){const s=`Sync failed: ${c}`;n.push(s),this.updateSyncStatus({status:"failed",endTime:new Date,progress:0,currentStep:"Sync failed",errors:[...n]}),be({title:"Sync Failed",description:s,variant:"destructive"}),e||setTimeout(()=>this.scheduleNextSync(),6e4)}}async processMatchup(e,s,t){var a,r,n,i;try{const t=await rn.getMatchups(s.league_id,e.week);if(!(null==t?void 0:t.length))throw new Error(`No Sleeper matchups found for week ${e.week}`);if(!t.find(s=>s.matchup_id===parseInt(e.sleeper_matchup_id)))throw new Error(`Sleeper matchup not found for ID ${e.sleeper_matchup_id}`);const{data:l}=await window.ezsite.apis.tablePage(12853,{PageNo:1,PageSize:1,Filters:[{name:"team_id",op:"Equal",value:e.team_1_id},{name:"conference_id",op:"Equal",value:s.id}]}),{data:c}=await window.ezsite.apis.tablePage(12853,{PageNo:1,PageSize:1,Filters:[{name:"team_id",op:"Equal",value:e.team_2_id},{name:"conference_id",op:"Equal",value:s.id}]});if(!(null==(a=null==l?void 0:l.List)?void 0:a.length)||!(null==(r=null==c?void 0:c.List)?void 0:r.length))throw new Error("Could not find team junction records");const o=l.List[0].roster_id,d=c.List[0].roster_id,m=(null==(n=t.find(e=>e.roster_id===parseInt(o)))?void 0:n.points)||0,u=(null==(i=t.find(e=>e.roster_id===parseInt(d)))?void 0:i.points)||0;let h=null;m>u?h=e.team_1_id:u>m&&(h=e.team_2_id),await window.ezsite.apis.tableUpdate(13329,{id:e.id,team_1_score:m,team_2_score:u,winner_id:h,status:"complete",is_manual_override:!1})}catch(l){throw new Error(`Failed to process matchup ${e.id}: ${l}`)}}async updateTeamRecords(e,s){var t,a,r;try{const{data:n}=await window.ezsite.apis.tablePage(13329,{PageNo:1,PageSize:1e3,Filters:[{name:"conference_id",op:"Equal",value:e},{name:"status",op:"Equal",value:"complete"}]});if(!(null==(t=null==n?void 0:n.List)?void 0:t.length))return;const{data:i}=await window.ezsite.apis.tablePage(12853,{PageNo:1,PageSize:100,Filters:[{name:"conference_id",op:"Equal",value:e}]});if(!(null==(a=null==i?void 0:i.List)?void 0:a.length))return;for(const t of i.List){const a=t.team_id,i=n.List.filter(e=>e.team_1_id===a||e.team_2_id===a);let l=0,c=0,o=0,d=0,m=0;for(const e of i){const s=e.team_1_id===a,t=s?e.team_1_score:e.team_2_score,r=s?e.team_2_score:e.team_1_score;d+=t,m+=r,e.winner_id===a?l++:null===e.winner_id?o++:c++}const u=l+c+o,h=u>0?l/u:0,{data:x}=await window.ezsite.apis.tablePage(13768,{PageNo:1,PageSize:1,Filters:[{name:"team_id",op:"Equal",value:a},{name:"conference_id",op:"Equal",value:e},{name:"season_id",op:"Equal",value:s}]}),p={team_id:a,conference_id:e,season_id:s,wins:l,losses:c,ties:o,points_for:d,points_against:m,win_percentage:h,last_updated:(new Date).toISOString()};(null==(r=null==x?void 0:x.List)?void 0:r.length)?await window.ezsite.apis.tableUpdate(13768,{id:x.List[0].id,...p}):await window.ezsite.apis.tableCreate(13768,p)}}catch(n){throw new Error(`Failed to update team records: ${n}`)}}updateSyncStatus(e){this.syncStatus={...this.syncStatus,...e},this.notifyStatusListeners()}notifyStatusListeners(){this.statusListeners.forEach(e=>{try{e(this.getStatus())}catch(s){}})}notifyHistoryListeners(){this.historyListeners.forEach(e=>{try{e(this.getHistory())}catch(s){}})}},Sm=()=>{const[e,s]=te.useState(_m.getSchedule()),[t,a]=te.useState(_m.getStatus()),[r,n]=te.useState(_m.getHistory()),[l,c]=te.useState(!1),[o,d]=te.useState("overview");te.useEffect(()=>{const e=_m.onStatusChange(a),s=_m.onHistoryChange(n);return()=>{e(),s()}},[]);const m=t=>{const a={...e,...t};s(a),_m.updateSchedule(t),be({title:"Schedule Updated",description:"Auto-sync schedule has been updated successfully."})},u=e=>{switch(e){case"completed":case"success":return"bg-green-500";case"running":return"bg-blue-500";case"failed":return"bg-red-500";case"partial":return"bg-yellow-500";case"scheduled":return"bg-purple-500";default:return"bg-gray-500"}},h=e=>{const s=Math.floor(e/1e3),t=Math.floor(s/60),a=Math.floor(t/60);return a>0?`${a}h ${t%60}m ${s%60}s`:t>0?`${t}m ${s%60}s`:`${s}s`},x=e=>{if(!e)return"N/A";return new Date(e).toLocaleString()},p=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Auto-Sync Manager"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage automatic weekly synchronization with Sleeper API"})]}),i.jsxs(Sr,{onClick:async()=>{if("running"!==t.status){c(!0);try{await _m.runManualSync(),be({title:"Manual Sync Started",description:"Sync has been initiated manually."})}catch(e){be({title:"Sync Failed",description:`Failed to start manual sync: ${e}`,variant:"destructive"})}finally{c(!1)}}else be({title:"Sync Already Running",description:"Please wait for the current sync to complete.",variant:"destructive"})},disabled:l||"running"===t.status,className:"gap-2",children:[l||"running"===t.status?i.jsx(ct,{className:"w-4 h-4 animate-spin"}):i.jsx(it,{className:"w-4 h-4"}),l||"running"===t.status?"Syncing...":"Run Manual Sync"]})]}),i.jsxs(ei,{value:o,onValueChange:d,className:"w-full",children:[i.jsxs(si,{className:"grid w-full grid-cols-4",children:[i.jsxs(ti,{value:"overview",className:"gap-2",children:[i.jsx(Ns,{className:"w-4 h-4"}),"Overview"]}),i.jsxs(ti,{value:"schedule",className:"gap-2",children:[i.jsx(Ts,{className:"w-4 h-4"}),"Schedule"]}),i.jsxs(ti,{value:"monitoring",className:"gap-2",children:[i.jsx(Es,{className:"w-4 h-4"}),"Monitoring"]}),i.jsxs(ti,{value:"history",className:"gap-2",children:[i.jsx(Ys,{className:"w-4 h-4"}),"History"]})]}),i.jsxs(ai,{value:"overview",className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(qr,{children:[i.jsxs(Wr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Ur,{className:"text-sm font-medium",children:"Sync Status"}),(e=>{switch(e){case"completed":case"success":return i.jsx(Ms,{className:"w-4 h-4"});case"running":return i.jsx(ct,{className:"w-4 h-4 animate-spin"});case"failed":return i.jsx(Is,{className:"w-4 h-4"});case"partial":return i.jsx(Fs,{className:"w-4 h-4"});case"scheduled":return i.jsx(As,{className:"w-4 h-4"});default:return i.jsx(nt,{className:"w-4 h-4"})}})(t.status)]}),i.jsxs(Vr,{children:[i.jsx("div",{className:"text-2xl font-bold capitalize",children:t.status}),i.jsx("p",{className:"text-xs text-muted-foreground",children:t.currentStep})]})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Ur,{className:"text-sm font-medium",children:"Auto-Sync"}),i.jsx(ht,{className:"w-4 h-4"})]}),i.jsxs(Vr,{children:[i.jsx("div",{className:"text-2xl font-bold",children:e.enabled?"Enabled":"Disabled"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:e.enabled?`${p[e.dayOfWeek]} at ${e.hour}:${e.minute.toString().padStart(2,"0")}`:"Manual only"})]})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Ur,{className:"text-sm font-medium",children:"Last Run"}),i.jsx(wt,{className:"w-4 h-4"})]}),i.jsxs(Vr,{children:[i.jsx("div",{className:"text-2xl font-bold",children:t.lastRunTime?x(t.lastRunTime).split(" ")[1]:"Never"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:t.lastRunTime?x(t.lastRunTime).split(" ")[0]:"No previous runs"})]})]}),i.jsxs(qr,{children:[i.jsxs(Wr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Ur,{className:"text-sm font-medium",children:"Next Run"}),i.jsx(As,{className:"w-4 h-4"})]}),i.jsxs(Vr,{children:[i.jsx("div",{className:"text-2xl font-bold",children:t.nextRunTime?x(t.nextRunTime).split(" ")[1]:"N/A"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:t.nextRunTime?x(t.nextRunTime).split(" ")[0]:"No scheduled runs"})]})]})]}),"running"===t.status&&i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsxs(Ur,{className:"flex items-center gap-2",children:[i.jsx(ct,{className:"w-5 h-5 animate-spin"}),"Sync in Progress"]})}),i.jsxs(Vr,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:t.currentStep}),i.jsxs("span",{children:[t.progress,"%"]})]}),i.jsx(ml,{value:t.progress,className:"h-2"})]}),i.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[i.jsxs("span",{children:["Matchups: ",t.processedMatchups," / ",t.totalMatchups]}),i.jsxs("span",{children:["Started: ",x(t.startTime)]})]})]})]}),t.errors.length>0&&i.jsxs(Kr,{variant:"destructive",children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsxs(Gr,{children:[i.jsx("div",{className:"font-medium",children:"Sync Errors:"}),i.jsx("ul",{className:"mt-1 space-y-1",children:t.errors.map((e,s)=>i.jsxs("li",{className:"text-sm",children:["• ",e]},s))})]})]})]}),i.jsx(ai,{value:"schedule",className:"space-y-4",children:i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{children:"Sync Schedule Configuration"})}),i.jsxs(Vr,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Tl,{htmlFor:"enable-sync",children:"Enable Automatic Sync"}),i.jsx(bm,{id:"enable-sync",checked:e.enabled,onCheckedChange:e=>m({enabled:e})})]}),e.enabled&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{htmlFor:"day-of-week",children:"Day of Week"}),i.jsxs(Dr,{value:e.dayOfWeek.toString(),onValueChange:e=>m({dayOfWeek:parseInt(e)}),children:[i.jsx(Mr,{children:i.jsx(Fr,{placeholder:"Select day"})}),i.jsx($r,{children:p.map((e,s)=>i.jsx(Lr,{value:s.toString(),children:e},s))})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{htmlFor:"hour",children:"Hour (24-hour format)"}),i.jsx(Hi,{id:"hour",type:"number",min:"0",max:"23",value:e.hour,onChange:e=>m({hour:parseInt(e.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{htmlFor:"minute",children:"Minute"}),i.jsx(Hi,{id:"minute",type:"number",min:"0",max:"59",value:e.minute,onChange:e=>m({minute:parseInt(e.target.value)||0})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{htmlFor:"timezone",children:"Timezone"}),i.jsxs(Dr,{value:e.timezone,onValueChange:e=>m({timezone:e}),children:[i.jsx(Mr,{children:i.jsx(Fr,{placeholder:"Select timezone"})}),i.jsxs($r,{children:[i.jsx(Lr,{value:"America/New_York",children:"Eastern Time"}),i.jsx(Lr,{value:"America/Chicago",children:"Central Time"}),i.jsx(Lr,{value:"America/Denver",children:"Mountain Time"}),i.jsx(Lr,{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]})]}),i.jsxs(Kr,{children:[i.jsx(Fs,{className:"h-4 w-4"}),i.jsxs(Gr,{children:[i.jsx("strong",{children:"Note:"})," Automatic sync will only run when the browser is open and active. For production use, consider implementing server-side scheduling."]})]})]})]})}),i.jsx(ai,{value:"monitoring",className:"space-y-4",children:i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{children:"Real-time Monitoring"})}),i.jsx(Vr,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{children:"Current Status"}),i.jsx(Or,{variant:"outline",className:`${u(t.status)} text-white`,children:t.status})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{children:"Current Step"}),i.jsx("p",{className:"text-sm",children:t.currentStep})]})]}),"running"===t.status&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{children:"Progress"}),i.jsx(ml,{value:t.progress,className:"h-2"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.progress,"% complete"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Tl,{children:"Processed Matchups"}),i.jsx("p",{className:"text-2xl font-bold",children:t.processedMatchups})]}),i.jsxs("div",{children:[i.jsx(Tl,{children:"Total Matchups"}),i.jsx("p",{className:"text-2xl font-bold",children:t.totalMatchups})]})]})]}),t.startTime&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{children:"Started At"}),i.jsx("p",{className:"text-sm",children:x(t.startTime)})]}),t.endTime&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Tl,{children:"Completed At"}),i.jsx("p",{className:"text-sm",children:x(t.endTime)})]})]})})]})}),i.jsx(ai,{value:"history",className:"space-y-4",children:i.jsxs(qr,{children:[i.jsx(Wr,{children:i.jsx(Ur,{children:"Sync History"})}),i.jsx(Vr,{children:i.jsx("div",{className:"rounded-md border",children:i.jsxs(dn,{children:[i.jsx(mn,{children:i.jsxs(hn,{children:[i.jsx(xn,{children:"Timestamp"}),i.jsx(xn,{children:"Status"}),i.jsx(xn,{children:"Duration"}),i.jsx(xn,{children:"Matchups"}),i.jsx(xn,{children:"Records"}),i.jsx(xn,{children:"Errors"}),i.jsx(xn,{children:"Details"})]})}),i.jsx(un,{children:0===r.length?i.jsx(hn,{children:i.jsx(pn,{colSpan:7,className:"text-center text-muted-foreground",children:"No sync history available"})}):r.map(e=>i.jsxs(hn,{children:[i.jsx(pn,{children:x(e.timestamp)}),i.jsx(pn,{children:i.jsx(Or,{variant:"outline",className:`${u(e.status)} text-white`,children:e.status})}),i.jsx(pn,{children:h(e.duration)}),i.jsx(pn,{children:e.matchupsProcessed}),i.jsx(pn,{children:e.recordsUpdated}),i.jsx(pn,{children:e.errors.length>0?i.jsx(Or,{variant:"destructive",children:e.errors.length}):i.jsx("span",{className:"text-green-600",children:"None"})}),i.jsx(pn,{className:"max-w-xs truncate",children:e.details})]},e.id))})]})})})]})})]})]})},km=()=>{const[e,s]=te.useState(!1),[t,a]=te.useState(""),[r,n]=te.useState(""),[l,c]=te.useState(null),[o,d]=te.useState(!0),{toast:m}=_e();te.useEffect(()=>{const e=sessionStorage.getItem("admin_authenticated"),t=sessionStorage.getItem("admin_login_time");if("true"===e&&t){const e=new Date(t);((new Date).getTime()-e.getTime())/36e5<8?(s(!0),c(localStorage.getItem("admin_last_login"))):(sessionStorage.removeItem("admin_authenticated"),sessionStorage.removeItem("admin_login_time"))}d(!1)},[]);const u=e=>{if(e.preventDefault(),"gladleague2025"===t){const e=new Date;s(!0),n(""),sessionStorage.setItem("admin_authenticated","true"),sessionStorage.setItem("admin_login_time",e.toISOString()),localStorage.setItem("admin_last_login",e.toLocaleString()),c(e.toLocaleString()),m({title:"Admin Access Granted",description:"Welcome to the admin panel"})}else n("Invalid password"),m({title:"Access Denied",description:"Invalid admin password",variant:"destructive"})};return o?i.jsx("div",{className:"container mx-auto px-4 py-8","data-id":"ao89vvru5",children:i.jsx("div",{className:"flex items-center justify-center min-h-[400px]","data-id":"pml7mynqn",children:i.jsx("div",{className:"animate-spin h-8 w-8 border-b-2 border-blue-600 rounded-full","data-id":"10jeltn5k"})})}):e?i.jsxs("div",{className:"container mx-auto px-4 py-8","data-id":"zucmgzvwq",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8","data-id":"lro5ngqd4",children:[i.jsxs("div",{"data-id":"noo7qh20h",children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3","data-id":"fmj1jcz8o",children:[i.jsx(ht,{className:"h-8 w-8 text-blue-600","data-id":"bdjtdbfnt"}),"Admin Panel"]}),i.jsx("p",{className:"text-muted-foreground mt-2","data-id":"amn1082i4",children:"Manage leagues, sync data, and perform administrative tasks"})]}),i.jsxs("div",{className:"flex items-center gap-4","data-id":"nw6oaovvh",children:[l&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground","data-id":"1kqkbfoj2",children:[i.jsx(As,{className:"h-4 w-4","data-id":"u85cv9ybo"}),"Last login: ",l]}),i.jsxs(Or,{variant:"secondary",className:"flex items-center gap-1","data-id":"u49kieuap",children:[i.jsx(Ns,{className:"h-3 w-3","data-id":"fzemdjhv1"}),"Admin Active"]}),i.jsx(Sr,{variant:"outline",onClick:()=>{s(!1),a(""),sessionStorage.removeItem("admin_authenticated"),sessionStorage.removeItem("admin_login_time"),m({title:"Logged Out",description:"Admin session ended"})},"data-id":"ssqzxi57s",children:"Logout"})]})]}),i.jsxs(ei,{defaultValue:"league-manager",className:"space-y-6","data-id":"ojttqdptv",children:[i.jsxs(si,{className:"grid w-full grid-cols-5","data-id":"55g8xnp5m",children:[i.jsxs(ti,{value:"league-manager",className:"flex items-center gap-2","data-id":"mudt4s949",children:[i.jsx(ht,{className:"h-4 w-4","data-id":"vq59l6i0o"}),"League Manager"]}),i.jsxs(ti,{value:"data-sync",className:"flex items-center gap-2","data-id":"x1ln07h9l",children:[i.jsx(Ls,{className:"h-4 w-4","data-id":"gwzxvoplp"}),"Data Sync"]}),i.jsxs(ti,{value:"matchups-management",className:"flex items-center gap-2","data-id":"kq8s7gvio",children:[i.jsx(Ts,{className:"h-4 w-4","data-id":"930hxto7y"}),"Matchups & Overrides"]}),i.jsxs(ti,{value:"playoff-format",className:"flex items-center gap-2",children:[i.jsx(St,{className:"h-4 w-4"}),"Playoff Format"]}),i.jsxs(ti,{value:"auto-sync",className:"flex items-center gap-2","data-id":"ufa49dbo7",children:[i.jsx(Cs,{className:"h-4 w-4","data-id":"xv3rcuk8d"}),"Auto-Sync"]})]}),i.jsx(ai,{value:"league-manager","data-id":"9y7vx68ag",children:i.jsx($l,{"data-id":"jqk7s5yut"})}),i.jsx(ai,{value:"data-sync","data-id":"mbmsyjmjw",children:i.jsx(tc,{"data-id":"r02lgxd37"})}),i.jsx(ai,{value:"matchups-management","data-id":"2im6bg2ok",children:i.jsx(om,{"data-id":"ddqsho0df"})}),i.jsx(ai,{value:"playoff-format",children:i.jsx(dm,{})}),i.jsx(ai,{value:"auto-sync","data-id":"cr5xmlzdc",children:i.jsx(Sm,{"data-id":"5st9c4lq3"})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8","data-id":"sep77enuq",children:i.jsx("div",{className:"max-w-md mx-auto","data-id":"qkcxfcevx",children:i.jsxs(qr,{"data-id":"7bka3yyd5",children:[i.jsxs(Wr,{className:"text-center","data-id":"alhddkb9x",children:[i.jsx("div",{className:"flex justify-center mb-4","data-id":"20czuz7s8",children:i.jsx(xt,{className:"h-12 w-12 text-blue-600","data-id":"uj6wfwcyd"})}),i.jsxs(Ur,{className:"flex items-center gap-2 justify-center","data-id":"easa7srw9",children:[i.jsx(Qs,{className:"h-5 w-5","data-id":"srgo1x52n"}),"Admin Access Required"]}),i.jsx(Hr,{"data-id":"dw6h33z8z",children:"Enter the admin password to access the admin panel"})]}),i.jsx(Vr,{"data-id":"p54cgo0pa",children:i.jsxs("form",{onSubmit:u,className:"space-y-4","data-id":"nu7k5xnra",children:[i.jsxs("div",{className:"space-y-2","data-id":"rtr62f4xb",children:[i.jsx(Tl,{htmlFor:"password","data-id":"nell7jvlm",children:"Admin Password"}),i.jsx(Hi,{id:"password",type:"password",value:t,onChange:e=>a(e.target.value),placeholder:"Enter admin password",className:"w-full","data-id":"hjlpnn2yv"})]}),r&&i.jsx(Kr,{variant:"destructive","data-id":"4zu7gxwp4",children:i.jsx(Gr,{"data-id":"js05q0hn6",children:r})}),i.jsx(Sr,{type:"submit",className:"w-full","data-id":"tthln8jfy",children:"Access Admin Panel"})]})})]})})})},Cm=()=>{const e=ae();return te.useEffect(()=>{},[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:i.jsxs("div",{className:"text-center space-y-6 p-8",children:[i.jsx("div",{children:i.jsx("h1",{className:"text-8xl font-bold text-primary",children:"404"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-2xl font-semibold tracking-tight",children:"Page Not Found"}),i.jsx("p",{className:"text-muted-foreground",children:"Sorry, the page you are looking for does not exist or has been removed."})]}),i.jsx("div",{children:i.jsx(Sr,{asChild:!0,variant:"default",size:"lg",children:i.jsx("a",{href:"/",children:"Back to Home"})})})]})})};class Tm{static convertEzSiteOptions(e){const s={};return e.PageNo&&e.PageSize&&(s.offset=(e.PageNo-1)*e.PageSize,s.limit=e.PageSize),e.OrderByField&&(s.orderBy={column:e.OrderByField,ascending:!1!==e.IsAsc}),e.Filters&&Array.isArray(e.Filters)&&(s.filters=e.Filters.map(e=>({column:e.name,operator:Tm.convertEzSiteOperator(e.op),value:e.value}))),s}static convertEzSiteOperator(e){return{Equal:"eq",NotEqual:"neq",GreaterThan:"gt",GreaterThanOrEqual:"gte",LessThan:"lt",LessThanOrEqual:"lte",Contains:"ilike",In:"in",IsNull:"is",IsNotNull:"not"}[e]||"eq"}static getTableName(e){return{12818:"seasons",12820:"conferences",12852:"teams",12853:"team_conference_junction",13329:"matchups",13768:"team_records",12870:"players",draft_results:"draft_results",transactions:"transactions",playoff_bracket:"playoff_bracket",matchup_admin_override:"matchup_admin_override",team_rosters:"team_rosters"}[e.toString()]||e.toString()}static async tablePage(e,s={}){const t=Tm.getTableName(e),a=Tm.convertEzSiteOptions(s),r=await vr.queryTable(t,a);return{data:{List:r.data,TotalCount:r.count||0},error:r.error}}static async tableCreate(e,s){const t=Tm.getTableName(e),a={...s};delete a.ID;const r=await vr.createRecord(t,a);return{data:r.data,error:r.error}}static async tableUpdate(e,s){const t=Tm.getTableName(e);if(!s.ID&&!s.id)return{error:"Missing ID for update operation"};const a=s.ID||s.id,r={...s};delete r.ID,delete r.id;const n=await vr.updateRecord(t,a,r);return{data:n.data,error:n.error}}static async tableDelete(e,s){const t=Tm.getTableName(e);if(!s.ID&&!s.id)return{error:"Missing ID for delete operation"};const a=s.ID||s.id;return{data:null,error:(await vr.deleteRecord(t,a)).error}}}const Em={tablePage:Tm.tablePage,tableCreate:Tm.tableCreate,tableUpdate:Tm.tableUpdate,tableDelete:Tm.tableDelete},Pm=new me,Rm=()=>(te.useEffect(()=>{window.ezsite||(window.ezsite={apis:Em});const e=document.createElement("script");return e.src="https://studio.pickaxe.co/api/embed/bundle.js",e.defer=!0,document.head.appendChild(e),()=>{const e=document.querySelector('script[src="https://studio.pickaxe.co/api/embed/bundle.js"]');e&&e.remove()}},[]),i.jsx(ue,{client:Pm,children:i.jsx(nr,{children:i.jsx(Nr,{children:i.jsxs(ce,{children:[i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(Br,{}),i.jsx("main",{className:"container mx-auto px-4 py-6",children:i.jsxs(oe,{children:[i.jsx(de,{path:"/",element:i.jsx(on,{})}),i.jsx(de,{path:"/standings",element:i.jsx(fn,{})}),i.jsx(de,{path:"/matchups",element:i.jsx(In,{})}),i.jsx(de,{path:"/matchups/:matchupId",element:i.jsx($i,{})}),i.jsx(de,{path:"/teams",element:i.jsx(Vi,{})}),i.jsx(de,{path:"/teams/:teamId",element:i.jsx(Ki,{})}),i.jsx(de,{path:"/players",element:i.jsx(Ji,{})}),i.jsx(de,{path:"/players/:playerId",element:i.jsx(ul,{})}),i.jsx(de,{path:"/transactions",element:i.jsx(hl,{})}),i.jsx(de,{path:"/draft",element:i.jsx(xl,{})}),i.jsx(de,{path:"/rules",element:i.jsx(Nl,{})}),i.jsx(de,{path:"/conferences",element:i.jsx(_l,{})}),i.jsx(de,{path:"/admin",element:i.jsx(km,{})}),i.jsx(de,{path:"*",element:i.jsx(Cm,{})})]})})]}),i.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:i.jsx("div",{id:"deployment-f277b3b5-018e-4ef6-a37c-d2fd421a7ba5"})}),i.jsx(Ra,{})]})})})}));e(document.getElementById("root")).render(i.jsx(Rm,{}));
